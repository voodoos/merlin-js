// Generated by js_of_ocaml 4.0.0+git-080f3c3
(function(a){typeof
globalThis!=="object"&&(this?b():(a.defineProperty(a.prototype,"_T_",{configurable:true,get:b}),_T_));function
b(){var
b=this||self;b.globalThis=b;delete
a.prototype._T_}}(Object));(function(jc){var
bs=jc;"use strict";function
Dh(a,b,c){if(b
in
a)Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true});else
a[b]=c;return a}function
P(a){return k(a)||m(a)||h(a)||p()}function
p(){throw new
TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function
m(a){if(typeof
Symbol!=="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function
k(a){if(Array.isArray(a))return d(a)}function
bW(a){"@babel/helpers - typeof";return bW="function"==typeof
Symbol&&"symbol"==typeof
Symbol.iterator?function(a){return typeof
a}:function(a){return a&&"function"==typeof
Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof
a},bW(a)}function
bn(a,b){return j(a)||n(a,b)||h(a,b)||o()}function
o(){throw new
TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function
n(b,h){var
a=b==null?null:typeof
Symbol!=="undefined"&&b[Symbol.iterator]||b["@@iterator"];if(a==null)return;var
c=[],d=true,e=false,g,f;try{for(a=a.call(b);!(d=(g=a.next()).done);d=true){c.push(g.value);if(h&&c.length===h)break}}catch(a){e=true;f=a}finally{try{if(!d&&a["return"]!=null)a["return"]()}finally{if(e)throw f}}return c}function
j(a){if(Array.isArray(a))return a}function
a(a,i){var
b=typeof
Symbol!=="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!b){if(Array.isArray(a)||(b=h(a))||i&&a&&typeof
a.length==="number"){if(b)a=b;var
f=0,c=function(){};return{s:c,n:function(){if(f>=a.length)return{done:true};return{done:false,value:a[f++]}},e:function(a){throw a},f:c}}throw new
TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var
g=true,d=false,e;return{s:function(){b=b.call(a)},n:function(){var
a=b.next();g=a.done;return a},e:function(a){d=true;e=a},f:function(){try{if(!g&&b["return"]!=null)b["return"]()}finally{if(d)throw e}}}}function
h(a,c){if(!a)return;if(typeof
a==="string")return d(a,c);var
b=Object.prototype.toString.call(a).slice(8,-1);if(b==="Object"&&a.constructor)b=a.constructor.name;if(b==="Map"||b==="Set")return Array.from(a);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return d(a,c)}function
d(c,a){if(a==null||a>c.length)a=c.length;for(var
b=0,d=new
Array(a);b<a;b++)d[b]=c[b];return d}function
t(){if(typeof
Reflect!=="undefined"&&Reflect.get)t=Reflect.get;else
t=function(d,c,e){var
b=s(d,c);if(!b)return;var
a=Object.getOwnPropertyDescriptor(b,c);if(a.get)return a.get.call(arguments.length<3?d:e);return a.value};return t.apply(this,arguments)}function
s(a,b){while(!Object.prototype.hasOwnProperty.call(a,b)){a=r(a);if(a===null)break}return a}function
f(b,a){if(typeof
a!=="function"&&a!==null)throw new
TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:true,configurable:true}});Object.defineProperty(b,"prototype",{writable:false});if(a)g(b,a)}function
g(a,b){g=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return g(a,b)}function
e(d){var
e=l();return function(){var
b=r(d),a;if(e){var
c=r(this).constructor;a=Reflect.construct(b,arguments,c)}else
a=b.apply(this,arguments);return q(this,a)}}function
q(b,a){if(a&&(bW(a)==="object"||typeof
a==="function"))return a;else
if(a!==void
0)throw new
TypeError("Derived constructors may only return object or undefined");return aQ(b)}function
aQ(a){if(a===void
0)throw new
ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function
l(){if(typeof
Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof
Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(a){return false}}function
r(a){r=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return r(a)}function
b(b,a){if(!(b
instanceof
a))throw new
TypeError("Cannot call a class as a function")}function
i(d,c){for(var
b=0;b<c.length;b++){var
a=c[b];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in
a)a.writable=true;Object.defineProperty(d,a.key,a)}}function
c(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);Object.defineProperty(a,"prototype",{writable:false});return a}(function(){var
vA=Object.defineProperty,cO=function(c,a){for(var
b
in
a)vA(c,b,{get:a[b],enumerable:true})},ck="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(function(a){return a?parseInt(a,36):1});for(var
ed=1;ed<ck.length;ed++)ck[ed]+=ck[ed-1];function
zZ(b){for(var
a=1;a<ck.length;a+=2)if(ck[a]>b)return ck[a-1]<=b;return false}function
ps(a){return a>=127462&&a<=127487}var
kV=8205;function
x(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true,b=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return(a?qL:BF)(d,c,b)}function
qL(b,a,g){if(a==b.length)return a;if(a&&sa(b.charCodeAt(a))&&r$(b.charCodeAt(a-1)))a--;var
e=ap(b,a);a+=aN(e);while(a<b.length){var
c=ap(b,a);if(e==kV||c==kV||g&&zZ(c)){a+=aN(c);e=c}else
if(ps(c)){var
f=0,d=a-2;while(d>=0&&ps(ap(b,d))){f++;d-=2}if(f%2==0)break;else
a+=2}else
break}return a}function
BF(d,a,c){while(a>0){var
b=qL(d,a-2,c);if(b<a)return b;a--}return 0}function
sa(a){return a>=56320&&a<57344}function
r$(a){return a>=55296&&a<56320}function
ap(c,b){var
a=c.charCodeAt(b);if(!r$(a)||b+1==c.length)return a;var
d=c.charCodeAt(b+1);if(!sa(d))return a;return(a-55296<<10)+(d-56320)+65536}function
hG(a){if(a<=65535)return String.fromCharCode(a);a-=65536;return String.fromCharCode((a>>10)+55296,(a&1023)+56320)}function
aN(a){return a<65536?1:2}function
cP(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:c.length,b=0;for(var
a=0;a<e;)if(c.charCodeAt(a)==9){b+=d-b%d;a++}else{b++;a=x(c,a)}return b}function
bO(b,e,d,f){for(var
a=0,c=0;;){if(c>=e)return a;if(a==b.length)break;c+=b.charCodeAt(a)==9?d-c%d:1;a=x(b,a)}return f===true?-1:b.length}var
p=function(){function
d(){b(this,d)}c(d,[{key:"lineAt",value:function(a){if(a<0||a>this.length)throw new
RangeError("Invalid position ".concat(a," in document of length ").concat(this.length));return this.lineInner(a,false,1,0)}},{key:"line",value:function(a){if(a<1||a>this.lines)throw new
RangeError("Invalid line number ".concat(a," in ").concat(this.lines,"-line document"));return this.lineInner(a,true,1,0)}},{key:"replace",value:function(c,d,b){var
a=[];this.decompose(0,c,a,2);if(b.length)b.decompose(0,b.length,a,1|2);this.decompose(d,this.length,a,1);return dZ.from(a,this.length-(d-c)+b.length)}},{key:"append",value:function(a){return this.replace(this.length,this.length,a)}},{key:"slice",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length,b=[];this.decompose(a,c,b,0);return dZ.from(b,c-a)}},{key:"eq",value:function(b){if(b==this)return true;if(b.length!=this.length||b.lines!=this.lines)return false;var
f=this.scanIdentical(b,1),g=this.length-this.scanIdentical(b,-1),a=new
cG(this),c=new
cG(b);for(var
d=f,e=f;;){a.next(d);c.next(d);d=0;if(a.lineBreak!=c.lineBreak||a.done!=c.done||a.value!=c.value)return false;e+=a.value.length;if(a.done||e>=g)return true}}},{key:"iter",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return new
cG(this,a)}},{key:"iterRange",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length;return new
ko(this,a,b)}},{key:"iterLines",value:function(c,a){var
b;if(c==null)b=this.iter();else{if(a==null)a=this.lines+1;var
d=this.line(c).from;b=this.iterRange(d,Math.max(d,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new
j9(b)}},{key:"toString",value:function(){return this.sliceString(0)}},{key:"toJSON",value:function(){var
a=[];this.flatten(a);return a}}],[{key:"of",value:function(a){if(a.length==0)throw new
RangeError("A document must have at least one line");if(a.length==1&&!a[0])return d.empty;return a.length<=32?new
aY(a):dZ.from(aY.split(a,[]))}}]);return d}(),aY=function(g){f(d,g);var
h=e(d);function
d(c){var
a,e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:CK(c);b(this,d);a=h.call(this);a.text=c;a.length=e;return a}c(d,[{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}},{key:"lineInner",value:function(g,f,b,c){for(var
d=0;;d++){var
e=this.text[d],a=c+e.length;if((f?b:a)>=g)return new
up(c,a,b,e);c=a+1;b++}}},{key:"decompose",value:function(e,f,b,i){var
c=e<=0&&f>=this.length?this:new
d(r9(this.text,e,f),Math.min(f,this.length)-Math.max(0,e));if(i&1){var
h=b.pop(),a=eg(c.text,h.text.slice(),0,c.length);if(a.length<=32)b.push(new
d(a,h.length+c.length));else{var
g=a.length>>1;b.push(new
d(a.slice(0,g)),new
d(a.slice(g)))}}else
b.push(c)}},{key:"replace",value:function(b,e,a){if(!(a
instanceof
d))return t(r(d.prototype),"replace",this).call(this,b,e,a);var
c=eg(this.text,eg(a.text,r9(this.text,0,b)),e),f=this.length+a.length-(e-b);if(c.length<=32)return new
d(c,f);return dZ.from(d.split(c,[]),f)}},{key:"sliceString",value:function(c){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length,h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"\n",d="";for(var
a=0,b=0;a<=e&&b<this.text.length;b++){var
g=this.text[b],f=a+g.length;if(a>c&&b)d+=h;if(c<f&&e>a)d+=g.slice(Math.max(0,c-a),e-a);a=f+1}return d}},{key:"flatten",value:function(e){var
b=a(this.text),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;e.push(d)}}catch(a){b.e(a)}finally{b.f()}}},{key:"scanIdentical",value:function(){return 0}}],[{key:"split",value:function(i,f){var
c=[],b=-1,e=a(i),g;try{for(e.s();!(g=e.n()).done;){var
h=g.value;c.push(h);b+=h.length+1;if(c.length==32){f.push(new
d(c,b));c=[];b=-1}}}catch(a){e.e(a)}finally{e.f()}if(b>-1)f.push(new
d(c,b));return f}}]);return d}(p),dZ=function(g){f(d,g);var
j=e(d);function
d(g,i){var
c;b(this,d);c=j.call(this);c.children=g;c.length=i;c.lines=0;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;c.lines+=h.lines}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"lineInner",value:function(h,g,b,c){for(var
d=0;;d++){var
a=this.children[d],e=c+a.length,f=b+a.lines-1;if((g?f:e)>=h)return a.lineInner(h,g,b,c);c=e+1;b=f+1}}},{key:"decompose",value:function(d,b,h,i){for(var
e=0,a=0;a<=b&&e<this.children.length;e++){var
f=this.children[e],c=a+f.length;if(d<=c&&b>=a){var
g=i&((a<=d?1:0)|(c>=b?2:0));if(a>=d&&c<=b&&!g)h.push(f);else
f.decompose(d-a,b-a,h,g)}a=c+1}}},{key:"replace",value:function(e,g,f){if(f.lines<this.lines)for(var
c=0,a=0;c<this.children.length;c++){var
h=this.children[c],i=a+h.length;if(e>=a&&g<=i){var
b=h.replace(e-a,g-a,f),k=this.lines-h.lines+b.lines;if(b.lines<k>>5-1&&b.lines>k>>5+1){var
j=this.children.slice();j[c]=b;return new
d(j,this.length-(g-e)+f.length)}return t(r(d.prototype),"replace",this).call(this,a,i,b)}a=i+1}return t(r(d.prototype),"replace",this).call(this,e,g,f)}},{key:"sliceString",value:function(c){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length,h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"\n",d="";for(var
b=0,a=0;b<this.children.length&&a<=e;b++){var
f=this.children[b],g=a+f.length;if(a>c&&b)d+=h;if(c<g&&e>a)d+=f.sliceString(c-a,e-a,h);a=g+1}return d}},{key:"flatten",value:function(e){var
b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.flatten(e)}}catch(a){b.e(a)}finally{b.f()}}},{key:"scanIdentical",value:function(c,b){if(!(c
instanceof
d))return 0;var
h=0,j=b>0?[0,0,this.children.length,c.children.length]:[this.children.length-1,c.children.length-1,-1,-1],a=bn(j,4),f=a[0],g=a[1],k=a[2],l=a[3];for(;;f+=b,g+=b){if(f==k||g==l)return h;var
e=this.children[f],i=c.children[g];if(e!=i)return h+e.scanIdentical(i,b);h+=e.length+1}}}],[{key:"from",value:function(i){var
s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:i.reduce(function(b,a){return b+a.length+1},-1),m=0,b=a(i),n;try{for(b.s();!(n=b.n()).done;){var
u=n.value;m+=u.lines}}catch(a){b.e(a)}finally{b.f()}if(m<32){var
r=[],g=a(i),o;try{for(g.s();!(o=g.n()).done;){var
v=o.value;v.flatten(r)}}catch(a){g.e(a)}finally{g.f()}return new
aY(r,s)}var
k=Math.max(32,m>>5),x=k<<1,t=k>>1,f=[],e=0,j=-1,c=[];function
q(b){var
h;if(b.lines>x&&b
instanceof
d){var
g=a(b.children),i;try{for(g.s();!(i=g.n()).done;){var
m=i.value;q(m)}}catch(a){g.e(a)}finally{g.f()}}else
if(b.lines>t&&(e>t||!e)){l();f.push(b)}else
if(b
instanceof
aY&&e&&(h=c[c.length-1])instanceof
aY&&b.lines+h.lines<=32){e+=b.lines;j+=b.length+1;c[c.length-1]=new
aY(h.text.concat(b.text),h.length+1+b.length)}else{if(e+b.lines>k)l();e+=b.lines;j+=b.length+1;c.push(b)}}function
l(){if(e==0)return;f.push(c.length==1?c[0]:d.from(c,j));j=-1;e=c.length=0}var
h=a(i),p;try{for(h.s();!(p=h.n()).done;){var
w=p.value;q(w)}}catch(a){h.e(a)}finally{h.f()}l();return f.length==1?f[0]:new
d(f,s)}}]);return d}(p);p.empty=new
aY([""],0);function
CK(f){var
d=-1,b=a(f),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value;d+=e.length+1}}catch(a){b.e(a)}finally{b.f()}return d}function
eg(i,c){var
f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1e9;for(var
b=0,d=0,h=true;d<i.length&&b<=g;d++){var
a=i[d],e=b+a.length;if(e>=f){if(e>g)a=a.slice(0,g-b);if(b<f)a=a.slice(f-b);if(h){c[c.length-1]+=a;h=false}else
c.push(a)}b=e+1}return c}function
r9(b,a,c){return eg(b,[""],a,c)}var
cG=function(){function
d(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;b(this,d);this.dir=c;this.done=false;this.lineBreak=false;this.value="";this.nodes=[a];this.offsets=[c>0?1:(a
instanceof
aY?a.text.length:a.children.length)<<1]}c(d,[{key:"nextInner",value:function(b,a){this.done=this.lineBreak=false;for(;;){var
c=this.nodes.length-1,f=this.nodes[c],h=this.offsets[c],g=h>>1,i=f
instanceof
aY?f.text.length:f.children.length;if(g==(a>0?i:0)){if(c==0){this.done=true;this.value="";return this}if(a>0)this.offsets[c-1]++;this.nodes.pop();this.offsets.pop()}else
if((h&1)==(a>0?0:1)){this.offsets[c]+=a;if(b==0){this.lineBreak=true;this.value="\n";return this}b--}else
if(f
instanceof
aY){var
e=f.text[g+(a<0?-1:0)];this.offsets[c]+=a;if(e.length>Math.max(0,b)){this.value=b==0?e:a>0?e.slice(b):e.slice(0,e.length-b);return this}b-=e.length}else{var
d=f.children[g+(a<0?-1:0)];if(b>d.length){b-=d.length;this.offsets[c]+=a}else{if(a<0)this.offsets[c]--;this.nodes.push(d);this.offsets.push(a>0?1:(d
instanceof
aY?d.text.length:d.children.length)<<1)}}}}},{key:"next",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(a<0){this.nextInner(-a,-this.dir);a=this.value.length}return this.nextInner(a,this.dir)}}]);return d}(),ko=function(){function
d(e,c,a){b(this,d);this.value="";this.done=false;this.cursor=new
cG(e,c>a?-1:1);this.pos=c>a?e.length:0;this.from=Math.min(c,a);this.to=Math.max(c,a)}c(d,[{key:"nextInner",value:function(b,d){if(d<0?this.pos<=this.from:this.pos>=this.to){this.value="";this.done=true;return this}b+=Math.max(0,d<0?this.pos-this.to:this.from-this.pos);var
a=d<0?this.pos-this.from:this.to-this.pos;if(b>a)b=a;a-=b;var
e=this.cursor.next(b),c=e.value;this.pos+=(c.length+b)*d;this.value=c.length<=a?c:d<0?c.slice(c.length-a):c.slice(0,a);this.done=!this.value;return this}},{key:"next",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(a<0)a=Math.max(a,this.from-this.pos);else
if(a>0)a=Math.min(a,this.to-this.pos);return this.nextInner(a,this.cursor.dir)}},{key:"lineBreak",get:function(){return this.cursor.lineBreak&&this.value!=""}}]);return d}(),j9=function(){function
a(c){b(this,a);this.inner=c;this.afterBreak=true;this.value="";this.done=false}c(a,[{key:"next",value:function(){var
d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,a=this.inner.next(d),b=a.done,c=a.lineBreak,e=a.value;if(b){this.done=true;this.value=""}else
if(c)if(this.afterBreak)this.value="";else{this.afterBreak=true;this.next()}else{this.value=e;this.afterBreak=false}return this}},{key:"lineBreak",get:function(){return false}}]);return a}();if(typeof
Symbol!="undefined"){p.prototype[Symbol.iterator]=function(){return this.iter()};cG.prototype[Symbol.iterator]=ko.prototype[Symbol.iterator]=j9.prototype[Symbol.iterator]=function(){return this}}var
up=function(){function
a(c,f,d,e){b(this,a);this.from=c;this.to=f;this.number=d;this.text=e}c(a,[{key:"length",get:function(){return this.to-this.from}}]);return a}(),fy=/\r\n?|\n/,z=function(a){a[a["Simple"]=0]="Simple";a[a["TrackDel"]=1]="TrackDel";a[a["TrackBefore"]=2]="TrackBefore";a[a["TrackAfter"]=3]="TrackAfter";return a}(z||(z={})),b7=function(){function
a(c){b(this,a);this.sections=c}c(a,[{key:"length",get:function(){var
b=0;for(var
a=0;a<this.sections.length;a+=2)b+=this.sections[a];return b}},{key:"newLength",get:function(){var
c=0;for(var
a=0;a<this.sections.length;a+=2){var
b=this.sections[a+1];c+=b<0?this.sections[a]:b}return c}},{key:"empty",get:function(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}},{key:"iterGaps",value:function(f){for(var
a=0,e=0,c=0;a<this.sections.length;){var
b=this.sections[a++],d=this.sections[a++];if(d<0){f(e,c,b);c+=b}else
c+=d;e+=b}}},{key:"iterChangedRanges",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;gq(this,a,b)}},{key:"invertedDesc",get:function(){var
d=[];for(var
b=0;b<this.sections.length;){var
e=this.sections[b++],c=this.sections[b++];if(c<0)d.push(e,c);else
d.push(c,e)}return new
a(d)}},{key:"composeDesc",value:function(a){return this.empty?a:a.empty?this:mC(this,a)}},{key:"mapDesc",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return a.empty?this:ic(this,a,b)}},{key:"mapPos",value:function(a){var
i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:z.Simple,b=0,d=0;for(var
f=0;f<this.sections.length;){var
h=this.sections[f++],g=this.sections[f++],c=b+h;if(g<0){if(c>a)return d+(a-b);d+=h}else{if(e!=z.Simple&&c>=a&&(e==z.TrackDel&&b<a&&c>a||e==z.TrackBefore&&b<a||e==z.TrackAfter&&c>a))return null;if(c>a||c==a&&i<0&&!h)return a==b||i<0?d:d+g;d+=g}b=c}if(a>b)throw new
RangeError("Position ".concat(a," is out of range for changeset of length ").concat(b));return d}},{key:"touchesRange",value:function(d){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:d;for(var
b=0,a=0;b<this.sections.length&&a<=e;){var
g=this.sections[b++],f=this.sections[b++],c=a+g;if(f>=0&&a<=e&&c>=d)return a<d&&c>e?"cover":true;a=c}return false}},{key:"toString",value:function(){var
b="";for(var
a=0;a<this.sections.length;){var
d=this.sections[a++],c=this.sections[a++];b+=(b?" ":"")+d+(c>=0?":"+c:"")}return b}},{key:"toJSON",value:function(){return this.sections}}],[{key:"fromJSON",value:function(b){if(!Array.isArray(b)||b.length%2||b.some(function(a){return typeof
a!="number"}))throw new
RangeError("Invalid JSON representation of ChangeDesc");return new
a(b)}}]);return a}(),X=function(g){f(d,g);var
h=e(d);function
d(e,c){var
a;b(this,d);a=h.call(this,e);a.inserted=c;return a}c(d,[{key:"apply",value:function(a){if(this.length!=a.length)throw new
RangeError("Applying change set to a document with the wrong length");gq(this,function(c,e,b,f,d){return a=a.replace(b,b+(e-c),d)},false);return a}},{key:"mapDesc",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return ic(this,b,a,true)}},{key:"invert",value:function(h){var
b=this.sections.slice(),c=[];for(var
a=0,f=0;a<b.length;a+=2){var
e=b[a],g=b[a+1];if(g>=0){b[a]=g;b[a+1]=e;var
i=a>>1;while(c.length<i)c.push(p.empty);c.push(e?h.slice(f,f+e):p.empty)}f+=e}return new
d(b,c)}},{key:"compose",value:function(a){return this.empty?a:a.empty?this:mC(this,a,true)}},{key:"map",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return a.empty?this:ic(this,a,b,true)}},{key:"iterChanges",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;gq(this,a,b)}},{key:"desc",get:function(){return new
b7(this.sections)}},{key:"filter",value:function(j){var
f=[],m=[],h=[],a=new
cI(this);done:for(var
g=0,b=0;;){var
i=g==j.length?1e9:j[g++];while(b<i||b==i&&a.len==0){if(a.done)break done;var
e=Math.min(a.len,i-b);ar(h,e,-1);var
l=a.ins==-1?-1:a.off==0?a.ins:0;ar(f,e,l);if(l>0)bG(m,f,a.text);a.forward(e);b+=e}var
k=j[g++];while(b<k){if(a.done)break done;var
c=Math.min(a.len,k-b);ar(f,c,-1);ar(h,c,a.ins==-1?-1:a.off==0?a.ins:0);a.forward(c);b+=c}}return{changes:new
d(f,m),filtered:new
b7(h)}}},{key:"toJSON",value:function(){var
b=[];for(var
a=0;a<this.sections.length;a+=2){var
c=this.sections[a],d=this.sections[a+1];if(d<0)b.push(c);else
if(d==0)b.push([c]);else
b.push([c].concat(this.inserted[a>>1].toJSON()))}return b}}],[{key:"of",value:function(b,i,u){var
g=[],m=[],f=0,c=null;function
l(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!b&&!g.length)return;if(f<i)ar(g,i-f,-1);var
a=new
d(g,m);c=c?c.compose(a.map(c)):a;g=[];m=[];f=0}function
s(b){if(Array.isArray(b)){var
j=a(b),o;try{for(j.s();!(o=j.n()).done;){var
t=o.value;s(t)}}catch(a){j.e(a)}finally{j.f()}}else
if(b
instanceof
d){if(b.length!=i)throw new
RangeError("Mismatched change set length (got ".concat(b.length,", expected ").concat(i,")"));l();c=c?c.compose(b.map(c)):b}else{var
e=b.from,n=b.to,h=n===void
0?e:n,k=b.insert;if(e>h||e<0||h>i)throw new
RangeError("Invalid change range ".concat(e," to ").concat(h," (in doc of length ").concat(i,")"));var
r=!k?p.empty:typeof
k=="string"?p.of(k.split(u||fy)):k,q=r.length;if(e==h&&q==0)return;if(e<f)l();if(e>f)ar(g,e-f,-1);ar(g,h-e,q);bG(m,g,r);f=h}}s(b);l(!c);return c}},{key:"empty",value:function(a){return new
d(a?[a,-1]:[],[])}},{key:"fromJSON",value:function(f){if(!Array.isArray(f))throw new
RangeError("Invalid JSON representation of ChangeSet");var
e=[],c=[];for(var
b=0;b<f.length;b++){var
a=f[b];if(typeof
a=="number")e.push(a,-1);else
if(!Array.isArray(a)||typeof
a[0]!="number"||a.some(function(a,b){return b&&typeof
a!="string"}))throw new
RangeError("Invalid JSON representation of ChangeSet");else
if(a.length==1)e.push(a[0],0);else{while(c.length<b)c.push(p.empty);c[b]=p.of(a.slice(1));e.push(a[0],c[b].length)}}return new
d(e,c)}}]);return d}(b7);function
ar(a,d,c){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(d==0&&c<=0)return;var
b=a.length-2;if(b>=0&&c<=0&&c==a[b+1])a[b]+=d;else
if(d==0&&a[b]==0)a[b+1]+=c;else
if(e){a[b]+=d;a[b+1]+=c}else
a.push(d,c)}function
bG(a,d,b){if(b.length==0)return;var
c=d.length-2>>1;if(c<a.length)a[a.length-1]=a[a.length-1].append(b);else{while(a.length<c)a.push(p.empty);a.push(b)}}function
gq(b,k,l){var
j=b.inserted;for(var
e=0,f=0,a=0;a<b.sections.length;){var
d=b.sections[a++],c=b.sections[a++];if(c<0){e+=d;f+=d}else{var
h=e,i=f,g=p.empty;for(;;){h+=d;i+=c;if(c&&j)g=g.append(j[a-2>>1]);if(l||a==b.sections.length||b.sections[a+1]<0)break;d=b.sections[a++];c=b.sections[a++]}k(e,h,f,i,g);e=h;f=i}}}function
ic(m,n,k){var
l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false,e=[],g=l?[]:null,b=new
cI(m),a=new
cI(n);for(var
d=0,c=0;;)if(b.ins==-1){d+=b.len;b.next()}else
if(a.ins==-1&&c<d){var
j=Math.min(a.len,d-c);a.forward(j);ar(e,j,-1);c+=j}else
if(a.ins>=0&&(b.done||c<d||c==d&&(a.len<b.len||a.len==b.len&&!k))){ar(e,a.ins,-1);while(d>c&&!b.done&&d+b.len<c+a.len){d+=b.len;b.next()}c+=a.len;a.next()}else
if(b.ins>=0){var
i=0,f=d+b.len;for(;;)if(a.ins>=0&&c>d&&c+a.len<f){i+=a.ins;c+=a.len;a.next()}else
if(a.ins==-1&&c<f){var
h=Math.min(a.len,f-c);i+=h;a.forward(h);c+=h}else
break;ar(e,i,b.ins);if(g)bG(g,e,b.text);d=f;b.next()}else
if(b.done&&a.done)return g?new
X(e,g):new
b7(e);else
throw new
Error("Mismatched change set lengths")}function
mC(j,k){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,c=[],d=h?[]:null,b=new
cI(j),a=new
cI(k);for(var
f=false;;)if(b.done&&a.done)return d?new
X(c,d):new
b7(c);else
if(b.ins==0){ar(c,b.len,0,f);b.next()}else
if(a.len==0&&!a.done){ar(c,0,a.ins,f);if(d)bG(d,c,a.text);a.next()}else
if(b.done||a.done)throw new
Error("Mismatched change set lengths");else{var
e=Math.min(b.len2,a.len),i=c.length;if(b.ins==-1){var
g=a.ins==-1?-1:a.off?0:a.ins;ar(c,e,g,f);if(d&&g)bG(d,c,a.text)}else
if(a.ins==-1){ar(c,b.off?0:b.len,e,f);if(d)bG(d,c,b.textBit(e))}else{ar(c,b.off?0:b.len,a.off?0:a.ins,f);if(d&&!a.off)bG(d,c,a.text)}f=(b.ins>e||a.ins>=0&&a.len>e)&&(f||c.length>i);b.forward2(e);a.forward(e)}}var
cI=function(){function
a(c){b(this,a);this.set=c;this.i=0;this.next()}c(a,[{key:"next",value:function(){var
a=this.set.sections;if(this.i<a.length){this.len=a[this.i++];this.ins=a[this.i++]}else{this.len=0;this.ins=-2}this.off=0}},{key:"done",get:function(){return this.ins==-2}},{key:"len2",get:function(){return this.ins<0?this.len:this.ins}},{key:"text",get:function(){var
b=this.set.inserted,a=this.i-2>>1;return a>=b.length?p.empty:b[a]}},{key:"textBit",value:function(a){var
c=this.set.inserted,b=this.i-2>>1;return b>=c.length&&!a?p.empty:c[b].slice(this.off,a==null?void
0:this.off+a)}},{key:"forward",value:function(a){if(a==this.len)this.next();else{this.len-=a;this.off+=a}}},{key:"forward2",value:function(a){if(this.ins==-1)this.forward(a);else
if(a==this.ins)this.next();else{this.ins-=a;this.off+=a}}}]);return a}(),dY=function(){function
a(d,e,c){b(this,a);this.from=d;this.to=e;this.flags=c}c(a,[{key:"anchor",get:function(){return this.flags&16?this.to:this.from}},{key:"head",get:function(){return this.flags&16?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return this.flags&4?-1:this.flags&8?1:0}},{key:"bidiLevel",get:function(){var
a=this.flags&3;return a==3?null:a}},{key:"goalColumn",get:function(){var
a=this.flags>>5;return a==33554431?void
0:a}},{key:"map",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1,d=c.mapPos(this.from,b),e=c.mapPos(this.to,b);return d==this.from&&e==this.to?this:new
a(d,e,this.flags)}},{key:"extend",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a;if(a<=this.anchor&&b>=this.anchor)return d.range(a,b);var
c=Math.abs(a-this.anchor)>Math.abs(b-this.anchor)?a:b;return d.range(this.anchor,c)}},{key:"eq",value:function(a){return this.anchor==a.anchor&&this.head==a.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(a){if(!a||typeof
a.anchor!="number"||typeof
a.head!="number")throw new
RangeError("Invalid JSON representation for SelectionRange");return d.range(a.anchor,a.head)}}]);return a}(),d=function(){function
a(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;b(this,a);this.ranges=d;this.mainIndex=c}c(a,[{key:"map",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(b.empty)return this;return a.create(this.ranges.map(function(a){return a.map(b,c)}),this.mainIndex)}},{key:"eq",value:function(b){if(this.ranges.length!=b.ranges.length||this.mainIndex!=b.mainIndex)return false;for(var
a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(b.ranges[a]))return false;return true}},{key:"main",get:function(){return this.ranges[this.mainIndex]}},{key:"asSingle",value:function(){return this.ranges.length==1?this:new
a([this.main])}},{key:"addRange",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return a.create([c].concat(this.ranges),b?0:this.mainIndex+1)}},{key:"replaceRange",value:function(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.mainIndex,b=this.ranges.slice();b[d]=c;return a.create(b,this.mainIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map(function(a){return a.toJSON()}),main:this.mainIndex}}}],[{key:"fromJSON",value:function(b){if(!b||!Array.isArray(b.ranges)||typeof
b.main!="number"||b.main>=b.ranges.length)throw new
RangeError("Invalid JSON representation for EditorSelection");return new
a(b.ranges.map(function(a){return dY.fromJSON(a)}),b.main)}},{key:"single",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;return new
a([a.range(b,c)],0)}},{key:"create",value:function(b){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(b.length==0)throw new
RangeError("A selection needs at least one range");for(var
e=0,d=0;d<b.length;d++){var
c=b[d];if(c.empty?c.from<=e:c.from<e)return Bs(b.slice(),f);e=c.to}return new
a(b,f)}},{key:"cursor",value:function(d){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2?arguments[2]:undefined,a=arguments.length>3?arguments[3]:undefined;return new
dY(d,d,(b==0?0:b<0?4:8)|(c==null?3:Math.min(2,c))|(a!==null&&a!==void
0?a:33554431)<<5)}},{key:"range",value:function(a,c,b){var
d=(b!==null&&b!==void
0?b:33554431)<<5;return c<a?new
dY(c,a,16|d):new
dY(a,c,d)}}]);return a}();function
Bs(a){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=a[e];a.sort(function(a,b){return a.from-b.from});e=a.indexOf(i);for(var
b=1;b<a.length;b++){var
c=a[b],f=a[b-1];if(c.empty?c.from<=f.to:c.from<f.to){var
g=f.from,h=Math.max(c.to,f.to);if(b<=e)e--;a.splice(--b,2,c.anchor>c.head?d.range(h,g):d.range(g,h))}}return new
d(a,e)}function
mi(f,d){var
b=a(f.ranges),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value;if(e.to>d)throw new
RangeError("Selection points outside of document")}}catch(a){b.e(a)}finally{b.f()}}var
ii=0,h=function(){function
d(a,e,c,g,f){b(this,d);this.combine=a;this.compareInput=e;this.compare=c;this.isStatic=g;this.extensions=f;this.id=ii++;this["default"]=a([])}c(d,[{key:"of",value:function(a){return new
dK([],this,0,a)}},{key:"compute",value:function(a,b){if(this.isStatic)throw new
Error("Can't compute a static facet");return new
dK(a,this,1,b)}},{key:"computeN",value:function(a,b){if(this.isStatic)throw new
Error("Can't compute a static facet");return new
dK(a,this,2,b)}},{key:"from",value:function(b,a){if(!a)a=function(a){return a};return this.compute([b],function(c){return a(c.field(b))})}}],[{key:"define",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new
d(a.combine||function(a){return a},a.compareInput||function(a,b){return a===b},a.compare||(!a.combine?BZ:function(a,b){return a===b}),!!a["static"],a.enables)}}]);return d}();function
BZ(a,b){return a==b||a.length==b.length&&a.every(function(a,c){return a===b[c]})}var
dK=function(){function
d(a,c,e,f){b(this,d);this.dependencies=a;this.facet=c;this.type=e;this.value=f;this.id=ii++}c(d,[{key:"dynamicSlot",value:function(e){var
d,l=this.value,h=this.facet.compareInput,f=e[this.id]>>1,m=this.type==2,j=false,k=false,i=[],b=a(this.dependencies),g;try{for(b.s();!(g=b.n()).done;){var
c=g.value;if(c=="doc")j=true;else
if(c=="selection")k=true;else
if((((d=e[c.id])!==null&&d!==void
0?d:1)&1)==0)i.push(e[c.id])}}catch(a){b.e(a)}finally{b.f()}return function(a,b){var
d=a.values[f];if(d===cM){a.values[f]=l(a);return 1}if(b){var
e=j&&b.docChanged||k&&(b.docChanged||b.selection)||i.some(function(b){return(c5(a,b)&1)>0});if(e){var
c=l(a);if(m?!w$(c,d,h):!h(c,d)){a.values[f]=c;return 1}}}return 0}}}]);return d}();function
w$(b,c,d){if(b.length!=c.length)return false;for(var
a=0;a<b.length;a++)if(!d(b[a],c[a]))return false;return true}function
x8(b,g,c){var
h=c.map(function(a){return b[a.id]}),t=c.map(function(a){return a.type}),s=h.filter(function(a){return!(a&1)}),o=b[g.id]>>1;return function(e,q){var
l=e.values[o],k=l===cM||!q,c=a(s),i;try{for(c.s();!(i=c.n()).done;){var
p=i.value;if(c5(e,p)&1)k=true}}catch(a){c.e(a)}finally{c.f()}if(!k)return 0;var
f=[];for(var
b=0;b<h.length;b++){var
n=c6(e,h[b]);if(t[b]==2){var
d=a(n),j;try{for(d.s();!(j=d.n()).done;){var
r=j.value;f.push(r)}}catch(a){d.e(a)}finally{d.f()}}else
f.push(n)}var
m=g.combine(f);if(g.compare(m,l))return 0;e.values[o]=m;return 1}}var
oZ=h.define({"static":true}),ao=function(){function
d(e,c,g,a,f){b(this,d);this.id=e;this.createF=c;this.updateF=g;this.compareF=a;this.spec=f;this.provides=void
0}c(d,[{key:"create",value:function(b){var
c=this,a=b.facet(oZ).find(function(a){return a.field==c});return((a===null||a===void
0?void
0:a.create)||this.createF)(b)}},{key:"slot",value:function(a){var
c=this,d=a[this.id]>>1;return function(a,e){var
b=a.values[d];if(b===cM){a.values[d]=c.create(a);return 1}if(e){var
f=c.updateF(b,e);if(!c.compareF(b,f)){a.values[d]=f;return 1}}return 0}}},{key:"init",value:function(a){return[this,oZ.of({field:this,create:a})]}},{key:"extension",get:function(){return this}}],[{key:"define",value:function(a){var
b=new
d(ii++,a.create,a.update,a.compare||function(a,b){return a===b},a);if(a.provide)b.provides=a.provide(b);return b}}]);return d}(),bp={lowest:4,low:3,"default":2,high:1,highest:0};function
bA(b){return function(a){return new
kv(a,b)}}var
bf={lowest:bA(bp.lowest),low:bA(bp.low),"default":bA(bp["default"]),high:bA(bp.high),highest:bA(bp.highest),fallback:bA(bp.lowest),extend:bA(bp.high),override:bA(bp.highest)},kv=c(function
a(c,d){b(this,a);this.inner=c;this.prec=d}),jA=function(){function
a(){b(this,a)}c(a,[{key:"of",value:function(a){return new
fx(this,a)}},{key:"reconfigure",value:function(b){return a.reconfigure.of({compartment:this,extension:b})}},{key:"get",value:function(a){return a.config.compartments.get(this)}}]);return a}(),fx=c(function
a(c,d){b(this,a);this.compartment=c;this.inner=d}),jC=function(){function
g(d,e,a,c,f){b(this,g);this.base=d;this.compartments=e;this.dynamicSlots=a;this.address=c;this.staticValues=f;this.statusTemplate=[];while(this.statusTemplate.length<a.length)this.statusTemplate.push(0)}c(g,[{key:"staticFacet",value:function(b){var
a=this.address[b.id];return a==null?b["default"]:this.staticValues[a>>1]}}],[{key:"resolve",value:function(m,r,j){var
n=[],h=Object.create(null),o=new
Map(),e=a(yF(m,r,o)),l;try{for(e.s();!(l=e.n()).done;){var
d=l.value;if(d
instanceof
ao)n.push(d);else(h[d.facet.id]||(h[d.facet.id]=[])).push(d)}}catch(a){e.e(a)}finally{e.f()}var
b=Object.create(null),f=[],c=[],p=function(){var
a=k[i];b[a.id]=c.length<<1;c.push(function(b){return a.slot(b)})};for(var
i=0,k=n;i<k.length;i++)p();var
q=function(o){var
e=h[o],d=e[0].facet;if(e.every(function(a){return a.type==0})){b[d.id]=f.length<<1|1;var
i=d.combine(e.map(function(a){return a.value})),l=j?j.config.address[d.id]:null;if(l!=null){var
m=c6(j,l);if(d.compare(i,m))i=m}f.push(i)}else{var
g=a(e),k;try{var
n=function(){var
a=k.value;if(a.type==0){b[a.id]=f.length<<1|1;f.push(a.value)}else{b[a.id]=c.length<<1;c.push(function(b){return a.dynamicSlot(b)})}};for(g.s();!(k=g.n()).done;)n()}catch(a){g.e(a)}finally{g.f()}b[d.id]=c.length<<1;c.push(function(a){return x8(a,d,e)})}};for(var
s
in
h)q(s);return new
g(m,o,c.map(function(a){return a(b)}),b,f)}}]);return g}();function
yF(b,o,h){var
e=[[],[],[],[],[]],m=new
Map();function
d(b,c){var
g=m.get(b);if(g!=null){if(g>=c)return;var
l=e[g].indexOf(b);if(l>-1)e[g].splice(l,1);if(b
instanceof
fx)h["delete"](b.compartment)}m.set(b,c);if(Array.isArray(b)){var
f=a(b),j;try{for(f.s();!(j=f.n()).done;){var
n=j.value;d(n,c)}}catch(a){f.e(a)}finally{f.f()}}else
if(b
instanceof
fx){if(h.has(b.compartment))throw new
RangeError("Duplicate use of compartment in extensions");var
k=o.get(b.compartment)||b.inner;h.set(b.compartment,k);d(k,c)}else
if(b
instanceof
kv)d(b.inner,b.prec);else
if(b
instanceof
ao){e[c].push(b);if(b.provides)d(b.provides,c)}else
if(b
instanceof
dK){e[c].push(b);if(b.facet.extensions)d(b.facet.extensions,c)}else{var
i=b.extension;if(!i)throw new
Error("Unrecognized extension value in extension set (".concat(b,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));d(i,c)}}d(b,bp["default"]);return e.reduce(function(a,b){return a.concat(b)})}var
cM={};function
c5(a,d){if(d&1)return 2;var
b=d>>1,c=a.status[b];if(c==4)throw new
Error("Cyclic dependency between fields and/or facets");if(c&2)return c;a.status[b]=4;var
e=a.config.dynamicSlots[b](a,a.applying);return a.status[b]=2|e}function
c6(b,a){return a&1?b.config.staticValues[a>>1]:b.values[a>>1]}var
pB=h.define(),lL=h.define({combine:function(a){return a.some(function(a){return a})},"static":true}),p2=h.define({combine:function(a){return a.length?a[0]:void
0},"static":true}),mh=h.define(),sq=h.define(),sp=h.define(),rg=h.define({combine:function(a){return a.length?a[0]:false}}),bt=function(){function
a(c,d){b(this,a);this.type=c;this.value=d}c(a,null,[{key:"define",value:function(){return new
sX()}}]);return a}(),sX=function(){function
a(){b(this,a)}c(a,[{key:"of",value:function(a){return new
bt(this,a)}}]);return a}(),vq=function(){function
a(c){b(this,a);this.map=c}c(a,[{key:"of",value:function(a){return new
j(this,a)}}]);return a}(),j=function(){function
d(a,c){b(this,d);this.type=a;this.value=c}c(d,[{key:"map",value:function(b){var
a=this.type.map(this.value,b);return a===void
0?void
0:a==this.value?this:new
d(this.type,a)}},{key:"is",value:function(a){return this.type==a}}],[{key:"define",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new
vq(a.map||function(a){return a})}},{key:"mapEffects",value:function(c,h){if(!c.length)return c;var
f=[],b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
g=d.value,e=g.map(h);if(e)f.push(e)}}catch(a){b.e(a)}finally{b.f()}return f}}]);return d}();j.reconfigure=j.define();j.appendConfig=j.define();var
aj=function(){function
d(h,e,c,f,a,g){b(this,d);this.startState=h;this.changes=e;this.selection=c;this.effects=f;this.annotations=a;this.scrollIntoView=g;this._doc=null;this._state=null;if(c)mi(c,e.newLength);if(!a.some(function(a){return a.type==d.time}))this.annotations=a.concat(d.time.of(Date.now()))}c(d,[{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||this.startState.selection.map(this.changes)}},{key:"state",get:function(){if(!this._state)this.startState.applyTransaction(this);return this._state}},{key:"annotation",value:function(e){var
b=a(this.annotations),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(d.type==e)return d.value}}catch(a){b.e(a)}finally{b.f()}return void
0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"reconfigured",get:function(){return this.startState.config!=this.state.config}},{key:"isUserEvent",value:function(b){var
a=this.annotation(d.userEvent);return!!(a&&(a==b||a.length>b.length&&a.slice(0,b.length)==b&&a[b.length]=="."))}}]);return d}();aj.time=bt.define();aj.userEvent=bt.define();aj.addToHistory=bt.define();aj.remote=bt.define();function
Ad(e,b){var
a=[];for(var
g=0,c=0;;){var
f=void
0,d=void
0;if(g<e.length&&(c==b.length||b[c]>=e[g])){f=e[g++];d=e[g++]}else
if(c<b.length){f=b[c++];d=b[c++]}else
return a;if(!a.length||a[a.length-1]<f)a.push(f,d);else
if(a[a.length-1]<d)a[a.length-1]=d}}function
ql(b,a,g){var
e,c,d,f;if(g){c=a.changes;d=X.empty(a.changes.length);f=b.changes.compose(a.changes)}else{c=a.changes.map(b.changes);d=b.changes.mapDesc(a.changes,true);f=b.changes.compose(c)}return{changes:f,selection:a.selection?a.selection.map(d):(e=b.selection)===null||e===void
0?void
0:e.map(c),effects:j.mapEffects(b.effects,c).concat(j.mapEffects(a.effects,d)),annotations:b.annotations.length?b.annotations.concat(a.annotations):a.annotations,scrollIntoView:b.scrollIntoView||a.scrollIntoView}}function
iv(f,a,e){var
b=a.selection,c=cd(a.annotations);if(a.userEvent)c=c.concat(aj.userEvent.of(a.userEvent));return{changes:a.changes
instanceof
X?a.changes:X.of(a.changes||[],e,f.facet(p2)),selection:b&&(b
instanceof
d?b:d.single(b.anchor,b.head)),effects:cd(a.effects),annotations:c,scrollIntoView:!!a.scrollIntoView}}function
rq(d,b,e){var
a=iv(d,b.length?b[0]:{},d.doc.length);if(b.length&&b[0].filter===false)e=false;for(var
c=1;c<b.length;c++){if(b[c].filter===false)e=false;var
f=!!b[c].sequential;a=ql(a,iv(d,b[c],f?a.changes.newLength:d.doc.length),f)}var
g=new
aj(d,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return ye(e?yh(g):g)}function
yh(b){var
e=b.startState,d=true,f=a(e.facet(mh)),l;try{for(f.s();!(l=f.n()).done;){var
o=l.value,h=o(b);if(h===false){d=false;break}if(Array.isArray(h))d=d===true?h:Ad(d,h)}}catch(a){f.e(a)}finally{f.f()}if(d!==true){var
k,g;if(d===false){g=b.changes.invertedDesc;k=X.empty(e.doc.length)}else{var
m=b.changes.filter(d);k=m.changes;g=m.filtered.invertedDesc}b=new
aj(e,k,b.selection&&b.selection.map(g),j.mapEffects(b.effects,g),b.annotations,b.scrollIntoView)}var
n=e.facet(sq);for(var
i=n.length-1;i>=0;i--){var
c=n[i](b);if(c
instanceof
aj)b=c;else
if(Array.isArray(c)&&c.length==1&&c[0]instanceof
aj)b=c[0];else
b=rq(e,cd(c),false)}return b}function
ye(a){var
e=a.startState,f=e.facet(sp),b=a;for(var
c=f.length-1;c>=0;c--){var
d=f[c](a);if(d&&Object.keys(d).length)b=ql(a,iv(e,d,a.changes.newLength),true)}return b==a?a:new
aj(e,a.changes,a.selection,b.effects,b.annotations,b.scrollIntoView)}var
Bh=[];function
cd(a){return a==null?Bh:Array.isArray(a)?a:[a]}var
ak=function(a){a[a["Word"]=0]="Word";a[a["Space"]=1]="Space";a[a["Other"]=2]="Other";return a}(ak||(ak={})),Bg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,i8;try{i8=new
RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(a){}function
zp(c){if(i8)return i8.test(c);for(var
b=0;b<c.length;b++){var
a=c[b];if(/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||Bg.test(a)))return true}return false}function
Av(c){return function(a){if(!/\S/.test(a))return ak.Space;if(zp(a))return ak.Word;for(var
b=0;b<c.length;b++)if(a.indexOf(c[b])>-1)return ak.Word;return ak.Other}}var
u=function(){function
e(d,f,g,h){var
c=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;b(this,e);this.config=d;this.doc=f;this.selection=g;this.values=h;this.applying=null;this.status=d.statusTemplate.slice();this.applying=c;if(c)c._state=this;for(var
a=0;a<this.config.dynamicSlots.length;a++)c5(this,a<<1);this.applying=null}c(e,[{key:"field",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true,a=this.config.address[b.id];if(a==null){if(c)throw new
RangeError("Field is not present in this state");return void
0}c5(this,a);return c6(this,a)}},{key:"update",value:function(){for(var
b=arguments.length,c=new
Array(b),a=0;a<b;a++)c[a]=arguments[a];return rq(this,c,true)}},{key:"applyTransaction",value:function(d){var
b=this.config,k=b,g=k.base,h=k.compartments,f=a(d.effects),l;try{for(f.s();!(l=f.n()).done;){var
c=l.value;if(c.is(jA.reconfigure)){if(b){h=new
Map();b.compartments.forEach(function(b,a){return h.set(a,b)});b=null}h.set(c.value.compartment,c.value.extension)}else
if(c.is(j.reconfigure)){b=null;g=c.value}else
if(c.is(j.appendConfig)){b=null;g=cd(g).concat(c.value)}}}catch(a){f.e(a)}finally{f.f()}var
i;if(!b){b=jC.resolve(g,h,this);var
p=b.dynamicSlots.map(function(a){return cM});for(var
n
in
b.address){var
m=b.address[n],o=this.config.address[n];if(o!=null&&(m&1)==0)p[m>>1]=c6(this,o)}var
q=new
e(b,this.doc,this.selection,p,null);i=q.values}else
i=d.startState.values.slice();new
e(b,d.newDoc,d.newSelection,i,d)}},{key:"replaceSelection",value:function(a){if(typeof
a=="string")a=this.toText(a);return this.changeByRange(function(b){return{changes:{from:b.from,to:b.to,insert:a},range:d.cursor(b.from+a.length)}})}},{key:"changeByRange",value:function(l){var
f=this.selection,k=l(f.ranges[0]),a=this.changes(k.changes),e=[k.range],g=cd(k.effects);for(var
b=1;b<f.ranges.length;b++){var
i=l(f.ranges[b]),n=this.changes(i.changes),h=n.map(a);for(var
c=0;c<b;c++)e[c]=e[c].map(h);var
m=a.mapDesc(n,true);e.push(i.range.map(m));a=a.compose(h);g=j.mapEffects(g,h).concat(j.mapEffects(cd(i.effects),m))}return{changes:a,selection:d.create(e,f.mainIndex),effects:g}}},{key:"changes",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(a
instanceof
X)return a;return X.of(a,this.doc.length,this.facet(e.lineSeparator))}},{key:"toText",value:function(a){return p.of(a.split(this.facet(e.lineSeparator)||fy))}},{key:"sliceDoc",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.doc.length;return this.doc.sliceString(a,b,this.lineBreak)}},{key:"facet",value:function(b){var
a=this.config.address[b.id];if(a==null)return b["default"];c5(this,a);return c6(this,a)}},{key:"toJSON",value:function(a){var
c={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(a)for(var
b
in
a){var
d=a[b];if(d
instanceof
ao)c[b]=d.spec.toJSON(this.field(a[b]),this)}return c}},{key:"tabSize",get:function(){return this.facet(e.tabSize)}},{key:"lineBreak",get:function(){return this.facet(e.lineSeparator)||"\n"}},{key:"readOnly",get:function(){return this.facet(rg)}},{key:"phrase",value:function(c){var
b=a(this.facet(e.phrases)),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;if(Object.prototype.hasOwnProperty.call(f,c))return f[c]}}catch(a){b.e(a)}finally{b.f()}return c}},{key:"languageDataAt",value:function(f,i){var
k=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1,h=[],b=a(this.facet(pB)),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j(this,i,k)),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;if(Object.prototype.hasOwnProperty.call(g,f))h.push(g[f])}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}return h}},{key:"charCategorizer",value:function(a){return Av(this.languageDataAt("wordChars",a).join(""))}},{key:"wordAt",value:function(e){var
g=this.doc.lineAt(e),f=g.text,c=g.from,k=g.length,h=this.charCategorizer(e),b=e-c,a=e-c;while(b>0){var
j=x(f,b,false);if(h(f.slice(j,b))!=ak.Word)break;b=j}while(a<k){var
i=x(f,a);if(h(f.slice(a,i))!=ak.Word)break;a=i}return b==a?null:d.range(b+c,a+c)}}],[{key:"fromJSON",value:function(a){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},c=arguments.length>2?arguments[2]:undefined;if(!a||typeof
a.doc!="string")throw new
RangeError("Invalid JSON representation for EditorState");var
b=[];if(c){var
g=function(e){var
d=c[e],f=a[e];b.push(d.init(function(a){return d.spec.fromJSON(f,a)}))};for(var
h
in
c)g(h)}return e.create({doc:a.doc,selection:d.fromJSON(a.selection),extensions:f.extensions?b.concat([f.extensions]):b})}},{key:"create",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},b=jC.resolve(a.extensions||[],new
Map()),f=a.doc
instanceof
p?a.doc:p.of((a.doc||"").split(b.staticFacet(e.lineSeparator)||fy)),c=!a.selection?d.single(0):a.selection
instanceof
d?a.selection:d.single(a.selection.anchor,a.selection.head);mi(c,f.length);if(!b.staticFacet(lL))c=c.asSingle();return new
e(b,f,c,b.dynamicSlots.map(function(a){return cM}))}}]);return e}();u.allowMultipleSelections=lL;u.tabSize=h.define({combine:function(a){return a.length?a[0]:4}});u.lineSeparator=p2;u.readOnly=rg;u.phrases=h.define();u.languageData=pB;u.changeFilter=mh;u.transactionFilter=sq;u.transactionExtender=sp;jA.reconfigure=j.define();function
bw(n,m){var
k=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},c={},d=a(n),j;try{for(d.s();!(j=d.n()).done;){var
l=j.value;for(var
f=0,i=Object.keys(l);f<i.length;f++){var
b=i[f],e=l[b],g=c[b];if(g===void
0)c[b]=e;else
if(g===e||e===void
0);else
if(Object.hasOwnProperty.call(k,b))c[b]=k[b](g,e);else
throw new
Error("Config merge conflict for field "+b)}}}catch(a){d.e(a)}finally{d.f()}for(var
h
in
m)if(c[h]===void
0)c[h]=m[h];return c}var
fw="\u037C",jn=typeof
Symbol=="undefined"?"__"+fw:Symbol["for"](fw),f1=typeof
Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),so=typeof
jc!="undefined"?jc:typeof
window!="undefined"?window:{},y=function(){function
a(d,f){b(this,a);this.rules=[];var
e=f||{},j=e.finish;function
k(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function
h(d,f,g,l){var
e=[],c=/^@(\w+)\b/.exec(d[0]),i=c&&c[1]=="keyframes";if(c&&f==null)return g.push(d[0]+";");for(var
a
in
f){var
b=f[a];if(/&/.test(a))h(a.split(/,\s*/).map(function(b){return d.map(function(a){return b.replace(/&/,a)})}).reduce(function(a,b){return a.concat(b)}),b,g);else
if(b&&bW(b)=="object"){if(!c)throw new
RangeError("The value of a property ("+a+") should be a primitive value.");h(k(a),b,e,i)}else
if(b!=null)e.push(a.replace(/_.*/,"").replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})+": "+b+";")}if(e.length||i)g.push((j&&!c&&!l?d.map(j):d).join(", ")+" {"+e.join(" ")+"}")}for(var
c
in
d)h(k(c),d[c],this.rules)}c(a,[{key:"getRules",value:function(){return this.rules.join("\n")}}],[{key:"newName",value:function(){var
a=so[jn]||1;so[jn]=a+1;return fw+a.toString(36)}},{key:"mount",value:function(b,a){(b[f1]||new
vt(b)).mount(Array.isArray(a)?a:[a])}}]);return a}(),ef=null,vt=function(){function
d(a){b(this,d);if(!a.head&&a.adoptedStyleSheets&&typeof
CSSStyleSheet!="undefined"){if(ef){a.adoptedStyleSheets=[ef.sheet].concat(a.adoptedStyleSheets);return a[f1]=ef}this.sheet=new
CSSStyleSheet();a.adoptedStyleSheets=[this.sheet].concat(a.adoptedStyleSheets);ef=this}else{this.styleTag=(a.ownerDocument||a).createElement("style");var
c=a.head||a;c.insertBefore(this.styleTag,c.firstChild)}this.modules=[];a[f1]=this}c(d,[{key:"mount",value:function(j){var
h=this.sheet,g=0,b=0;for(var
d=0;d<j.length;d++){var
c=j[d],a=this.modules.indexOf(c);if(a<b&&a>-1){this.modules.splice(a,1);b--;a=-1}if(a==-1){this.modules.splice(b++,0,c);if(h)for(var
f=0;f<c.rules.length;f++)h.insertRule(c.rules[f],g++)}else{while(b<a)g+=this.modules[b++].rules.length;g+=c.rules.length;b++}}if(!h){var
i="";for(var
e=0;e<this.modules.length;e++)i+=this.modules[e].getRules()+"\n";this.styleTag.textContent=i}}}]);return d}(),aX=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return this==a}},{key:"range",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a;return new
fZ(a,b,this)}}]);return a}();aX.prototype.startSide=aX.prototype.endSide=0;aX.prototype.point=false;aX.prototype.mapMode=z.TrackDel;var
fZ=c(function
a(c,d,e){b(this,a);this.from=c;this.to=d;this.value=e});function
g1(a,b){return a.from-b.from||a.value.startSide-b.value.startSide}var
tl=function(){function
h(a,d,e,c){b(this,h);this.from=a;this.to=d;this.value=e;this.maxPoint=c}c(h,[{key:"length",get:function(){return this.to[this.to.length-1]}},{key:"findIndex",value:function(g,h,f){var
i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,d=f?this.to:this.from;for(var
a=i,c=d.length;;){if(a==c)return a;var
b=a+c>>1,e=d[b]-g||(f?this.value[b].endSide:this.value[b].startSide)-h;if(b==a)return e>=0?a:c;if(e>=0)c=b;else
a=b+1}}},{key:"between",value:function(b,e,f,d){for(var
a=this.findIndex(e,-1e9,true),c=this.findIndex(f,1e9,false,a);a<c;a++)if(d(this.from[a]+b,this.to[a]+b,this.value[a])===false)return false}},{key:"map",value:function(n,f){var
j=[],l=[],o=[],e=-1,i=-1;for(var
d=0;d<this.value.length;d++){var
a=this.value[d],g=this.from[d]+n,k=this.to[d]+n,b=void
0,c=void
0;if(g==k){var
m=f.mapPos(g,a.startSide,a.mapMode);if(m==null)continue;b=c=m;if(a.startSide!=a.endSide){c=f.mapPos(g,a.endSide);if(c<b)continue}}else{b=f.mapPos(g,a.startSide);c=f.mapPos(k,a.endSide);if(b>c||b==c&&a.startSide>0&&a.endSide<=0)continue}if((c-b||a.endSide-a.startSide)<0)continue;if(e<0)e=b;if(a.point)i=Math.max(i,c-b);j.push(a);l.push(b-e);o.push(c-e)}return{mapped:j.length?new
h(l,o,j,i):null,pos:e}}}]);return h}(),k=function(){function
d(c,a){var
f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:d.empty,e=arguments.length>3?arguments[3]:undefined;b(this,d);this.chunkPos=c;this.chunk=a;this.nextLayer=f;this.maxPoint=e}c(d,[{key:"length",get:function(){var
a=this.chunk.length-1;return a<0?0:Math.max(this.chunkEnd(a),this.nextLayer.length)}},{key:"size",get:function(){if(this.isEmpty)return 0;var
d=this.nextLayer.size,b=a(this.chunk),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value;d+=e.value.length}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"chunkEnd",value:function(a){return this.chunkPos[a]+this.chunk[a].length}},{key:"update",value:function(f){var
l=f.add,b=l===void
0?[]:l,o=f.sort,p=o===void
0?false:o,m=f.filterFrom,j=m===void
0?0:m,n=f.filterTo,k=n===void
0?this.length:n,e=f.filter;if(b.length==0&&!e)return this;if(p)b.slice().sort(g1);if(this.isEmpty)return b.length?d.of(b):this;var
a=new
j8(this,null,-1)["goto"](0),c=0,i=[],g=new
cb();while(a.value||c<b.length)if(c<b.length&&(a.from-b[c].from||a.startSide-b[c].value.startSide)>=0){var
h=b[c++];if(!g.addInner(h.from,h.to,h.value))i.push(h)}else
if(a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==b.length||this.chunkEnd(a.chunkIndex)<b[c].from)&&(!e||j>this.chunkEnd(a.chunkIndex)||k<this.chunkPos[a.chunkIndex])&&g.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex]))a.nextChunk();else{if(!e||j>a.to||k<a.from||e(a.from,a.to,a.value))if(!g.addInner(a.from,a.to,a.value))i.push(new
fZ(a.from,a.to,a.value));a.next()}return g.finishInner(this.nextLayer.isEmpty&&!i.length?d.empty:this.nextLayer.update({add:i,filter:e,filterFrom:j,filterTo:k}))}},{key:"map",value:function(a){if(a.length==0||this.isEmpty)return this;var
f=[],h=[],b=-1;for(var
c=0;c<this.chunk.length;c++){var
g=this.chunkPos[c],e=this.chunk[c],l=a.touchesRange(g,g+e.length);if(l===false){b=Math.max(b,e.maxPoint);f.push(e);h.push(a.mapPos(g))}else
if(l===true){var
j=e.map(g,a),i=j.mapped,m=j.pos;if(i){b=Math.max(b,i.maxPoint);f.push(i);h.push(m)}}}var
k=this.nextLayer.map(a);return f.length==0?k:new
d(h,f,k,b)}},{key:"between",value:function(c,d,f){if(this.isEmpty)return;for(var
b=0;b<this.chunk.length;b++){var
a=this.chunkPos[b],e=this.chunk[b];if(d>=a&&c<=a+e.length&&e.between(a,c-a,d-a,f)===false)return}this.nextLayer.between(c,d,f)}},{key:"iter",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return fA.from([this])["goto"](a)}},{key:"isEmpty",get:function(){return this.nextLayer==this}}],[{key:"iter",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return fA.from(b)["goto"](a)}},{key:"compare",value:function(j,i,b,e){var
a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1,c=j.filter(function(b){return b.maxPoint>0||!b.isEmpty&&b.maxPoint>=a}),d=i.filter(function(b){return b.maxPoint>0||!b.isEmpty&&b.maxPoint>=a}),f=oo(c,d,b),g=new
cJ(c,f,a),h=new
cJ(d,f,a);b.iterGaps(function(a,b,c){return k9(g,a,h,b,c,e)});if(b.empty&&b.length==0)k9(g,0,h,0,0,e)}},{key:"eq",value:function(h,g){var
f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3?arguments[3]:undefined;if(e==null)e=1e9;var
c=h.filter(function(a){return!a.isEmpty&&g.indexOf(a)<0}),d=g.filter(function(a){return!a.isEmpty&&h.indexOf(a)<0});if(c.length!=d.length)return false;if(!c.length)return true;var
i=oo(c,d),a=new
cJ(c,i,0)["goto"](f),b=new
cJ(d,i,0)["goto"](f);for(;;){if(a.to!=b.to||!iw(a.active,b.active)||a.point&&(!b.point||!a.point.eq(b.point)))return false;if(a.to>e)return true;a.next();b.next()}}},{key:"spans",value:function(j,g,h,d){var
i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1,f,a=new
cJ(j,null,i,(f=d.filterPoint)===null||f===void
0?void
0:f.bind(d))["goto"](g),e=g,c=a.openStart;for(;;){var
b=Math.min(a.to,h);if(a.point){d.point(e,b,a.point,a.activeForPoint(a.to),c);c=a.openEnd(b)+(a.to>b?1:0)}else
if(b>e){d.span(e,b,a.active,c);c=a.openEnd(b)}if(a.to>h)break;e=a.to;a.next()}return c}},{key:"of",value:function(c){var
g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,f=new
cb(),b=a(c
instanceof
fZ?[c]:g?Ag(c):c),e;try{for(b.s();!(e=b.n()).done;){var
d=e.value;f.add(d.from,d.to,d.value)}}catch(a){b.e(a)}finally{b.f()}return f.finish()}}]);return d}();k.empty=new
k([],[],null,-1);function
Ag(a){if(a.length>1)for(var
d=a[0],b=1;b<a.length;b++){var
c=a[b];if(g1(d,c)>0)return a.slice().sort(g1);d=c}return a}k.empty.nextLayer=k.empty;var
cb=function(){function
a(){b(this,a);this.chunks=[];this.chunkPos=[];this.chunkStart=-1;this.last=null;this.lastFrom=-1e9;this.lastTo=-1e9;this.from=[];this.to=[];this.value=[];this.maxPoint=-1;this.setMaxPoint=-1;this.nextLayer=null}c(a,[{key:"finishChunk",value:function(a){this.chunks.push(new
tl(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;if(a){this.from=[];this.to=[];this.value=[]}}},{key:"add",value:function(b,c,d){if(!this.addInner(b,c,d))(this.nextLayer||(this.nextLayer=new
a())).add(b,c,d)}},{key:"addInner",value:function(a,c,b){var
d=a-this.lastTo||b.startSide-this.last.endSide;if(d<=0&&(a-this.lastFrom||b.startSide-this.last.startSide)<0)throw new
Error("Ranges must be added sorted by `from` position and `startSide`");if(d<0)return false;if(this.from.length==250)this.finishChunk(true);if(this.chunkStart<0)this.chunkStart=a;this.from.push(a-this.chunkStart);this.to.push(c-this.chunkStart);this.last=b;this.lastFrom=a;this.lastTo=c;this.value.push(b);if(b.point)this.maxPoint=Math.max(this.maxPoint,c-a);return true}},{key:"addChunk",value:function(b,a){if((b-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return false;if(this.from.length)this.finishChunk(true);this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint);this.chunks.push(a);this.chunkPos.push(b);var
c=a.value.length-1;this.last=a.value[c];this.lastFrom=a.from[c]+b;this.lastTo=a.to[c]+b;return true}},{key:"finish",value:function(){return this.finishInner(k.empty)}},{key:"finishInner",value:function(a){if(this.from.length)this.finishChunk(false);if(this.chunks.length==0)return a;var
b=new
k(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(a):a,this.setMaxPoint);this.from=null;return b}}]);return a}();function
oo(n,o,f){var
l=new
Map(),g=a(n),j;try{for(g.s();!(j=g.n()).done;){var
i=j.value;for(var
c=0;c<i.chunk.length;c++)if(i.chunk[c].maxPoint<=0)l.set(i.chunk[c],i.chunkPos[c])}}catch(a){g.e(a)}finally{g.f()}var
m=new
Set(),h=a(o),k;try{for(h.s();!(k=h.n()).done;){var
d=k.value;for(var
b=0;b<d.chunk.length;b++){var
e=l.get(d.chunk[b]);if(e!=null&&(f?f.mapPos(e):e)==d.chunkPos[b]&&!(f===null||f===void
0?void
0:f.touchesRange(e,e+d.chunk[b].length)))m.add(d.chunk[b])}}}catch(a){h.e(a)}finally{h.f()}return m}var
j8=function(){function
a(c,f,d){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;b(this,a);this.layer=c;this.skip=f;this.minPoint=d;this.rank=e}c(a,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}},{key:"goto",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9;this.chunkIndex=this.rangeIndex=0;this.gotoInner(a,b,false);return this}},{key:"gotoInner",value:function(c,e,a){while(this.chunkIndex<this.layer.chunk.length){var
b=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(b)||this.layer.chunkEnd(this.chunkIndex)<c||b.maxPoint<this.minPoint))break;this.chunkIndex++;a=false}if(this.chunkIndex<this.layer.chunk.length){var
d=this.layer.chunk[this.chunkIndex].findIndex(c-this.layer.chunkPos[this.chunkIndex],e,true);if(!a||this.rangeIndex<d)this.setRangeIndex(d)}this.next()}},{key:"forward",value:function(a,b){if((this.to-a||this.endSide-b)<0)this.gotoInner(a,b,true)}},{key:"next",value:function(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9;this.value=null;break}else{var
b=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex],c=b+a.from[this.rangeIndex];this.from=c;this.to=b+a.to[this.rangeIndex];this.value=a.value[this.rangeIndex];this.setRangeIndex(this.rangeIndex+1);if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"setRangeIndex",value:function(a){if(a==this.layer.chunk[this.chunkIndex].value.length){this.chunkIndex++;if(this.skip)while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;this.rangeIndex=0}else
this.rangeIndex=a}},{key:"nextChunk",value:function(){this.chunkIndex++;this.rangeIndex=0;this.next()}},{key:"compare",value:function(a){return this.from-a.from||this.startSide-a.startSide||this.to-a.to||this.endSide-a.endSide}}]);return a}(),fA=function(){function
d(a){b(this,d);this.heap=a}c(d,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"goto",value:function(f){var
g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9,b=a(this.heap),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;e["goto"](f,g)}}catch(a){b.e(a)}finally{b.f()}for(var
c=this.heap.length>>1;c>=0;c--)hW(this.heap,c);this.next();return this}},{key:"forward",value:function(e,f){var
b=a(this.heap),d;try{for(b.s();!(d=b.n()).done;){var
g=d.value;g.forward(e,f)}}catch(a){b.e(a)}finally{b.f()}for(var
c=this.heap.length>>1;c>=0;c--)hW(this.heap,c);if((this.to-e||this.value.endSide-f)<0)this.next()}},{key:"next",value:function(){if(this.heap.length==0){this.from=this.to=1e9;this.value=null;this.rank=-1}else{var
a=this.heap[0];this.from=a.from;this.to=a.to;this.value=a.value;this.rank=a.rank;if(a.value)a.next();hW(this.heap,0)}}}],[{key:"from",value:function(f){var
g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1,c=[];for(var
b=0;b<f.length;b++)for(var
a=f[b];!a.isEmpty;a=a.nextLayer)if(a.maxPoint>=e)c.push(new
j8(a,g,e,b));return c.length==1?c[0]:new
d(c)}}]);return d}();function
hW(b,d){for(var
e=b[d];;){var
a=(d<<1)+1;if(a>=b.length)break;var
c=b[a];if(a+1<b.length&&c.compare(b[a+1])>=0){c=b[a+1];a++}if(e.compare(c)<0)break;b[a]=e;b[d]=c;d=a}}var
cJ=function(){function
a(e,f,c){var
d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){return true};b(this,a);this.minPoint=c;this.filterPoint=d;this.active=[];this.activeTo=[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointFrom=0;this.pointRank=0;this.to=-1e9;this.endSide=0;this.openStart=-1;this.cursor=fA.from(e,f,c)}c(a,[{key:"goto",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9;this.cursor["goto"](a,b);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=a;this.endSide=b;this.openStart=-1;this.next();return this}},{key:"forward",value:function(a,b){while(this.minActive>-1&&(this.activeTo[this.minActive]-a||this.active[this.minActive].endSide-b)<0)this.removeActive(this.minActive);this.cursor.forward(a,b)}},{key:"removeActive",value:function(a){e9(this.active,a);e9(this.activeTo,a);e9(this.activeRank,a);this.minActive=on(this.active,this.activeTo)}},{key:"addActive",value:function(d){var
a=0,b=this.cursor,f=b.value,e=b.to,c=b.rank;while(a<this.activeRank.length&&this.activeRank[a]<=c)a++;eP(this.active,a,f);eP(this.activeTo,a,e);eP(this.activeRank,a,c);if(d)eP(d,a,this.cursor.from);this.minActive=on(this.active,this.activeTo)}},{key:"next",value:function(){var
c=this.to,g=this.point;this.point=null;var
b=this.openStart<0?[]:null,f=0;for(;;){var
a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>c){this.to=this.activeTo[a];this.endSide=this.active[a].endSide;break}this.removeActive(a);if(b)e9(b,a)}else
if(!this.cursor.value){this.to=this.endSide=1e9;break}else
if(this.cursor.from>c){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else{var
e=this.cursor.value;if(!e.point){this.addActive(b);this.cursor.next()}else
if(g&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else
if(!this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank))this.cursor.next();else{this.point=e;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;this.to=this.cursor.to;this.endSide=e.endSide;if(this.cursor.from<c)f=1;this.cursor.next();if(this.to>c)this.forward(this.to,this.endSide);break}}}if(b){var
d=0;while(d<b.length&&b[d]<c)d++;this.openStart=d+f}}},{key:"activeForPoint",value:function(c){if(!this.active.length)return this.active;var
b=[];for(var
a=this.active.length-1;a>=0;a--){if(this.activeRank[a]<this.pointRank)break;if(this.activeTo[a]>c||this.activeTo[a]==c&&this.active[a].endSide>=this.point.endSide)b.push(this.active[a])}return b.reverse()}},{key:"openEnd",value:function(c){var
b=0;for(var
a=this.activeTo.length-1;a>=0&&this.activeTo[a]>c;a--)b++;return b}}]);return a}();function
k9(a,k,b,d,l,i){a["goto"](k);b["goto"](d);var
j=d+l,c=d,f=d-k;for(;;){var
g=a.to+f-b.to||a.endSide-b.endSide,h=g<0?a.to+f:b.to,e=Math.min(h,j);if(a.point||b.point){if(!(a.point&&b.point&&(a.point==b.point||a.point.eq(b.point))&&iw(a.activeForPoint(a.to+f),b.activeForPoint(b.to))))i.comparePoint(c,e,a.point,b.point)}else
if(e>c&&!iw(a.active,b.active))i.compareRange(c,e,a.active,b.active);if(h>j)break;c=h;if(g<=0)a.next();if(g>=0)b.next()}}function
iw(b,c){if(b.length!=c.length)return false;for(var
a=0;a<b.length;a++)if(b[a]!=c[a]&&!b[a].eq(c[a]))return false;return true}function
e9(b,d){for(var
a=d,c=b.length-1;a<c;a++)b[a]=b[a+1];b.pop()}function
eP(b,c,d){for(var
a=b.length-1;a>=c;a--)b[a+1]=b[a];b[c]=d}function
on(e,b){var
c=-1,d=1e9;for(var
a=0;a<b.length;a++)if((b[a]-d||e[a].endSide-e[c].endSide)<0){c=a;d=b[a]}return c}var
bq={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},e$={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},mk=typeof
navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),BS=typeof
navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),yQ=typeof
navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),p6=typeof
navigator!="undefined"&&/Mac/.test(navigator.platform),zD=typeof
navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wG=mk&&(p6||+mk[1]<57)||yQ&&p6;for(T=0;T<10;T++)bq[48+T]=bq[96+T]=String(T);var
T;for(T=1;T<=24;T++)bq[T+111]="F"+T;var
T;for(T=65;T<=90;T++){bq[T]=String.fromCharCode(T+32);e$[T]=String.fromCharCode(T)}var
T;for(ei
in
bq)if(!e$.hasOwnProperty(ei))e$[ei]=bq[ei];var
ei;function
pz(b){var
c=wG&&(b.ctrlKey||b.altKey||b.metaKey)||(BS||zD)&&b.shiftKey&&b.key&&b.key.length==1,a=!c&&b.key||(b.shiftKey?e$:bq)[b.keyCode]||b.key||"Unidentified";if(a=="Esc")a="Escape";if(a=="Del")a="Delete";if(a=="Left")a="ArrowLeft";if(a=="Up")a="ArrowUp";if(a=="Right")a="ArrowRight";if(a=="Down")a="ArrowDown";return a}function
eD(a){var
b;if(a.nodeType==11)b=a.getSelection?a:a.ownerDocument;else
b=a;return b.getSelection()}function
g6(b,a){return a?b.contains(a.nodeType!=1?a.parentNode:a):false}function
xH(){var
a=document.activeElement;while(a&&a.shadowRoot)a=a.shadowRoot.activeElement;return a}function
hR(b,a){if(!a.anchorNode)return false;try{return g6(b,a.anchorNode)}catch(a){return false}}function
cU(a){if(a.nodeType==3)return dq(a,0,a.nodeValue.length).getClientRects();else
if(a.nodeType==1)return a.getClientRects();else
return[]}function
eQ(b,c,a,d){return a?rE(b,c,a,d,-1)||rE(b,c,a,d,1):false}function
hn(a){for(var
b=0;;b++){a=a.previousSibling;if(!a)return b}}function
rE(a,b,e,f,c){for(;;){if(a==e&&b==f)return true;if(b==(c<0?0:eY(a))){if(a.nodeName=="DIV")return false;var
d=a.parentNode;if(!d||d.nodeType!=1)return false;b=hn(a)+(c<0?0:1);a=d}else
if(a.nodeType==1){a=a.childNodes[b+(c<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")return false;b=c<0?eY(a):0}else
return false}}function
eY(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}var
kx={left:0,right:0,top:0,bottom:0};function
ev(a,c){var
b=c?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}function
C$(a){return{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}var
bg=5;function
B4(m,a,f,k){var
l=m.ownerDocument,o=l.defaultView;for(var
b=m;b;)if(b.nodeType==1){var
c=void
0,j=b==l.body;if(j)c=C$(o);else{if(b.scrollHeight<=b.clientHeight&&b.scrollWidth<=b.clientWidth){b=b.parentNode;continue}var
g=b.getBoundingClientRect();c={left:g.left,right:g.left+b.clientWidth,top:g.top,bottom:g.top+b.clientHeight}}var
e=0,d=0;if(k){var
n=a.bottom-a.top,i=c.bottom-c.top,h=void
0;if(n<=i)h=a.top+n/2-i/2;else
if(f<0)h=a.top-bg;else
h=a.bottom+bg-i;d=h-c.top;if(Math.abs(d)<=1)d=0}else
if(a.top<c.top){d=-(c.top-a.top+bg);if(f>0&&a.bottom>c.bottom+d)d=a.bottom-c.bottom+d+bg}else
if(a.bottom>c.bottom){d=a.bottom-c.bottom+bg;if(f<0&&a.top-d<c.top)d=-(c.top+d-a.top+bg)}if(a.left<c.left){e=-(c.left-a.left+bg);if(f>0&&a.right>c.right+e)e=a.right-c.right+e+bg}else
if(a.right>c.right){e=a.right-c.right+bg;if(f<0&&a.left<c.left+e)e=-(c.left+e-a.left+bg)}if(e||d)if(j)o.scrollBy(e,d);else{if(d){var
q=b.scrollTop;b.scrollTop+=d;d=b.scrollTop-q}if(e){var
p=b.scrollLeft;b.scrollLeft+=e;e=b.scrollLeft-p}a={left:a.left-e,top:a.top-d,right:a.right-e,bottom:a.bottom-d}}if(j)break;b=b.assignedSlot||b.parentNode;k=false}else
if(b.nodeType==11)b=b.host;else
break}var
tK=function(){function
a(){b(this,a);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}c(a,[{key:"eq",value:function(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}},{key:"set",value:function(a){this.anchorNode=a.anchorNode;this.anchorOffset=a.anchorOffset;this.focusNode=a.focusNode;this.focusOffset=a.focusOffset}}]);return a}(),cn=null;function
op(b){if(b.setActive)return b.setActive();if(cn)return b.focus(cn);var
c=[];for(var
a=b;a;a=a.parentNode){c.push(a,a.scrollTop,a.scrollLeft);if(a==a.ownerDocument)break}b.focus(cn==null?Object.defineProperties({},{preventScroll:{get:function(){cn={preventScroll:true};return true},configurable:true,enumerable:true}}):void
0);if(!cn){cn=false;for(var
d=0;d<c.length;){var
e=c[d++],g=c[d++],f=c[d++];if(e.scrollTop!=g)e.scrollTop=g;if(e.scrollLeft!=f)e.scrollLeft=f}}}var
rK;function
dq(c,b){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b,a=rK||(rK=document.createRange());a.setEnd(c,d);a.setStart(c,b);return a}function
ns(d,e,c){var
f={key:e,code:e,keyCode:c,which:c,cancelable:true},a=new
KeyboardEvent("keydown",f);a.synthetic=true;d.dispatchEvent(a);var
b=new
KeyboardEvent("keyup",f);b.synthetic=true;d.dispatchEvent(b);return a.defaultPrevented||b.defaultPrevented}function
yT(a){while(a){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}var
av=function(){function
a(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;b(this,a);this.node=c;this.offset=d;this.precise=e}c(a,null,[{key:"before",value:function(b,c){return new
a(b.parentNode,hn(b),c)}},{key:"after",value:function(b,c){return new
a(b.parentNode,hn(b)+1,c)}}]);return a}(),Bi=[],al=function(){function
f(){b(this,f);this.parent=null;this.dom=null;this.dirty=2}c(f,[{key:"editorView",get:function(){if(!this.parent)throw new
Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(f){var
e=this.posAtStart,b=a(this.children),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c==f)return e;e+=c.length+c.breakAfter}}catch(a){b.e(a)}finally{b.f()}throw new
RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(a){return this.posBefore(a)+a.length}},{key:"coordsAt",value:function(a,b){return null}},{key:"sync",value:function(d){var
i;if(this.dirty&2){var
e=this.dom,b=e.firstChild,g=a(this.children),k;try{for(g.s();!(k=g.n()).done;){var
c=k.value;if(c.dirty){if(!c.dom&&b&&!((i=f.get(b))===null||i===void
0?void
0:i.parent))c.reuseDOM(b);c.sync(d);c.dirty=0}if(d&&!d.written&&d.node==e&&b!=c.dom)d.written=true;if(c.dom.parentNode==e){while(b&&b!=c.dom)b=rr(b);b=c.dom.nextSibling}else
e.insertBefore(c.dom,b)}}catch(a){g.e(a)}finally{g.f()}if(b&&d&&d.node==e)d.written=true;while(b)b=rr(b)}else
if(this.dirty&1){var
h=a(this.children),l;try{for(h.s();!(l=h.n()).done;){var
j=l.value;if(j.dirty){j.sync(d);j.dirty=0}}}catch(a){h.e(a)}finally{h.f()}}}},{key:"reuseDOM",value:function(a){return false}},{key:"localPosFromDOM",value:function(b,h){var
a;if(b==this.dom)a=this.dom.childNodes[h];else{var
d=eY(b)==0?0:h==0?-1:1;for(;;){var
c=b.parentNode;if(c==this.dom)break;if(d==0&&c.firstChild!=c.lastChild)if(b==c.firstChild)d=-1;else
d=1;b=c}if(d<0)a=b;else
a=b.nextSibling}if(a==this.dom.firstChild)return 0;while(a&&!f.get(a))a=a.nextSibling;if(!a)return this.length;for(var
g=0,i=0;;g++){var
e=this.children[g];if(e.dom==a)return i;i+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(g,i){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=-1,k=-1,f=-1,j=-1;for(var
b=0,a=h,l=h;b<this.children.length;b++){var
c=this.children[b],d=a+c.length;if(a<g&&d>i)return c.domBoundsAround(g,i,a);if(d>=g&&e==-1){e=b;k=a}if(a>i&&c.dom.parentNode==this.dom){f=b;j=l;break}l=d;a=d+c.breakAfter}return{from:k,to:j<0?h+this.length:j,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}},{key:"markDirty",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.dirty|=2;this.markParentsDirty(a)}},{key:"markParentsDirty",value:function(b){for(var
a=this.parent;a;a=a.parent){if(b)a.dirty|=2;if(a.dirty&1)return;a.dirty|=1;b=false}}},{key:"setParent",value:function(a){if(this.parent!=a){this.parent=a;if(this.dirty)this.markParentsDirty(true)}}},{key:"setDOM",value:function(a){if(this.dom)this.dom.cmView=null;this.dom=a;a.cmView=this}},{key:"rootView",get:function(){for(var
a=this;;){var
b=a.parent;if(!b)return a;a=b}}},{key:"replaceChildren",value:function(d,g){var
e,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bi;this.markDirty();for(var
a=d;a<g;a++){var
f=this.children[a];if(f.parent==this)f.parent=null}(e=this.children).splice.apply(e,[d,g-d].concat(P(c)));for(var
b=0;b<c.length;b++)c[b].setParent(this)}},{key:"ignoreMutation",value:function(a){return false}},{key:"ignoreEvent",value:function(a){return false}},{key:"childCursor",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new
jv(this.children,a,this.children.length)}},{key:"childPos",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(b,a)}},{key:"toString",value:function(){var
a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return true}}],[{key:"get",value:function(a){return a.cmView}}]);return f}();al.prototype.breakAfter=0;function
rr(a){var
b=a.nextSibling;a.parentNode.removeChild(a);return b}var
jv=function(){function
a(c,e,d){b(this,a);this.children=c;this.pos=e;this.i=d;this.off=0}c(a,[{key:"findPos",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(a>this.pos||a==this.pos&&(c>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=a-this.pos;return this}var
b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return a}(),vR=typeof
navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],lC=bn(vR,2),aE=lC[0],hi=lC[1],h4=/Edge\/(\d+)/.exec(aE.userAgent),oS=/MSIE \d/.test(aE.userAgent),hZ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aE.userAgent),eJ=!!(oS||hZ||h4),oA=!eJ&&/gecko\/(\d+)/i.test(aE.userAgent),gU=!eJ&&/Chrome\/(\d+)/.exec(aE.userAgent),sJ="webkitFontSmoothing"in
hi.documentElement.style,rz=!eJ&&/Apple Computer/.test(aE.vendor),pi=rz&&(/Mobile\/\w+/.test(aE.userAgent)||aE.maxTouchPoints>2),q={mac:pi||/Mac/.test(aE.platform),windows:/Win/.test(aE.platform),linux:/Linux|X11/.test(aE.platform),ie:eJ,ie_version:oS?hi.documentMode||6:hZ?+hZ[1]:h4?+h4[1]:0,gecko:oA,gecko_version:oA?+(/Firefox\/(\d+)/.exec(aE.userAgent)||[0,0])[1]:0,chrome:!!gU,chrome_version:gU?+gU[1]:0,ios:pi,android:/Android\b/.test(aE.userAgent),webkit:sJ,safari:rz,webkit_version:sJ?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hi.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},qQ=[],bF=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"become",value:function(a){return false}},{key:"getSide",value:function(){return 0}}]);return a}(al);bF.prototype.children=qQ;var
uH=256,f4=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.text=d;return c}c(a,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(a&&a.node==this.dom)a.written=true;this.dom.nodeValue=this.text}}},{key:"reuseDOM",value:function(a){if(a.nodeType!=3)return false;this.createDOM(a);return true}},{key:"merge",value:function(c,d,b){if(b&&(!(b
instanceof
a)||this.length-(d-c)+b.length>uH))return false;this.text=this.text.slice(0,c)+(b?b.text:"")+this.text.slice(d);this.markDirty();return true}},{key:"slice",value:function(b){var
c=new
a(this.text.slice(b));this.text=this.text.slice(0,b);return c}},{key:"localPosFromDOM",value:function(b,a){return b==this.dom?a:a?this.text.length:0}},{key:"domAtPos",value:function(a){return new
av(this.dom,a)}},{key:"domBoundsAround",value:function(b,c,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return sb(this.dom,a,b)}}]);return a}(bF),dN=function(g){f(d,g);var
k=e(d);function
d(j){var
c,g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;b(this,d);c=k.call(this);c.mark=j;c.children=g;c.length=i;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;h.setParent(aQ(c))}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"createDOM",value:function(){var
a=document.createElement(this.mark.tagName);if(this.mark["class"])a.className=this.mark["class"];if(this.mark.attrs)for(var
b
in
this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);this.setDOM(a)}},{key:"sync",value:function(a){if(!this.dom||this.dirty&4)this.createDOM();t(r(d.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(b,f,a,e,c){if(a&&(!(a
instanceof
d&&a.mark.eq(this.mark))||b&&e<=0||f<this.length&&c<=0))return false;qk(this,b,f,a?a.children:qQ,e-1,c-1);this.markDirty();return true}},{key:"slice",value:function(b){var
k=[],c=0,f=-1,j=0,e=a(this.children),h;try{for(e.s();!(h=e.n()).done;){var
g=h.value,i=c+g.length;if(i>b)k.push(c<b?g.slice(b-c):g);if(f<0&&c>=b)f=j;c=i;j++}}catch(a){e.e(a)}finally{e.f()}var
l=this.length-b;this.length=b;if(f>-1)this.replaceChildren(f,this.children.length);return new
d(this.mark,k,l)}},{key:"domAtPos",value:function(a){return o0(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return mO(this,a,b)}}]);return d}(bF);function
sb(i,b,e){var
g=i.nodeValue.length;if(b>g)b=g;var
f=b,h=b,a=0;if(b==0&&e<0||b==g&&e>=0){if(!(q.chrome||q.gecko))if(b){f--;a=1}else{h++;a=-1}}else
if(e<0)f--;else
h++;var
d=dq(i,f,h).getClientRects();if(!d.length)return kx;var
c=d[(a?a<0:e>=0)?0:d.length-1];if(q.safari&&!a&&c.width==0)c=Array.prototype.find.call(d,function(a){return a.width})||c;return a?ev(c,a<0):c}var
kU=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.side=e;return c}c(a,[{key:"slice",value:function(b){var
c=a.create(this.widget,this.length-b,this.side);this.length-=b;return c}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(c,d,b,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"become",value:function(b){if(b.length==this.length&&b
instanceof
a&&b.side==this.side)if(this.widget.constructor==b.widget.constructor){if(!this.widget.eq(b.widget))this.markDirty(true);this.widget=b.widget;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"overrideDOMText",get:function(){if(this.length==0)return p.empty;var
a=this;while(a.parent)a=a.parent;var
d=a.editorView,c=d&&d.state.doc,b=this.posAtStart;return c?c.slice(b,b+this.length):p.empty}},{key:"domAtPos",value:function(a){return a==0?av.before(this.dom):av.after(this.dom,a==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,e){var
d=this.dom.getClientRects(),b=null;if(!d.length)return kx;for(var
c=a>0?d.length-1:0;;c+=a>0?-1:1){b=d[c];if(a>0?c==0:c==d.length-1||b.top<b.bottom)break}return a==0&&e>0||a==this.length&&e<=0?b:ev(b,a==0)}},{key:"isEditable",get:function(){return false}}],[{key:"create",value:function(b,c,d){return new(b.customView||a)(b,c,d)}}]);return a}(bF),tp=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"domAtPos",value:function(a){return new
av(this.widget.text,a)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(b,a){return!a?0:b.nodeType==3?Math.min(a,this.length):this.length}},{key:"ignoreMutation",value:function(){return false}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(a,b){return sb(this.widget.text,a,b)}},{key:"isEditable",get:function(){return true}}]);return a}(kU),kT=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.side=d;return c}c(a,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return false}},{key:"become",value:function(b){return b
instanceof
a&&b.side==this.side}},{key:"slice",value:function(){return new
a(this.side)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(document.createTextNode("\u200B"));else
if(this.dirty&&this.dom.nodeValue!="\u200B")this.dom.nodeValue="\u200B"}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(a){return av.before(this.dom)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(b){var
a=cU(this.dom);return a[a.length-1]}},{key:"overrideDOMText",get:function(){return p.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]);return a}(bF);function
qk(l,v,w,b,g,d){var
s=l.childCursor(),p=s.findPos(w,1),e=p.i,h=p.off,q=s.findPos(v,-1),c=q.i,i=q.off,t=v-w,j=a(b),r;try{for(j.s();!(r=j.n()).done;){var
x=r.value;t+=x.length}}catch(a){j.e(a)}finally{j.f()}l.length+=t;var
f=l.children;if(c==e&&i){var
o=f[c];if(b.length==1&&o.merge(i,h,b[0],g,d))return;if(b.length==0){o.merge(i,h,null,g,d);return}var
n=o.slice(h);if(n.merge(0,0,b[b.length-1],0,d))b[b.length-1]=n;else
b.push(n);e++;d=h=0}if(h){var
u=f[e];if(b.length&&u.merge(0,h,b[b.length-1],0,d)){b.pop();d=b.length?0:g}else
u.merge(0,h,null,0,0)}else
if(e<f.length&&b.length&&f[e].merge(0,0,b[b.length-1],0,d)){b.pop();d=b.length?0:g}if(i){var
k=f[c];if(b.length&&k.merge(i,k.length,b[0],g,0)){b.shift();g=b.length?0:d}else
k.merge(i,k.length,null,0,0);c++}else
if(c&&b.length){var
m=f[c-1];if(m.merge(m.length,m.length,b[0],g,0)){b.shift();g=b.length?0:d}}while(c<e&&b.length&&f[e-1].become(b[b.length-1])){b.pop();e--;d=b.length?0:g}while(c<e&&b.length&&f[c].become(b[0])){b.shift();c++;g=b.length?0:d}if(!b.length&&c&&e<f.length&&f[e].merge(0,0,f[c-1],g,d))c--;if(b.length||c!=e)l.replaceChildren(c,e,b)}function
o0(f,e,d){var
a=0;for(var
b=0;a<e.length;a++){var
c=e[a],g=b+c.length;if(g==b&&c.getSide()<=0)continue;if(d>b&&d<g&&c.dom.parentNode==f)return c.domAtPos(d-b);if(d<=b)break;b=g}for(;a>0;a--){var
h=e[a-1].dom;if(h.parentNode==f)return av.after(h)}return new
av(f,0)}function
pu(d,a,e){var
c,b=d.children;if(e>0&&a
instanceof
dN&&b.length&&(c=b[b.length-1])instanceof
dN&&c.mark.eq(a.mark))pu(c,a.children[0],e-1);else{b.push(a);a.setParent(d)}d.length+=a.length}function
mO(a,f,g){for(var
e=0,c=0;c<a.children.length;c++){var
d=a.children[c],b=e+d.length,k=void
0;if((g<=0||b==a.length||d.getSide()>0?b>=f:b>f)&&(f<b||c+1==a.children.length||(k=a.children[c+1]).length||k.getSide()>0)){var
i=0;if(b==e){if(d.getSide()<=0)continue;i=g=-d.getSide()}var
h=d.coordsAt(f-e,g);return i&&h?ev(h,g<0):h}e=b}var
j=a.dom.lastChild;if(!j)return a.dom.getBoundingClientRect();var
l=cU(j);return l[l.length-1]}function
ci(c,a){for(var
b
in
c)if(b=="class"&&a["class"])a["class"]+=" "+c["class"];else
if(b=="style"&&a.style)a.style+=";"+c.style;else
a[b]=c[b];return a}function
gB(a,b){if(a==b)return true;if(!a||!b)return false;var
f=Object.keys(a),g=Object.keys(b);if(f.length!=g.length)return false;for(var
c=0,e=f;c<e.length;c++){var
d=e[c];if(g.indexOf(d)==-1||a[d]!==b[d])return false}return true}function
gt(d,c,a){if(c)for(var
e
in
c)if(!(a&&e
in
a))d.removeAttribute(e);if(a)for(var
b
in
a)if(!(c&&c[b]==a[b]))d.setAttribute(b,a[b])}var
bv=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return false}},{key:"updateDOM",value:function(a){return false}},{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(a){return true}},{key:"customView",get:function(){return null}}]);return a}(),H=function(a){a[a["Text"]=0]="Text";a[a["WidgetBefore"]=1]="WidgetBefore";a[a["WidgetAfter"]=2]="WidgetAfter";a[a["WidgetRange"]=3]="WidgetRange";return a}(H||(H={})),s=function(a){f(d,a);var
h=e(d);function
d(f,c,g,e){var
a;b(this,d);a=h.call(this);a.startSide=f;a.endSide=c;a.widget=g;a.spec=e;return a}c(d,[{key:"heightRelevant",get:function(){return false}},{key:"hasHeight",value:function(){return this.widget?this.widget.estimatedHeight>-1:false}}],[{key:"mark",value:function(a){return new
j$(a)}},{key:"widget",value:function(a){var
b=a.side||0;return new
dT(a,b,b,!!a.block,a.widget||null,false)}},{key:"replace",value:function(b){var
a=!!b.block,c=oG(b,a),f=c.start,d=c.end,g=1e8*(f?-1:1)*(a?2:1),e=1e8*(d?1:-1)*(a?2:1);return new
dT(b,g,e,a,b.widget||null,true)}},{key:"line",value:function(a){return new
fH(a)}},{key:"set",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return k.of(a,b)}}]);return d}(aX);s.none=k.empty;var
j$=function(d){f(a,d);var
h=e(a);function
a(d){var
c;b(this,a);var
e=oG(d),g=e.start,f=e.end;c=h.call(this,1e8*(g?-1:1),1e8*(f?1:-1),null,d);c.tagName=d.tagName||"span";c["class"]=d["class"]||"";c.attrs=d.attributes||null;return c}c(a,[{key:"eq",value:function(b){return this==b||b
instanceof
a&&this.tagName==b.tagName&&this["class"]==b["class"]&&gB(this.attrs,b.attrs)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(b>=c)throw new
RangeError("Mark decorations may not be empty");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(s);j$.prototype.point=false;var
fH=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,-1e8,-1e8,null,c)}c(a,[{key:"eq",value:function(b){return b
instanceof
a&&gB(this.spec.attributes,b.spec.attributes)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(c!=b)throw new
RangeError("Line decoration ranges must be zero-length");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(s);fH.prototype.mapMode=z.TrackBefore;fH.prototype.point=true;var
dT=function(d){f(a,d);var
j=e(a);function
a(h,e,f,d,i,g){var
c;b(this,a);c=j.call(this,e,f,i,h);c.block=d;c.isReplace=g;c.mapMode=!d?z.TrackDel:e<0?z.TrackBefore:z.TrackAfter;return c}c(a,[{key:"type",get:function(){return this.startSide<this.endSide?H.WidgetRange:this.startSide<0?H.WidgetBefore:H.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(b){return b
instanceof
a&&C6(this.widget,b.widget)&&this.block==b.block&&this.startSide==b.startSide&&this.endSide==b.endSide}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(this.isReplace&&(b>c||b==c&&this.startSide>0&&this.endSide<0))throw new
RangeError("Invalid range for replacement decoration");if(!this.isReplace&&c!=b)throw new
RangeError("Widget decorations can only have zero-length ranges");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(s);dT.prototype.point=true;function
oG(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,b=c.inclusiveStart,a=c.inclusiveEnd;if(b==null)b=c.inclusive;if(a==null)a=c.inclusive;return{start:b!==null&&b!==void
0?b:d,end:a!==null&&a!==void
0?a:d}}function
C6(a,b){return a==b||!!(a&&b&&a.compare(b))}function
gv(c,d,a){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,b=a.length-1;if(b>=0&&a[b]+e>c)a[b]=Math.max(a[b],d);else
a.push(c,d)}var
be=function(g){f(d,g);var
h=e(d);function
d(){var
a;b(this,d);a=h.apply(this,arguments);a.children=[];a.length=0;a.prevAttrs=void
0;a.attrs=null;a.breakAfter=0;return a}c(d,[{key:"merge",value:function(b,g,a,f,e,c){if(a){if(!(a
instanceof
d))return false;if(!this.dom)a.transferDOM(this)}if(f)this.setDeco(a?a.attrs:null);qk(this,b,g,a?a.children:qP,e,c);return true}},{key:"split",value:function(g){var
b=new
d();b.breakAfter=this.breakAfter;if(this.length==0)return b;var
f=this.childPos(g),a=f.i,e=f.off;if(e){b.append(this.children[a].slice(e),0);this.children[a].merge(e,this.children[a].length,null,0,0);a++}for(var
c=a;c<this.children.length;c++)b.append(this.children[c],0);while(a>0&&this.children[a-1].length==0){this.children[a-1].parent=null;a--}this.children.length=a;this.markDirty();this.length=g;return b}},{key:"transferDOM",value:function(a){if(!this.dom)return;a.setDOM(this.dom);a.prevAttrs=this.prevAttrs===void
0?this.attrs:this.prevAttrs;this.prevAttrs=void
0;this.dom=null}},{key:"setDeco",value:function(a){if(!gB(this.attrs,a)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=a}}},{key:"append",value:function(a,b){pu(this,a,b)}},{key:"addLineDeco",value:function(c){var
a=c.spec.attributes,b=c.spec["class"];if(a)this.attrs=ci(a,this.attrs||{});if(b)this.attrs=ci(a,{"class":b})}},{key:"domAtPos",value:function(a){return o0(this.dom,this.children,a)}},{key:"sync",value:function(e){var
b;if(!this.dom||this.dirty&4){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}if(this.prevAttrs!==void
0){gt(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void
0}t(r(d.prototype),"sync",this).call(this,e);var
a=this.dom.lastChild;while(a&&al.get(a)instanceof
dN)a=a.lastChild;if(!a||a.nodeName!="BR"&&((b=al.get(a))===null||b===void
0?void
0:b.isEditable)==false&&(!q.ios||!this.children.some(function(a){return a
instanceof
f4}))){var
c=document.createElement("BR");c.cmIgnore=true;this.dom.appendChild(c)}}},{key:"measureTextSize",value:function(){if(this.children.length==0||this.length>20)return null;var
f=0,b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(!(d
instanceof
f4))return null;var
e=cU(d.dom);if(e.length!=1)return null;f+=e[0].width}}catch(a){b.e(a)}finally{b.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:f/this.length}}},{key:"coordsAt",value:function(a,b){return mO(this,a,b)}},{key:"match",value:function(a){return false}},{key:"type",get:function(){return H.Text}}],[{key:"find",value:function(f,g){for(var
b=0,e=0;;b++){var
a=f.children[b],c=e+a.length;if(c>=g){if(a
instanceof
d)return a;if(a.length)return null}e=c+a.breakAfter}}}]);return d}(al),qP=[],fl=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.type=e;c.breakAfter=0;return c}c(a,[{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"domAtPos",value:function(a){return a==0?av.before(this.dom):av.after(this.dom,a==this.length)}},{key:"split",value:function(b){var
d=this.length-b;this.length=b;var
c=new
a(this.widget,d,this.type);c.breakAfter=this.breakAfter;return c}},{key:"children",get:function(){return qP}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):p.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"match",value:function(b){if(b
instanceof
a&&b.type==this.type&&b.widget.constructor==this.widget.constructor){if(!b.widget.eq(this.widget))this.markDirty(true);this.widget=b.widget;this.length=b.length;this.breakAfter=b.breakAfter;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}}]);return a}(al),tz=function(){function
d(a,c,e){b(this,d);this.doc=a;this.pos=c;this.end=e;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=c}c(d,[{key:"posCovered",value:function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var
a=this.content[this.content.length-1];return!a.breakAfter&&!(a
instanceof
fl&&a.type==H.WidgetBefore)}},{key:"getLine",value:function(){if(!this.curLine){this.content.push(this.curLine=new
be());this.atCursorPos=true}return this.curLine}},{key:"flushBuffer",value:function(a){if(this.pendingBuffer){this.curLine.append(fg(new
kT(-1),a),a.length);this.pendingBuffer=0}}},{key:"addBlockWidget",value:function(a){this.flushBuffer([]);this.curLine=null;this.content.push(a)}},{key:"finish",value:function(a){if(!a)this.flushBuffer([]);else
this.pendingBuffer=0;if(!this.posCovered())this.getLine()}},{key:"buildText",value:function(a,d,e){while(a>0){if(this.textOff==this.text.length){var
b=this.cursor.next(this.skip),h=b.value,g=b.lineBreak,f=b.done;this.skip=0;if(f)throw new
Error("Ran out of text content when drawing inline views");if(g){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else
this.breakAtStart=1;this.flushBuffer([]);this.curLine=null;a--;continue}else{this.text=h;this.textOff=0}}var
c=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(d);this.getLine().append(fg(new
f4(this.text.slice(this.textOff,this.textOff+c)),d),e);this.atCursorPos=true;this.textOff+=c;a-=c;e=0}}},{key:"span",value:function(d,b,c,a){this.buildText(b-d,c,a);this.pos=b;if(this.openStart<0)this.openStart=a}},{key:"point",value:function(f,e,a,b,d){var
c=e-f;if(a
instanceof
dT)if(a.block){var
k=a.type;if(k==H.WidgetAfter&&!this.posCovered())this.getLine();this.addBlockWidget(new
fl(a.widget||new
kg("div"),c,k))}else{var
g=kU.create(a.widget||new
kg("span"),c,a.startSide),i=this.atCursorPos&&!g.isEditable&&d<=b.length&&(f<e||a.startSide>0),h=!g.isEditable&&(f<e||a.startSide<=0),j=this.getLine();if(this.pendingBuffer==2&&!i)this.pendingBuffer=0;this.flushBuffer(b);if(i){j.append(fg(new
kT(1),b),d);d=b.length+Math.max(0,d-b.length)}j.append(fg(g,b),d);this.atCursorPos=h;this.pendingBuffer=!h?0:f<e?1:2}else
if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(a);if(c){if(this.textOff+c<=this.text.length)this.textOff+=c;else{this.skip+=c-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=d}}],[{key:"build",value:function(f,b,c,e){var
a=new
d(f,b,c);a.openEnd=k.spans(e,b,c,a);if(a.openStart<0)a.openStart=a.openEnd;a.finish(a.openEnd);return a}}]);return d}();function
fg(c,e){var
b=a(e),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;c=new
dN(f,[c],c.length)}}catch(a){b.e(a)}finally{b.f()}return c}var
kg=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.tag=d;return c}c(a,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return a}(bv),Bj=[],mp=h.define(),nN=h.define(),qo=h.define(),n9=h.define(),iX=h.define(),o5=h.define(),ix=j.define({map:function(b,a){return b.map(a)}}),mc=j.define({map:function(b,a){return b.map(a)}});function
aD(d,a,b){var
c=d.facet(n9);if(c.length)c[0](a);else
if(window.onerror)window.onerror(String(a),b,void
0,void
0,a);else
if(b)console.error(b+":",a);else
console.error(a)}var
c0=h.define({combine:function(a){return a.length?a[0]:true}}),u8=c(function
a(c,d){b(this,a);this.field=c;this.get=d}),aJ=function(){function
a(){b(this,a)}c(a,[{key:"from",value:function(a){return new
u8(this,a)}}],[{key:"define",value:function(){return new
a()}}]);return a}();aJ.decorations=aJ.define();aJ.atomicRanges=aJ.define();aJ.scrollMargins=aJ.define();var
A3=0,dx=h.define(),aM=function(){function
d(e,a,c){b(this,d);this.id=e;this.create=a;this.fields=c;this.extension=dx.of(this)}c(d,null,[{key:"define",value:function(j,l){var
f=l||{},i=f.eventHandlers,e=f.provide,h=f.decorations,c=[];if(e){var
b=a(Array.isArray(e)?e:[e]),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;c.push(k)}}catch(a){b.e(a)}finally{b.f()}}if(i)c.push(nD.from(function(a){return{plugin:a,handlers:i}}));if(h)c.push(aJ.decorations.from(h));return new
d(A3++,j,c)}},{key:"fromClass",value:function(b,a){return d.define(function(a){return new
b(a)},a)}}]);return d}(),nD=aJ.define(),cB=function(){function
d(a){b(this,d);this.spec=a;this.mustUpdate=null;this.value=null}c(d,[{key:"takeField",value:function(h,g){var
b=a(this.spec.fields),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,e=d.field,f=d.get;if(e==h)g.push(f(this.value))}}catch(a){b.e(a)}finally{b.f()}}},{key:"update",value:function
a(b){if(!this.value)try{this.value=this.spec.create(b)}catch(a){aD(b.state,a,"CodeMirror plugin crashed");return d.dummy}else
if(this.mustUpdate){var
a=this.mustUpdate;this.mustUpdate=null;if(!this.value.update)return this;try{this.value.update(a)}catch(b){aD(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(a){}return d.dummy}}return this}},{key:"destroy",value:function(b){var
a;if((a=this.value)===null||a===void
0?void
0:a.destroy)try{this.value.destroy()}catch(a){aD(b.state,a,"CodeMirror plugin crashed")}}}]);return d}();cB.dummy=new
cB(aM.define(function(){return{}}));var
nX=h.define({combine:function(a){return a.reduce(function(a,b){return ci(b,a)},{})}}),mJ=h.define({combine:function(a){return a.reduce(function(a,b){return ci(b,a)},{})}}),bJ=h.define(),dk=h.define(),cu=function(){function
d(a,e,c,f){b(this,d);this.fromA=a;this.toA=e;this.fromB=c;this.toB=f}c(d,[{key:"join",value:function(a){return new
d(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(c){var
a=c.length,b=this;for(;a>0;a--){var
d=c[a-1];if(d.fromA>b.toA)continue;if(d.toA<b.fromA)break;b=b.join(d);c.splice(a-1,1)}c.splice(a,0,b);return c}}],[{key:"extendWithRanges",value:function(f,c){if(c.length==0)return f;var
j=[];for(var
e=0,b=0,m=0,i=0;;e++){var
a=e==f.length?null:f[e],l=m-i,g=a?a.fromB:1e9;while(b<c.length&&c[b]<g){var
o=c[b],n=c[b+1],h=Math.max(i,o),k=Math.min(g,n);if(h<=k)new
d(h+l,k+l,h,k).addToSet(j);if(n>g)break;else
b+=2}if(!a)return j;new
d(a.fromA,a.toA,a.fromB,a.toB).addToSet(j);m=a.toA;i=a.toB}}}]);return d}(),kO=function(){function
e(c,j){var
i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bj;b(this,e);this.view=c;this.state=j;this.transactions=i;this.flags=0;this.startState=c.state;this.changes=X.empty(this.startState.doc.length);var
d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
k=f.value;this.changes=this.changes.compose(k.changes)}}catch(a){d.e(a)}finally{d.f()}var
g=[];this.changes.iterChangedRanges(function(a,c,b,d){return g.push(new
cu(a,c,b,d))});this.changedRanges=g;var
h=c.hasFocus;if(h!=c.inputState.notifiedFocused){c.inputState.notifiedFocused=h;this.flags|=1}if(this.docChanged)this.flags|=2}c(e,[{key:"viewportChanged",get:function(){return(this.flags&4)>0}},{key:"heightChanged",get:function(){return(this.flags&2)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(this.flags&(8|2))>0}},{key:"focusChanged",get:function(){return(this.flags&1)>0}},{key:"docChanged",get:function(){return this.transactions.some(function(a){return a.docChanged})}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return this.flags==0&&this.transactions.length==0}}]);return e}(),jP=function(g){f(d,g);var
h=e(d);function
d(c){var
a;b(this,d);a=h.call(this);a.view=c;a.compositionDeco=s.none;a.decorations=[];a.minWidth=0;a.minWidthFrom=0;a.minWidthTo=0;a.impreciseAnchor=null;a.impreciseHead=null;a.setDOM(c.contentDOM);a.children=[new
be()];a.children[0].setParent(aQ(a));a.updateInner([new
cu(0,0,0,c.state.doc.length)],a.updateDeco(),0);return a}c(d,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(a){var
c=this,b=a.changedRanges;if(this.minWidth>0&&b.length)if(!b.every(function(a){var
b=a.fromA,d=a.toA;return d<c.minWidthFrom||b>c.minWidthTo}))this.minWidth=0;else{this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)}if(this.view.inputState.composing<0)this.compositionDeco=s.none;else
if(a.transactions.length)this.compositionDeco=xd(this.view,a.changes);var
e=(q.ie||q.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines,h=this.decorations,d=this.updateDeco(),g=yo(h,d,a.changes);b=cu.extendWithRanges(b,g);var
f=a.transactions.some(function(a){return a.isUserEvent("select.pointer")});if(this.dirty==0&&b.length==0&&!(a.flags&4)&&a.state.selection.main.from>=this.view.viewport.from&&a.state.selection.main.to<=this.view.viewport.to){this.updateSelection(e,f);return false}else{this.updateInner(b,d,a.startState.doc.length,e,f);return true}}},{key:"reset",value:function(b){var
a=this;if(this.dirty){this.view.observer.ignore(function(){return a.view.docView.sync()});this.dirty=0}if(b)this.updateSelection()}},{key:"updateInner",value:function(i,j,k){var
b=this,g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false,l=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;this.updateChildren(i,j,k);var
d=this.view.observer;d.ignore(function(){b.dom.style.height=b.view.viewState.domHeight+"px";b.dom.style.minWidth=b.minWidth?b.minWidth+"px":"";var
a=q.chrome||q.ios?{node:d.selectionRange.focusNode,written:false}:void
0;b.sync(a);b.dirty=0;if(a&&(a.written||d.selectionRange.focusNode!=a.node))g=true;b.updateSelection(g,l);b.dom.style.height=""});var
h=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var
c=a(this.children),f;try{for(c.s();!(f=c.n()).done;){var
e=f.value;if(e
instanceof
fl&&e.widget
instanceof
ji)h.push(e.dom)}}catch(a){c.e(a)}finally{c.f()}}d.updateGaps(h)}},{key:"updateChildren",value:function(f,j,o){var
g=this.childCursor(o);for(var
c=f.length-1;;c--){var
a=c>=0?f[c]:null;if(!a)break;var
k=a.fromA,r=a.toA,l=a.fromB,s=a.toB,b=tz.build(this.view.state.doc,l,s,j),i=b.content,h=b.breakAtStart,q=b.openStart,p=b.openEnd,d=g.findPos(r,1),t=d.i,u=d.off,e=g.findPos(k,-1),m=e.i,n=e.off;this.replaceRange(m,n,t,u,i,h,q,p)}}},{key:"replaceRange",value:function(c,h,d,g,a,i,k,j){var
b=this.children[c],f=a.length?a[a.length-1]:null,l=f?f.breakAfter:i;if(c==d&&!i&&!l&&a.length<2&&b.merge(h,g,a.length?f:null,h==0,k,j))return;var
e=this.children[d];if(g<e.length){if(c==d){e=e.split(g);g=0}if(!l&&f&&e.merge(0,g,f,true,0,j))a[a.length-1]=e;else{if(g)e.merge(0,g,null,false,0,j);a.push(e)}}else
if(e.breakAfter)if(f)f.breakAfter=1;else
i=1;d++;b.breakAfter=i;if(h>0){if(!i&&a.length&&b.merge(h,b.length,a[0],false,k,0))b.breakAfter=a.shift().breakAfter;else
if(h<b.length||b.children.length&&b.children[b.children.length-1].length==0)b.merge(h,b.length,null,false,k,0);c++}while(c<d&&a.length)if(this.children[d-1].match(a[a.length-1]))d--,a.pop();else
if(this.children[c].match(a[0]))c++,a.shift();else
break;if(c<d||a.length)this.replaceChildren(c,d,a)}},{key:"updateSelection",value:function(){var
f=this,g=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!(h||this.mayControlSelection())||q.ios&&this.view.inputState.rapidCompositionStart)return;var
d=this.view.state.selection.main,a=this.domAtPos(d.anchor),c=d.empty?a:this.domAtPos(d.head);if(q.gecko&&d.empty&&wx(a)){var
e=document.createTextNode("");this.view.observer.ignore(function(){return a.node.insertBefore(e,a.node.childNodes[a.offset]||null)});a=c=new
av(e,0);g=true}var
b=this.view.observer.selectionRange;if(g||!b.focusNode||!eQ(a.node,a.offset,b.anchorNode,b.anchorOffset)||!eQ(c.node,c.offset,b.focusNode,b.focusOffset)){this.view.observer.ignore(function(){if(q.android&&q.chrome&&f.dom.contains(b.focusNode)&&zF(b.focusNode,f.dom)){f.dom.blur();f.dom.focus({preventScroll:true})}var
e=eD(f.root);if(d.empty){if(q.gecko){var
g=A_(a.node,a.offset);if(g&&g!=(1|2)){var
h=qF(a.node,a.offset,g==1?1:-1);if(h)a=new
av(h,g==1?0:h.nodeValue.length)}}e.collapse(a.node,a.offset);if(d.bidiLevel!=null&&b.cursorBidiLevel!=null)b.cursorBidiLevel=d.bidiLevel}else
if(e.extend){e.collapse(a.node,a.offset);e.extend(c.node,c.offset)}else{var
i=document.createRange();if(d.anchor>d.head){var
j=[c,a];a=j[0];c=j[1]}i.setEnd(c.node,c.offset);i.setStart(a.node,a.offset);e.removeAllRanges();e.addRange(i)}});this.view.observer.setSelectionRange(a,c)}this.impreciseAnchor=a.precise?null:new
av(b.anchorNode,b.anchorOffset);this.impreciseHead=c.precise?null:new
av(b.focusNode,b.focusOffset)}},{key:"enforceCursorAssoc",value:function(){if(this.view.composing)return;var
a=this.view.state.selection.main,c=eD(this.root);if(!a.empty||!a.assoc||!c.modify)return;var
b=be.find(this,a.head);if(!b)return;var
g=b.posAtStart;if(a.head==g||a.head==g+b.length)return;var
e=this.coordsAt(a.head,-1),d=this.coordsAt(a.head,1);if(!e||!d||e.bottom>d.top)return;var
f=this.domAtPos(a.head+a.assoc);c.collapse(f.node,f.offset);c.modify("move",a.assoc<0?"forward":"backward","lineboundary")}},{key:"mayControlSelection",value:function(){return this.view.state.facet(c0)?this.root.activeElement==this.dom:hR(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(c){for(var
a=c;a;){var
b=al.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}},{key:"posFromDOM",value:function(b,c){var
a=this.nearest(b);if(!a)throw new
RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(b,c)+a.posAtStart}},{key:"domAtPos",value:function(e){var
c=this.childCursor().findPos(e,-1),a=c.i,b=c.off;for(;a<this.children.length-1;){var
d=this.children[a];if(b<d.length||d
instanceof
be)break;a++;b=0}return this.children[a].domAtPos(b)}},{key:"coordsAt",value:function(d,e){for(var
f=this.length,a=this.children.length-1;;a--){var
b=this.children[a],c=f-b.breakAfter-b.length;if(d>c||d==c&&b.type!=H.WidgetBefore&&b.type!=H.WidgetAfter&&(!a||e==2||this.children[a-1].breakAfter||this.children[a-1].type==H.WidgetBefore&&e>-2))return b.coordsAt(d-c,e);f=c}}},{key:"measureVisibleLineHeights",value:function(){var
g=[],e=this.view.viewState.viewport,i=e.from,j=e.to,f=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(var
b=0,c=0;c<this.children.length;c++){var
a=this.children[c],d=b+a.length;if(d>j)break;if(b>=i){g.push(a.dom.getBoundingClientRect().height);var
h=a.dom.scrollWidth;if(h>f){this.minWidth=f=h;this.minWidthFrom=b;this.minWidthTo=d}}b=d+a.breakAfter}return g}},{key:"measureTextSize",value:function(){var
i=this,c=a(this.children),d;try{for(c.s();!(d=c.n()).done;){var
f=d.value;if(f
instanceof
be){var
h=f.measureTextSize();if(h)return h}}}catch(a){c.e(a)}finally{c.f()}var
b=document.createElement("div"),g,e;b.className="cm-line";b.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){i.dom.appendChild(b);var
a=cU(b.firstChild)[0];g=b.getBoundingClientRect().height;e=a?a.width/27:7;b.remove()});return{lineHeight:g,charWidth:e}}},{key:"childCursor",value:function(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length,a=this.children.length;if(a)b-=this.children[--a].length;return new
jv(this.children,b,a)}},{key:"computeBlockGapDeco",value:function(){var
f=[],c=this.view.viewState;for(var
b=0,d=0;;d++){var
a=d==c.viewports.length?null:c.viewports[d],e=a?a.from-1:this.length;if(e>b){var
g=c.lineAt(e,0).bottom-c.lineAt(b,0).top;f.push(s.replace({widget:new
ji(g),block:true,inclusive:true}).range(b,e))}if(!a)break;b=a.to+1}return s.set(f)}},{key:"updateDeco",value:function(){return this.decorations=[].concat(P(this.view.pluginField(aJ.decorations)),P(this.view.state.facet(bJ)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(k){var
b=k.range,q=k.center,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(!c)return;if(!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1)))c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)};var
h=0,i=0,j=0,g=0,f=a(this.view.pluginField(aJ.scrollMargins)),l;try{for(f.s();!(l=f.n()).done;){var
d=l.value;if(d){var
n=d.left,o=d.right,p=d.top,m=d.bottom;if(n!=null)h=Math.max(h,n);if(o!=null)i=Math.max(i,o);if(p!=null)j=Math.max(j,p);if(m!=null)g=Math.max(g,m)}}}catch(a){f.e(a)}finally{f.f()}B4(this.view.scrollDOM,{left:c.left-h,top:c.top-j,right:c.right+i,bottom:c.bottom+g},b.head<b.anchor?-1:1,q)}}]);return d}(al);function
wx(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}var
ji=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.height=d;return c}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("div");this.updateDOM(a);return a}},{key:"eq",value:function(a){return a.height==this.height}},{key:"updateDOM",value:function(a){a.style.height=this.height+"px";return true}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(bv);function
xd(l,m){var
j=l.observer.selectionRange,g=j.focusNode&&qF(j.focusNode,j.focusOffset,0);if(!g)return s.none;var
a=l.docView.nearest(g),h,k,f=g;if(a
instanceof
bF){while(a.parent
instanceof
bF)a=a.parent;h=a.posAtStart;k=h+a.length;f=a.dom}else
if(a
instanceof
be){while(f.parentNode!=a.dom)f=f.parentNode;var
e=f.previousSibling;while(e&&!al.get(e))e=e.previousSibling;h=k=e?al.get(e).posAtEnd:a.posAtStart}else
return s.none;var
b=m.mapPos(h,1),d=Math.max(b,m.mapPos(k,-1)),c=g.nodeValue,i=l.state;if(d-b<c.length)if(i.sliceDoc(b,Math.min(i.doc.length,b+c.length))==c)d=b+c.length;else
if(i.sliceDoc(Math.max(0,d-c.length),d)==c)b=d-c.length;else
return s.none;else
if(i.sliceDoc(b,d)!=c)return s.none;return s.set(s.replace({widget:new
tu(f,g)}).range(b,d))}var
tu=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.top=e;c.text=d;return c}c(a,[{key:"eq",value:function(a){return this.top==a.top&&this.text==a.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return false}},{key:"customView",get:function(){return tp}}]);return a}(bv);function
qF(a,b,c){for(;;){if(a.nodeType==3)return a;if(a.nodeType==1&&b>0&&c<=0){a=a.childNodes[b-1];b=eY(a)}else
if(a.nodeType==1&&b<a.childNodes.length&&c>=0){a=a.childNodes[b];b=0}else
return null}}function
A_(a,b){if(a.nodeType!=1)return 0;return(b&&a.childNodes[b-1].contentEditable=="false"?1:0)|(b<a.childNodes.length&&a.childNodes[b].contentEditable=="false"?2:0)}var
tQ=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(a,b){gv(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){gv(a,b,this.changes)}}]);return a}();function
yo(b,c,d){var
a=new
tQ();k.compare(b,c,d,a);return a.changes}function
zF(c,b){for(var
a=c;a&&a!=b;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return true;return false}var
ah=function(a){a[a["LTR"]=0]="LTR";a[a["RTL"]=1]="RTL";return a}(ah||(ah={})),fB=ah.LTR,vd=ah.RTL;function
ng(c){var
b=[];for(var
a=0;a<c.length;a++)b.push(1<<+c[a]);return b}var
uw=ng("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sY=ng("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fq=Object.create(null),aZ=[];for(var
gp=0,kZ=["()","[]","{}"];gp<kZ.length;gp++){var
qS=kZ[gp],pA=qS.charCodeAt(0),q$=qS.charCodeAt(1);fq[pA]=q$;fq[q$]=-pA}function
w3(a){return a<=247?uw[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?sY[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8203?256:a==8204?256:1}var
s8=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,bX=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.level=d}c(a,[{key:"dir",get:function(){return this.level%2?vd:fB}},{key:"side",value:function(b,a){return this.dir==a==b?this.to:this.from}}],[{key:"find",value:function(e,d,g,f){var
c=-1;for(var
b=0;b<e.length;b++){var
a=e[b];if(a.from<=d&&a.to>=d){if(a.level==g)return b;if(c<0||(f!=0?f<0?a.from<d:a.to>d:e[c].level>a.level))c=b}}if(c<0)throw new
RangeError("Index out of range");return c}}]);return a}(),K=[];function
xi(q,G){var
a=q.length,c=G==fB?1:2,R=G==fB?2:1;if(!q||c==1&&!s8.test(q))return sr(a);for(var
r=0,I=c,J=c;r<a;r++){var
d=w3(q.charCodeAt(r));if(d==512)d=I;else
if(d==8&&J==4)d=16;K[r]=d==4?2:d;if(d&7)J=d;I=d}for(var
b=0,o=c,u=c;b<a;b++){var
j=K[b];if(j==128)if(b<a-1&&o==K[b+1]&&o&24)j=K[b]=o;else
K[b]=256;else
if(j==64){var
k=b+1;while(k<a&&K[k]==64)k++;var
S=b&&o==8||k<a&&K[k]==8?u==1?1:8:256;for(var
y=b;y<k;y++)K[y]=S;b=k-1}else
if(j==8&&u==1)K[b]=1;o=j;if(j&7)u=j}for(var
l=0,m=0,E=0,D,w,v;l<a;l++)if(w=fq[D=q.charCodeAt(l)])if(w<0){for(var
n=m-3;n>=0;n-=3)if(aZ[n+1]==-w){var
x=aZ[n+2],M=x&2?c:!(x&4)?0:x&1?R:c;if(M)K[l]=K[aZ[n]]=M;m=n;break}}else
if(aZ.length==189)break;else{aZ[m++]=l;aZ[m++]=D;aZ[m++]=E}else
if((v=K[l])==2||v==1){var
H=v==c;E=H?0:1;for(var
p=m-3;p>=0;p-=3){var
F=aZ[p+2];if(F&2)break;if(H)aZ[p+2]|=2;else{if(F&4)break;aZ[p+2]|=4}}}for(var
e=0;e<a;e++)if(K[e]==256){var
g=e+1;while(g<a&&K[g]==256)g++;var
C=(e?K[e-1]:c)==1,Q=(g<a?K[g]:c)==1,O=C==Q?C?1:2:c;for(var
t=e;t<g;t++)K[t]=O;e=g-1}var
s=[];if(c==1)for(var
f=0;f<a;){var
z=f,L=K[f++]!=1;while(f<a&&L==(K[f]!=1))f++;if(L)for(var
i=f;i>z;){var
N=i,A=K[--i]!=2;while(i>z&&A==(K[i-1]!=2))i--;s.push(new
bX(i,N,A?2:1))}else
s.push(new
bX(z,f,0))}else
for(var
h=0;h<a;){var
P=h,B=K[h++]==2;while(h<a&&B==(K[h]==2))h++;s.push(new
bX(P,h,B?1:2))}return s}function
sr(a){return[new
bX(0,a,0)]}var
qA="";function
AW(c,e,b,l,a){var
k,f=l.head-c.from,h=-1;if(f==0){if(!a||!c.length)return null;if(e[0].level!=b){f=e[0].side(false,b);h=0}}else
if(f==c.length){if(a)return null;var
n=e[e.length-1];if(n.level!=b){f=n.side(true,b);h=e.length-1}}if(h<0)h=bX.find(e,f,(k=l.bidiLevel)!==null&&k!==void
0?k:-1,l.assoc);var
g=e[h];if(f==g.side(a,b)){g=e[h+=a?1:-1];f=g.side(!a,b)}var
m=a==(g.dir==b),i=x(c.text,f,m);qA=c.text.slice(Math.min(f,i),Math.max(f,i));if(i!=g.side(a,b))return d.cursor(i+c.from,m?-1:1,g.level);var
j=h==(a?e.length-1:0)?null:e[h+(a?1:-1)];if(!j&&g.level!=b)return d.cursor(a?c.to:c.from,a?-1:1,b);if(j&&j.level<g.level)return d.cursor(j.side(!a,b)+c.from,a?1:-1,j.level);return d.cursor(i+c.from,a?-1:1,g.level)}function
y9(l,f){var
g=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,h=l.charCategorizer(f),a=l.doc.lineAt(f),e=f-a.from;if(a.length==0)return d.cursor(f);if(e==0)g=1;else
if(e==a.length)g=-1;var
b=e,c=e;if(g<0)b=x(a.text,e,false);else
c=x(a.text,e);var
i=h(a.text.slice(b,c));while(b>0){var
k=x(a.text,b,false);if(h(a.text.slice(k,b))!=i)break;b=k}while(c<a.length){var
j=x(a.text,c);if(h(a.text.slice(c,j))!=i)break;c=j}return d.range(b+a.from,c+a.from)}function
yY(b,a){return a.left>b?a.left-b:Math.max(0,b-a.right)}function
y3(b,a){return a.top>b?a.top-b:Math.max(0,b-a.bottom)}function
i9(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function
sD(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function
sy(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function
hs(k,h,g){var
f,b,m,n,o,p,c,d;for(var
e=k.firstChild;e;e=e.nextSibling){var
r=cU(e);for(var
l=0;l<r.length;l++){var
a=r[l];if(b&&i9(b,a))a=sD(sy(a,b.bottom),b.top);var
i=yY(h,a),j=y3(g,a);if(i==0&&j==0)return e.nodeType==3?nI(e,h,g):hs(e,h,g);if(!f||n>j||n==j&&m>i){f=e;b=a;m=i;n=j}if(i==0){if(g>a.bottom&&(!c||c.bottom<a.bottom)){o=e;c=a}else
if(g<a.top&&(!d||d.top>a.top)){p=e;d=a}}else
if(c&&i9(c,a))c=sy(c,a.bottom);else
if(d&&i9(d,a))d=sD(d,a.top)}}if(c&&c.bottom>=g){f=o;b=c}else
if(d&&d.top<=g){f=p;b=d}if(!f)return{node:k,offset:0};var
q=Math.max(b.left,Math.min(b.right,h));if(f.nodeType==3)return nI(f,q,g);if(!m&&f.contentEditable=="true")return hs(f,q,g);var
s=Array.prototype.indexOf.call(k.childNodes,f)+(h>=(b.left+b.right)/2?1:0);return{node:k,offset:s}}function
nI(c,d,j){var
n=c.nodeValue.length,f=-1,k=1e9,h=0;for(var
b=0;b<n;b++){var
l=dq(c,b,b+1).getClientRects();for(var
i=0;i<l.length;i++){var
a=l[i];if(a.top==a.bottom)continue;if(!h)h=d-a.left;var
g=(a.top>j?a.top-j:j-a.bottom)-1;if(a.left-1<=d&&a.right+1>=d&&g<k){var
m=d>=(a.left+a.right)/2,e=m;if(q.chrome||q.gecko){var
o=dq(c,b).getBoundingClientRect();if(o.left==a.right)e=!m}if(g<=0)return{node:c,offset:b+(e?1:0)};f=b+(e?1:0);k=g}}}return{node:c,offset:f>-1?f:h>0?c.nodeValue.length:0}}function
lt(a,p,u){var
d=p.x,b=p.y,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1,j,f=a.contentDOM.getBoundingClientRect(),c,i=a.defaultLineHeight/2;for(var
s=false;;){c=a.blockAtHeight(b,f.top);if(c.top>b||c.bottom<b){r=c.top>b?-1:1;b=Math.min(c.bottom-i,Math.max(c.top+i,b));if(s)return u?null:0;else
s=true}if(c.type==H.Text)break;b=r>0?c.bottom+i:c.top-i}var
l=c.from;d=Math.max(f.left+1,Math.min(f.right-1,d));if(l<a.viewport.from)return a.viewport.from==0?0:q0(a,f,c,d,b);if(l>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:q0(a,f,c,d,b);var
g=a.dom.ownerDocument,k=(a.root.elementFromPoint?a.root:g).elementFromPoint(d,b),e,h=-1;if(k&&a.contentDOM.contains(k)&&((j=a.docView.nearest(k))===null||j===void
0?void
0:j.isEditable)!=false)if(g.caretPositionFromPoint){var
m=g.caretPositionFromPoint(d,b);if(m){e=m.offsetNode;h=m.offset}}else
if(g.caretRangeFromPoint){var
n=g.caretRangeFromPoint(d,b);if(n){e=n.startContainer;h=n.startOffset;if(q.safari&&z8(e,h,d))e=void
0}}if(!e||!a.docView.dom.contains(e)){var
t=be.find(a.docView,l),o=hs(t.dom,d,b);e=o.node;h=o.offset}return a.docView.posFromDOM(e,h)}function
q0(a,e,b,g,h){var
c=Math.round((g-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&b.height>a.defaultLineHeight*1.5){var
f=Math.floor((h-b.top)/a.defaultLineHeight);c+=f*a.viewState.heightOracle.lineLength}var
d=a.state.sliceDoc(b.from,b.to);return b.from+bO(d,c,a.state.tabSize)}function
z8(b,d,e){var
c;if(b.nodeType!=3||d!=(c=b.nodeValue.length))return false;for(var
a=b.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return false;return dq(b,c-1,c).getBoundingClientRect().left>e}function
vM(a,b,c,k){var
f=a.state.doc.lineAt(b.head),e=!k||!a.lineWrapping?null:a.coordsAtPos(b.assoc<0&&b.head>f.from?b.head-1:b.head);if(e){var
h=a.dom.getBoundingClientRect(),i=a.posAtCoords({x:c==(a.textDirection==ah.LTR)?h.right-1:h.left+1,y:(e.top+e.bottom)/2});if(i!=null)return d.cursor(i,c?-1:1)}var
g=be.find(a.docView,b.head),j=g?c?g.posAtEnd:g.posAtStart:c?f.to:f.from;return d.cursor(j,c?-1:1)}function
lh(b,k,e,i){var
a=b.state.doc.lineAt(k.head),j=b.bidiSpans(a);for(var
c=k,h=null;;){var
f=AW(a,j,b.textDirection,c,e),g=qA;if(!f){if(a.number==(e?b.state.doc.lines:1))return c;g="\n";a=b.state.doc.line(a.number+(e?1:-1));j=b.bidiSpans(a);f=d.cursor(e?a.from:a.to)}if(!h){if(!i)return f;h=i(g)}else
if(!h(g))return c;c=f}}function
wK(e,b,d){var
c=e.state.charCategorizer(b),a=c(d);return function(d){var
b=c(d);if(a==ak.Space)a=b;return a==b}}function
vN(a,o,n,i){var
b=o.head,f=n?1:-1;if(b==(n?a.state.doc.length:0))return d.cursor(b);var
c=o.goalColumn,l,e=a.contentDOM.getBoundingClientRect(),g=a.coordsAtPos(b);if(g){if(c==null)c=g.left-e.left;l=f<0?g.top:g.bottom}else{var
j=a.viewState.lineAt(b,a.dom.getBoundingClientRect().top);if(c==null)c=Math.min(e.right-e.left,a.defaultCharacterWidth*(b-j.from));l=f<0?j.top:j.bottom}var
q=e.left+c,p=i!==null&&i!==void
0?i:a.defaultLineHeight>>1;for(var
m=0;;m+=10){var
h=l+(p+m)*f,k=lt(a,{x:q,y:h},false,f);if(h<e.top||h>e.bottom||(f<0?k<b:k>b))return d.cursor(k,void
0,void
0,c)}}function
iE(j,h,b){var
g=j.pluginField(aJ.atomicRanges);for(;;){var
f=false,c=a(g),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;i.between(b.from-1,b.from+1,function(a,c,e){if(b.from>a&&b.from<c){b=h.from>b.from?d.cursor(a,1):d.cursor(c,-1);f=true}})}}catch(a){c.e(a)}finally{c.f()}if(!f)return b}}var
uk=function(){function
e(a){var
d=this;b(this,e);this.lastKeyCode=0;this.lastKeyTime=0;this.pendingAndroidKey=void
0;this.pendingIOSKey=void
0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var
c=function(c){var
e=ab[c];a.contentDOM.addEventListener(c,function(b){if(c=="keydown"&&d.keydown(a,b))return;if(!n4(a,b)||d.ignoreDuringComposition(b))return;if(d.mustFlushObserver(b))a.observer.forceFlush();if(d.runCustomHandlers(c,a,b))b.preventDefault();else
e(a,b)});d.registeredEvents.push(c)};for(var
f
in
ab)c(f);this.notifiedFocused=a.hasFocus;this.ensureHandlers(a);if(q.safari)a.contentDOM.addEventListener("input",function(){return null})}c(e,[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var
d=this,g=this.customHandlers=c.pluginField(nD),b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,f=function(a){if(d.registeredEvents.indexOf(a)<0&&a!="scroll"){d.registeredEvents.push(a);c.contentDOM.addEventListener(a,function(b){if(!n4(c,b))return;if(d.runCustomHandlers(a,c,b))b.preventDefault()})}};for(var
i
in
h.handlers)f(i)}}catch(a){b.e(a)}finally{b.f()}}},{key:"runCustomHandlers",value:function(i,d,c){var
b=a(this.customHandlers),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,g=h.handlers[i],f=false;if(g){try{f=g.call(h.plugin,c,d)}catch(a){aD(d.state,a)}if(f||c.defaultPrevented){if(q.android&&i=="keydown"&&c.keyCode==13)d.observer.flushSoon();return true}}}}catch(a){b.e(a)}finally{b.f()}return false}},{key:"runScrollHandlers",value:function(f,g){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value,d=e.handlers.scroll;if(d)try{d.call(e.plugin,g,f)}catch(a){aD(f.state,a)}}}catch(a){b.e(a)}finally{b.f()}}},{key:"keydown",value:function(c,a){var
d=this;this.lastKeyCode=a.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(c,a))return true;var
b;if(q.ios&&(b=kp.find(function(b){return b.keyCode==a.keyCode}))&&!(a.ctrlKey||a.altKey||a.metaKey)&&!a.synthetic){this.pendingIOSKey=b;setTimeout(function(){return d.flushIOSKey(c)},250);return true}return false}},{key:"flushIOSKey",value:function(b){var
a=this.pendingIOSKey;if(!a)return false;this.pendingIOSKey=void
0;return ns(b.contentDOM,a.key,a.keyCode)}},{key:"setPendingAndroidKey",value:function(a,b){var
c=this;this.pendingAndroidKey=b;requestAnimationFrame(function(){var
b=c.pendingAndroidKey;if(!b)return;c.pendingAndroidKey=void
0;a.observer.processRecords();var
d=a.state;ns(a.contentDOM,b.key,b.keyCode);if(a.state==d)a.docView.reset(true)})}},{key:"ignoreDuringComposition",value:function(a){if(!/^key/.test(a.type))return false;if(this.composing>0)return true;if(q.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false}},{key:"screenKeyEvent",value:function(c,a){var
b=a.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(a.keyCode==27)this.lastEscPress=Date.now();else
if(qm.indexOf(a.keyCode)<0)this.lastEscPress=0;return b}},{key:"mustFlushObserver",value:function(a){return a.type=="keydown"&&a.keyCode!=229||a.type=="compositionend"&&!q.ios}},{key:"startMouseSelection",value:function(c,a,b){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=new
uV(this,c,a,b)}},{key:"update",value:function(a){if(this.mouseSelection)this.mouseSelection.update(a);if(a.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){if(this.mouseSelection)this.mouseSelection.destroy()}}]);return e}(),kp=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qm=[16,17,18,20,91,92,224,225],uV=function(){function
d(f,c,a,g){b(this,d);this.inputState=f;this.view=c;this.style=g;this.lastEvent=a;var
e=c.contentDOM.ownerDocument;e.addEventListener("mousemove",this.move=this.move.bind(this));e.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=a.shiftKey;this.multiple=c.state.facet(u.allowMultipleSelections)&&v4(c,a);this.dragMove=x1(c,a);this.dragging=z0(c,a)?null:false;if(this.dragging===false){a.preventDefault();this.select(a)}}c(d,[{key:"move",value:function(a){if(a.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=a)}},{key:"up",value:function(a){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var
a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.inputState.mouseSelection=null}},{key:"select",value:function(b){var
a=this.style.get(b,this.extend,this.multiple);if(!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:true})}},{key:"update",value:function(a){var
b=this;if(a.docChanged&&this.dragging)this.dragging=this.dragging.map(a.changes);if(this.style.update(a))setTimeout(function(){return b.select(b.lastEvent)},20)}}]);return d}();function
v4(c,a){var
b=c.state.facet(mp);return b.length?b[0](a):q.mac?a.metaKey:a.ctrlKey}function
x1(c,a){var
b=c.state.facet(nN);return b.length?b[0](a):q.mac?!a.altKey:!a.ctrlKey}function
z0(f,a){var
g=f.state.selection.main;if(g.empty)return false;var
e=eD(f.root);if(e.rangeCount==0)return true;var
d=e.getRangeAt(0).getClientRects();for(var
c=0;c<d.length;c++){var
b=d[c];if(b.left<=a.clientX&&b.right>=a.clientX&&b.top<=a.clientY&&b.bottom>=a.clientY)return true}return false}function
n4(d,b){if(!b.bubbles)return true;if(b.defaultPrevented)return false;for(var
a=b.target,c;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(c=al.get(a))&&c.ignoreEvent(b))return false;return true}var
ab=Object.create(null),l9=q.ie&&q.ie_version<15||q.ios&&q.webkit_version<604;function
wU(b){var
c=b.dom.parentNode;if(!c)return;var
a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){b.focus();a.remove();ny(b,a.value)},50)}function
ny(e,i){var
a=e.state,c,h=1,b=a.toText(i),g=b.lines==a.selection.ranges.length,f=h9!=null&&a.selection.ranges.every(function(a){return a.empty})&&h9==b.toString();if(f){var
j=-1;c=a.changeByRange(function(e){var
c=a.doc.lineAt(e.from);if(c.from==j)return{range:e};j=c.from;var
f=a.toText((g?b.line(h++).text:i)+a.lineBreak);return{changes:{from:c.from,insert:f},range:d.cursor(e.from+f.length)}})}else
if(g)c=a.changeByRange(function(a){var
c=b.line(h++);return{changes:{from:a.from,to:a.to,insert:c.text},range:d.cursor(a.from+c.length)}});else
c=a.replaceSelection(b);e.dispatch(c,{userEvent:"input.paste",scrollIntoView:true})}ab.keydown=function(a,b){a.inputState.setSelectionOrigin("select")};var
pS=0;ab.touchstart=function(a,b){pS=Date.now();a.inputState.setSelectionOrigin("select.pointer")};ab.touchmove=function(a){a.inputState.setSelectionOrigin("select.pointer")};ab.mousedown=function(b,e){b.observer.flush();if(pS>Date.now()-2e3)return;var
c=null,d=a(b.state.facet(qo)),f;try{for(d.s();!(f=d.n()).done;){var
g=f.value;c=g(b,e);if(c)break}}catch(a){d.e(a)}finally{d.f()}if(!c&&e.button==0)c=wr(b,e);if(c){if(b.root.activeElement!=b.contentDOM)b.observer.ignore(function(){return op(b.contentDOM)});b.inputState.startMouseSelection(b,e,c)}};function
rb(e,b,g,h){if(h==1)return d.cursor(b,g);else
if(h==2)return y9(e.state,b,g);else{var
a=be.find(e.docView,b),f=e.state.doc.lineAt(a?a.posAtEnd:b),i=a?a.posAtStart:f.from,c=a?a.posAtEnd:f.to;if(c<e.state.doc.length&&c==f.to)c++;return d.range(i,c)}}var
pd=function(b,a){return b>=a.top&&b<=a.bottom},o_=function(b,c,a){return pd(c,a)&&b>=a.left&&b<=a.right};function
yz(h,f,g,d){var
a=be.find(h.docView,f);if(!a)return 1;var
c=f-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;var
b=a.coordsAt(c,-1);if(b&&o_(g,d,b))return-1;var
e=a.coordsAt(c,1);if(e&&o_(g,d,e))return 1;return b&&pd(d,b)?-1:1}function
q6(c,a){var
b=c.posAtCoords({x:a.clientX,y:a.clientY},false);return{pos:b,bias:yz(c,b,a.clientX,a.clientY)}}var
s3=q.ie&&q.ie_version<=11,pD=null,pI=0,pN=0;function
yR(a){if(!s3)return a.detail;var
b=pD,c=pN;pD=a;pN=Date.now();return pI=!b||c>Date.now()-400&&Math.abs(b.clientX-a.clientX)<2&&Math.abs(b.clientY-a.clientY)<2?(pI+1)%3:1}function
wr(g,a){var
b=q6(g,a),n=yR(a),e=g.state.selection,m=b,f=a;return{update:function(a){if(a.changes){if(b)b.pos=a.changes.mapPos(b.pos);e=e.map(a.changes);f=null}},get:function(h,j,o){var
c;if(f&&h.clientX==f.clientX&&h.clientY==f.clientY)c=m;else{c=m=q6(g,h);f=h}if(!c||!b)return e;var
a=rb(g,c.pos,c.bias,n);if(b.pos!=c.pos&&!j){var
k=rb(g,b.pos,b.bias,n),i=Math.min(k.from,a.from),l=Math.max(k.to,a.to);a=i<a.from?d.range(i,l):d.range(l,i)}if(j)return e.replaceRange(e.main.extend(a.from,a.to));else
if(o)return e.addRange(a);else
return d.create([a])}}}ab.dragstart=function(c,a){var
b=c.state.selection.main,d=c.inputState.mouseSelection;if(d)d.dragging=b;if(a.dataTransfer){a.dataTransfer.setData("Text",c.state.sliceDoc(b.from,b.to));a.dataTransfer.effectAllowed="copyMove"}};function
nS(b,f,h,i){var
c=b.posAtCoords({x:f.clientX,y:f.clientY});if(c==null||!h)return;f.preventDefault();var
a=b.inputState.mouseSelection,e=i&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,g={from:c,insert:h},d=b.state.changes(e?[e,g]:g);b.focus();b.dispatch({changes:d,selection:{anchor:d.mapPos(c,-1),head:d.mapPos(c,1)},userEvent:e?"move.drop":"input.drop"})}ab.drop=function(c,a){if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();var
b=a.dataTransfer.files;if(b&&b.length)(function(){a.preventDefault();var
f=Array(b.length),h=0,e=function(){if(++h==b.length)nS(c,a,f.filter(function(a){return a!=null}).join(c.state.lineBreak),false)},g=function(c){var
a=new
FileReader();a.onerror=e;a.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(a.result))f[c]=a.result;e()};a.readAsText(b[c])};for(var
d=0;d<b.length;d++)g(d)}());else
nS(c,a,a.dataTransfer.getData("Text"),true)};ab.paste=function(a,b){if(a.state.readOnly)return b.preventDefault();a.observer.flush();var
c=l9?null:b.clipboardData;if(c){ny(a,c.getData("text/plain"));b.preventDefault()}else
wU(a)};function
wP(d,c){var
b=d.dom.parentNode;if(!b)return;var
a=b.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.value=c;a.focus();a.selectionEnd=c.length;a.selectionStart=0;setTimeout(function(){a.remove();d.focus()},50)}function
xn(b){var
f=[],h=[],k=false,d=a(b.selection.ranges),i;try{for(d.s();!(i=d.n()).done;){var
g=i.value;if(!g.empty){f.push(b.sliceDoc(g.from,g.to));h.push(g)}}}catch(a){d.e(a)}finally{d.f()}if(!f.length){var
l=-1,e=a(b.selection.ranges),j;try{for(e.s();!(j=e.n()).done;){var
m=j.value.from,c=b.doc.lineAt(m);if(c.number>l){f.push(c.text);h.push({from:c.from,to:Math.min(b.doc.length,c.to+1)})}l=c.number}}catch(a){e.e(a)}finally{e.f()}k=true}return{text:f.join(b.lineBreak),ranges:h,linewise:k}}var
h9=null;ab.copy=ab.cut=function(b,e){var
c=xn(b.state),a=c.text,g=c.ranges,f=c.linewise;if(!a&&!f)return;h9=f?a:null;var
d=l9?null:e.clipboardData;if(d){e.preventDefault();d.clearData();d.setData("text/plain",a)}else
wP(b,a);if(e.type=="cut"&&!b.state.readOnly)b.dispatch({changes:g,scrollIntoView:true,userEvent:"delete.cut"})};ab.focus=ab.blur=function(a){setTimeout(function(){if(a.hasFocus!=a.inputState.notifiedFocused)a.update([])},10)};ab.beforeprint=function(a){a.viewState.printing=true;a.requestMeasure();setTimeout(function(){a.viewState.printing=false;a.requestMeasure()},2e3)};function
ov(a,b){if(a.docView.compositionDeco.size){a.inputState.rapidCompositionStart=b;try{a.update([])}finally{a.inputState.rapidCompositionStart=false}}}ab.compositionstart=ab.compositionupdate=function(a){if(a.inputState.compositionFirstChange==null)a.inputState.compositionFirstChange=true;if(a.inputState.composing<0){if(a.docView.compositionDeco.size){a.observer.flush();ov(a,true)}a.inputState.composing=0}};ab.compositionend=function(a){a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionFirstChange=null;setTimeout(function(){if(a.inputState.composing<0)ov(a,false)},50)};ab.contextmenu=function(a){a.inputState.lastContextMenu=Date.now()};ab.beforeinput=function(a,d){var
c,b;if(q.chrome&&q.android&&(b=kp.find(function(a){return a.inputType==d.inputType}))){a.inputState.setPendingAndroidKey(a,b);if(b.key=="Backspace"||b.key=="Delete"){var
e=((c=window.visualViewport)===null||c===void
0?void
0:c.height)||0;setTimeout(function(){var
b;if((((b=window.visualViewport)===null||b===void
0?void
0:b.height)||0)>e+10&&a.hasFocus){a.contentDOM.blur();a.focus()}},100)}}};var
sR=["pre-wrap","normal","pre-line"],uc=function(){function
a(){b(this,a);this.doc=p.empty;this.lineWrapping=false;this.direction=ah.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}c(a,[{key:"heightForGap",value:function(b,c){var
a=this.doc.lineAt(c).number-this.doc.lineAt(b).number+1;if(this.lineWrapping)a+=Math.ceil((c-b-a*this.lineLength*0.5)/this.lineLength);return this.lineHeight*a}},{key:"heightForLine",value:function(a){if(!this.lineWrapping)return this.lineHeight;var
b=1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5)));return b*this.lineHeight}},{key:"setDoc",value:function(a){this.doc=a;return this}},{key:"mustRefresh",value:function(c,f,e){var
d=false;for(var
a=0;a<c.length;a++){var
b=c[a];if(b<0)a++;else
if(!this.heightSamples[Math.floor(b*10)]){d=true;this.heightSamples[Math.floor(b*10)]=true}}return d||sR.indexOf(f)>-1!=this.lineWrapping||this.direction!=e}},{key:"refresh",value:function(j,c,f,h,i,e){var
g=sR.indexOf(j)>-1,b=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=g||this.direction!=c;this.lineWrapping=g;this.direction=c;this.lineHeight=f;this.charWidth=h;this.lineLength=i;if(b){this.heightSamples={};for(var
a=0;a<e.length;a++){var
d=e[a];if(d<0)a++;else
this.heightSamples[Math.floor(d*10)]=true}}return b}}]);return a}(),uP=function(){function
a(c,d){b(this,a);this.from=c;this.heights=d;this.index=0}c(a,[{key:"more",get:function(){return this.index<this.heights.length}}]);return a}(),b2=function(){function
d(a,e,f,c,g){b(this,d);this.from=a;this.length=e;this.top=f;this.height=c;this.type=g}c(d,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(a){var
b=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new
d(this.from,this.length+a.length,this.top,this.height+a.height,b)}}]);return d}(),C=function(a){a[a["ByPos"]=0]="ByPos";a[a["ByHeight"]=1]="ByHeight";a[a["ByPosNoHeight"]=2]="ByPosNoHeight";return a}(C||(C={})),t4=1e-4,a5=function(){function
f(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;b(this,f);this.length=d;this.height=c;this.flags=a}c(f,[{key:"outdated",get:function(){return(this.flags&2)>0},set:function(a){this.flags=(a?2:0)|this.flags&~2}},{key:"setHeight",value:function(b,a){if(this.height!=a){if(Math.abs(this.height-a)>t4)b.heightChanged=true;this.height=a}}},{key:"replace",value:function(b,c,a){return f.of(a)}},{key:"decomposeLeft",value:function(b,a){a.push(this)}},{key:"decomposeRight",value:function(b,a){a.push(this)}},{key:"applyChanges",value:function(m,i,k,e){var
d=this;for(var
a=e.length-1;a>=0;a--){var
g=e[a],b=g.fromA,f=g.toA,h=g.fromB,l=g.toB,c=d.lineAt(b,C.ByPosNoHeight,i,0,0),j=c.to>=f?c:d.lineAt(f,C.ByPosNoHeight,i,0,0);l+=j.to-f;f=j.to;while(a>0&&c.from<=e[a-1].toA){b=e[a-1].fromA;h=e[a-1].fromB;a--;if(b<c.from)c=d.lineAt(b,C.ByPosNoHeight,i,0,0)}h+=c.from-b;b=c.from;var
n=u1.build(k,m,h,l);d=d.replace(b,f,n)}return d.updateHeight(k,0)}}],[{key:"empty",value:function(){return new
a_(0,0)}},{key:"of",value:function(a){if(a.length==1)return a[0];var
b=0,c=a.length,h=0,g=0;for(;;)if(b==c)if(h>g*2){var
e=a[b-1];if(e["break"])a.splice(--b,1,e.left,null,e.right);else
a.splice(--b,1,e.left,e.right);c+=1+e["break"];h-=e.size}else
if(g>h*2){var
d=a[c];if(d["break"])a.splice(c,1,d.left,null,d.right);else
a.splice(c,1,d.left,d.right);c+=2+d["break"];g-=d.size}else
break;else
if(h<g){var
k=a[b++];if(k)h+=k.size}else{var
j=a[--c];if(j)g+=j.size}var
i=0;if(a[b-1]==null){i=1;b--}else
if(a[b]==null){i=1;c++}return new
t9(f.of(a.slice(0,b)),i,f.of(a.slice(c)))}}]);return f}();a5.prototype.size=1;var
jW=function(d){f(a,d);var
g=e(a);function
a(e,d,f){var
c;b(this,a);c=g.call(this,e,d);c.type=f;return c}c(a,[{key:"blockAt",value:function(d,c,b,a){return new
b2(a,this.length,b,this.height,this.type)}},{key:"lineAt",value:function(e,d,a,c,b){return this.blockAt(0,a,c,b)}},{key:"forEachLine",value:function(e,f,a,d,c,b){b(this.blockAt(0,a,d,c))}},{key:"updateHeight",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=b&&a.more)this.setHeight(c,a.heights[a.index++]);this.outdated=false;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return a}(a5),a_=function(a){f(d,a);var
g=e(d);function
d(e,c){var
a;b(this,d);a=g.call(this,e,c,H.Text);a.collapsed=0;a.widgetHeight=0;return a}c(d,[{key:"replace",value:function(c,e,b){var
a=b[0];if(b.length==1&&(a
instanceof
d||a
instanceof
b8&&a.flags&4)&&Math.abs(this.length-a.length)<10){if(a
instanceof
b8)a=new
d(a.length,this.height);else
a.height=this.height;if(!this.outdated)a.outdated=false;return a}else
return a5.of(b)}},{key:"updateHeight",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=d&&a.more)this.setHeight(b,a.heights[a.index++]);else
if(c||this.outdated)this.setHeight(b,Math.max(this.widgetHeight,b.heightForLine(this.length-this.collapsed)));this.outdated=false;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return d}(jW),b8=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,c,0)}c(a,[{key:"lines",value:function(a,d){var
b=a.lineAt(d).number,c=a.lineAt(d+this.length).number;return{firstLine:b,lastLine:c,lineHeight:this.height/(c-b+1)}}},{key:"blockAt",value:function(i,d,g,l){var
a=this.lines(d,l),e=a.firstLine,j=a.lastLine,b=a.lineHeight,f=Math.max(0,Math.min(j-e,Math.floor((i-g)/b))),c=d.line(e+f),h=c.from,k=c.length;return new
b2(h,k,g+b*f,b,H.Text)}},{key:"lineAt",value:function(c,j,a,i,h){if(j==C.ByHeight)return this.blockAt(c,a,i,h);if(j==C.ByPosNoHeight){var
d=a.lineAt(c),f=d.from,o=d.to;return new
b2(f,o-f,0,0,H.Text)}var
e=this.lines(a,h),k=e.firstLine,g=e.lineHeight,b=a.lineAt(c),l=b.from,m=b.length,n=b.number;return new
b2(l,m,i+g*(n-k),g,H.Text)}},{key:"forEachLine",value:function(h,l,g,e,d,j){var
f=this.lines(g,d),k=f.firstLine,c=f.lineHeight;for(var
b=Math.max(h,d),i=Math.min(d+this.length,l);b<=i;){var
a=g.lineAt(b);if(b==h)e+=c*(a.number-k);j(new
b2(a.from,a.length,e,c,H.Text));e+=c;b=a.to+1}}},{key:"replace",value:function(d,g,b){var
c=this.length-g;if(c>0){var
f=b[b.length-1];if(f
instanceof
a)b[b.length-1]=new
a(f.length+c);else
b.push(null,new
a(c-1))}if(d>0){var
e=b[0];if(e
instanceof
a)b[0]=new
a(d+e.length);else
b.unshift(new
a(d-1),null)}return a5.of(b)}},{key:"decomposeLeft",value:function(c,b){b.push(new
a(c-1),null)}},{key:"decomposeRight",value:function(b,c){c.push(null,new
a(this.length-b-1))}},{key:"updateHeight",value:function(e){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,j=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,b=arguments.length>3?arguments[3]:undefined,g=c+this.length;if(b&&b.from<=c+this.length&&b.more){var
d=[],f=Math.max(c,b.from);if(b.from>c)d.push(new
a(b.from-c-1).updateHeight(e,c));while(f<=g&&b.more){var
h=e.doc.lineAt(f).length;if(d.length)d.push(null);var
i=new
a_(h,b.heights[b.index++]);i.outdated=false;d.push(i);f+=h+1}if(f<=g)d.push(null,new
a(g-f).updateHeight(e,f));e.heightChanged=true;return a5.of(d)}else
if(j||this.outdated){this.setHeight(e,e.heightForGap(c,c+this.length));this.outdated=false}return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return a}(a5),t9=function(d){f(g,d);var
h=e(g);function
g(c,e,d){var
a;b(this,g);a=h.call(this,c.length+e+d.length,c.height+d.height,e|(c.outdated||d.outdated?2:0));a.left=c;a.right=d;a.size=c.size+d.size;return a}c(g,[{key:"break",get:function(){return this.flags&1}},{key:"blockAt",value:function(a,b,e,d){var
c=e+this.left.height;return a<c||this.right.height==0?this.left.blockAt(a,b,e,d):this.right.blockAt(a,b,c,d+this.left.length+this["break"])}},{key:"lineAt",value:function(e,d,c,i,g){var
h=i+this.left.height,a=g+this.left.length+this["break"],f=d==C.ByHeight?e<h||this.right.height==0:e<a,b=f?this.left.lineAt(e,d,c,i,g):this.right.lineAt(e,d,c,h,a);if(this["break"]||(f?b.to<a:b.from>a))return b;var
j=d==C.ByPosNoHeight?C.ByPosNoHeight:C.ByPos;return f?b.join(this.right.lineAt(a,j,c,h,a)):this.left.lineAt(a,j,c,i,g).join(b)}},{key:"forEachLine",value:function(b,c,d,h,g,e){var
i=h+this.left.height,f=g+this.left.length+this["break"];if(this["break"]){if(b<f)this.left.forEachLine(b,c,d,h,g,e);if(c>=f)this.right.forEachLine(b,c,d,i,f,e)}else{var
a=this.lineAt(f,C.ByPos,d,h,g);if(b<a.from)this.left.forEachLine(b,a.from-1,d,h,g,e);if(a.to>=b&&a.from<=c)e(a);if(c>a.to)this.right.forEachLine(a.to+1,c,d,i,f,e)}}},{key:"replace",value:function(c,d,f){var
g=this.left.length+this["break"];if(d<g)return this.balanced(this.left.replace(c,d,f),this.right);if(c>this.left.length)return this.balanced(this.left,this.right.replace(c-g,d-g,f));var
b=[];if(c>0)this.decomposeLeft(c,b);var
i=b.length,e=a(f),h;try{for(e.s();!(h=e.n()).done;){var
j=h.value;b.push(j)}}catch(a){e.e(a)}finally{e.f()}if(c>0)qf(b,i-1);if(d<this.length){var
k=b.length;this.decomposeRight(d,b);qf(b,k)}return a5.of(b)}},{key:"decomposeLeft",value:function(b,c){var
a=this.left.length;if(b<=a)return this.left.decomposeLeft(b,c);c.push(this.left);if(this["break"]){a++;if(b>=a)c.push(null)}if(b>a)this.right.decomposeLeft(b-a,c)}},{key:"decomposeRight",value:function(a,b){var
d=this.left.length,c=d+this["break"];if(a>=c)return this.right.decomposeRight(a-c,b);if(a<d)this.left.decomposeRight(a,b);if(this["break"]&&a<c)b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return a5.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(f){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined,b=this.left,c=this.right,h=e+b.length+this["break"],g=null;if(a&&a.from<=e+b.length&&a.more)g=b=b.updateHeight(f,e,d,a);else
b.updateHeight(f,e,d);if(a&&a.from<=h+c.length&&a.more)g=c=c.updateHeight(f,h,d,a);else
c.updateHeight(f,h,d);if(g)return this.balanced(b,c);this.height=this.left.height+this.right.height;this.outdated=false;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}}]);return g}(a5);function
qf(b,a){var
d,c;if(b[a]==null&&(d=b[a-1])instanceof
b8&&(c=b[a+1])instanceof
b8)b.splice(a-1,3,new
b8(d.length+1+c.length))}var
BK=5,u1=function(){function
d(a,c){b(this,d);this.pos=a;this.oracle=c;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=a}c(d,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(d,b){if(this.lineStart>-1){var
a=Math.min(b,this.lineEnd),c=this.nodes[this.nodes.length-1];if(c
instanceof
a_)c.length+=a-this.pos;else
if(a>this.pos||!this.isCovered)this.nodes.push(new
a_(a-this.pos,-1));this.writtenTo=a;if(b>a){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=b}},{key:"point",value:function(b,c,a){if(b<c||a.heightRelevant){var
d=a.widget?Math.max(0,a.widget.estimatedHeight):0,e=c-b;if(a.block)this.addBlock(new
jW(e,d,a.type));else
if(e||d>=BK)this.addLineDeco(d,e)}else
if(c>b)this.span(b,c);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}},{key:"enterLine",value:function(){if(this.lineStart>-1)return;var
b=this.oracle.doc.lineAt(this.pos),a=b.from,c=b.to;this.lineStart=a;this.lineEnd=c;if(this.writtenTo<a){if(this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,a-1));this.nodes.push(null)}if(this.pos>a)this.nodes.push(new
a_(this.pos-a,-1));this.writtenTo=this.pos}},{key:"blankContent",value:function(a,c){var
b=new
b8(c-a);if(this.oracle.doc.lineAt(a).to==c)b.flags|=4;return b}},{key:"ensureLine",value:function(){this.enterLine();var
a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a
instanceof
a_)return a;var
b=new
a_(0,-1);this.nodes.push(b);return b}},{key:"addBlock",value:function(a){this.enterLine();if(a.type==H.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos=this.pos+a.length;if(a.type!=H.WidgetBefore)this.covering=a}},{key:"addLineDeco",value:function(c,b){var
a=this.ensureLine();a.length+=b;a.collapsed+=b;a.widgetHeight=Math.max(a.widgetHeight,c);this.writtenTo=this.pos=this.pos+b}},{key:"finish",value:function(g){var
e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e
instanceof
a_)&&!this.isCovered)this.nodes.push(new
a_(0,-1));else
if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var
f=g,b=a(this.nodes),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c
instanceof
a_)c.updateHeight(this.oracle,f);f+=c?c.length:1}}catch(a){b.e(a)}finally{b.f()}return this.nodes}}],[{key:"build",value:function(e,c,a,f){var
b=new
d(a,e);k.spans(c,a,f,b,0);return b.finish(a)}}]);return d}();function
zq(b,c,d){var
a=new
tP();k.compare(b,c,d,a,0);return a.changes}var
tP=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,d,a,b){if(c<d||a&&a.heightRelevant||b&&b.heightRelevant)gv(c,d,this.changes,5)}}]);return a}();function
C1(f,k){var
c=f.getBoundingClientRect(),g=Math.max(0,c.left),h=Math.min(innerWidth,c.right),j=Math.max(0,c.top),e=Math.min(innerHeight,c.bottom),l=f.ownerDocument.body;for(var
b=f.parentNode;b&&b!=l;)if(b.nodeType==1){var
a=b,i=window.getComputedStyle(a);if((a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)&&i.overflow!="visible"){var
d=a.getBoundingClientRect();g=Math.max(g,d.left);h=Math.min(h,d.right);j=Math.max(j,d.top);e=Math.min(e,d.bottom)}b=i.position=="absolute"||i.position=="fixed"?a.offsetParent:a.parentNode}else
if(b.nodeType==11)b=b.host;else
break;return{left:g-c.left,right:h-c.left,top:j-(c.top+k),bottom:e-(c.top+k)}}var
fM=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.size=d}c(a,[{key:"draw",value:function(a){return s.replace({widget:new
uq(this.size,a)}).range(this.from,this.to)}}],[{key:"same",value:function(b,e){if(b.length!=e.length)return false;for(var
a=0;a<b.length;a++){var
c=b[a],d=e[a];if(c.from!=d.from||c.to!=d.to||c.size!=d.size)return false}return true}}]);return a}(),uq=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.size=d;c.vertical=e;return c}c(a,[{key:"eq",value:function(a){return a.size==this.size&&a.vertical==this.vertical}},{key:"toDOM",value:function(){var
a=document.createElement("div");if(this.vertical)a.style.height=this.size+"px";else{a.style.width=this.size+"px";a.style.height="2px";a.style.display="inline-block"}return a}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(bv),f2=function(){function
a(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;b(this,a);this.range=d;this.center=c}c(a,[{key:"map",value:function(b){return b.empty?this:new
a(this.range.map(b),this.center)}}]);return a}(),kJ=function(){function
d(a){b(this,d);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentWidth=0;this.heightOracle=new
uc();this.scaler=j1;this.scrollTarget=null;this.printing=false;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=a5.empty().applyChanges(a.facet(bJ),p.empty,this.heightOracle.setDoc(a.doc),[new
cu(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=s.set(this.lineGaps.map(function(a){return a.draw(false)}));this.computeVisibleRanges()}c(d,[{key:"updateForViewport",value:function(){var
h=this,b=[this.viewport],d=this.state.selection.main,c=function(e){var
a=e?d.head:d.anchor;if(!b.some(function(b){var
c=b.from,d=b.to;return a>=c&&a<=d})){var
c=h.lineAt(a,0),f=c.from,g=c.to;b.push(new
d6(f,g))}};for(var
a=0;a<=1;a++)c(a);this.viewports=b.sort(function(a,b){return a.from-b.from});this.scaler=this.heightMap.height<=7e6?j1:new
tb(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"update",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,g=this.state;this.state=a.state;var
e=this.state.facet(bJ),f=a.changedRanges,d=cu.extendWithRanges(f,zq(a.startState.facet(bJ),e,a?a.changes:X.empty(this.state.doc.length))),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,g.doc,this.heightOracle.setDoc(this.state.doc),d);if(this.heightMap.height!=h)a.flags|=2;var
c=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(b&&(b.range.head<c.from||b.range.head>c.to)||!this.viewportIsAppropriate(c))c=this.getViewport(0,b);this.viewport=c;this.updateForViewport();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();if(b)this.scrollTarget=b;if(!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc)this.mustEnforceCursorAssoc=true}},{key:"measure",value:function(b,s){var
p=b.dom,m="",j=ah.LTR,c=0;if(!s){var
i=window.getComputedStyle(p);m=i.whiteSpace,j=i.direction=="rtl"?ah.RTL:ah.LTR;var
r=parseInt(i.paddingTop)||0,q=parseInt(i.paddingBottom)||0;if(this.paddingTop!=r||this.paddingBottom!=q){c|=8;this.paddingTop=r;this.paddingBottom=q}}var
l=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:C1(p,this.paddingTop),g=l.top-this.pixelViewport.top,f=l.bottom-this.pixelViewport.bottom;this.pixelViewport=l;this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(!this.inView)return 0;var
k=b.measureVisibleLineHeights(),h=false,d=0,a=this.heightOracle;if(!s){var
e=b.dom.clientWidth;if(a.mustRefresh(k,m,j)||a.lineWrapping&&Math.abs(e-this.contentWidth)>a.charWidth){var
n=b.measureTextSize(),t=n.lineHeight,o=n.charWidth;h=a.refresh(m,j,t,o,e/o,k);if(h){b.minWidth=0;c|=8}}if(this.contentWidth!=e){this.contentWidth=e;c|=8}if(g>0&&f>0)d=Math.max(g,f);else
if(g<0&&f<0)d=Math.min(g,f)}a.heightChanged=false;this.heightMap=this.heightMap.updateHeight(a,0,h,new
uP(this.viewport.from,k));if(a.heightChanged)c|=2;if(!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to))this.viewport=this.getViewport(d,this.scrollTarget);this.updateForViewport();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(h?[]:this.lineGaps));c|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;b.enforceCursorAssoc()}return c}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top,0)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom,0)}},{key:"getViewport",value:function(l,g){var
i=0.5-Math.max(-0.5,Math.min(0.5,l/1e3/2)),b=this.heightMap,a=this.state.doc,k=this.visibleTop,j=this.visibleBottom,d=new
d6(b.lineAt(k-i*1e3,C.ByHeight,a,0,0).from,b.lineAt(j+(1-i)*1e3,C.ByHeight,a,0,0).to);if(g){var
f=g.range.head,h=j-k;if(f<d.from||f>d.to){var
e=b.lineAt(f,C.ByPos,a,0,0),c;if(g.center)c=(e.top+e.bottom)/2-h/2;else
if(f<d.from)c=e.top;else
c=e.bottom-h;d=new
d6(b.lineAt(c-1e3/2,C.ByHeight,a,0,0).from,b.lineAt(c+h+1e3/2,C.ByHeight,a,0,0).to)}}return d}},{key:"mapViewport",value:function(b,a){var
c=a.mapPos(b.from,-1),d=a.mapPos(b.to,1);return new
d6(this.heightMap.lineAt(c,C.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,C.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var
d=a.from,e=a.to,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=this.heightMap.lineAt(d,C.ByPos,this.state.doc,0,0),f=i.top,j=this.heightMap.lineAt(e,C.ByPos,this.state.doc,0,0),c=j.bottom,h=this.visibleTop,g=this.visibleBottom;return(d==0||f<=h-Math.max(10,Math.min(-b,250)))&&(e==this.state.doc.length||c>=g+Math.max(10,Math.min(b,250)))&&f>h-2*1e3&&c<g+2*1e3}},{key:"mapLineGaps",value:function(e,d){if(!e.length||d.empty)return e;var
g=[],c=a(e),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(!d.touchesRange(b.from,b.to))g.push(new
fM(d.mapPos(b.from),d.mapPos(b.to),b.size))}}catch(a){c.e(a)}finally{c.f()}return g}},{key:"ensureLineGaps",value:function(o){var
b=this,i=[];if(this.heightOracle.direction!=ah.LTR)return i;this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(a){if(a.length<4e3)return;var
d=Am(a.from,a.to,b.state);if(d.total<4e3)return;var
f,g;if(b.heightOracle.lineWrapping){var
k=2e3/b.heightOracle.lineLength*b.heightOracle.lineHeight;f=ep(d,(b.visibleTop-a.top-k)/a.height);g=ep(d,(b.visibleBottom-a.top+k)/a.height)}else{var
m=d.total*b.heightOracle.charWidth,l=2e3*b.heightOracle.charWidth;f=ep(d,(b.pixelViewport.left-l)/m);g=ep(d,(b.pixelViewport.right+l)/m)}var
e=[];if(f>a.from)e.push({from:a.from,to:f});if(g<a.to)e.push({from:g,to:a.to});var
c=b.state.selection.main;if(c.from>=a.from&&c.from<=a.to)m$(e,c.from-10,c.from+10);if(!c.empty&&c.to>=a.from&&c.to<=a.to)m$(e,c.to-10,c.to+10);var
n=function(){var
f=j[h],c=f.from,e=f.to;if(e-c>1e3)i.push(yi(o,function(b){return b.from>=a.from&&b.to<=a.to&&Math.abs(b.from-c)<1e3&&Math.abs(b.to-e)<1e3})||new
fM(c,e,b.gapSize(a,c,e,d)))};for(var
h=0,j=e;h<j.length;h++)n()});return i}},{key:"gapSize",value:function(d,c,e,a){var
b=oi(a,e)-oi(a,c);return this.heightOracle.lineWrapping?d.height*b:a.total*this.heightOracle.charWidth*b}},{key:"updateLineGaps",value:function(a){var
b=this;if(!fM.same(a,this.lineGaps)){this.lineGaps=a;this.lineGapDeco=s.set(a.map(function(a){return a.draw(b.heightOracle.lineWrapping)}))}}},{key:"computeVisibleRanges",value:function(){var
b=this.state.facet(bJ);if(this.lineGaps.length)b=b.concat(this.lineGapDeco);var
a=[];k.spans(b,this.viewport.from,this.viewport.to,{span:function(b,c){a.push({from:b,to:c})},point:function(){}},20);var
c=a.length!=this.visibleRanges.length||this.visibleRanges.some(function(c,b){return c.from!=a[b].from||c.to!=a[b].to});this.visibleRanges=a;return c?4:0}},{key:"lineAt",value:function(b,a){a+=this.paddingTop;return c_(this.heightMap.lineAt(b,C.ByPos,this.state.doc,a,0),this.scaler,a)}},{key:"lineAtHeight",value:function(b,a){a+=this.paddingTop;return c_(this.heightMap.lineAt(this.scaler.fromDOM(b,a),C.ByHeight,this.state.doc,a,0),this.scaler,a)}},{key:"blockAtHeight",value:function(b,a){a+=this.paddingTop;return c_(this.heightMap.blockAt(this.scaler.fromDOM(b,a),this.state.doc,a,0),this.scaler,a)}},{key:"forEachLine",value:function(c,e,b,a){var
d=this;a+=this.paddingTop;return this.heightMap.forEachLine(c,e,this.state.doc,a,0,this.scaler.scale==1?b:function(c){return b(c_(c,d.scaler,a))})}},{key:"contentHeight",get:function(){return this.domHeight+this.paddingTop+this.paddingBottom}},{key:"domHeight",get:function(){return this.scaler.toDOM(this.heightMap.height,this.paddingTop)}}]);return d}(),d6=c(function
a(c,d){b(this,a);this.from=c;this.to=d});function
Am(e,b,f){var
c=[],a=e,d=0;k.spans(f.facet(bJ),e,b,{span:function(){},point:function(b,e){if(b>a){c.push({from:a,to:b});d+=b-a}a=e}},20);if(a<b){c.push({from:a,to:b});d+=b-a}return{total:d,ranges:c}}function
ep(f,c){var
j=f.total,a=f.ranges;if(c<=0)return a[0].from;if(c>=1)return a[a.length-1].to;var
b=Math.floor(j*c);for(var
d=0;;d++){var
e=a[d],g=e.from,i=e.to,h=i-g;if(b<=h)return g+b;b-=h}}function
oi(h,g){var
c=0,b=a(h.ranges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,f=e.from,i=e.to;if(g<=i){c+=g-f;break}c+=i-f}}catch(a){b.e(a)}finally{b.f()}return c/h.total}function
m$(d,e,f){for(var
b=0;b<d.length;b++){var
a=d[b];if(a.from<f&&a.to>e){var
c=[];if(a.from<e)c.push({from:a.from,to:e});if(a.to>f)c.push({from:f,to:a.to});d.splice.apply(d,[b,1].concat(c));b+=c.length-1}}}function
yi(e,f){var
b=a(e),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(f(d))return d}}catch(a){b.e(a)}finally{b.f()}return void
0}var
j1={toDOM:function(a){return a},fromDOM:function(a){return a},scale:1},tb=function(){function
g(j,e,l){b(this,g);var
f=0,i=0,k=0;this.viewports=l.map(function(a){var
c=a.from,d=a.to,g=e.lineAt(c,C.ByPos,j,0,0).top,b=e.lineAt(d,C.ByPos,j,0,0).bottom;f+=b-g;return{from:c,to:d,top:g,bottom:b,domTop:0,domBottom:0}});this.scale=(7e6-f)/(e.height-f);var
d=a(this.viewports),h;try{for(d.s();!(h=d.n()).done;){var
c=h.value;c.domTop=k+(c.top-i)*this.scale;k=c.domBottom=c.domTop+(c.bottom-c.top);i=c.bottom}}catch(a){d.e(a)}finally{d.f()}}c(g,[{key:"toDOM",value:function(b,d){b-=d;for(var
c=0,e=0,f=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.top)return f+(b-e)*this.scale+d;if(b<=a.bottom)return a.domTop+(b-a.top)+d;e=a.bottom;f=a.domBottom}}},{key:"fromDOM",value:function(b,d){b-=d;for(var
c=0,e=0,f=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.domTop)return e+(b-f)/this.scale+d;if(b<=a.domBottom)return a.top+(b-a.domTop)+d;e=a.bottom;f=a.domBottom}}}]);return g}();function
c_(a,b,c){if(b.scale==1)return a;var
d=b.toDOM(a.top,c),e=b.toDOM(a.bottom,c);return new
b2(a.from,a.length,d,e-d,Array.isArray(a.type)?a.type.map(function(a){return c_(a,b,c)}):a.type)}var
lI=h.define({combine:function(a){return a.join(" ")}}),nf=h.define({combine:function(a){return a.indexOf(true)>-1}}),gI=y.newName(),l0=y.newName(),lV=y.newName(),pX={"&light":"."+l0,"&dark":"."+lV};function
gO(c,a,b){return new
y(a,{finish:function(a){return/&/.test(a)?a.replace(/&\w*/,function(a){if(a=="&")return c;if(!b||!b[a])throw new
RangeError("Unsupported selector: ".concat(a));return b[a]}):c+" "+a}})}var
we=gO("."+gI,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none",display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pX),Bu={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true},i2=q.ie&&q.ie_version<=11,tE=function(){function
e(d,f,g){var
c=this;b(this,e);this.view=d;this.onChange=f;this.onScrollChanged=g;this.active=false;this.ignoreSelection=new
tK();this.delayedFlush=-1;this.queue=[];this.lastFlush=0;this.scrollTargets=[];this.intersection=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this._selectionRange=null;this.parentCheck=-1;this.dom=d.contentDOM;this.observer=new
MutationObserver(function(f){var
b=a(f),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;c.queue.push(g)}}catch(a){b.e(a)}finally{b.f()}c._selectionRange=null;if((q.ie&&q.ie_version<=11||q.ios&&d.composing)&&f.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length}))c.flushSoon();else
c.flush()});if(i2)this.onCharData=function(a){c.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue});c.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof
IntersectionObserver=="function"){this.intersection=new
IntersectionObserver(function(a){if(c.parentCheck<0)c.parentCheck=setTimeout(c.listenForScroll.bind(c),1e3);if(a.length>0&&a[a.length-1].intersectionRatio>0!=c.intersecting){c.intersecting=!c.intersecting;if(c.intersecting!=c.view.inView)c.onScrollChanged(document.createEvent("Event"))}},{});this.intersection.observe(this.dom);this.gapIntersection=new
IntersectionObserver(function(a){if(a.length>0&&a[a.length-1].intersectionRatio>0)c.onScrollChanged(document.createEvent("Event"))},{})}this.listenForScroll()}c(e,[{key:"onScroll",value:function(a){if(this.intersecting)this.flush();this.onScrollChanged(a)}},{key:"updateGaps",value:function(c){if(this.gapIntersection&&(c.length!=this.gaps.length||this.gaps.some(function(a,b){return a!=c[b]}))){this.gapIntersection.disconnect();var
b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;this.gapIntersection.observe(e)}}catch(a){b.e(a)}finally{b.f()}this.gaps=c}}},{key:"onSelectionChange",value:function(d){if(this.lastFlush<Date.now()-50)this._selectionRange=null;var
b=this.view,a=this.selectionRange;if(b.state.facet(c0)?b.root.activeElement!=this.dom:!hR(b.dom,a))return;var
c=a.anchorNode&&b.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(d))return;if(q.ie&&q.ie_version<=11&&!b.state.selection.main.empty&&a.focusNode&&eQ(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))this.flushSoon();else
this.flush()}},{key:"selectionRange",get:function(){if(!this._selectionRange){var
b=this.view.root,a=eD(b);if(q.safari&&b.nodeType==11&&xH()==this.view.contentDOM)a=BT(this.view)||a;this._selectionRange=a}return this._selectionRange}},{key:"setSelectionRange",value:function(b,c){var
a;if(!((a=this._selectionRange)===null||a===void
0?void
0:a.type))this._selectionRange={anchorNode:b.node,anchorOffset:b.offset,focusNode:c.node,focusOffset:c.offset}}},{key:"listenForScroll",value:function(){this.parentCheck=-1;var
d=0,c=null;for(var
b=this.dom;b;)if(b.nodeType==1){if(!c&&d<this.scrollTargets.length&&this.scrollTargets[d]==b)d++;else
if(!c)c=this.scrollTargets.slice(0,d);if(c)c.push(b);b=b.assignedSlot||b.parentNode}else
if(b.nodeType==11)b=b.host;else
break;if(d<this.scrollTargets.length&&!c)c=this.scrollTargets.slice(0,d);if(c){var
e=a(this.scrollTargets),g;try{for(e.s();!(g=e.n()).done;){var
i=g.value;i.removeEventListener("scroll",this.onScroll)}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.scrollTargets=c),h;try{for(f.s();!(h=f.n()).done;){var
j=h.value;j.addEventListener("scroll",this.onScroll)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{this.stop();return a()}finally{this.start();this.clear()}}},{key:"start",value:function(){if(this.active)return;this.observer.observe(this.dom,Bu);this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange);if(i2)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true}},{key:"stop",value:function(){if(!this.active)return;this.active=false;this.observer.disconnect();this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);if(i2)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}},{key:"clearSelection",value:function(){this.ignoreSelection.set(this.selectionRange)}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.clearSelection()}},{key:"flushSoon",value:function(){var
a=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20)}},{key:"forceFlush",value:function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}}},{key:"processRecords",value:function(){var
g=this.queue,d=a(this.observer.takeRecords()),h;try{for(d.s();!(h=d.n()).done;){var
k=h.value;g.push(k)}}catch(a){d.e(a)}finally{d.f()}if(g.length)this.queue=[];var
c=-1,f=-1,j=false,e=a(g),i;try{for(e.s();!(i=e.n()).done;){var
l=i.value,b=this.readMutation(l);if(!b)continue;if(b.typeOver)j=true;if(c==-1){c=b.from;f=b.to}else{c=Math.min(b.from,c);f=Math.max(b.to,f)}}}catch(a){e.e(a)}finally{e.f()}return{from:c,to:f,typeOver:j}}},{key:"flush",value:function(){if(this.delayedFlush>=0||this.view.inputState.pendingAndroidKey)return;this.lastFlush=Date.now();var
a=this.processRecords(),b=a.from,f=a.to,g=a.typeOver,d=this.selectionRange,c=!this.ignoreSelection.eq(d)&&hR(this.dom,d);if(b<0&&!c)return;var
e=this.view.state;this.onChange(b,f,g);if(this.view.state==e)this.view.docView.reset(c);this.clearSelection()}},{key:"readMutation",value:function(b){var
a=this.view.docView.nearest(b.target);if(!a||a.ignoreMutation(b))return null;a.markDirty(b.type=="attributes");if(b.type=="attributes")a.dirty|=4;if(b.type=="childList"){var
d=od(a,b.previousSibling||b.target.previousSibling,-1),c=od(a,b.nextSibling||b.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:false}}else
if(b.type=="characterData")return{from:a.posAtStart,to:a.posAtEnd,typeOver:b.target.nodeValue==b.oldValue};else
return null}},{key:"destroy",value:function(){this.stop();if(this.intersection)this.intersection.disconnect();if(this.gapIntersection)this.gapIntersection.disconnect();var
b=a(this.scrollTargets),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.removeEventListener("scroll",this.onScroll)}}catch(a){b.e(a)}finally{b.f()}window.removeEventListener("scroll",this.onScroll);clearTimeout(this.parentCheck)}}]);return e}();function
od(c,a,e){while(a){var
b=al.get(a);if(b&&b.parent==c)return b;var
d=a.parentNode;a=d!=c.dom?d:e>0?a.nextSibling:a.previousSibling}return null}function
BT(e){var
a=null;function
i(b){b.preventDefault();b.stopImmediatePropagation();a=b.getTargetRanges()[0]}e.contentDOM.addEventListener("beforeinput",i,true);document.execCommand("indent");e.contentDOM.removeEventListener("beforeinput",i,true);if(!a)return null;var
f=a.startContainer,g=a.startOffset,c=a.endContainer,d=a.endOffset,h=e.docView.domAtPos(e.state.selection.main.anchor);if(eQ(h.node,h.offset,c,d)){var
b=[c,d,f,g];f=b[0];g=b[1];c=b[2];d=b[3]}return{anchorNode:f,anchorOffset:g,focusNode:c,focusOffset:d}}function
v9(a,z,E,F){var
b,e,c=a.state.selection.main;if(z>-1){var
i=a.docView.domBoundsAround(z,E,0);if(!i||a.state.readOnly)return;var
g=i.from,A=i.to,y=a.docView.impreciseHead||a.docView.impreciseAnchor?[]:Cu(a),k=new
tJ(y,a);k.readRange(i.startDOM,i.endDOM);e=Cp(y,g);var
v=c.from,w=null;if(a.inputState.lastKeyCode===8&&a.inputState.lastKeyTime>Date.now()-100||q.android&&k.text.length<A-g){v=c.to;w="end"}var
j=yt(a.state.sliceDoc(g,A),k.text,v-g,w);if(j)b={from:g+j.from,to:g+j.toA,insert:a.state.toText(k.text.slice(j.from,j.toB))}}else
if(a.hasFocus||!a.state.facet(c0)){var
f=a.observer.selectionRange,r=a.docView,m=r.impreciseHead,l=r.impreciseAnchor,u=m&&m.node==f.focusNode&&m.offset==f.focusOffset||!g6(a.contentDOM,f.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(f.focusNode,f.focusOffset),s=l&&l.node==f.anchorNode&&l.offset==f.anchorOffset||!g6(a.contentDOM,f.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(f.anchorNode,f.anchorOffset);if(u!=c.head||s!=c.anchor)e=d.single(s,u)}if(!b&&!e)return;if(!b&&F&&!c.empty&&e&&e.main.empty)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,c.to)};else
if(b&&b.from>=c.from&&b.to<=c.to&&(b.from!=c.from||b.to!=c.to)&&c.to-c.from-(b.to-b.from)<=4)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,b.from).append(b.insert).append(a.state.doc.slice(b.to,c.to))};if(b){var
h=a.state;if(q.ios&&a.inputState.flushIOSKey(a))return;var
B=b.insert.toString();if(a.state.facet(o5).some(function(c){return c(a,b.from,b.to,B)}))return;if(a.inputState.composing>=0)a.inputState.composing++;var
n;if(b.from>=c.from&&b.to<=c.to&&b.to-b.from>=(c.to-c.from)/3&&(!e||e.main.empty&&e.main.from==b.from+b.insert.length)){var
D=c.from<b.from?h.sliceDoc(c.from,b.from):"",C=c.to>b.to?h.sliceDoc(b.to,c.to):"";n=h.replaceSelection(a.state.toText(D+b.insert.sliceString(0,void
0,a.state.lineBreak)+C))}else{var
t=h.changes(b);n={changes:t,selection:e&&!h.selection.main.eq(e.main)&&e.main.to<=t.newLength?h.selection.replaceRange(e.main):void
0}}var
o="input.type";if(a.composing){o+=".compose";if(a.inputState.compositionFirstChange){o+=".start";a.inputState.compositionFirstChange=false}}a.dispatch(n,{scrollIntoView:true,userEvent:o})}else
if(e&&!e.main.eq(c)){var
x=false,p="select";if(a.inputState.lastSelectionTime>Date.now()-50){if(a.inputState.lastSelectionOrigin=="select")x=true;p=a.inputState.lastSelectionOrigin}a.dispatch({selection:e,scrollIntoView:x,userEvent:p})}}function
yt(e,f,d,k){var
g=Math.min(e.length,f.length),a=0;while(a<g&&e.charCodeAt(a)==f.charCodeAt(a))a++;if(a==g&&e.length==f.length)return null;var
b=e.length,c=f.length;while(b>0&&c>0&&e.charCodeAt(b-1)==f.charCodeAt(c-1)){b--;c--}if(k=="end"){var
i=Math.max(0,a-Math.min(b,c));d-=b+i-a}if(b<a&&e.length<f.length){var
j=d<=a&&d>=b?a-d:0;a-=j;c=a+(c-b);b=a}else
if(c<a){var
h=d<=a&&d>=c?a-d:0;a-=h;b=a+(b-c);c=a}return{from:a,toA:b,toB:c}}var
tJ=function(){function
d(c,a){b(this,d);this.points=c;this.view=a;this.text="";this.lineBreak=a.state.lineBreak}c(d,[{key:"readRange",value:function(d,e){if(!d)return;var
f=d.parentNode;for(var
a=d;;){this.findPointBefore(f,a);this.readNode(a);var
b=a.nextSibling;if(b==e)break;var
c=al.get(a),g=al.get(b);if(c&&g?c.breakAfter:(c?c.breakAfter:pn(a))||pn(b)&&(a.nodeName!="BR"||a.cmIgnore))this.text+=this.lineBreak;a=b}this.findPointBefore(f,e)}},{key:"readNode",value:function(a){if(a.cmIgnore)return;var
d=al.get(a),c=d&&d.overrideDOMText,b;if(c!=null)b=c.sliceString(0,void
0,this.lineBreak);else
if(a.nodeType==3)b=a.nodeValue;else
if(a.nodeName=="BR")b=a.nextSibling?this.lineBreak:"";else
if(a.nodeType==1)this.readRange(a.firstChild,null);if(b!=null){this.findPointIn(a,b.length);this.text+=b;if(q.chrome&&this.view.inputState.lastKeyCode==13&&!a.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}}},{key:"findPointBefore",value:function(e,f){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==e&&e.childNodes[c.offset]==f)c.pos=this.text.length}}catch(a){b.e(a)}finally{b.f()}}},{key:"findPointIn",value:function(f,e){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==f)c.pos=this.text.length+Math.min(c.offset,e)}}catch(a){b.e(a)}finally{b.f()}}}]);return d}();function
pn(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}var
jD=c(function
a(c,d){b(this,a);this.node=c;this.offset=d;this.pos=-1});function
Cu(d){var
b=[];if(d.root.activeElement!=d.contentDOM)return b;var
a=d.observer.selectionRange,c=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(c){b.push(new
jD(c,e));if(f!=c||g!=e)b.push(new
jD(f,g))}return b}function
Cp(a,c){if(a.length==0)return null;var
b=a[0].pos,e=a.length==2?a[1].pos:b;return b>-1&&e>-1?d.single(b+c,e+c):null}var
v=function(){function
e(){var
a=this,c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,e);this.plugins=[];this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=c.dispatch||function(b){return a.update([b])};this.dispatch=this.dispatch.bind(this);this.root=c.root||yT(c.parent)||document;this.viewState=new
kJ(c.state||u.create());this.plugins=this.state.facet(dx).map(function(b){return new
cB(b).update(a)});this.observer=new
tE(this,function(b,c,d){v9(a,b,c,d)},function(b){a.inputState.runScrollHandlers(a,b);if(a.observer.intersecting)a.measure()});this.inputState=new
uk(this);this.docView=new
jP(this);this.mountStyles();this.updateAttrs();this.updateState=0;x_();this.requestMeasure();if(c.parent)c.parent.appendChild(this.dom)}c(e,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var
a;this._dispatch(arguments.length==1&&(arguments.length<=0?undefined:arguments[0])instanceof
aj?arguments.length<=0?undefined:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function
b(m){if(this.updateState!=0)throw new
Error("Calls to EditorView.update are not allowed while an update is in progress");var
s=false,b,e=this.state,g=a(m),n;try{for(g.s();!(n=g.n()).done;){var
r=n.value;if(r.startState!=e)throw new
RangeError("Trying to update state with a transaction that doesn't start from the previous state.");e=r.state}}catch(a){g.e(a)}finally{g.f()}if(this.destroyed){this.viewState.state=e;return}if(e.facet(u.phrases)!=this.state.facet(u.phrases))return this.setState(e);b=new
kO(this,e,m);var
c=null;try{this.updateState=2;var
h=a(m),o;try{for(h.s();!(o=h.n()).done;){var
l=o.value;if(c)c=c.map(l.changes);if(l.scrollIntoView){var
f=l.state.selection.main;c=new
f2(f.empty?f:d.cursor(f.head,f.head>f.anchor?-1:1))}var
i=a(l.effects),p;try{for(i.s();!(p=i.n()).done;){var
k=p.value;if(k.is(ix))c=new
f2(k.value);else
if(k.is(mc))c=new
f2(k.value,true)}}catch(a){i.e(a)}finally{i.f()}}}catch(a){h.e(a)}finally{h.f()}this.viewState.update(b,c);this.bidiCache=jp.update(this.bidiCache,b.changes);if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}s=this.docView.update(b);if(this.state.facet(dk)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(m)}finally{this.updateState=0}if(s||c||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!b.empty){var
j=a(this.state.facet(iX)),q;try{for(j.s();!(q=j.n()).done;){var
t=q.value;t(b)}}catch(a){j.e(a)}finally{j.f()}}}},{key:"setState",value:function(c){var
e=this;if(this.updateState!=0)throw new
Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=c;return}this.updateState=2;try{var
b=a(this.plugins),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;f.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.viewState=new
kJ(c);this.plugins=c.facet(dx).map(function(a){return new
cB(a).update(e)});this.docView=new
jP(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}},{key:"updatePlugins",value:function(b){var
n=b.startState.facet(dx),p=b.state.facet(dx);if(n!=p){var
g=[],d=a(p),i;try{for(d.s();!(i=d.n()).done;){var
o=i.value,l=n.indexOf(o);if(l<0)g.push(new
cB(o));else{var
m=this.plugins[l];m.mustUpdate=b;g.push(m)}}}catch(a){d.e(a)}finally{d.f()}var
e=a(this.plugins),j;try{for(e.s();!(j=e.n()).done;){var
h=j.value;if(h.mustUpdate!=b)h.destroy(this)}}catch(a){e.e(a)}finally{e.f()}this.plugins=g;this.inputState.ensureHandlers(this)}else{var
f=a(this.plugins),k;try{for(f.s();!(k=f.n()).done;){var
q=k.value;q.mustUpdate=b}}catch(a){f.e(a)}finally{f.f()}}for(var
c=0;c<this.plugins.length;c++)this.plugins[c]=this.plugins[c].update(this)}},{key:"measure",value:function(){var
k=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=-1;if(n)this.observer.flush();var
c=null;try{for(var
h=0;;h++){this.updateState=1;var
m=this.viewport,d=this.viewState.measure(this.docView,h>0);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(h>5){console.warn("Viewport failed to stabilize");break}var
f=[];if(!(d&4)){var
i=[f,this.measureRequests];this.measureRequests=i[0];f=i[1]}var
l=f.map(function(a){try{return a.read(k)}catch(a){aD(k.state,a);return jd}}),b=new
kO(this,this.state);b.flags|=d;if(!c)c=b;else
c.flags|=d;this.updateState=2;if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}this.updateAttrs();if(d)this.docView.update(b);for(var
e=0;e<f.length;e++)if(l[e]!=jd)try{f[e].write(l[e],this)}catch(a){aD(this.state,a)}if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null}if(this.viewport.from==m.from&&this.viewport.to==m.to&&this.measureRequests.length==0)break}}finally{this.updateState=0}this.measureScheduled=-1;if(c&&!c.empty){var
g=a(this.state.facet(iX)),j;try{for(g.s();!(j=g.n()).done;){var
o=j.value;o(c)}}catch(a){g.e(a)}finally{g.f()}}}},{key:"themeClasses",get:function(){return gI+" "+(this.state.facet(nf)?lV:l0)+" "+this.state.facet(lI)}},{key:"updateAttrs",value:function(){var
b=ci(this.state.facet(nX),{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});gt(this.dom,this.editorAttrs,b);this.editorAttrs=b;var
a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:!this.state.facet(c0)?"false":"true","class":"cm-content",style:"".concat(q.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)a["aria-readonly"]="true";ci(this.state.facet(mJ),a);gt(this.contentDOM,this.contentAttrs,a);this.contentAttrs=a}},{key:"showAnnouncements",value:function(k){var
h=true,b=a(k),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j.effects),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;if(g.is(e.announce)){if(h)this.announceDOM.textContent="";h=false;var
i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=g.value}}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(dk);y.mount(this.root,this.styleModules.concat(we).reverse())}},{key:"readMeasured",value:function(){if(this.updateState==2)throw new
Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false)}},{key:"requestMeasure",value:function(a){var
c=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame(function(){return c.measure()});if(a){if(a.key!=null)for(var
b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(e){var
d=[],b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;f.update(this).takeField(e,d)}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"plugin",value:function(e){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(d.spec==e)return d.update(this).value}}catch(a){b.e(a)}finally{b.f()}return null}},{key:"blockAtHeight",value:function(b,a){this.readMeasured();return this.viewState.blockAtHeight(b,hx(a,this.contentDOM))}},{key:"visualLineAtHeight",value:function(b,a){this.readMeasured();return this.viewState.lineAtHeight(b,hx(a,this.contentDOM))}},{key:"viewportLines",value:function(c,b){var
a=this.viewport,d=a.from,e=a.to;this.viewState.forEachLine(d,e,c,hx(b,this.contentDOM))}},{key:"visualLineAt",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.viewState.lineAt(b,a)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(a,c,b){return iE(this,a,lh(this,a,c,b))}},{key:"moveByGroup",value:function(a,b){var
c=this;return iE(this,a,lh(this,a,b,function(b){return wK(c,a.head,b)}))}},{key:"moveToLineBoundary",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return vM(this,c,a,b)}},{key:"moveVertically",value:function(a,c,b){return iE(this,a,vN(this,a,c,b))}},{key:"scrollPosIntoView",value:function(a){this.dispatch({effects:ix.of(d.cursor(a))})}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(a,b)}},{key:"posAtCoords",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return lt(this,a,b)}},{key:"coordsAtPos",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var
a=this.docView.coordsAt(b,c);if(!a||a.left==a.right)return a;var
d=this.state.doc.lineAt(b),e=this.bidiSpans(d),f=e[bX.find(e,b-d.from,-1,c)];return ev(a,f.dir==ah.LTR==c>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(b){if(b.length>uC)return sr(b.length);var
f=this.textDirection,c=a(this.bidiCache),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.from==b.from&&d.dir==f)return d.order}}catch(a){c.e(a)}finally{c.f()}var
g=xi(b.text,this.textDirection);this.bidiCache.push(new
jp(b.from,b.to,f,g));return g}},{key:"hasFocus",get:function(){var
a;return(document.hasFocus()||q.safari&&((a=this.inputState)===null||a===void
0?void
0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var
a=this;this.observer.ignore(function(){op(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.destroyed=true}}],[{key:"domEventHandlers",value:function(a){return aM.define(function(){return{}},{eventHandlers:a})}},{key:"theme",value:function(d,a){var
b=y.newName(),c=[lI.of(b),dk.of(gO(".".concat(b),d))];if(a&&a.dark)c.push(nf.of(true));return c}},{key:"baseTheme",value:function(a){return bf.lowest(dk.of(gO("."+gI,a,pX)))}}]);return e}();v.scrollTo=ix;v.centerOn=mc;v.styleModule=dk;v.inputHandler=o5;v.exceptionSink=n9;v.updateListener=iX;v.editable=c0;v.mouseSelectionStyle=qo;v.dragMovesSelection=nN;v.clickAddsSelectionRange=mp;v.decorations=bJ;v.contentAttributes=mJ;v.editorAttributes=nX;v.lineWrapping=v.contentAttributes.of({"class":"cm-lineWrapping"});v.announce=j.define();var
uC=4096;function
hx(a,b){return a==null?b.getBoundingClientRect().top:a}var
iq=-1;function
x_(){window.addEventListener("resize",function(){if(iq==-1)iq=setTimeout(zj,50)})}function
zj(){iq=-1;var
c=document.querySelectorAll(".cm-content");for(var
a=0;a<c.length;a++){var
b=al.get(c[a]);if(b)b.editorView.requestMeasure()}}var
jd={},jp=function(){function
d(c,f,a,e){b(this,d);this.from=c;this.to=f;this.dir=a;this.order=e}c(d,null,[{key:"update",value:function(a,c){if(c.empty)return a;var
f=[],g=a.length?a[a.length-1].dir:ah.LTR;for(var
e=Math.max(0,a.length-10);e<a.length;e++){var
b=a[e];if(b.dir==g&&!c.touchesRange(b.from,b.to))f.push(new
d(c.mapPos(b.from,1),c.mapPos(b.to,-1),b.dir,b.order))}return f}}]);return d}(),xw=q.mac?"mac":q.windows?"win":q.linux?"linux":"key";function
Bq(i,j){var
c=i.split(/-(?!$)/),a=c[c.length-1];if(a=="Space")a=" ";var
g,e,h,f;for(var
d=0;d<c.length-1;++d){var
b=c[d];if(/^(cmd|meta|m)$/i.test(b))f=true;else
if(/^a(lt)?$/i.test(b))g=true;else
if(/^(c|ctrl|control)$/i.test(b))e=true;else
if(/^s(hift)?$/i.test(b))h=true;else
if(/^mod$/i.test(b))if(j=="mac")f=true;else
e=true;else
throw new
Error("Unrecognized modifier name: "+b)}if(g)a="Alt-"+a;if(e)a="Ctrl-"+a;if(f)a="Meta-"+a;if(h)a="Shift-"+a;return a}function
ig(a,b,c){if(b.altKey)a="Alt-"+a;if(b.ctrlKey)a="Ctrl-"+a;if(b.metaKey)a="Meta-"+a;if(c!==false&&b.shiftKey)a="Shift-"+a;return a}var
zg=v.domEventHandlers({keydown:function(b,a){return BQ(yS(a.state),b,a,"editor")}}),eW=h.define({enables:zg}),j6=new
WeakMap();function
yS(c){var
a=c.facet(eW),b=j6.get(a);if(!b)j6.set(a,b=wH(a.reduce(function(a,b){return a.concat(b)},[])));return b}var
bC=null,vb=4e3;function
wH(n){var
l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:xw,f=Object.create(null),k=Object.create(null),j=function(a,c){var
b=k[a];if(b==null)k[a]=c;else
if(b!=c)throw new
Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},i=function(e,k,i,m){var
b=f[e]||(f[e]=Object.create(null)),d=k.split(/ (?!$)/).map(function(a){return Bq(a,l)}),h=function(c){var
a=d.slice(0,c).join(" ");j(a,true);if(!b[a])b[a]={preventDefault:true,commands:[function(c){var
b=bC={view:c,prefix:a,scope:e};setTimeout(function(){if(bC==b)bC=null},vb);return true}]}};for(var
a=1;a<d.length;a++)h(a);var
c=d.join(" ");j(c,false);var
g=b[c]||(b[c]={preventDefault:false,commands:[]});g.commands.push(i);if(m)g.preventDefault=true},c=a(n),g;try{for(c.s();!(g=c.n()).done;){var
b=g.value,e=b[l]||b.key;if(!e)continue;var
d=a(b.scope?b.scope.split(" "):["editor"]),h;try{for(d.s();!(h=d.n()).done;){var
m=h.value;i(m,e,b.run,b.preventDefault);if(b.shift)i(m,"Shift-"+e,b.shift,b.preventDefault)}}catch(a){d.e(a)}finally{d.f()}}}catch(a){c.e(a)}finally{c.f()}return f}function
BQ(l,b,k,j){var
c=pz(b),h=c.length==1&&c!=" ",d="",g=false;if(bC&&bC.view==k&&bC.scope==j){d=bC.prefix+" ";if(g=qm.indexOf(b.keyCode)<0)bC=null}var
i=function(c){if(c){var
b=a(c.commands),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;if(e(k))return true}}catch(a){b.e(a)}finally{b.f()}if(c.preventDefault)g=true}return false},e=l[j],f;if(e){if(i(e[d+ig(c,b,!h)]))return true;if(h&&(b.shiftKey||b.altKey||b.metaKey)&&(f=bq[b.keyCode])&&f!=c){if(i(e[d+ig(f,b,true)]))return true}else
if(h&&b.shiftKey)if(i(e[d+ig(c,b,true)]))return true}return g}var
ju=!q.ios,de=h.define({combine:function(a){return bw(a,{cursorBlinkRate:1200,drawRangeCursor:true},{cursorBlinkRate:function(a,b){return Math.min(a,b)},drawRangeCursor:function(a,b){return a||b}})}});function
x6(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[de.of(a),x7,zv]}var
ku=function(){function
a(e,f,g,d,c){b(this,a);this.left=e;this.top=f;this.width=g;this.height=d;this.className=c}c(a,[{key:"draw",value:function(){var
a=document.createElement("div");a.className=this.className;this.adjust(a);return a}},{key:"adjust",value:function(a){a.style.left=this.left+"px";a.style.top=this.top+"px";if(this.width>=0)a.style.width=this.width+"px";a.style.height=this.height+"px"}},{key:"eq",value:function(a){return this.left==a.left&&this.top==a.top&&this.width==a.width&&this.height==a.height&&this.className==a.className}}]);return a}(),x7=aM.fromClass(function(){function
d(a){b(this,d);this.view=a;this.rangePieces=[];this.cursors=[];this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)};this.selectionLayer=a.scrollDOM.appendChild(document.createElement("div"));this.selectionLayer.className="cm-selectionLayer";this.selectionLayer.setAttribute("aria-hidden","true");this.cursorLayer=a.scrollDOM.appendChild(document.createElement("div"));this.cursorLayer.className="cm-cursorLayer";this.cursorLayer.setAttribute("aria-hidden","true");a.requestMeasure(this.measureReq);this.setBlinkRate()}c(d,[{key:"setBlinkRate",value:function(){this.cursorLayer.style.animationDuration=this.view.state.facet(de).cursorBlinkRate+"ms"}},{key:"update",value:function(a){var
b=a.startState.facet(de)!=a.state.facet(de);if(b||a.selectionSet||a.geometryChanged||a.viewportChanged)this.view.requestMeasure(this.measureReq);if(a.transactions.some(function(a){return a.scrollIntoView}))this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink";if(b)this.setBlinkRate()}},{key:"readPos",value:function(){var
i=this,c=this.view.state,j=c.facet(de),k=c.selection.ranges.map(function(a){return a.empty?[]:AH(i.view,a)}).reduce(function(a,b){return a.concat(b)}),f=[],b=a(c.selection.ranges),e;try{for(b.s();!(e=b.n()).done;){var
d=e.value,h=d==c.selection.main;if(d.empty?!h||ju:j.drawRangeCursor){var
g=AG(this.view,d,h);if(g)f.push(g)}}}catch(a){b.e(a)}finally{b.f()}return{rangePieces:k,cursors:f}}},{key:"drawSel",value:function(f){var
i=this,e=f.rangePieces,b=f.cursors;if(e.length!=this.rangePieces.length||e.some(function(b,a){return!b.eq(i.rangePieces[a])})){this.selectionLayer.textContent="";var
c=a(e),g;try{for(c.s();!(g=c.n()).done;){var
k=g.value;this.selectionLayer.appendChild(k.draw())}}catch(a){c.e(a)}finally{c.f()}this.rangePieces=e}if(b.length!=this.cursors.length||b.some(function(a,b){return!a.eq(i.cursors[b])})){var
j=this.cursorLayer.children;if(j.length!==b.length){this.cursorLayer.textContent="";var
d=a(b),h;try{for(d.s();!(h=d.n()).done;){var
l=h.value;this.cursorLayer.appendChild(l.draw())}}catch(a){d.e(a)}finally{d.f()}}else
b.forEach(function(a,b){return a.adjust(j[b])});this.cursors=b}}},{key:"destroy",value:function(){this.selectionLayer.remove();this.cursorLayer.remove()}}]);return d}()),sk={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(ju)sk[".cm-line"].caretColor="transparent !important";var
zv=bf.highest(v.theme(sk));function
oF(a){var
b=a.scrollDOM.getBoundingClientRect(),c=a.textDirection==ah.LTR?b.left:b.right-a.scrollDOM.clientWidth;return{left:c-a.scrollDOM.scrollLeft,top:b.top-a.scrollDOM.scrollTop}}function
sQ(c,e,a){var
b=d.cursor(e);return{from:Math.max(a.from,c.moveToLineBoundary(b,false,true).from),to:Math.min(a.to,c.moveToLineBoundary(b,true,true).from),type:H.Text}}function
gN(g,e){var
d=g.visualLineAt(e);if(Array.isArray(d.type)){var
c=a(d.type),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(b.to>e||b.to==e&&(b.to==d.to||b.type==H.Text))return b}}catch(a){c.e(a)}finally{c.f()}}return d}function
AH(b,d){if(d.to<=b.viewport.from||d.from>=b.viewport.to)return[];var
r=Math.max(d.from,b.viewport.from),w=Math.min(d.to,b.viewport.to),n=b.textDirection==ah.LTR,p=b.contentDOM,j=p.getBoundingClientRect(),m=oF(b),s=window.getComputedStyle(p.firstChild),u=j.left+parseInt(s.paddingLeft),v=j.right-parseInt(s.paddingRight),i=gN(b,r),h=gN(b,w),c=i.type==H.Text?i:null,e=h.type==H.Text?h:null;if(b.lineWrapping){if(c)c=sQ(b,r,c);if(e)e=sQ(b,w,e)}if(c&&e&&c.from==e.from)return l(k(d.from,d.to,c));else{var
g=c?k(d.from,null,c):q(i,false),f=e?k(null,d.to,e):q(h,true),o=[];if((c||i).to<(e||h).from-1)o.push(t(u,g.bottom,v,f.top));else
if(g.bottom<f.top&&gN(b,(g.bottom+f.top)/2).type==H.Text)g.bottom=f.top=(g.bottom+f.top)/2;return l(g).concat(o).concat(l(f))}function
t(a,b,d,c){return new
ku(a-m.left,b-m.top,d-a,c-b,"cm-selectionBackground")}function
l(b){var
f=b.top,e=b.bottom,c=b.horizontal,d=[];for(var
a=0;a<c.length;a+=2)d.push(t(c[a],f,c[a+1],e));return d}function
k(c,e,l){var
t=1e9,o=-1e9,k=[];function
y(d,e,f,g,h){var
a=b.coordsAtPos(d,d==l.to?-2:2),c=b.coordsAtPos(f,f==l.from?2:-2);t=Math.min(a.top,c.top,t);o=Math.max(a.bottom,c.bottom,o);if(h==ah.LTR)k.push(n&&e?u:a.left,n&&g?v:c.right);else
k.push(!n&&g?u:c.left,!n&&e?v:a.right)}var
m=c!==null&&c!==void
0?c:l.from,j=e!==null&&e!==void
0?e:l.to,f=a(b.visibleRanges),w;try{for(f.s();!(w=f.n()).done;){var
h=w.value;if(h.to>m&&h.from<j)for(var
d=Math.max(h.from,m),p=Math.min(h.to,j);;){var
i=b.state.doc.lineAt(d),g=a(b.bidiSpans(i)),x;try{for(g.s();!(x=g.n()).done;){var
q=x.value,r=q.from+i.from,s=q.to+i.from;if(r>=p)break;if(s>d)y(Math.max(r,d),c==null&&r<=m,Math.min(s,p),e==null&&s>=j,q.dir)}}catch(a){g.e(a)}finally{g.f()}d=i.to+1;if(d>=p)break}}}catch(a){f.e(a)}finally{f.f()}if(k.length==0)y(m,c==null,j,e==null,b.textDirection);return{top:t,bottom:o,horizontal:k}}function
q(a,c){var
b=j.top+(c?a.top:a.bottom);return{top:b,bottom:b,horizontal:[]}}}function
AG(d,c,e){var
a=d.coordsAtPos(c.head,c.assoc||1);if(!a)return null;var
b=oF(d);return new
ku(a.left-b.left,a.top-b.top,-1,a.bottom-a.top,e?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function
pt(f,e,d,h,g){e.lastIndex=0;for(var
b=f.iterRange(d,h),c=d,a;!b.next().done;c+=b.value.length)if(!b.lineBreak)while(a=e.exec(b.value))g(c+a.index,c+a.index+a[0].length,a)}var
uB=function(){function
d(a){b(this,d);var
e=a.regexp,c=a.decoration,f=a.boundary;if(!e.global)throw new
RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=e;this.getDeco=typeof
c=="function"?c:function(){return c};this.boundary=f}c(d,[{key:"createDeco",value:function(c){var
g=this,f=new
cb(),b=a(c.visibleRanges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,h=e.from,i=e.to;pt(c.state.doc,this.regexp,h,i,function(a,b,d){return f.add(a,b,g.getDeco(d,c,a))})}}catch(a){b.e(a)}finally{b.f()}return f.finish()}},{key:"updateDeco",value:function(a,d){var
c=1e9,b=-1;if(a.docChanged)a.changes.iterChanges(function(f,g,d,e){if(e>a.view.viewport.from&&d<a.view.viewport.to){c=Math.min(d,c);b=Math.max(e,b)}});if(a.viewportChanged||b-c>1e3)return this.createDeco(a.view);if(b>-1)return this.updateRange(a.view,d.map(a.changes),c,b);return d}},{key:"updateRange",value:function(e,m,h,i){var
b=this,f=a(e.visibleRanges),g;try{for(f.s();!(g=f.n()).done;){var
j=g.value,d=Math.max(j.from,h),c=Math.min(j.to,i);if(c>d)(function(){var
a=e.state.doc.lineAt(d),i=a.to<c?e.state.doc.lineAt(c):a,h=Math.max(j.from,a.from),f=Math.min(j.to,i.to);if(b.boundary){for(;d>a.from;d--)if(b.boundary.test(a.text[d-1-a.from])){h=d;break}for(;c<i.to;c++)if(b.boundary.test(i.text[c-i.from])){f=c;break}}var
l=[],g=void
0;if(a==i){b.regexp.lastIndex=h-a.from;while((g=b.regexp.exec(a.text))&&g.index<f-a.from){var
k=g.index+a.from;l.push(b.getDeco(g,e,k).range(k,k+g[0].length))}}else
pt(e.state.doc,b.regexp,h,f,function(a,d,c){return l.push(b.getDeco(c,e,a).range(a,d))});m=m.update({filterFrom:h,filterTo:f,filter:function(a,b){return a<h||b>f},add:l})}())}}catch(a){f.e(a)}finally{f.f()}return m}}]);return d}(),f5=/x/.unicode!=null?"gu":"g",vp=new
RegExp("[\0-\b\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]",f5),u0={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},gs=null;function
CH(){var
a;if(gs==null&&typeof
document!="undefined"&&document.body){var
b=document.body.style;gs=((a=b.tabSize)!==null&&a!==void
0?a:b.MozTabSize)!=null}return gs||false}var
fb=h.define({combine:function(b){var
a=bw(b,{render:null,specialChars:vp,addSpecialChars:null});if(a.replaceTabs=!CH())a.specialChars=new
RegExp("\t|"+a.specialChars.source,f5);if(a.addSpecialChars)a.specialChars=new
RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,f5);return a}});function
zz(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[fb.of(a),CD()]}var
ls=null;function
CD(){return ls||(ls=aM.fromClass(function(){function
d(a){b(this,d);this.view=a;this.decorations=s.none;this.decorationCache=Object.create(null);this.decorator=this.makeDecorator(a.state.facet(fb));this.decorations=this.decorator.createDeco(a)}c(d,[{key:"makeDecorator",value:function(d){var
c=this;return new
uB({regexp:d.specialChars,decoration:function(j,g,f){var
i=g.state.doc,a=ap(j[0],0);if(a==9){var
e=i.lineAt(f),b=g.state.tabSize,h=cP(e.text,b,f-e.from);return s.replace({widget:new
vu((b-h%b)*c.view.defaultCharacterWidth)})}return c.decorationCache[a]||(c.decorationCache[a]=s.replace({widget:new
vo(d,a)}))},boundary:d.replaceTabs?void
0:/[^]/})}},{key:"update",value:function(a){var
b=a.state.facet(fb);if(a.startState.facet(fb)!=b){this.decorator=this.makeDecorator(b);this.decorations=this.decorator.createDeco(a.view)}else
this.decorations=this.decorator.updateDeco(a,this.decorations)}}]);return d}(),{decorations:function(a){return a.decorations}}))}var
t0="\u2022";function
BB(a){if(a>=32)return t0;if(a==10)return"\u2424";return String.fromCharCode(9216+a)}var
vo=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.options=e;c.code=d;return c}c(a,[{key:"eq",value:function(a){return a.code==this.code}},{key:"toDOM",value:function(e){var
d=BB(this.code),b=e.state.phrase("Control character")+" "+(u0[this.code]||"0x"+this.code.toString(16)),c=this.options.render&&this.options.render(this.code,b,d);if(c)return c;var
a=document.createElement("span");a.textContent=d;a.title=b;a.setAttribute("aria-label",b);a.className="cm-specialChar";return a}},{key:"ignoreEvent",value:function(){return false}}]);return a}(bv),vu=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.width=d;return c}c(a,[{key:"eq",value:function(a){return a.width==this.width}},{key:"toDOM",value:function(){var
a=document.createElement("span");a.textContent="\t";a.className="cm-tab";a.style.width=this.width+"px";return a}},{key:"ignoreEvent",value:function(){return false}}]);return a}(bv);function
zw(){return v1}var
Ai=s.line({"class":"cm-activeLine"}),v1=aM.fromClass(function(){function
d(a){b(this,d);this.decorations=this.getDeco(a)}c(d,[{key:"update",value:function(a){if(a.docChanged||a.selectionSet)this.decorations=this.getDeco(a.view)}},{key:"getDeco",value:function(h){var
g=-1,f=[],b=a(h.state.selection.ranges),e;try{for(b.s();!(e=b.n()).done;){var
d=e.value;if(!d.empty)return s.none;var
c=h.visualLineAt(d.head);if(c.from>g){f.push(Ai.range(c.from));g=c.from}}}catch(a){b.e(a)}finally{b.f()}return s.set(f)}}]);return d}(),{decorations:function(a){return a.decorations}}),hH=bt.define(),Ab=bt.define(),zV=h.define(),oQ=h.define({combine:function(a){return bw(a,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function
w1(b){var
a=0;b.iterChangedRanges(function(c,b){return a=b});return a}var
oR=ao.define({create:function(){return cz.empty},update:function(b,a){var
e=a.state.facet(oQ),f=a.annotation(hH);if(f){var
m=a.docChanged?d.single(w1(a.changes)):void
0,j=bo.fromTransaction(a,m),h=f.side,c=h==0?b.undone:b.done;if(j)c=ff(c,c.length,e.minDepth,j);else
c=kY(c,a.startState.selection);return new
cz(h==0?f.rest:c,h==0?c:f.rest)}var
g=a.annotation(Ab);if(g=="full"||g=="before")b=b.isolate();if(a.annotation(aj.addToHistory)===false)return!a.changes.empty?b.addMapping(a.changes.desc):b;var
i=bo.fromTransaction(a),k=a.annotation(aj.time),l=a.annotation(aj.userEvent);if(i)b=b.addChanges(i,k,l,e.newGroupDelay,e.minDepth);else
if(a.selection)b=b.addSelection(a.startState.selection,k,l,e.newGroupDelay);if(g=="full"||g=="after")b=b.isolate();return b},toJSON:function(a){return{done:a.done.map(function(a){return a.toJSON()}),undone:a.undone.map(function(a){return a.toJSON()})}},fromJSON:function(a){return new
cz(a.done.map(bo.fromJSON),a.undone.map(bo.fromJSON))}});function
zB(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[oR,oQ.of(a),v.domEventHandlers({beforeinput:function(a,c){var
b=a.inputType=="historyUndo"?sx:a.inputType=="historyRedo"?ri:null;if(!b)return false;a.preventDefault();return b(c)}})]}function
eh(g,e){return function(b){var
a=b.state,f=b.dispatch;if(!e&&a.readOnly)return false;var
c=a.field(oR,false);if(!c)return false;var
d=c.pop(g,a,e);if(!d)return false;f(d);return true}}var
sx=eh(0,false),ri=eh(1,false),CW=eh(0,true),BJ=eh(1,true),bo=function(){function
e(a,c,d,g,f){b(this,e);this.changes=a;this.effects=c;this.mapped=d;this.startSelection=g;this.selectionsAfter=f}c(e,[{key:"setSelAfter",value:function(a){return new
e(this.changes,this.effects,this.mapped,this.startSelection,a)}},{key:"toJSON",value:function(){var
a,b,c;return{changes:(a=this.changes)===null||a===void
0?void
0:a.toJSON(),mapped:(b=this.mapped)===null||b===void
0?void
0:b.toJSON(),startSelection:(c=this.startSelection)===null||c===void
0?void
0:c.toJSON(),selectionsAfter:this.selectionsAfter.map(function(a){return a.toJSON()})}}}],[{key:"fromJSON",value:function(a){return new
e(a.changes&&X.fromJSON(a.changes),[],a.mapped&&b7.fromJSON(a.mapped),a.startSelection&&d.fromJSON(a.startSelection),a.selectionsAfter.map(d.fromJSON))}},{key:"fromTransaction",value:function(b,i){var
d=aO,c=a(b.startState.facet(zV)),f;try{for(c.s();!(f=c.n()).done;){var
h=f.value,g=h(b);if(g.length)d=d.concat(g)}}catch(a){c.e(a)}finally{c.f()}if(!d.length&&b.changes.empty)return null;return new
e(b.changes.invert(b.startState.doc),d,void
0,i||b.startState.selection,aO)}},{key:"selection",value:function(a){return new
e(void
0,aO,void
0,void
0,a)}}]);return e}();function
ff(d,a,b,e){var
f=a+1>b+20?a-b-1:0,c=d.slice(f,a);c.push(e);return c}function
zX(b,d){var
a=[],c=false;b.iterChangedRanges(function(b,c){return a.push(b,c)});d.iterChangedRanges(function(h,i,d,f){for(var
b=0;b<a.length;){var
e=a[b++],g=a[b++];if(f>=e&&d<=g)c=true}});return c}function
yd(a,b){return a.ranges.length==b.ranges.length&&a.ranges.filter(function(c,a){return c.empty!=b.ranges[a].empty}).length===0}function
mH(a,b){return!a.length?b:!b.length?a:a.concat(b)}var
aO=[],uN=200;function
kY(a,d){if(!a.length)return[bo.selection([d])];else{var
c=a[a.length-1],b=c.selectionsAfter.slice(Math.max(0,c.selectionsAfter.length-uN));if(b.length&&b[b.length-1].eq(d))return a;b.push(d);return ff(a,a.length-1,1e9,c.setSelAfter(b))}}function
BC(a){var
b=a[a.length-1],c=a.slice();c[a.length-1]=b.setSelAfter(b.selectionsAfter.slice(0,b.selectionsAfter.length-1));return c}function
gu(b,e){if(!b.length)return b;var
c=b.length,d=aO;while(c){var
a=Ax(b[c-1],e,d);if(a.changes&&!a.changes.empty||a.effects.length){var
f=b.slice(0,c);f[c-1]=a;return f}else{e=a.mapped;c--;d=a.selectionsAfter}}return d.length?[bo.selection(d)]:aO}function
Ax(a,b,e){var
d=mH(a.selectionsAfter.length?a.selectionsAfter.map(function(a){return a.map(b)}):aO,e);if(!a.changes)return bo.selection(d);var
g=a.changes.map(b),c=b.mapDesc(a.changes,true),f=a.mapped?a.mapped.composeDesc(c):c;return new
bo(g,j.mapEffects(a.effects,b),f,a.startSelection.map(c),d)}var
Ae=/^(input\.type|delete)($|\.)/,cz=function(){function
d(a,f){var
c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:void
0;b(this,d);this.done=a;this.undone=f;this.prevTime=c;this.prevUserEvent=e}c(d,[{key:"isolate",value:function(){return this.prevTime?new
d(this.done,this.undone):this}},{key:"addChanges",value:function(c,g,e,h,f){var
a=this.done,b=a[a.length-1];if(b&&b.changes&&!b.changes.empty&&c.changes&&(!e||Ae.test(e))&&(!b.selectionsAfter.length&&g-this.prevTime<h&&zX(b.changes,c.changes)||e=="input.type.compose"))a=ff(a,a.length-1,f,new
bo(c.changes.compose(b.changes),mH(c.effects,b.effects),b.mapped,b.startSelection,aO));else
a=ff(a,a.length,f,c);return new
d(a,aO,g,e)}},{key:"addSelection",value:function(c,e,a,f){var
b=this.done.length?this.done[this.done.length-1].selectionsAfter:aO;if(b.length>0&&e-this.prevTime<f&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&yd(b[b.length-1],c))return this;return new
d(kY(this.done,c),this.undone,e,a)}},{key:"addMapping",value:function(a){return new
d(gu(this.done,a),gu(this.undone,a),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(c,e,f){var
b=c==0?this.done:this.undone;if(b.length==0)return null;var
a=b[b.length-1];if(f&&a.selectionsAfter.length)return e.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:hH.of({side:c,rest:BC(b)}),userEvent:c==0?"select.undo":"select.redo",scrollIntoView:true});else
if(!a.changes)return null;else{var
d=b.length==1?aO:b.slice(0,b.length-1);if(a.mapped)d=gu(d,a.mapped);return e.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:hH.of({side:c,rest:d}),filter:false,userEvent:c==0?"undo":"redo",scrollIntoView:true})}}}]);return d}();cz.empty=new
cz(aO,aO);var
zC=[{key:"Mod-z",run:sx,preventDefault:true},{key:"Mod-y",mac:"Mod-Shift-z",run:ri,preventDefault:true},{key:"Mod-u",run:CW,preventDefault:true},{key:"Alt-u",mac:"Mod-Shift-u",run:BJ,preventDefault:true}];function
eE(a){var
b;if(a.nodeType==11)b=a.getSelection?a:a.ownerDocument;else
b=a;return b.getSelection()}function
g7(b,a){return a?b.contains(a.nodeType!=1?a.parentNode:a):false}function
xI(){var
a=document.activeElement;while(a&&a.shadowRoot)a=a.shadowRoot.activeElement;return a}function
hS(b,a){if(!a.anchorNode)return false;try{return g7(b,a.anchorNode)}catch(a){return false}}function
ce(a){if(a.nodeType==3)return dr(a,0,a.nodeValue.length).getClientRects();else
if(a.nodeType==1)return a.getClientRects();else
return[]}function
eR(b,c,a,d){return a?rF(b,c,a,d,-1)||rF(b,c,a,d,1):false}function
ho(a){for(var
b=0;;b++){a=a.previousSibling;if(!a)return b}}function
rF(a,b,e,f,c){for(;;){if(a==e&&b==f)return true;if(b==(c<0?0:eZ(a))){if(a.nodeName=="DIV")return false;var
d=a.parentNode;if(!d||d.nodeType!=1)return false;b=ho(a)+(c<0?0:1);a=d}else
if(a.nodeType==1){a=a.childNodes[b+(c<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")return false;b=c<0?eZ(a):0}else
return false}}function
eZ(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}var
ky={left:0,right:0,top:0,bottom:0};function
ew(a,c){var
b=c?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}function
Da(a){return{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}function
B5(o,a,h,k,i,f,g,s){var
n=o.ownerDocument,q=n.defaultView;for(var
c=o;c;)if(c.nodeType==1){var
b=void
0,m=c==n.body;if(m)b=Da(q);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}var
j=c.getBoundingClientRect();b={left:j.left,right:j.left+c.clientWidth,top:j.top,bottom:j.top+c.clientHeight}}var
d=0,e=0;if(i=="nearest"){if(a.top<b.top){e=-(b.top-a.top+g);if(h>0&&a.bottom>b.bottom+e)e=a.bottom-b.bottom+e+g}else
if(a.bottom>b.bottom){e=a.bottom-b.bottom+g;if(h<0&&a.top-e<b.top)e=-(b.top+e-a.top+g)}}else{var
p=a.bottom-a.top,l=b.bottom-b.top,v=i=="center"&&p<=l?a.top+p/2-l/2:i=="start"||i=="center"&&h<0?a.top-g:a.bottom-l+g;e=v-b.top}if(k=="nearest"){if(a.left<b.left){d=-(b.left-a.left+f);if(h>0&&a.right>b.right+d)d=a.right-b.right+d+f}else
if(a.right>b.right){d=a.right-b.right+f;if(h<0&&a.left<b.left+d)d=-(b.left+d-a.left+f)}}else{var
u=k=="center"?a.left+(a.right-a.left)/2-(b.right-b.left)/2:k=="start"==s?a.left-f:a.right-(b.right-b.left)+f;d=u-b.left}if(d||e)if(m)q.scrollBy(d,e);else{if(e){var
t=c.scrollTop;c.scrollTop+=e;e=c.scrollTop-t}if(d){var
r=c.scrollLeft;c.scrollLeft+=d;d=c.scrollLeft-r}a={left:a.left-d,top:a.top-e,right:a.right-d,bottom:a.bottom-e}}if(m)break;c=c.assignedSlot||c.parentNode;k=i="nearest"}else
if(c.nodeType==11)c=c.host;else
break}var
tL=function(){function
a(){b(this,a);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}c(a,[{key:"eq",value:function(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}},{key:"setRange",value:function(a){this.set(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}},{key:"set",value:function(a,b,c,d){this.anchorNode=a;this.anchorOffset=b;this.focusNode=c;this.focusOffset=d}}]);return a}(),co=null;function
oq(b){if(b.setActive)return b.setActive();if(co)return b.focus(co);var
c=[];for(var
a=b;a;a=a.parentNode){c.push(a,a.scrollTop,a.scrollLeft);if(a==a.ownerDocument)break}b.focus(co==null?Object.defineProperties({},{preventScroll:{get:function(){co={preventScroll:true};return true},configurable:true,enumerable:true}}):void
0);if(!co){co=false;for(var
d=0;d<c.length;){var
e=c[d++],g=c[d++],f=c[d++];if(e.scrollTop!=g)e.scrollTop=g;if(e.scrollLeft!=f)e.scrollLeft=f}}}var
rL;function
dr(c,b){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b,a=rL||(rL=document.createRange());a.setEnd(c,d);a.setStart(c,b);return a}function
cW(d,e,c){var
f={key:e,code:e,keyCode:c,which:c,cancelable:true},a=new
KeyboardEvent("keydown",f);a.synthetic=true;d.dispatchEvent(a);var
b=new
KeyboardEvent("keyup",f);b.synthetic=true;d.dispatchEvent(b);return a.defaultPrevented||b.defaultPrevented}function
yU(a){while(a){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function
ml(a){while(a.attributes.length)a.removeAttributeNode(a.attributes[0])}var
aw=function(){function
a(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;b(this,a);this.node=c;this.offset=d;this.precise=e}c(a,null,[{key:"before",value:function(b,c){return new
a(b.parentNode,ho(b),c)}},{key:"after",value:function(b,c){return new
a(b.parentNode,ho(b)+1,c)}}]);return a}(),ij=[],Y=function(){function
f(){b(this,f);this.parent=null;this.dom=null;this.dirty=2}c(f,[{key:"editorView",get:function(){if(!this.parent)throw new
Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(f){var
e=this.posAtStart,b=a(this.children),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c==f)return e;e+=c.length+c.breakAfter}}catch(a){b.e(a)}finally{b.f()}throw new
RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(a){return this.posBefore(a)+a.length}},{key:"coordsAt",value:function(a,b){return null}},{key:"sync",value:function(d){if(this.dirty&2){var
e=this.dom,b=e.firstChild,g=a(this.children),k;try{for(g.s();!(k=g.n()).done;){var
c=k.value;if(c.dirty){if(!c.dom&&b){var
j=f.get(b);if(!j||!j.parent&&j.constructor==c.constructor)c.reuseDOM(b)}c.sync(d);c.dirty=0}if(d&&!d.written&&d.node==e&&b!=c.dom)d.written=true;if(c.dom.parentNode==e){while(b&&b!=c.dom)b=rs(b);b=c.dom.nextSibling}else
e.insertBefore(c.dom,b)}}catch(a){g.e(a)}finally{g.f()}if(b&&d&&d.node==e)d.written=true;while(b)b=rs(b)}else
if(this.dirty&1){var
h=a(this.children),l;try{for(h.s();!(l=h.n()).done;){var
i=l.value;if(i.dirty){i.sync(d);i.dirty=0}}}catch(a){h.e(a)}finally{h.f()}}}},{key:"reuseDOM",value:function(a){}},{key:"localPosFromDOM",value:function(b,h){var
a;if(b==this.dom)a=this.dom.childNodes[h];else{var
d=eZ(b)==0?0:h==0?-1:1;for(;;){var
c=b.parentNode;if(c==this.dom)break;if(d==0&&c.firstChild!=c.lastChild)if(b==c.firstChild)d=-1;else
d=1;b=c}if(d<0)a=b;else
a=b.nextSibling}if(a==this.dom.firstChild)return 0;while(a&&!f.get(a))a=a.nextSibling;if(!a)return this.length;for(var
g=0,i=0;;g++){var
e=this.children[g];if(e.dom==a)return i;i+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(g,i){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=-1,k=-1,f=-1,j=-1;for(var
b=0,a=h,l=h;b<this.children.length;b++){var
c=this.children[b],d=a+c.length;if(a<g&&d>i)return c.domBoundsAround(g,i,a);if(d>=g&&e==-1){e=b;k=a}if(a>i&&c.dom.parentNode==this.dom){f=b;j=l;break}l=d;a=d+c.breakAfter}return{from:k,to:j<0?h+this.length:j,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}},{key:"markDirty",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.dirty|=2;this.markParentsDirty(a)}},{key:"markParentsDirty",value:function(b){for(var
a=this.parent;a;a=a.parent){if(b)a.dirty|=2;if(a.dirty&1)return;a.dirty|=1;b=false}}},{key:"setParent",value:function(a){if(this.parent!=a){this.parent=a;if(this.dirty)this.markParentsDirty(true)}}},{key:"setDOM",value:function(a){if(this.dom)this.dom.cmView=null;this.dom=a;a.cmView=this}},{key:"rootView",get:function(){for(var
a=this;;){var
b=a.parent;if(!b)return a;a=b}}},{key:"replaceChildren",value:function(d,g){var
e,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ij;this.markDirty();for(var
a=d;a<g;a++){var
f=this.children[a];if(f.parent==this)f.destroy()}(e=this.children).splice.apply(e,[d,g-d].concat(P(c)));for(var
b=0;b<c.length;b++)c[b].setParent(this)}},{key:"ignoreMutation",value:function(a){return false}},{key:"ignoreEvent",value:function(a){return false}},{key:"childCursor",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new
jw(this.children,a,this.children.length)}},{key:"childPos",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(b,a)}},{key:"toString",value:function(){var
a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return true}},{key:"merge",value:function(a,f,e,b,d,c){return false}},{key:"become",value:function(a){return false}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(a){return a.cmView}}]);return f}();Y.prototype.breakAfter=0;function
rs(a){var
b=a.nextSibling;a.parentNode.removeChild(a);return b}var
jw=function(){function
a(c,e,d){b(this,a);this.children=c;this.pos=e;this.i=d;this.off=0}c(a,[{key:"findPos",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(a>this.pos||a==this.pos&&(c>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=a-this.pos;return this}var
b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return a}();function
rl(n,c,i,d,h,a,l,k,j){var
f=n.children,b=f.length?f[c]:null,g=a.length?a[a.length-1]:null,m=g?g.breakAfter:l;if(c==d&&b&&!l&&!m&&a.length<2&&b.merge(i,h,a.length?g:null,i==0,k,j))return;if(d<f.length){var
e=f[d];if(e&&h<e.length){if(c==d){e=e.split(h);h=0}if(!m&&g&&e.merge(0,h,g,true,0,j))a[a.length-1]=e;else{if(h)e.merge(0,h,null,false,0,j);a.push(e)}}else
if(e===null||e===void
0?void
0:e.breakAfter)if(g)g.breakAfter=1;else
l=1;d++}if(b){b.breakAfter=l;if(i>0){if(!l&&a.length&&b.merge(i,b.length,a[0],false,k,0))b.breakAfter=a.shift().breakAfter;else
if(i<b.length||b.children.length&&b.children[b.children.length-1].length==0)b.merge(i,b.length,null,false,k,0);c++}}while(c<d&&a.length)if(f[d-1].become(a[a.length-1])){d--;a.pop();j=a.length?0:k}else
if(f[c].become(a[0])){c++;a.shift();k=a.length?0:j}else
break;if(!a.length&&c&&d<f.length&&!f[c-1].breakAfter&&f[d].merge(0,0,f[c-1],false,k,j))c--;if(c<d||a.length)n.replaceChildren(c,d,a)}function
qb(c,i,k,j,o,n){var
g=c.childCursor(),d=g.findPos(k,1),p=d.i,q=d.off,e=g.findPos(i,-1),l=e.i,m=e.off,h=i-k,b=a(j),f;try{for(b.s();!(f=b.n()).done;){var
r=f.value;h+=r.length}}catch(a){b.e(a)}finally{b.f()}c.length+=h;rl(c,l,m,p,q,j,0,o,n)}var
vP=typeof
navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],lz=bn(vP,2),aF=lz[0],hj=lz[1],h5=/Edge\/(\d+)/.exec(aF.userAgent),oT=/MSIE \d/.test(aF.userAgent),h0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aF.userAgent),eK=!!(oT||h0||h5),oB=!eK&&/gecko\/(\d+)/i.test(aF.userAgent),gV=!eK&&/Chrome\/(\d+)/.exec(aF.userAgent),sK="webkitFontSmoothing"in
hj.documentElement.style,rA=!eK&&/Apple Computer/.test(aF.vendor),pj=rA&&(/Mobile\/\w+/.test(aF.userAgent)||aF.maxTouchPoints>2),l={mac:pj||/Mac/.test(aF.platform),windows:/Win/.test(aF.platform),linux:/Linux|X11/.test(aF.platform),ie:eK,ie_version:oT?hj.documentMode||6:h0?+h0[1]:h5?+h5[1]:0,gecko:oB,gecko_version:oB?+(/Firefox\/(\d+)/.exec(aF.userAgent)||[0,0])[1]:0,chrome:!!gV,chrome_version:gV?+gV[1]:0,ios:pj,android:/Android\b/.test(aF.userAgent),webkit:sK,safari:rA,webkit_version:sK?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hj.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},uI=256,d0=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.text=d;return c}c(a,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(a&&a.node==this.dom)a.written=true;this.dom.nodeValue=this.text}}},{key:"reuseDOM",value:function(a){if(a.nodeType==3)this.createDOM(a)}},{key:"merge",value:function(c,d,b){if(b&&(!(b
instanceof
a)||this.length-(d-c)+b.length>uI))return false;this.text=this.text.slice(0,c)+(b?b.text:"")+this.text.slice(d);this.markDirty();return true}},{key:"split",value:function(b){var
c=new
a(this.text.slice(b));this.text=this.text.slice(0,b);this.markDirty();return c}},{key:"localPosFromDOM",value:function(b,a){return b==this.dom?a:a?this.text.length:0}},{key:"domAtPos",value:function(a){return new
aw(this.dom,a)}},{key:"domBoundsAround",value:function(b,c,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return sc(this.dom,a,b)}}]);return a}(Y),dO=function(g){f(d,g);var
k=e(d);function
d(j){var
c,g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;b(this,d);c=k.call(this);c.mark=j;c.children=g;c.length=i;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;h.setParent(aQ(c))}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"setAttrs",value:function(a){ml(a);if(this.mark["class"])a.className=this.mark["class"];if(this.mark.attrs)for(var
b
in
this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);return a}},{key:"reuseDOM",value:function(a){if(a.nodeName==this.mark.tagName.toUpperCase()){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(a){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else
if(this.dirty&4)this.setAttrs(this.dom);t(r(d.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(b,f,a,g,e,c){if(a&&(!(a
instanceof
d&&a.mark.eq(this.mark))||b&&e<=0||f<this.length&&c<=0))return false;qb(this,b,f,a?a.children:[],e-1,c-1);this.markDirty();return true}},{key:"split",value:function(b){var
k=[],c=0,f=-1,j=0,e=a(this.children),h;try{for(e.s();!(h=e.n()).done;){var
g=h.value,i=c+g.length;if(i>b)k.push(c<b?g.split(b-c):g);if(f<0&&c>=b)f=j;c=i;j++}}catch(a){e.e(a)}finally{e.f()}var
l=this.length-b;this.length=b;if(f>-1){this.children.length=f;this.markDirty()}return new
d(this.mark,k,l)}},{key:"domAtPos",value:function(a){return o1(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return mP(this,a,b)}}]);return d}(Y);function
sc(i,b,e){var
g=i.nodeValue.length;if(b>g)b=g;var
f=b,h=b,a=0;if(b==0&&e<0||b==g&&e>=0){if(!(l.chrome||l.gecko))if(b){f--;a=1}else{h++;a=-1}}else
if(e<0)f--;else
h++;var
d=dr(i,f,h).getClientRects();if(!d.length)return ky;var
c=d[(a?a<0:e>=0)?0:d.length-1];if(l.safari&&!a&&c.width==0)c=Array.prototype.find.call(d,function(a){return a.width})||c;return a?ew(c,a<0):c||null}var
f$=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.side=e;return c}c(a,[{key:"split",value:function(b){var
c=a.create(this.widget,this.length-b,this.side);this.length-=b;return c}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"become",value:function(b){if(b.length==this.length&&b
instanceof
a&&b.side==this.side)if(this.widget.constructor==b.widget.constructor){if(!this.widget.eq(b.widget))this.markDirty(true);this.widget=b.widget;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"overrideDOMText",get:function(){if(this.length==0)return p.empty;var
a=this;while(a.parent)a=a.parent;var
d=a.editorView,c=d&&d.state.doc,b=this.posAtStart;return c?c.slice(b,b+this.length):p.empty}},{key:"domAtPos",value:function(a){return a==0?aw.before(this.dom):aw.after(this.dom,a==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,e){var
d=this.dom.getClientRects(),b=null;if(!d.length)return ky;for(var
c=a>0?d.length-1:0;;c+=a>0?-1:1){b=d[c];if(a>0?c==0:c==d.length-1||b.top<b.bottom)break}return a==0&&e>0||a==this.length&&e<=0?b:ew(b,a==0)}},{key:"isEditable",get:function(){return false}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}],[{key:"create",value:function(b,c,d){return new(b.customView||a)(b,c,d)}}]);return a}(Y),tq=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"domAtPos",value:function(a){return new
aw(this.widget.text,a)}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(b,a){return!a?0:b.nodeType==3?Math.min(a,this.length):this.length}},{key:"ignoreMutation",value:function(){return false}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(a,b){return sc(this.widget.text,a,b)}},{key:"isEditable",get:function(){return true}}]);return a}(f$),gd=l.android?"\u200B\u200B":"\u200B",f7=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.side=d;return c}c(a,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return false}},{key:"become",value:function(b){return b
instanceof
a&&b.side==this.side}},{key:"split",value:function(){return new
a(this.side)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(document.createTextNode(gd));else
if(this.dirty&&this.dom.nodeValue!=gd)this.dom.nodeValue=gd}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(a){return aw.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(b){var
a=ce(this.dom);return a[a.length-1]||null}},{key:"overrideDOMText",get:function(){return p.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]);return a}(Y);d0.prototype.children=f$.prototype.children=f7.prototype.children=ij;function
o1(f,e,d){var
a=0;for(var
b=0;a<e.length;a++){var
c=e[a],g=b+c.length;if(g==b&&c.getSide()<=0)continue;if(d>b&&d<g&&c.dom.parentNode==f)return c.domAtPos(d-b);if(d<=b)break;b=g}for(;a>0;a--){var
h=e[a-1].dom;if(h.parentNode==f)return aw.after(h)}return new
aw(f,0)}function
pv(d,a,e){var
c,b=d.children;if(e>0&&a
instanceof
dO&&b.length&&(c=b[b.length-1])instanceof
dO&&c.mark.eq(a.mark))pv(c,a.children[0],e-1);else{b.push(a);a.setParent(d)}d.length+=a.length}function
mP(a,f,g){for(var
e=0,c=0;c<a.children.length;c++){var
d=a.children[c],b=e+d.length,k=void
0;if((g<=0||b==a.length||d.getSide()>0?b>=f:b>f)&&(f<b||c+1==a.children.length||(k=a.children[c+1]).length||k.getSide()>0)){var
i=0;if(b==e){if(d.getSide()<=0)continue;i=g=-d.getSide()}var
h=d.coordsAt(f-e,g);return i&&h?ew(h,g<0):h}e=b}var
j=a.dom.lastChild;if(!j)return a.dom.getBoundingClientRect();var
l=ce(j);return l[l.length-1]||null}function
g2(c,a){for(var
b
in
c)if(b=="class"&&a["class"])a["class"]+=" "+c["class"];else
if(b=="style"&&a.style)a.style+=";"+c.style;else
a[b]=c[b];return a}function
gC(a,b){if(a==b)return true;if(!a||!b)return false;var
f=Object.keys(a),g=Object.keys(b);if(f.length!=g.length)return false;for(var
c=0,e=f;c<e.length;c++){var
d=e[c];if(g.indexOf(d)==-1||a[d]!==b[d])return false}return true}function
iT(d,c,a){if(c)for(var
e
in
c)if(!(a&&e
in
a))d.removeAttribute(e);if(a)for(var
b
in
a)if(!(c&&c[b]==a[b]))d.setAttribute(b,a[b])}var
cN=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return false}},{key:"updateDOM",value:function(a){return false}},{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(a){return true}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(a){}}]);return a}(),U=function(a){a[a["Text"]=0]="Text";a[a["WidgetBefore"]=1]="WidgetBefore";a[a["WidgetAfter"]=2]="WidgetAfter";a[a["WidgetRange"]=3]="WidgetRange";return a}(U||(U={})),ag=function(a){f(d,a);var
h=e(d);function
d(f,c,g,e){var
a;b(this,d);a=h.call(this);a.startSide=f;a.endSide=c;a.widget=g;a.spec=e;return a}c(d,[{key:"heightRelevant",get:function(){return false}},{key:"hasHeight",value:function(){return this.widget?this.widget.estimatedHeight>-1:false}}],[{key:"mark",value:function(a){return new
ka(a)}},{key:"widget",value:function(b){var
a=b.side||0,c=!!b.block;a+=c?a>0?3e8:-4e8:a>0?1e8:-1e8;return new
cC(b,a,a,c,b.widget||null,false)}},{key:"replace",value:function(b){var
a=!!b.block,c=oH(b,a),f=c.start,d=c.end,g=a?f?-3e8:-1:4e8,e=a?d?2e8:1:-5e8;return new
cC(b,g,e,a,b.widget||null,true)}},{key:"line",value:function(a){return new
fI(a)}},{key:"set",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return k.of(a,b)}}]);return d}(aX);ag.none=k.empty;var
ka=function(d){f(a,d);var
h=e(a);function
a(d){var
c;b(this,a);var
e=oH(d),g=e.start,f=e.end;c=h.call(this,g?-1:4e8,f?1:-5e8,null,d);c.tagName=d.tagName||"span";c["class"]=d["class"]||"";c.attrs=d.attributes||null;return c}c(a,[{key:"eq",value:function(b){return this==b||b
instanceof
a&&this.tagName==b.tagName&&this["class"]==b["class"]&&gC(this.attrs,b.attrs)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(b>=c)throw new
RangeError("Mark decorations may not be empty");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(ag);ka.prototype.point=false;var
fI=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,-2e8,-2e8,null,c)}c(a,[{key:"eq",value:function(b){return b
instanceof
a&&gC(this.spec.attributes,b.spec.attributes)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(c!=b)throw new
RangeError("Line decoration ranges must be zero-length");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(ag);fI.prototype.mapMode=z.TrackBefore;fI.prototype.point=true;var
cC=function(d){f(a,d);var
j=e(a);function
a(h,e,f,d,i,g){var
c;b(this,a);c=j.call(this,e,f,i,h);c.block=d;c.isReplace=g;c.mapMode=!d?z.TrackDel:e<=0?z.TrackBefore:z.TrackAfter;return c}c(a,[{key:"type",get:function(){return this.startSide<this.endSide?U.WidgetRange:this.startSide<=0?U.WidgetBefore:U.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(b){return b
instanceof
a&&C7(this.widget,b.widget)&&this.block==b.block&&this.startSide==b.startSide&&this.endSide==b.endSide}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(this.isReplace&&(b>c||b==c&&this.startSide>0&&this.endSide<=0))throw new
RangeError("Invalid range for replacement decoration");if(!this.isReplace&&c!=b)throw new
RangeError("Widget decorations can only have zero-length ranges");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(ag);cC.prototype.point=true;function
oH(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,b=c.inclusiveStart,a=c.inclusiveEnd;if(b==null)b=c.inclusive;if(a==null)a=c.inclusive;return{start:b!==null&&b!==void
0?b:d,end:a!==null&&a!==void
0?a:d}}function
C7(a,b){return a==b||!!(a&&b&&a.compare(b))}function
gw(c,d,a){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,b=a.length-1;if(b>=0&&a[b]+e>=c)a[b]=Math.max(a[b],d);else
a.push(c,d)}var
aR=function(g){f(d,g);var
h=e(d);function
d(){var
a;b(this,d);a=h.apply(this,arguments);a.children=[];a.length=0;a.prevAttrs=void
0;a.attrs=null;a.breakAfter=0;return a}c(d,[{key:"merge",value:function(b,g,a,c,f,e){if(a){if(!(a
instanceof
d))return false;if(!this.dom)a.transferDOM(this)}if(c)this.setDeco(a?a.attrs:null);qb(this,b,g,a?a.children:[],f,e);return true}},{key:"split",value:function(g){var
b=new
d();b.breakAfter=this.breakAfter;if(this.length==0)return b;var
f=this.childPos(g),a=f.i,e=f.off;if(e){b.append(this.children[a].split(e),0);this.children[a].merge(e,this.children[a].length,null,false,0,0);a++}for(var
c=a;c<this.children.length;c++)b.append(this.children[c],0);while(a>0&&this.children[a-1].length==0)this.children[--a].destroy();this.children.length=a;this.markDirty();this.length=g;return b}},{key:"transferDOM",value:function(a){if(!this.dom)return;a.setDOM(this.dom);a.prevAttrs=this.prevAttrs===void
0?this.attrs:this.prevAttrs;this.prevAttrs=void
0;this.dom=null}},{key:"setDeco",value:function(a){if(!gC(this.attrs,a)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=a}}},{key:"append",value:function(a,b){pv(this,a,b)}},{key:"addLineDeco",value:function(c){var
a=c.spec.attributes,b=c.spec["class"];if(a)this.attrs=g2(a,this.attrs||{});if(b)this.attrs=g2({"class":b},this.attrs||{})}},{key:"domAtPos",value:function(a){return o1(this.dom,this.children,a)}},{key:"reuseDOM",value:function(a){if(a.nodeName=="DIV"){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(e){var
b;if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}else
if(this.dirty&4){ml(this.dom);this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}if(this.prevAttrs!==void
0){iT(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void
0}t(r(d.prototype),"sync",this).call(this,e);var
a=this.dom.lastChild;while(a&&Y.get(a)instanceof
dO)a=a.lastChild;if(!a||a.nodeName!="BR"&&((b=Y.get(a))===null||b===void
0?void
0:b.isEditable)==false&&(!l.ios||!this.children.some(function(a){return a
instanceof
d0}))){var
c=document.createElement("BR");c.cmIgnore=true;this.dom.appendChild(c)}}},{key:"measureTextSize",value:function(){if(this.children.length==0||this.length>20)return null;var
f=0,b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(!(d
instanceof
d0))return null;var
e=ce(d.dom);if(e.length!=1)return null;f+=e[0].width}}catch(a){b.e(a)}finally{b.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:f/this.length}}},{key:"coordsAt",value:function(a,b){return mP(this,a,b)}},{key:"become",value:function(a){return false}},{key:"type",get:function(){return U.Text}}],[{key:"find",value:function(e,g){for(var
b=0,f=0;b<e.children.length;b++){var
a=e.children[b],c=f+a.length;if(c>=g){if(a
instanceof
d)return a;if(c>g)break}f=c+a.breakAfter}return null}}]);return d}(Y),fm=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.type=e;c.breakAfter=0;return c}c(a,[{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"domAtPos",value:function(a){return a==0?aw.before(this.dom):aw.after(this.dom,a==this.length)}},{key:"split",value:function(b){var
d=this.length-b;this.length=b;var
c=new
a(this.widget,d,this.type);c.breakAfter=this.breakAfter;return c}},{key:"children",get:function(){return ij}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):p.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(b){if(b
instanceof
a&&b.type==this.type&&b.widget.constructor==this.widget.constructor){if(!b.widget.eq(this.widget))this.markDirty(true);this.widget=b.widget;this.length=b.length;this.breakAfter=b.breakAfter;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}]);return a}(Y),tA=function(){function
d(a,c,f,e){b(this,d);this.doc=a;this.pos=c;this.end=f;this.disallowBlockEffectsBelow=e;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=c}c(d,[{key:"posCovered",value:function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var
a=this.content[this.content.length-1];return!a.breakAfter&&!(a
instanceof
fm&&a.type==U.WidgetBefore)}},{key:"getLine",value:function(){if(!this.curLine){this.content.push(this.curLine=new
aR());this.atCursorPos=true}return this.curLine}},{key:"flushBuffer",value:function(a){if(this.pendingBuffer){this.curLine.append(fh(new
f7(-1),a),a.length);this.pendingBuffer=0}}},{key:"addBlockWidget",value:function(a){this.flushBuffer([]);this.curLine=null;this.content.push(a)}},{key:"finish",value:function(a){if(!a)this.flushBuffer([]);else
this.pendingBuffer=0;if(!this.posCovered())this.getLine()}},{key:"buildText",value:function(a,e,c){while(a>0){if(this.textOff==this.text.length){var
b=this.cursor.next(this.skip),h=b.value,g=b.lineBreak,f=b.done;this.skip=0;if(f)throw new
Error("Ran out of text content when drawing inline views");if(g){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else
this.breakAtStart=1;this.flushBuffer([]);this.curLine=null;a--;continue}else{this.text=h;this.textOff=0}}var
d=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(e.slice(0,c));this.getLine().append(fh(new
d0(this.text.slice(this.textOff,this.textOff+d)),e),c);this.atCursorPos=true;this.textOff+=d;a-=d;c=0}}},{key:"span",value:function(d,b,c,a){this.buildText(b-d,c,a);this.pos=b;if(this.openStart<0)this.openStart=a}},{key:"point",value:function(f,e,a,b,d){var
c=e-f;if(a
instanceof
cC)if(a.block){var
k=a.type;if(k==U.WidgetAfter&&!this.posCovered())this.getLine();this.addBlockWidget(new
fm(a.widget||new
kh("div"),c,k))}else{var
g=f$.create(a.widget||new
kh("span"),c,a.startSide),i=this.atCursorPos&&!g.isEditable&&d<=b.length&&(f<e||a.startSide>0),h=!g.isEditable&&(f<e||a.startSide<=0),j=this.getLine();if(this.pendingBuffer==2&&!i)this.pendingBuffer=0;this.flushBuffer(b);if(i){j.append(fh(new
f7(1),b),d);d=b.length+Math.max(0,d-b.length)}j.append(fh(g,b),d);this.atCursorPos=h;this.pendingBuffer=!h?0:f<e?1:2}else
if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(a);if(c){if(this.textOff+c<=this.text.length)this.textOff+=c;else{this.skip+=c-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=d}},{key:"filterPoint",value:function(d,c,a,b){if(b>=this.disallowBlockEffectsBelow||!(a
instanceof
cC))return true;if(a.block)throw new
RangeError("Block decorations may not be specified via plugins");return c<=this.doc.lineAt(this.pos).to}}],[{key:"build",value:function(g,b,c,e,f){var
a=new
d(g,b,c,f);a.openEnd=k.spans(e,b,c,a);if(a.openStart<0)a.openStart=a.openEnd;a.finish(a.openEnd);return a}}]);return d}();function
fh(c,e){var
b=a(e),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;c=new
dO(f,[c],c.length)}}catch(a){b.e(a)}finally{b.f()}return c}var
kh=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.tag=d;return c}c(a,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return a}(cN),Bk=[],mq=h.define(),nO=h.define(),qp=h.define(),n_=h.define(),iY=h.define(),o6=h.define(),iy=j.define({map:function(b,a){return b.map(a)}}),md=j.define({map:function(b,a){return b.map(a)}}),dU=function(){function
a(c){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"nearest",d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"nearest",g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5,e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;b(this,a);this.range=c;this.y=f;this.x=d;this.yMargin=g;this.xMargin=e}c(a,[{key:"map",value:function(b){return b.empty?this:new
a(this.range.map(b),this.y,this.x,this.yMargin,this.xMargin)}}]);return a}(),lE=j.define({map:function(b,a){return b.map(a)}});function
bS(d,a,b){var
c=d.facet(n_);if(c.length)c[0](a);else
if(window.onerror)window.onerror(String(a),b,void
0,void
0,a);else
if(b)console.error(b+":",a);else
console.error(a)}var
c1=h.define({combine:function(a){return a.length?a[0]:true}}),u9=c(function
a(c,d){b(this,a);this.field=c;this.get=d}),aV=function(){function
a(){b(this,a)}c(a,[{key:"from",value:function(a){return new
u9(this,a)}}],[{key:"define",value:function(){return new
a()}}]);return a}();aV.decorations=aV.define();aV.atomicRanges=aV.define();aV.scrollMargins=aV.define();var
A4=0,dy=h.define(),kH=function(){function
d(e,a,c){b(this,d);this.id=e;this.create=a;this.fields=c;this.extension=dy.of(this)}c(d,null,[{key:"define",value:function(j,l){var
f=l||{},i=f.eventHandlers,e=f.provide,h=f.decorations,c=[];if(e){var
b=a(Array.isArray(e)?e:[e]),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;c.push(k)}}catch(a){b.e(a)}finally{b.f()}}if(i)c.push(nE.from(function(a){return{plugin:a,handlers:i}}));if(h)c.push(aV.decorations.from(h));return new
d(A4++,j,c)}},{key:"fromClass",value:function(b,a){return d.define(function(a){return new
b(a)},a)}}]);return d}(),nE=aV.define(),fV=function(){function
d(a){b(this,d);this.spec=a;this.mustUpdate=null;this.value=null}c(d,[{key:"takeField",value:function(h,g){if(this.spec){var
b=a(this.spec.fields),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,e=d.field,f=d.get;if(e==h)g.push(f(this.value))}}catch(a){b.e(a)}finally{b.f()}}}},{key:"update",value:function
a(b){if(!this.value){if(this.spec)try{this.value=this.spec.create(b)}catch(a){bS(b.state,a,"CodeMirror plugin crashed");this.deactivate()}}else
if(this.mustUpdate){var
a=this.mustUpdate;this.mustUpdate=null;if(this.value.update)try{this.value.update(a)}catch(b){bS(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(a){}this.deactivate()}}return this}},{key:"destroy",value:function(b){var
a;if((a=this.value)===null||a===void
0?void
0:a.destroy)try{this.value.destroy()}catch(a){bS(b.state,a,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]);return d}(),nY=h.define(),mK=h.define(),bK=h.define(),dl=h.define(),cv=function(){function
d(a,e,c,f){b(this,d);this.fromA=a;this.toA=e;this.fromB=c;this.toB=f}c(d,[{key:"join",value:function(a){return new
d(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(c){var
a=c.length,b=this;for(;a>0;a--){var
d=c[a-1];if(d.fromA>b.toA)continue;if(d.toA<b.fromA)break;b=b.join(d);c.splice(a-1,1)}c.splice(a,0,b);return c}}],[{key:"extendWithRanges",value:function(f,c){if(c.length==0)return f;var
j=[];for(var
e=0,b=0,m=0,i=0;;e++){var
a=e==f.length?null:f[e],l=m-i,g=a?a.fromB:1e9;while(b<c.length&&c[b]<g){var
o=c[b],n=c[b+1],h=Math.max(i,o),k=Math.min(g,n);if(h<=k)new
d(h+l,k+l,h,k).addToSet(j);if(n>g)break;else
b+=2}if(!a)return j;new
d(a.fromA,a.toA,a.fromB,a.toB).addToSet(j);m=a.toA;i=a.toB}}}]);return d}(),kP=function(){function
e(c,j){var
i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bk;b(this,e);this.view=c;this.state=j;this.transactions=i;this.flags=0;this.startState=c.state;this.changes=X.empty(this.startState.doc.length);var
d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
k=f.value;this.changes=this.changes.compose(k.changes)}}catch(a){d.e(a)}finally{d.f()}var
g=[];this.changes.iterChangedRanges(function(a,c,b,d){return g.push(new
cv(a,c,b,d))});this.changedRanges=g;var
h=c.hasFocus;if(h!=c.inputState.notifiedFocused){c.inputState.notifiedFocused=h;this.flags|=1}}c(e,[{key:"viewportChanged",get:function(){return(this.flags&4)>0}},{key:"heightChanged",get:function(){return(this.flags&2)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(this.flags&(8|2))>0}},{key:"focusChanged",get:function(){return(this.flags&1)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return this.flags==0&&this.transactions.length==0}}]);return e}(),aA=function(a){a[a["LTR"]=0]="LTR";a[a["RTL"]=1]="RTL";return a}(aA||(aA={})),fC=aA.LTR,ve=aA.RTL;function
nh(c){var
b=[];for(var
a=0;a<c.length;a++)b.push(1<<+c[a]);return b}var
ux=nh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sZ=nh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fr=Object.create(null),a0=[];for(var
gk=0,k0=["()","[]","{}"];gk<k0.length;gk++){var
ln=k0[gk],lc=ln.charCodeAt(0),ly=ln.charCodeAt(1);fr[lc]=ly;fr[ly]=-lc}function
w4(a){return a<=247?ux[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?sZ[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8203?256:a==8204?256:1}var
s9=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,bY=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.level=d}c(a,[{key:"dir",get:function(){return this.level%2?ve:fC}},{key:"side",value:function(b,a){return this.dir==a==b?this.to:this.from}}],[{key:"find",value:function(e,d,g,f){var
c=-1;for(var
b=0;b<e.length;b++){var
a=e[b];if(a.from<=d&&a.to>=d){if(a.level==g)return b;if(c<0||(f!=0?f<0?a.from<d:a.to>d:e[c].level>a.level))c=b}}if(c<0)throw new
RangeError("Index out of range");return c}}]);return a}(),L=[];function
xj(q,G){var
a=q.length,c=G==fC?1:2,R=G==fC?2:1;if(!q||c==1&&!s9.test(q))return ss(a);for(var
r=0,I=c,J=c;r<a;r++){var
d=w4(q.charCodeAt(r));if(d==512)d=I;else
if(d==8&&J==4)d=16;L[r]=d==4?2:d;if(d&7)J=d;I=d}for(var
b=0,o=c,u=c;b<a;b++){var
j=L[b];if(j==128)if(b<a-1&&o==L[b+1]&&o&24)j=L[b]=o;else
L[b]=256;else
if(j==64){var
k=b+1;while(k<a&&L[k]==64)k++;var
S=b&&o==8||k<a&&L[k]==8?u==1?1:8:256;for(var
y=b;y<k;y++)L[y]=S;b=k-1}else
if(j==8&&u==1)L[b]=1;o=j;if(j&7)u=j}for(var
l=0,m=0,E=0,D,w,v;l<a;l++)if(w=fr[D=q.charCodeAt(l)])if(w<0){for(var
n=m-3;n>=0;n-=3)if(a0[n+1]==-w){var
x=a0[n+2],M=x&2?c:!(x&4)?0:x&1?R:c;if(M)L[l]=L[a0[n]]=M;m=n;break}}else
if(a0.length==189)break;else{a0[m++]=l;a0[m++]=D;a0[m++]=E}else
if((v=L[l])==2||v==1){var
H=v==c;E=H?0:1;for(var
p=m-3;p>=0;p-=3){var
F=a0[p+2];if(F&2)break;if(H)a0[p+2]|=2;else{if(F&4)break;a0[p+2]|=4}}}for(var
e=0;e<a;e++)if(L[e]==256){var
g=e+1;while(g<a&&L[g]==256)g++;var
C=(e?L[e-1]:c)==1,Q=(g<a?L[g]:c)==1,O=C==Q?C?1:2:c;for(var
t=e;t<g;t++)L[t]=O;e=g-1}var
s=[];if(c==1)for(var
f=0;f<a;){var
z=f,K=L[f++]!=1;while(f<a&&K==(L[f]!=1))f++;if(K)for(var
i=f;i>z;){var
N=i,A=L[--i]!=2;while(i>z&&A==(L[i-1]!=2))i--;s.push(new
bY(i,N,A?2:1))}else
s.push(new
bY(z,f,0))}else
for(var
h=0;h<a;){var
P=h,B=L[h++]==2;while(h<a&&B==(L[h]==2))h++;s.push(new
bY(P,h,B?1:2))}return s}function
ss(a){return[new
bY(0,a,0)]}var
qB="";function
AX(c,e,b,l,a){var
k,f=l.head-c.from,h=-1;if(f==0){if(!a||!c.length)return null;if(e[0].level!=b){f=e[0].side(false,b);h=0}}else
if(f==c.length){if(a)return null;var
n=e[e.length-1];if(n.level!=b){f=n.side(true,b);h=e.length-1}}if(h<0)h=bY.find(e,f,(k=l.bidiLevel)!==null&&k!==void
0?k:-1,l.assoc);var
g=e[h];if(f==g.side(a,b)){g=e[h+=a?1:-1];f=g.side(!a,b)}var
m=a==(g.dir==b),i=x(c.text,f,m);qB=c.text.slice(Math.min(f,i),Math.max(f,i));if(i!=g.side(a,b))return d.cursor(i+c.from,m?-1:1,g.level);var
j=h==(a?e.length-1:0)?null:e[h+(a?1:-1)];if(!j&&g.level!=b)return d.cursor(a?c.to:c.from,a?-1:1,b);if(j&&j.level<g.level)return d.cursor(j.side(!a,b)+c.from,a?1:-1,j.level);return d.cursor(i+c.from,a?-1:1,g.level)}var
jI=function(){function
d(c,a){b(this,d);this.points=c;this.view=a;this.text="";this.lineBreak=a.state.lineBreak}c(d,[{key:"readRange",value:function(d,e){if(!d)return this;var
f=d.parentNode;for(var
a=d;;){this.findPointBefore(f,a);this.readNode(a);var
b=a.nextSibling;if(b==e)break;var
c=Y.get(a),g=Y.get(b);if(c&&g?c.breakAfter:(c?c.breakAfter:po(a))||po(b)&&(a.nodeName!="BR"||a.cmIgnore))this.text+=this.lineBreak;a=b}this.findPointBefore(f,e);return this}},{key:"readTextNode",value:function(d){var
b,c,a=d.nodeValue;if(/^\u200b/.test(a)&&((b=d.previousSibling)===null||b===void
0?void
0:b.contentEditable)=="false")a=a.slice(1);if(/\u200b$/.test(a)&&((c=d.nextSibling)===null||c===void
0?void
0:c.contentEditable)=="false")a=a.slice(0,a.length-1);return a}},{key:"readNode",value:function(a){if(a.cmIgnore)return;var
d=Y.get(a),c=d&&d.overrideDOMText,b;if(c!=null)b=c.sliceString(0,void
0,this.lineBreak);else
if(a.nodeType==3)b=this.readTextNode(a);else
if(a.nodeName=="BR")b=a.nextSibling?this.lineBreak:"";else
if(a.nodeType==1)this.readRange(a.firstChild,null);if(b!=null){this.findPointIn(a,b.length);this.text+=b;if(l.chrome&&this.view.inputState.lastKeyCode==13&&!a.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}}},{key:"findPointBefore",value:function(e,f){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==e&&e.childNodes[c.offset]==f)c.pos=this.text.length}}catch(a){b.e(a)}finally{b.f()}}},{key:"findPointIn",value:function(f,e){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==f)c.pos=this.text.length+Math.min(c.offset,e)}}catch(a){b.e(a)}finally{b.f()}}}]);return d}();function
po(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}var
jE=c(function
a(c,d){b(this,a);this.node=c;this.offset=d;this.pos=-1}),jQ=function(g){f(d,g);var
h=e(d);function
d(c){var
a;b(this,d);a=h.call(this);a.view=c;a.compositionDeco=ag.none;a.decorations=[];a.pluginDecorationLength=0;a.minWidth=0;a.minWidthFrom=0;a.minWidthTo=0;a.impreciseAnchor=null;a.impreciseHead=null;a.forceSelection=false;a.lastUpdate=Date.now();a.setDOM(c.contentDOM);a.children=[new
aR()];a.children[0].setParent(aQ(a));a.updateDeco();a.updateInner([new
cv(0,0,0,c.state.doc.length)],0);return a}c(d,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(a){var
c=this,b=a.changedRanges;if(this.minWidth>0&&b.length)if(!b.every(function(a){var
b=a.fromA,d=a.toA;return d<c.minWidthFrom||b>c.minWidthTo}))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else{this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)}if(this.view.inputState.composing<0)this.compositionDeco=ag.none;else
if(a.transactions.length||this.dirty)this.compositionDeco=xe(this.view,a.changes);if((l.ie||l.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines)this.forceSelection=true;var
f=this.decorations,d=this.updateDeco(),e=yp(f,d,a.changes);b=cv.extendWithRanges(b,e);if(this.dirty==0&&b.length==0)return false;else{this.updateInner(b,a.startState.doc.length);if(a.transactions.length)this.lastUpdate=Date.now();return true}}},{key:"updateInner",value:function(h,i){var
b=this;this.view.viewState.mustMeasureContent=true;this.updateChildren(h,i);var
d=this.view.observer;d.ignore(function(){b.dom.style.height=b.view.viewState.contentHeight+"px";b.dom.style.minWidth=b.minWidth?b.minWidth+"px":"";var
a=l.chrome||l.ios?{node:d.selectionRange.focusNode,written:false}:void
0;b.sync(a);b.dirty=0;if(a&&(a.written||d.selectionRange.focusNode!=a.node))b.forceSelection=true;b.dom.style.height=""});var
g=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var
c=a(this.children),f;try{for(c.s();!(f=c.n()).done;){var
e=f.value;if(e
instanceof
fm&&e.widget
instanceof
jj)g.push(e.dom)}}catch(a){c.e(a)}finally{c.f()}}d.updateGaps(g)}},{key:"updateChildren",value:function(f,n){var
g=this.childCursor(n);for(var
c=f.length-1;;c--){var
a=c>=0?f[c]:null;if(!a)break;var
j=a.fromA,q=a.toA,k=a.fromB,r=a.toB,b=tA.build(this.view.state.doc,k,r,this.decorations,this.pluginDecorationLength),i=b.content,h=b.breakAtStart,p=b.openStart,o=b.openEnd,d=g.findPos(q,1),s=d.i,t=d.off,e=g.findPos(j,-1),l=e.i,m=e.off;rl(this,l,m,s,t,i,h,p,o)}}},{key:"updateSelection",value:function(){var
f=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(i)this.view.observer.readSelectionRange();if(!(h||this.mayControlSelection())||l.ios&&this.view.inputState.rapidCompositionStart)return;var
g=this.forceSelection;this.forceSelection=false;var
d=this.view.state.selection.main,a=this.domAtPos(d.anchor),c=d.empty?a:this.domAtPos(d.head);if(l.gecko&&d.empty&&wy(a)){var
e=document.createTextNode("");this.view.observer.ignore(function(){return a.node.insertBefore(e,a.node.childNodes[a.offset]||null)});a=c=new
aw(e,0);g=true}var
b=this.view.observer.selectionRange;if(g||!b.focusNode||!eR(a.node,a.offset,b.anchorNode,b.anchorOffset)||!eR(c.node,c.offset,b.focusNode,b.focusOffset)){this.view.observer.ignore(function(){if(l.android&&l.chrome&&f.dom.contains(b.focusNode)&&zG(b.focusNode,f.dom)){f.dom.blur();f.dom.focus({preventScroll:true})}var
e=eE(f.root);if(d.empty){if(l.gecko){var
g=A$(a.node,a.offset);if(g&&g!=(1|2)){var
h=qG(a.node,a.offset,g==1?1:-1);if(h)a=new
aw(h,g==1?0:h.nodeValue.length)}}e.collapse(a.node,a.offset);if(d.bidiLevel!=null&&b.cursorBidiLevel!=null)b.cursorBidiLevel=d.bidiLevel}else
if(e.extend){e.collapse(a.node,a.offset);e.extend(c.node,c.offset)}else{var
i=document.createRange();if(d.anchor>d.head){var
j=[c,a];a=j[0];c=j[1]}i.setEnd(c.node,c.offset);i.setStart(a.node,a.offset);e.removeAllRanges();e.addRange(i)}});this.view.observer.setSelectionRange(a,c)}this.impreciseAnchor=a.precise?null:new
aw(b.anchorNode,b.anchorOffset);this.impreciseHead=c.precise?null:new
aw(b.focusNode,b.focusOffset)}},{key:"enforceCursorAssoc",value:function(){if(this.compositionDeco.size)return;var
a=this.view.state.selection.main,c=eE(this.root);if(!a.empty||!a.assoc||!c.modify)return;var
b=aR.find(this,a.head);if(!b)return;var
g=b.posAtStart;if(a.head==g||a.head==g+b.length)return;var
e=this.coordsAt(a.head,-1),d=this.coordsAt(a.head,1);if(!e||!d||e.bottom>d.top)return;var
f=this.domAtPos(a.head+a.assoc);c.collapse(f.node,f.offset);c.modify("move",a.assoc<0?"forward":"backward","lineboundary")}},{key:"mayControlSelection",value:function(){return this.view.state.facet(c1)?this.root.activeElement==this.dom:hS(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(c){for(var
a=c;a;){var
b=Y.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}},{key:"posFromDOM",value:function(b,c){var
a=this.nearest(b);if(!a)throw new
RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(b,c)+a.posAtStart}},{key:"domAtPos",value:function(e){var
c=this.childCursor().findPos(e,-1),a=c.i,b=c.off;for(;a<this.children.length-1;){var
d=this.children[a];if(b<d.length||d
instanceof
aR)break;a++;b=0}return this.children[a].domAtPos(b)}},{key:"coordsAt",value:function(d,e){for(var
f=this.length,a=this.children.length-1;;a--){var
b=this.children[a],c=f-b.breakAfter-b.length;if(d>c||d==c&&b.type!=U.WidgetBefore&&b.type!=U.WidgetAfter&&(!a||e==2||this.children[a-1].breakAfter||this.children[a-1].type==U.WidgetBefore&&e>-2))return b.coordsAt(d-c,e);f=c}}},{key:"measureVisibleLineHeights",value:function(){var
k=[],g=this.view.viewState.viewport,n=g.from,p=g.to,h=this.view.contentDOM.clientWidth,o=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1;for(var
b=0,c=0;c<this.children.length;c++){var
a=this.children[c],e=b+a.length;if(e>p)break;if(b>=n){var
d=a.dom.getBoundingClientRect();k.push(d.height);if(o){var
i=a.dom.lastChild,f=i?ce(i):[];if(f.length){var
j=f[f.length-1],m=this.view.textDirection==aA.LTR?j.right-d.left:d.right-j.left;if(m>l){l=m;this.minWidth=h;this.minWidthFrom=b;this.minWidthTo=e}}}}b=e+a.breakAfter}return k}},{key:"measureTextSize",value:function(){var
i=this,c=a(this.children),d;try{for(c.s();!(d=c.n()).done;){var
f=d.value;if(f
instanceof
aR){var
h=f.measureTextSize();if(h)return h}}}catch(a){c.e(a)}finally{c.f()}var
b=document.createElement("div"),g,e;b.className="cm-line";b.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){i.dom.appendChild(b);var
a=ce(b.firstChild)[0];g=b.getBoundingClientRect().height;e=a?a.width/27:7;b.remove()});return{lineHeight:g,charWidth:e}}},{key:"childCursor",value:function(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length,a=this.children.length;if(a)b-=this.children[--a].length;return new
jw(this.children,b,a)}},{key:"computeBlockGapDeco",value:function(){var
f=[],c=this.view.viewState;for(var
b=0,d=0;;d++){var
a=d==c.viewports.length?null:c.viewports[d],e=a?a.from-1:this.length;if(e>b){var
g=c.lineBlockAt(e).bottom-c.lineBlockAt(b).top;f.push(ag.replace({widget:new
jj(g),block:true,inclusive:true}).range(b,e))}if(!a)break;b=a.to+1}return ag.set(f)}},{key:"updateDeco",value:function(){var
a=this.view.pluginField(aV.decorations);this.pluginDecorationLength=a.length;return this.decorations=[].concat(P(a),P(this.view.state.facet(bK)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(f){var
b=f.range,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(!c)return;if(!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1)))c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)};var
i=0,j=0,k=0,h=0,g=a(this.view.pluginField(aV.scrollMargins)),l;try{for(g.s();!(l=g.n()).done;){var
d=l.value;if(d){var
n=d.left,o=d.right,p=d.top,m=d.bottom;if(n!=null)i=Math.max(i,n);if(o!=null)j=Math.max(j,o);if(p!=null)k=Math.max(k,p);if(m!=null)h=Math.max(h,m)}}}catch(a){g.e(a)}finally{g.f()}var
q={left:c.left-i,top:c.top-k,right:c.right+j,bottom:c.bottom+h};B5(this.view.scrollDOM,q,b.head<b.anchor?-1:1,f.x,f.y,f.xMargin,f.yMargin,this.view.textDirection==aA.LTR)}}]);return d}(Y);function
wy(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}var
jj=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.height=d;return c}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("div");this.updateDOM(a);return a}},{key:"eq",value:function(a){return a.height==this.height}},{key:"updateDOM",value:function(a){a.style.height=this.height+"px";return true}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(cN);function
mD(i){var
f=i.observer.selectionRange,c=f.focusNode&&qG(f.focusNode,f.focusOffset,0);if(!c)return null;var
a=i.docView.nearest(c);if(!a)return null;if(a
instanceof
aR){var
d=c;while(d.parentNode!=a.dom)d=d.parentNode;var
b=d.previousSibling;while(b&&!Y.get(b))b=b.previousSibling;var
h=b?Y.get(b).posAtEnd:a.posAtStart;return{from:h,to:h,node:d,text:c}}else{for(;;){var
j=a,e=j.parent;if(!e)return null;if(e
instanceof
aR)break;a=e}var
g=a.posAtStart;return{from:g,to:g+a.length,node:a.dom,text:c}}}function
xe(g,h){var
d=mD(g);if(!d)return ag.none;var
i=d.from,k=d.to,e=d.node,j=d.text,a=h.mapPos(i,1),c=Math.max(a,h.mapPos(k,-1)),f=g.state,b=e.nodeType==3?e.nodeValue:new
jI([],g).readRange(e.firstChild,null).text;if(c-a<b.length)if(f.sliceDoc(a,Math.min(f.doc.length,a+b.length))==b)c=a+b.length;else
if(f.sliceDoc(Math.max(0,c-b.length),c)==b)a=c-b.length;else
return ag.none;else
if(f.sliceDoc(a,c)!=b)return ag.none;return ag.set(ag.replace({widget:new
tv(e,j)}).range(a,c))}var
tv=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.top=e;c.text=d;return c}c(a,[{key:"eq",value:function(a){return this.top==a.top&&this.text==a.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return false}},{key:"customView",get:function(){return tq}}]);return a}(cN);function
qG(a,b,c){for(;;){if(a.nodeType==3)return a;if(a.nodeType==1&&b>0&&c<=0){a=a.childNodes[b-1];b=eZ(a)}else
if(a.nodeType==1&&b<a.childNodes.length&&c>=0){a=a.childNodes[b];b=0}else
return null}}function
A$(a,b){if(a.nodeType!=1)return 0;return(b&&a.childNodes[b-1].contentEditable=="false"?1:0)|(b<a.childNodes.length&&a.childNodes[b].contentEditable=="false"?2:0)}var
tR=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(a,b){gw(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){gw(a,b,this.changes)}}]);return a}();function
yp(b,c,d){var
a=new
tR();k.compare(b,c,d,a);return a.changes}function
zG(c,b){for(var
a=c;a&&a!=b;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return true;return false}function
y_(l,f){var
g=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,h=l.charCategorizer(f),a=l.doc.lineAt(f),e=f-a.from;if(a.length==0)return d.cursor(f);if(e==0)g=1;else
if(e==a.length)g=-1;var
b=e,c=e;if(g<0)b=x(a.text,e,false);else
c=x(a.text,e);var
i=h(a.text.slice(b,c));while(b>0){var
k=x(a.text,b,false);if(h(a.text.slice(k,b))!=i)break;b=k}while(c<a.length){var
j=x(a.text,c);if(h(a.text.slice(c,j))!=i)break;c=j}return d.range(b+a.from,c+a.from)}function
yZ(b,a){return a.left>b?a.left-b:Math.max(0,b-a.right)}function
y4(b,a){return a.top>b?a.top-b:Math.max(0,b-a.bottom)}function
i_(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function
sE(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function
sz(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function
ht(k,h,g){var
f,b,m,n,o,p,c,d;for(var
e=k.firstChild;e;e=e.nextSibling){var
r=ce(e);for(var
l=0;l<r.length;l++){var
a=r[l];if(b&&i_(b,a))a=sE(sz(a,b.bottom),b.top);var
i=yZ(h,a),j=y4(g,a);if(i==0&&j==0)return e.nodeType==3?nJ(e,h,g):ht(e,h,g);if(!f||n>j||n==j&&m>i){f=e;b=a;m=i;n=j}if(i==0){if(g>a.bottom&&(!c||c.bottom<a.bottom)){o=e;c=a}else
if(g<a.top&&(!d||d.top>a.top)){p=e;d=a}}else
if(c&&i_(c,a))c=sz(c,a.bottom);else
if(d&&i_(d,a))d=sE(d,a.top)}}if(c&&c.bottom>=g){f=o;b=c}else
if(d&&d.top<=g){f=p;b=d}if(!f)return{node:k,offset:0};var
q=Math.max(b.left,Math.min(b.right,h));if(f.nodeType==3)return nJ(f,q,g);if(!m&&f.contentEditable=="true")return ht(f,q,g);var
s=Array.prototype.indexOf.call(k.childNodes,f)+(h>=(b.left+b.right)/2?1:0);return{node:k,offset:s}}function
nJ(c,d,j){var
o=c.nodeValue.length,f=-1,k=1e9,h=0;for(var
b=0;b<o;b++){var
m=dr(c,b,b+1).getClientRects();for(var
i=0;i<m.length;i++){var
a=m[i];if(a.top==a.bottom)continue;if(!h)h=d-a.left;var
g=(a.top>j?a.top-j:j-a.bottom)-1;if(a.left-1<=d&&a.right+1>=d&&g<k){var
n=d>=(a.left+a.right)/2,e=n;if(l.chrome||l.gecko){var
p=dr(c,b).getBoundingClientRect();if(p.left==a.right)e=!n}if(g<=0)return{node:c,offset:b+(e?1:0)};f=b+(e?1:0);k=g}}}return{node:c,offset:f>-1?f:h>0?c.nodeValue.length:0}}function
qW(a,s,p){var
d=s.x,e=s.y,m=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1,k,h=a.contentDOM.getBoundingClientRect(),v=h.top+a.viewState.paddingTop,b,u=a.viewState.docHeight,g=e-v;if(g<0)return 0;if(g>u)return a.state.doc.length;for(var
w=a.defaultLineHeight/2,t=false;;){b=a.elementAtHeight(g);if(b.type==U.Text)break;for(;;){g=m>0?b.bottom+w:b.top-w;if(g>=0&&g<=u)break;if(t)return p?null:0;t=true;m=-m}}e=v+g;var
n=b.from;if(n<a.viewport.from)return a.viewport.from==0?0:p?null:q1(a,h,b,d,e);if(n>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:p?null:q1(a,h,b,d,e);var
i=a.dom.ownerDocument,y=a.root.elementFromPoint?a.root:i,c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null;if(!c){d=Math.max(h.left+1,Math.min(h.right-1,d));c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null}var
f,j=-1;if(c&&((k=a.docView.nearest(c))===null||k===void
0?void
0:k.isEditable)!=false)if(i.caretPositionFromPoint){var
o=i.caretPositionFromPoint(d,e);if(o){f=o.offsetNode;j=o.offset}}else
if(i.caretRangeFromPoint){var
q=i.caretRangeFromPoint(d,e);if(q){f=q.startContainer;j=q.startOffset;if(l.safari&&z9(f,j,d))f=void
0}}if(!f||!a.docView.dom.contains(f)){var
x=aR.find(a.docView,n);if(!x)return g>b.top+b.height/2?b.to:b.from;var
r=ht(x.dom,d,e);f=r.node;j=r.offset}return a.docView.posFromDOM(f,j)}function
q1(a,e,b,g,h){var
c=Math.round((g-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&b.height>a.defaultLineHeight*1.5){var
f=Math.floor((h-b.top)/a.defaultLineHeight);c+=f*a.viewState.heightOracle.lineLength}var
d=a.state.sliceDoc(b.from,b.to);return b.from+bO(d,c,a.state.tabSize)}function
z9(b,d,e){var
c;if(b.nodeType!=3||d!=(c=b.nodeValue.length))return false;for(var
a=b.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return false;return dr(b,c-1,c).getBoundingClientRect().left>e}function
AO(a,b,c,k){var
f=a.state.doc.lineAt(b.head),e=!k||!a.lineWrapping?null:a.coordsAtPos(b.assoc<0&&b.head>f.from?b.head-1:b.head);if(e){var
h=a.dom.getBoundingClientRect(),i=a.posAtCoords({x:c==(a.textDirection==aA.LTR)?h.right-1:h.left+1,y:(e.top+e.bottom)/2});if(i!=null)return d.cursor(i,c?-1:1)}var
g=aR.find(a.docView,b.head),j=g?c?g.posAtEnd:g.posAtStart:c?f.to:f.from;return d.cursor(j,c?-1:1)}function
qt(b,k,e,i){var
a=b.state.doc.lineAt(k.head),j=b.bidiSpans(a);for(var
c=k,h=null;;){var
f=AX(a,j,b.textDirection,c,e),g=qB;if(!f){if(a.number==(e?b.state.doc.lines:1))return c;g="\n";a=b.state.doc.line(a.number+(e?1:-1));j=b.bidiSpans(a);f=d.cursor(e?a.from:a.to)}if(!h){if(!i)return f;h=i(g)}else
if(!h(g))return c;c=f}}function
wL(e,b,d){var
c=e.state.charCategorizer(b),a=c(d);return function(d){var
b=c(d);if(a==ak.Space)a=b;return a==b}}function
AS(a,g,p,j){var
b=g.head,f=p?1:-1;if(b==(p?a.state.doc.length:0))return d.cursor(b,g.assoc);var
c=g.goalColumn,m,e=a.contentDOM.getBoundingClientRect(),h=a.coordsAtPos(b),n=a.documentTop;if(h){if(c==null)c=h.left-e.left;m=f<0?h.top:h.bottom}else{var
k=a.viewState.lineBlockAt(b-n);if(c==null)c=Math.min(e.right-e.left,a.defaultCharacterWidth*(b-k.from));m=(f<0?k.top:k.bottom)+n}var
r=e.left+c,q=j!==null&&j!==void
0?j:a.defaultLineHeight>>1;for(var
o=0;;o+=10){var
i=m+(q+o)*f,l=qW(a,{x:r,y:i},false,f);if(i<e.top||i>e.bottom||(f<0?l<b:l>b))return d.cursor(l,g.assoc,void
0,c)}}function
iF(j,h,b){var
g=j.pluginField(aV.atomicRanges);for(;;){var
f=false,c=a(g),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;i.between(b.from-1,b.from+1,function(a,c,e){if(b.from>a&&b.from<c){b=h.from>b.from?d.cursor(a,1):d.cursor(c,-1);f=true}})}}catch(a){c.e(a)}finally{c.f()}if(!f)return b}}var
ul=function(){function
e(a){var
d=this;b(this,e);this.lastKeyCode=0;this.lastKeyTime=0;this.pendingIOSKey=void
0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var
c=function(c){var
e=ac[c];a.contentDOM.addEventListener(c,function(b){if(c=="keydown"&&d.keydown(a,b))return;if(!n5(a,b)||d.ignoreDuringComposition(b))return;if(d.mustFlushObserver(b))a.observer.forceFlush();if(d.runCustomHandlers(c,a,b))b.preventDefault();else
e(a,b)});d.registeredEvents.push(c)};for(var
f
in
ac)c(f);this.notifiedFocused=a.hasFocus;this.ensureHandlers(a);if(l.safari)a.contentDOM.addEventListener("input",function(){return null})}c(e,[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var
d=this,g=this.customHandlers=c.pluginField(nE),b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,f=function(a){if(d.registeredEvents.indexOf(a)<0&&a!="scroll"){d.registeredEvents.push(a);c.contentDOM.addEventListener(a,function(b){if(!n5(c,b))return;if(d.runCustomHandlers(a,c,b))b.preventDefault()})}};for(var
i
in
h.handlers)f(i)}}catch(a){b.e(a)}finally{b.f()}}},{key:"runCustomHandlers",value:function(h,g,d){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value,e=f.handlers[h];if(e)try{if(e.call(f.plugin,d,g)||d.defaultPrevented)return true}catch(a){bS(g.state,a)}}}catch(a){b.e(a)}finally{b.f()}return false}},{key:"runScrollHandlers",value:function(f,g){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value,d=e.handlers.scroll;if(d)try{d.call(e.plugin,g,f)}catch(a){bS(f.state,a)}}}catch(a){b.e(a)}finally{b.f()}}},{key:"keydown",value:function(b,a){var
d=this;this.lastKeyCode=a.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(b,a))return true;if(l.android&&l.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8)){b.observer.delayAndroidKey(a.key,a.keyCode);return true}var
c;if(l.ios&&(c=kq.find(function(b){return b.keyCode==a.keyCode}))&&!(a.ctrlKey||a.altKey||a.metaKey)&&!a.synthetic){this.pendingIOSKey=c;setTimeout(function(){return d.flushIOSKey(b)},250);return true}return false}},{key:"flushIOSKey",value:function(b){var
a=this.pendingIOSKey;if(!a)return false;this.pendingIOSKey=void
0;return cW(b.contentDOM,a.key,a.keyCode)}},{key:"ignoreDuringComposition",value:function(a){if(!/^key/.test(a.type))return false;if(this.composing>0)return true;if(l.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false}},{key:"screenKeyEvent",value:function(c,a){var
b=a.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(a.keyCode==27)this.lastEscPress=Date.now();else
if(AI.indexOf(a.keyCode)<0)this.lastEscPress=0;return b}},{key:"mustFlushObserver",value:function(a){return a.type=="keydown"&&a.keyCode!=229||a.type=="compositionend"&&!l.ios}},{key:"startMouseSelection",value:function(a){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=a}},{key:"update",value:function(a){if(this.mouseSelection)this.mouseSelection.update(a);if(a.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){if(this.mouseSelection)this.mouseSelection.destroy()}}]);return e}(),kq=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],AI=[16,17,18,20,91,92,224,225],uW=function(){function
d(c,a,g,f){b(this,d);this.view=c;this.style=g;this.mustSelect=f;this.lastEvent=a;var
e=c.contentDOM.ownerDocument;e.addEventListener("mousemove",this.move=this.move.bind(this));e.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=a.shiftKey;this.multiple=c.state.facet(u.allowMultipleSelections)&&v5(c,a);this.dragMove=x2(c,a);this.dragging=z1(c,a)&&hI(a)==1?null:false;if(this.dragging===false){a.preventDefault();this.select(a)}}c(d,[{key:"move",value:function(a){if(a.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=a)}},{key:"up",value:function(a){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var
a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=null}},{key:"select",value:function(b){var
a=this.style.get(b,this.extend,this.multiple);if(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:true});this.mustSelect=false}},{key:"update",value:function(a){var
b=this;if(a.docChanged&&this.dragging)this.dragging=this.dragging.map(a.changes);if(this.style.update(a))setTimeout(function(){return b.select(b.lastEvent)},20)}}]);return d}();function
v5(c,a){var
b=c.state.facet(mq);return b.length?b[0](a):l.mac?a.metaKey:a.ctrlKey}function
x2(c,a){var
b=c.state.facet(nO);return b.length?b[0](a):l.mac?!a.altKey:!a.ctrlKey}function
z1(f,a){var
g=f.state.selection.main;if(g.empty)return false;var
e=eE(f.root);if(e.rangeCount==0)return true;var
d=e.getRangeAt(0).getClientRects();for(var
c=0;c<d.length;c++){var
b=d[c];if(b.left<=a.clientX&&b.right>=a.clientX&&b.top<=a.clientY&&b.bottom>=a.clientY)return true}return false}function
n5(d,b){if(!b.bubbles)return true;if(b.defaultPrevented)return false;for(var
a=b.target,c;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(c=Y.get(a))&&c.ignoreEvent(b))return false;return true}var
ac=Object.create(null),l_=l.ie&&l.ie_version<15||l.ios&&l.webkit_version<604;function
wV(b){var
c=b.dom.parentNode;if(!c)return;var
a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){b.focus();a.remove();nz(b,a.value)},50)}function
nz(e,i){var
a=e.state,c,h=1,b=a.toText(i),g=b.lines==a.selection.ranges.length,f=h_!=null&&a.selection.ranges.every(function(a){return a.empty})&&h_==b.toString();if(f){var
j=-1;c=a.changeByRange(function(e){var
c=a.doc.lineAt(e.from);if(c.from==j)return{range:e};j=c.from;var
f=a.toText((g?b.line(h++).text:i)+a.lineBreak);return{changes:{from:c.from,insert:f},range:d.cursor(e.from+f.length)}})}else
if(g)c=a.changeByRange(function(a){var
c=b.line(h++);return{changes:{from:a.from,to:a.to,insert:c.text},range:d.cursor(a.from+c.length)}});else
c=a.replaceSelection(b);e.dispatch(c,{userEvent:"input.paste",scrollIntoView:true})}ac.keydown=function(a,b){a.inputState.setSelectionOrigin("select")};var
pT=0;ac.touchstart=function(a,b){pT=Date.now();a.inputState.setSelectionOrigin("select.pointer")};ac.touchmove=function(a){a.inputState.setSelectionOrigin("select.pointer")};ac.mousedown=function(b,d){b.observer.flush();if(pT>Date.now()-2e3&&hI(d)==1)return;var
c=null,e=a(b.state.facet(qp)),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;c=h(b,d);if(c)break}}catch(a){e.e(a)}finally{e.f()}if(!c&&d.button==0)c=ws(b,d);if(c){var
g=b.root.activeElement!=b.contentDOM;if(g)b.observer.ignore(function(){return oq(b.contentDOM)});b.inputState.startMouseSelection(new
uW(b,d,c,g))}};function
rc(e,b,g,h){if(h==1)return d.cursor(b,g);else
if(h==2)return y_(e.state,b,g);else{var
a=aR.find(e.docView,b),f=e.state.doc.lineAt(a?a.posAtEnd:b),i=a?a.posAtStart:f.from,c=a?a.posAtEnd:f.to;if(c<e.state.doc.length&&c==f.to)c++;return d.range(i,c)}}var
pe=function(b,a){return b>=a.top&&b<=a.bottom},o$=function(b,c,a){return pe(c,a)&&b>=a.left&&b<=a.right};function
yA(h,f,g,d){var
a=aR.find(h.docView,f);if(!a)return 1;var
c=f-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;var
b=a.coordsAt(c,-1);if(b&&o$(g,d,b))return-1;var
e=a.coordsAt(c,1);if(e&&o$(g,d,e))return 1;return b&&pe(d,b)?-1:1}function
q7(c,a){var
b=c.posAtCoords({x:a.clientX,y:a.clientY},false);return{pos:b,bias:yA(c,b,a.clientX,a.clientY)}}var
s4=l.ie&&l.ie_version<=11,pE=null,pJ=0,pO=0;function
hI(a){if(!s4)return a.detail;var
b=pE,c=pO;pE=a;pO=Date.now();return pJ=!b||c>Date.now()-400&&Math.abs(b.clientX-a.clientX)<2&&Math.abs(b.clientY-a.clientY)<2?(pJ+1)%3:1}function
ws(g,a){var
b=q7(g,a),n=hI(a),e=g.state.selection,m=b,f=a;return{update:function(a){if(a.docChanged){if(b)b.pos=a.changes.mapPos(b.pos);e=e.map(a.changes);f=null}},get:function(h,j,o){var
c;if(f&&h.clientX==f.clientX&&h.clientY==f.clientY)c=m;else{c=m=q7(g,h);f=h}if(!c||!b)return e;var
a=rc(g,c.pos,c.bias,n);if(b.pos!=c.pos&&!j){var
k=rc(g,b.pos,b.bias,n),i=Math.min(k.from,a.from),l=Math.max(k.to,a.to);a=i<a.from?d.range(i,l):d.range(l,i)}if(j)return e.replaceRange(e.main.extend(a.from,a.to));else
if(o)return e.addRange(a);else
return d.create([a])}}}ac.dragstart=function(c,a){var
b=c.state.selection.main,d=c.inputState.mouseSelection;if(d)d.dragging=b;if(a.dataTransfer){a.dataTransfer.setData("Text",c.state.sliceDoc(b.from,b.to));a.dataTransfer.effectAllowed="copyMove"}};function
nT(b,f,h,i){if(!h)return;var
e=b.posAtCoords({x:f.clientX,y:f.clientY},false);f.preventDefault();var
a=b.inputState.mouseSelection,d=i&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,g={from:e,insert:h},c=b.state.changes(d?[d,g]:g);b.focus();b.dispatch({changes:c,selection:{anchor:c.mapPos(e,-1),head:c.mapPos(e,1)},userEvent:d?"move.drop":"input.drop"})}ac.drop=function(c,a){if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();var
b=a.dataTransfer.files;if(b&&b.length)(function(){a.preventDefault();var
f=Array(b.length),h=0,e=function(){if(++h==b.length)nT(c,a,f.filter(function(a){return a!=null}).join(c.state.lineBreak),false)},g=function(c){var
a=new
FileReader();a.onerror=e;a.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(a.result))f[c]=a.result;e()};a.readAsText(b[c])};for(var
d=0;d<b.length;d++)g(d)}());else
nT(c,a,a.dataTransfer.getData("Text"),true)};ac.paste=function(a,b){if(a.state.readOnly)return b.preventDefault();a.observer.flush();var
c=l_?null:b.clipboardData;if(c){nz(a,c.getData("text/plain"));b.preventDefault()}else
wV(a)};function
wQ(d,c){var
b=d.dom.parentNode;if(!b)return;var
a=b.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.value=c;a.focus();a.selectionEnd=c.length;a.selectionStart=0;setTimeout(function(){a.remove();d.focus()},50)}function
xo(b){var
f=[],h=[],k=false,d=a(b.selection.ranges),i;try{for(d.s();!(i=d.n()).done;){var
g=i.value;if(!g.empty){f.push(b.sliceDoc(g.from,g.to));h.push(g)}}}catch(a){d.e(a)}finally{d.f()}if(!f.length){var
l=-1,e=a(b.selection.ranges),j;try{for(e.s();!(j=e.n()).done;){var
m=j.value.from,c=b.doc.lineAt(m);if(c.number>l){f.push(c.text);h.push({from:c.from,to:Math.min(b.doc.length,c.to+1)})}l=c.number}}catch(a){e.e(a)}finally{e.f()}k=true}return{text:f.join(b.lineBreak),ranges:h,linewise:k}}var
h_=null;ac.copy=ac.cut=function(b,e){var
c=xo(b.state),a=c.text,g=c.ranges,f=c.linewise;if(!a&&!f)return;h_=f?a:null;var
d=l_?null:e.clipboardData;if(d){e.preventDefault();d.clearData();d.setData("text/plain",a)}else
wQ(b,a);if(e.type=="cut"&&!b.state.readOnly)b.dispatch({changes:g,scrollIntoView:true,userEvent:"delete.cut"})};ac.focus=ac.blur=function(a){setTimeout(function(){if(a.hasFocus!=a.inputState.notifiedFocused)a.update([])},10)};ac.beforeprint=function(a){a.viewState.printing=true;a.requestMeasure();setTimeout(function(){a.viewState.printing=false;a.requestMeasure()},2e3)};function
ow(a,b){if(a.docView.compositionDeco.size){a.inputState.rapidCompositionStart=b;try{a.update([])}finally{a.inputState.rapidCompositionStart=false}}}ac.compositionstart=ac.compositionupdate=function(a){if(a.inputState.compositionFirstChange==null)a.inputState.compositionFirstChange=true;if(a.inputState.composing<0){a.inputState.composing=0;if(a.docView.compositionDeco.size){a.observer.flush();ow(a,true)}}};ac.compositionend=function(a){a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionFirstChange=null;setTimeout(function(){if(a.inputState.composing<0)ow(a,false)},50)};ac.contextmenu=function(a){a.inputState.lastContextMenu=Date.now()};ac.beforeinput=function(b,d){var
c,a;if(l.chrome&&l.android&&(a=kq.find(function(a){return a.inputType==d.inputType}))){b.observer.delayAndroidKey(a.key,a.keyCode);if(a.key=="Backspace"||a.key=="Delete"){var
e=((c=window.visualViewport)===null||c===void
0?void
0:c.height)||0;setTimeout(function(){var
a;if((((a=window.visualViewport)===null||a===void
0?void
0:a.height)||0)>e+10&&b.hasFocus){b.contentDOM.blur();b.focus()}},100)}}};var
sS=["pre-wrap","normal","pre-line","break-spaces"],ud=function(){function
a(){b(this,a);this.doc=p.empty;this.lineWrapping=false;this.direction=aA.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}c(a,[{key:"heightForGap",value:function(b,c){var
a=this.doc.lineAt(c).number-this.doc.lineAt(b).number+1;if(this.lineWrapping)a+=Math.ceil((c-b-a*this.lineLength*0.5)/this.lineLength);return this.lineHeight*a}},{key:"heightForLine",value:function(a){if(!this.lineWrapping)return this.lineHeight;var
b=1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5)));return b*this.lineHeight}},{key:"setDoc",value:function(a){this.doc=a;return this}},{key:"mustRefreshForStyle",value:function(b,a){return sS.indexOf(b)>-1!=this.lineWrapping||this.direction!=a}},{key:"mustRefreshForHeights",value:function(c){var
d=false;for(var
a=0;a<c.length;a++){var
b=c[a];if(b<0)a++;else
if(!this.heightSamples[Math.floor(b*10)]){d=true;this.heightSamples[Math.floor(b*10)]=true}}return d}},{key:"refresh",value:function(j,c,f,h,i,e){var
g=sS.indexOf(j)>-1,b=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=g||this.direction!=c;this.lineWrapping=g;this.direction=c;this.lineHeight=f;this.charWidth=h;this.lineLength=i;if(b){this.heightSamples={};for(var
a=0;a<e.length;a++){var
d=e[a];if(d<0)a++;else
this.heightSamples[Math.floor(d*10)]=true}}return b}}]);return a}(),uQ=function(){function
a(c,d){b(this,a);this.from=c;this.heights=d;this.index=0}c(a,[{key:"more",get:function(){return this.index<this.heights.length}}]);return a}(),b3=function(){function
d(a,e,f,c,g){b(this,d);this.from=a;this.length=e;this.top=f;this.height=c;this.type=g}c(d,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(a){var
b=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new
d(this.from,this.length+a.length,this.top,this.height+a.height,b)}},{key:"moveY",value:function(a){return!a?this:new
d(this.from,this.length,this.top+a,this.height,Array.isArray(this.type)?this.type.map(function(b){return b.moveY(a)}):this.type)}}]);return d}(),D=function(a){a[a["ByPos"]=0]="ByPos";a[a["ByHeight"]=1]="ByHeight";a[a["ByPosNoHeight"]=2]="ByPosNoHeight";return a}(D||(D={})),dG=1e-3,a6=function(){function
f(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;b(this,f);this.length=d;this.height=c;this.flags=a}c(f,[{key:"outdated",get:function(){return(this.flags&2)>0},set:function(a){this.flags=(a?2:0)|this.flags&~2}},{key:"setHeight",value:function(b,a){if(this.height!=a){if(Math.abs(this.height-a)>dG)b.heightChanged=true;this.height=a}}},{key:"replace",value:function(b,c,a){return f.of(a)}},{key:"decomposeLeft",value:function(b,a){a.push(this)}},{key:"decomposeRight",value:function(b,a){a.push(this)}},{key:"applyChanges",value:function(m,i,k,e){var
d=this;for(var
a=e.length-1;a>=0;a--){var
g=e[a],b=g.fromA,f=g.toA,h=g.fromB,l=g.toB,c=d.lineAt(b,D.ByPosNoHeight,i,0,0),j=c.to>=f?c:d.lineAt(f,D.ByPosNoHeight,i,0,0);l+=j.to-f;f=j.to;while(a>0&&c.from<=e[a-1].toA){b=e[a-1].fromA;h=e[a-1].fromB;a--;if(b<c.from)c=d.lineAt(b,D.ByPosNoHeight,i,0,0)}h+=c.from-b;b=c.from;var
n=u2.build(k,m,h,l);d=d.replace(b,f,n)}return d.updateHeight(k,0)}}],[{key:"empty",value:function(){return new
a$(0,0)}},{key:"of",value:function(a){if(a.length==1)return a[0];var
b=0,c=a.length,h=0,g=0;for(;;)if(b==c)if(h>g*2){var
e=a[b-1];if(e["break"])a.splice(--b,1,e.left,null,e.right);else
a.splice(--b,1,e.left,e.right);c+=1+e["break"];h-=e.size}else
if(g>h*2){var
d=a[c];if(d["break"])a.splice(c,1,d.left,null,d.right);else
a.splice(c,1,d.left,d.right);c+=2+d["break"];g-=d.size}else
break;else
if(h<g){var
k=a[b++];if(k)h+=k.size}else{var
j=a[--c];if(j)g+=j.size}var
i=0;if(a[b-1]==null){i=1;b--}else
if(a[b]==null){i=1;c++}return new
t_(f.of(a.slice(0,b)),i,f.of(a.slice(c)))}}]);return f}();a6.prototype.size=1;var
jX=function(d){f(a,d);var
g=e(a);function
a(e,d,f){var
c;b(this,a);c=g.call(this,e,d);c.type=f;return c}c(a,[{key:"blockAt",value:function(d,c,b,a){return new
b3(a,this.length,b,this.height,this.type)}},{key:"lineAt",value:function(e,d,a,c,b){return this.blockAt(0,a,c,b)}},{key:"forEachLine",value:function(e,f,a,d,c,b){b(this.blockAt(0,a,d,c))}},{key:"updateHeight",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=b&&a.more)this.setHeight(c,a.heights[a.index++]);this.outdated=false;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return a}(a6),a$=function(a){f(d,a);var
g=e(d);function
d(e,c){var
a;b(this,d);a=g.call(this,e,c,U.Text);a.collapsed=0;a.widgetHeight=0;return a}c(d,[{key:"replace",value:function(c,e,b){var
a=b[0];if(b.length==1&&(a
instanceof
d||a
instanceof
b9&&a.flags&4)&&Math.abs(this.length-a.length)<10){if(a
instanceof
b9)a=new
d(a.length,this.height);else
a.height=this.height;if(!this.outdated)a.outdated=false;return a}else
return a6.of(b)}},{key:"updateHeight",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=d&&a.more)this.setHeight(b,a.heights[a.index++]);else
if(c||this.outdated)this.setHeight(b,Math.max(this.widgetHeight,b.heightForLine(this.length-this.collapsed)));this.outdated=false;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return d}(jX),b9=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,c,0)}c(a,[{key:"lines",value:function(a,d){var
b=a.lineAt(d).number,c=a.lineAt(d+this.length).number;return{firstLine:b,lastLine:c,lineHeight:this.height/(c-b+1)}}},{key:"blockAt",value:function(i,d,g,l){var
a=this.lines(d,l),e=a.firstLine,j=a.lastLine,b=a.lineHeight,f=Math.max(0,Math.min(j-e,Math.floor((i-g)/b))),c=d.line(e+f),h=c.from,k=c.length;return new
b3(h,k,g+b*f,b,U.Text)}},{key:"lineAt",value:function(c,j,a,i,h){if(j==D.ByHeight)return this.blockAt(c,a,i,h);if(j==D.ByPosNoHeight){var
d=a.lineAt(c),f=d.from,o=d.to;return new
b3(f,o-f,0,0,U.Text)}var
e=this.lines(a,h),k=e.firstLine,g=e.lineHeight,b=a.lineAt(c),l=b.from,m=b.length,n=b.number;return new
b3(l,m,i+g*(n-k),g,U.Text)}},{key:"forEachLine",value:function(h,l,g,e,d,j){var
f=this.lines(g,d),k=f.firstLine,c=f.lineHeight;for(var
b=Math.max(h,d),i=Math.min(d+this.length,l);b<=i;){var
a=g.lineAt(b);if(b==h)e+=c*(a.number-k);j(new
b3(a.from,a.length,e,c,U.Text));e+=c;b=a.to+1}}},{key:"replace",value:function(d,g,b){var
c=this.length-g;if(c>0){var
f=b[b.length-1];if(f
instanceof
a)b[b.length-1]=new
a(f.length+c);else
b.push(null,new
a(c-1))}if(d>0){var
e=b[0];if(e
instanceof
a)b[0]=new
a(d+e.length);else
b.unshift(new
a(d-1),null)}return a6.of(b)}},{key:"decomposeLeft",value:function(c,b){b.push(new
a(c-1),null)}},{key:"decomposeRight",value:function(b,c){c.push(null,new
a(this.length-b-1))}},{key:"updateHeight",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,b=arguments.length>3?arguments[3]:undefined,h=c+this.length;if(b&&b.from<=c+this.length&&b.more){var
e=[],f=Math.max(c,b.from),g=-1,n=d.heightChanged;if(b.from>c)e.push(new
a(b.from-c-1).updateHeight(d,c));while(f<=h&&b.more){var
j=d.doc.lineAt(f).length;if(e.length)e.push(null);var
i=b.heights[b.index++];if(g==-1)g=i;else
if(Math.abs(i-g)>=dG)g=-2;var
k=new
a$(j,i);k.outdated=false;e.push(k);f+=j+1}if(f<=h)e.push(null,new
a(h-f).updateHeight(d,f));var
l=a6.of(e);d.heightChanged=n||g<0||Math.abs(l.height-this.height)>=dG||Math.abs(g-this.lines(d.doc,c).lineHeight)>=dG;return l}else
if(m||this.outdated){this.setHeight(d,d.heightForGap(c,c+this.length));this.outdated=false}return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return a}(a6),t_=function(d){f(g,d);var
h=e(g);function
g(c,e,d){var
a;b(this,g);a=h.call(this,c.length+e+d.length,c.height+d.height,e|(c.outdated||d.outdated?2:0));a.left=c;a.right=d;a.size=c.size+d.size;return a}c(g,[{key:"break",get:function(){return this.flags&1}},{key:"blockAt",value:function(a,b,e,d){var
c=e+this.left.height;return a<c?this.left.blockAt(a,b,e,d):this.right.blockAt(a,b,c,d+this.left.length+this["break"])}},{key:"lineAt",value:function(e,d,c,i,g){var
h=i+this.left.height,a=g+this.left.length+this["break"],f=d==D.ByHeight?e<h:e<a,b=f?this.left.lineAt(e,d,c,i,g):this.right.lineAt(e,d,c,h,a);if(this["break"]||(f?b.to<a:b.from>a))return b;var
j=d==D.ByPosNoHeight?D.ByPosNoHeight:D.ByPos;return f?b.join(this.right.lineAt(a,j,c,h,a)):this.left.lineAt(a,j,c,i,g).join(b)}},{key:"forEachLine",value:function(b,c,d,h,g,e){var
i=h+this.left.height,f=g+this.left.length+this["break"];if(this["break"]){if(b<f)this.left.forEachLine(b,c,d,h,g,e);if(c>=f)this.right.forEachLine(b,c,d,i,f,e)}else{var
a=this.lineAt(f,D.ByPos,d,h,g);if(b<a.from)this.left.forEachLine(b,a.from-1,d,h,g,e);if(a.to>=b&&a.from<=c)e(a);if(c>a.to)this.right.forEachLine(a.to+1,c,d,i,f,e)}}},{key:"replace",value:function(c,d,f){var
g=this.left.length+this["break"];if(d<g)return this.balanced(this.left.replace(c,d,f),this.right);if(c>this.left.length)return this.balanced(this.left,this.right.replace(c-g,d-g,f));var
b=[];if(c>0)this.decomposeLeft(c,b);var
i=b.length,e=a(f),h;try{for(e.s();!(h=e.n()).done;){var
j=h.value;b.push(j)}}catch(a){e.e(a)}finally{e.f()}if(c>0)qg(b,i-1);if(d<this.length){var
k=b.length;this.decomposeRight(d,b);qg(b,k)}return a6.of(b)}},{key:"decomposeLeft",value:function(b,c){var
a=this.left.length;if(b<=a)return this.left.decomposeLeft(b,c);c.push(this.left);if(this["break"]){a++;if(b>=a)c.push(null)}if(b>a)this.right.decomposeLeft(b-a,c)}},{key:"decomposeRight",value:function(a,b){var
d=this.left.length,c=d+this["break"];if(a>=c)return this.right.decomposeRight(a-c,b);if(a<d)this.left.decomposeRight(a,b);if(this["break"]&&a<c)b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return a6.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(f){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined,b=this.left,c=this.right,h=e+b.length+this["break"],g=null;if(a&&a.from<=e+b.length&&a.more)g=b=b.updateHeight(f,e,d,a);else
b.updateHeight(f,e,d);if(a&&a.from<=h+c.length&&a.more)g=c=c.updateHeight(f,h,d,a);else
c.updateHeight(f,h,d);if(g)return this.balanced(b,c);this.height=this.left.height+this.right.height;this.outdated=false;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}}]);return g}(a6);function
qg(b,a){var
d,c;if(b[a]==null&&(d=b[a-1])instanceof
b9&&(c=b[a+1])instanceof
b9)b.splice(a-1,3,new
b9(d.length+1+c.length))}var
BL=5,u2=function(){function
d(a,c){b(this,d);this.pos=a;this.oracle=c;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=a}c(d,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(d,b){if(this.lineStart>-1){var
a=Math.min(b,this.lineEnd),c=this.nodes[this.nodes.length-1];if(c
instanceof
a$)c.length+=a-this.pos;else
if(a>this.pos||!this.isCovered)this.nodes.push(new
a$(a-this.pos,-1));this.writtenTo=a;if(b>a){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=b}},{key:"point",value:function(c,d,a){if(c<d||a.heightRelevant){var
b=a.widget?a.widget.estimatedHeight:0;if(b<0)b=this.oracle.lineHeight;var
e=d-c;if(a.block)this.addBlock(new
jX(e,b,a.type));else
if(e||b>=BL)this.addLineDeco(b,e)}else
if(d>c)this.span(c,d);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}},{key:"enterLine",value:function(){if(this.lineStart>-1)return;var
b=this.oracle.doc.lineAt(this.pos),a=b.from,c=b.to;this.lineStart=a;this.lineEnd=c;if(this.writtenTo<a){if(this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,a-1));this.nodes.push(null)}if(this.pos>a)this.nodes.push(new
a$(this.pos-a,-1));this.writtenTo=this.pos}},{key:"blankContent",value:function(a,c){var
b=new
b9(c-a);if(this.oracle.doc.lineAt(a).to==c)b.flags|=4;return b}},{key:"ensureLine",value:function(){this.enterLine();var
a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a
instanceof
a$)return a;var
b=new
a$(0,-1);this.nodes.push(b);return b}},{key:"addBlock",value:function(a){this.enterLine();if(a.type==U.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos=this.pos+a.length;if(a.type!=U.WidgetBefore)this.covering=a}},{key:"addLineDeco",value:function(c,b){var
a=this.ensureLine();a.length+=b;a.collapsed+=b;a.widgetHeight=Math.max(a.widgetHeight,c);this.writtenTo=this.pos=this.pos+b}},{key:"finish",value:function(g){var
e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e
instanceof
a$)&&!this.isCovered)this.nodes.push(new
a$(0,-1));else
if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var
f=g,b=a(this.nodes),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c
instanceof
a$)c.updateHeight(this.oracle,f);f+=c?c.length:1}}catch(a){b.e(a)}finally{b.f()}return this.nodes}}],[{key:"build",value:function(e,c,a,f){var
b=new
d(a,e);k.spans(c,a,f,b,0);return b.finish(a)}}]);return d}();function
zr(b,c,d){var
a=new
tV();k.compare(b,c,d,a,0);return a.changes}var
tV=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,d,a,b){if(c<d||a&&a.heightRelevant||b&&b.heightRelevant)gw(c,d,this.changes,5)}}]);return a}();function
C2(h,k){var
c=h.getBoundingClientRect(),d=Math.max(0,c.left),i=Math.min(innerWidth,c.right),f=Math.max(0,c.top),g=Math.min(innerHeight,c.bottom),l=h.ownerDocument.body;for(var
b=h.parentNode;b&&b!=l;)if(b.nodeType==1){var
a=b,j=window.getComputedStyle(a);if((a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)&&j.overflow!="visible"){var
e=a.getBoundingClientRect();d=Math.max(d,e.left);i=Math.min(i,e.right);f=Math.max(f,e.top);g=Math.min(g,e.bottom)}b=j.position=="absolute"||j.position=="fixed"?a.offsetParent:a.parentNode}else
if(b.nodeType==11)b=b.host;else
break;return{left:d-c.left,right:Math.max(d,i)-c.left,top:f-(c.top+k),bottom:Math.max(f,g)-(c.top+k)}}var
fN=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.size=d}c(a,[{key:"draw",value:function(a){return ag.replace({widget:new
ur(this.size,a)}).range(this.from,this.to)}}],[{key:"same",value:function(b,e){if(b.length!=e.length)return false;for(var
a=0;a<b.length;a++){var
c=b[a],d=e[a];if(c.from!=d.from||c.to!=d.to||c.size!=d.size)return false}return true}}]);return a}(),ur=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.size=d;c.vertical=e;return c}c(a,[{key:"eq",value:function(a){return a.size==this.size&&a.vertical==this.vertical}},{key:"toDOM",value:function(){var
a=document.createElement("div");if(this.vertical)a.style.height=this.size+"px";else{a.style.width=this.size+"px";a.style.height="2px";a.style.display="inline-block"}return a}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(cN),kK=function(){function
d(a){b(this,d);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentDOMWidth=0;this.contentDOMHeight=0;this.editorHeight=0;this.editorWidth=0;this.heightOracle=new
ud();this.scaler=j2;this.scrollTarget=null;this.printing=false;this.mustMeasureContent=true;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=a6.empty().applyChanges(a.facet(bK),p.empty,this.heightOracle.setDoc(a.doc),[new
cv(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateViewportLines();this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=ag.set(this.lineGaps.map(function(a){return a.draw(false)}));this.computeVisibleRanges()}c(d,[{key:"updateForViewport",value:function(){var
h=this,b=[this.viewport],d=this.state.selection.main,c=function(e){var
a=e?d.head:d.anchor;if(!b.some(function(b){var
c=b.from,d=b.to;return a>=c&&a<=d})){var
c=h.lineBlockAt(a),f=c.from,g=c.to;b.push(new
d7(f,g))}};for(var
a=0;a<=1;a++)c(a);this.viewports=b.sort(function(a,b){return a.from-b.from});this.scaler=this.heightMap.height<=7e6?j2:new
tc(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var
a=this;this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(b){a.viewportLines.push(a.scaler.scale==1?b:c$(b,a.scaler))})}},{key:"update",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,g=this.state;this.state=a.state;var
e=this.state.facet(bK),f=a.changedRanges,d=cv.extendWithRanges(f,zr(a.startState.facet(bK),e,a?a.changes:X.empty(this.state.doc.length))),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,g.doc,this.heightOracle.setDoc(this.state.doc),d);if(this.heightMap.height!=h)a.flags|=2;var
b=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(c&&(c.range.head<b.from||c.range.head>b.to)||!this.viewportIsAppropriate(b))b=this.getViewport(0,c);var
i=!a.changes.empty||a.flags&2||b.from!=this.viewport.from||b.to!=this.viewport.to;this.viewport=b;this.updateForViewport();if(i)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();if(c)this.scrollTarget=c;if(!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc)this.mustEnforceCursorAssoc=true}},{key:"measure",value:function(a){var
e=a.contentDOM,j=window.getComputedStyle(e),b=this.heightOracle,u=j.whiteSpace,q=j.direction=="rtl"?aA.RTL:aA.LTR,c=this.heightOracle.mustRefreshForStyle(u,q),m=c||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,d=0,f=0;if(m){this.mustMeasureContent=false;this.contentDOMHeight=e.clientHeight;var
s=parseInt(j.paddingTop)||0,r=parseInt(j.paddingBottom)||0;if(this.paddingTop!=s||this.paddingBottom!=r){d|=8;this.paddingTop=s;this.paddingBottom=r}}var
n=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:C2(e,this.paddingTop),i=n.top-this.pixelViewport.top,h=n.bottom-this.pixelViewport.bottom;this.pixelViewport=n;var
k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView){this.inView=k;if(k)m=true}if(!this.inView)return 0;var
g=e.clientWidth;if(this.contentDOMWidth!=g||this.editorHeight!=a.scrollDOM.clientHeight||this.editorWidth!=a.scrollDOM.clientWidth){this.contentDOMWidth=g;this.editorHeight=a.scrollDOM.clientHeight;this.editorWidth=a.scrollDOM.clientWidth;d|=8}if(m){var
l=a.docView.measureVisibleLineHeights();if(b.mustRefreshForHeights(l))c=true;if(c||b.lineWrapping&&Math.abs(g-this.contentDOMWidth)>b.charWidth){var
o=a.docView.measureTextSize(),v=o.lineHeight,p=o.charWidth;c=b.refresh(u,q,v,p,g/p,l);if(c){a.docView.minWidth=0;d|=8}}if(i>0&&h>0)f=Math.max(i,h);else
if(i<0&&h<0)f=Math.min(i,h);b.heightChanged=false;this.heightMap=this.heightMap.updateHeight(b,0,c,new
uQ(this.viewport.from,l));if(b.heightChanged)d|=2}var
t=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(t)this.viewport=this.getViewport(f,this.scrollTarget);this.updateForViewport();if(d&2||t)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps));d|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;a.docView.enforceCursorAssoc()}return d}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(j,c){var
i=0.5-Math.max(-0.5,Math.min(0.5,j/1e3/2)),b=this.heightMap,a=this.state.doc,l=this.visibleTop,k=this.visibleBottom,e=new
d7(b.lineAt(l-i*1e3,D.ByHeight,a,0,0).from,b.lineAt(k+(1-i)*1e3,D.ByHeight,a,0,0).to);if(c){var
g=c.range.head,h=this.editorHeight;if(g<e.from||g>e.to){var
f=b.lineAt(g,D.ByPos,a,0,0),d;if(c.y=="center")d=(f.top+f.bottom)/2-h/2;else
if(c.y=="start"||c.y=="nearest"&&g<e.from)d=f.top;else
d=f.bottom-h;e=new
d7(b.lineAt(d-1e3/2,D.ByHeight,a,0,0).from,b.lineAt(d+h+1e3/2,D.ByHeight,a,0,0).to)}}return e}},{key:"mapViewport",value:function(b,a){var
c=a.mapPos(b.from,-1),d=a.mapPos(b.to,1);return new
d7(this.heightMap.lineAt(c,D.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,D.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var
d=a.from,e=a.to,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!this.inView)return true;var
i=this.heightMap.lineAt(d,D.ByPos,this.state.doc,0,0),f=i.top,j=this.heightMap.lineAt(e,D.ByPos,this.state.doc,0,0),c=j.bottom,h=this.visibleTop,g=this.visibleBottom;return(d==0||f<=h-Math.max(10,Math.min(-b,250)))&&(e==this.state.doc.length||c>=g+Math.max(10,Math.min(b,250)))&&f>h-2*1e3&&c<g+2*1e3}},{key:"mapLineGaps",value:function(e,d){if(!e.length||d.empty)return e;var
g=[],c=a(e),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(!d.touchesRange(b.from,b.to))g.push(new
fN(d.mapPos(b.from),d.mapPos(b.to),b.size))}}catch(a){c.e(a)}finally{c.f()}return g}},{key:"ensureLineGaps",value:function(p){var
b=this,i=[];if(this.heightOracle.direction!=aA.LTR)return i;var
c=a(this.viewportLines),n;try{var
d=function(){var
a=n.value;if(a.length<4e3)return"continue";var
d=An(a.from,a.to,b.state);if(d.total<4e3)return"continue";var
f=void
0,g=void
0;if(b.heightOracle.lineWrapping){var
k=2e3/b.heightOracle.lineLength*b.heightOracle.lineHeight;f=eq(d,(b.visibleTop-a.top-k)/a.height);g=eq(d,(b.visibleBottom-a.top+k)/a.height)}else{var
m=d.total*b.heightOracle.charWidth,l=2e3*b.heightOracle.charWidth;f=eq(d,(b.pixelViewport.left-l)/m);g=eq(d,(b.pixelViewport.right+l)/m)}var
e=[];if(f>a.from)e.push({from:a.from,to:f});if(g<a.to)e.push({from:g,to:a.to});var
c=b.state.selection.main;if(c.from>=a.from&&c.from<=a.to)na(e,c.from-10,c.from+10);if(!c.empty&&c.to>=a.from&&c.to<=a.to)na(e,c.to-10,c.to+10);var
o=function(){var
f=j[h],c=f.from,e=f.to;if(e-c>1e3)i.push(yj(p,function(b){return b.from>=a.from&&b.to<=a.to&&Math.abs(b.from-c)<1e3&&Math.abs(b.to-e)<1e3})||new
fN(c,e,b.gapSize(a,c,e,d)))};for(var
h=0,j=e;h<j.length;h++)o()};for(c.s();!(n=c.n()).done;){var
e=d();if(e==="continue")continue}}catch(a){c.e(a)}finally{c.f()}return i}},{key:"gapSize",value:function(d,c,e,a){var
b=oj(a,e)-oj(a,c);return this.heightOracle.lineWrapping?d.height*b:a.total*this.heightOracle.charWidth*b}},{key:"updateLineGaps",value:function(a){var
b=this;if(!fN.same(a,this.lineGaps)){this.lineGaps=a;this.lineGapDeco=ag.set(a.map(function(a){return a.draw(b.heightOracle.lineWrapping)}))}}},{key:"computeVisibleRanges",value:function(){var
b=this.state.facet(bK);if(this.lineGaps.length)b=b.concat(this.lineGapDeco);var
a=[];k.spans(b,this.viewport.from,this.viewport.to,{span:function(b,c){a.push({from:b,to:c})},point:function(){}},20);var
c=a.length!=this.visibleRanges.length||this.visibleRanges.some(function(c,b){return c.from!=a[b].from||c.to!=a[b].to});this.visibleRanges=a;return c?4:0}},{key:"lineBlockAt",value:function(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(function(b){return b.from<=a&&b.to>=a})||c$(this.heightMap.lineAt(a,D.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(a){return c$(this.heightMap.lineAt(this.scaler.fromDOM(a),D.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(a){return c$(this.heightMap.blockAt(this.scaler.fromDOM(a),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]);return d}(),d7=c(function
a(c,d){b(this,a);this.from=c;this.to=d});function
An(e,b,f){var
c=[],a=e,d=0;k.spans(f.facet(bK),e,b,{span:function(){},point:function(b,e){if(b>a){c.push({from:a,to:b});d+=b-a}a=e}},20);if(a<b){c.push({from:a,to:b});d+=b-a}return{total:d,ranges:c}}function
eq(f,c){var
j=f.total,a=f.ranges;if(c<=0)return a[0].from;if(c>=1)return a[a.length-1].to;var
b=Math.floor(j*c);for(var
d=0;;d++){var
e=a[d],g=e.from,i=e.to,h=i-g;if(b<=h)return g+b;b-=h}}function
oj(h,g){var
c=0,b=a(h.ranges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,f=e.from,i=e.to;if(g<=i){c+=g-f;break}c+=i-f}}catch(a){b.e(a)}finally{b.f()}return c/h.total}function
na(d,e,f){for(var
b=0;b<d.length;b++){var
a=d[b];if(a.from<f&&a.to>e){var
c=[];if(a.from<e)c.push({from:a.from,to:e});if(a.to>f)c.push({from:f,to:a.to});d.splice.apply(d,[b,1].concat(c));b+=c.length-1}}}function
yj(e,f){var
b=a(e),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(f(d))return d}}catch(a){b.e(a)}finally{b.f()}return void
0}var
j2={toDOM:function(a){return a},fromDOM:function(a){return a},scale:1},tc=function(){function
g(j,e,l){b(this,g);var
f=0,i=0,k=0;this.viewports=l.map(function(a){var
c=a.from,d=a.to,g=e.lineAt(c,D.ByPos,j,0,0).top,b=e.lineAt(d,D.ByPos,j,0,0).bottom;f+=b-g;return{from:c,to:d,top:g,bottom:b,domTop:0,domBottom:0}});this.scale=(7e6-f)/(e.height-f);var
d=a(this.viewports),h;try{for(d.s();!(h=d.n()).done;){var
c=h.value;c.domTop=k+(c.top-i)*this.scale;k=c.domBottom=c.domTop+(c.bottom-c.top);i=c.bottom}}catch(a){d.e(a)}finally{d.f()}}c(g,[{key:"toDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.top)return e+(b-d)*this.scale;if(b<=a.bottom)return a.domTop+(b-a.top);d=a.bottom;e=a.domBottom}}},{key:"fromDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.domTop)return d+(b-e)/this.scale;if(b<=a.domBottom)return a.top+(b-a.domTop);d=a.bottom;e=a.domBottom}}}]);return g}();function
c$(a,b){if(b.scale==1)return a;var
c=b.toDOM(a.top),d=b.toDOM(a.bottom);return new
b3(a.from,a.length,c,d-c,Array.isArray(a.type)?a.type.map(function(a){return c$(a,b)}):a.type)}var
sg=h.define({combine:function(a){return a.join(" ")}}),hb=h.define({combine:function(a){return a.indexOf(true)>-1}}),gJ=y.newName(),l1=y.newName(),lW=y.newName(),pY={"&light":"."+l1,"&dark":"."+lW};function
gP(c,a,b){return new
y(a,{finish:function(a){return/&/.test(a)?a.replace(/&\w*/,function(a){if(a=="&")return c;if(!b||!b[a])throw new
RangeError("Unsupported selector: ".concat(a));return b[a]}):c+" "+a}})}var
wj=gP("."+gJ,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pY),Bv={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true},i3=l.ie&&l.ie_version<=11,tF=function(){function
e(d,f,g){var
c=this;b(this,e);this.view=d;this.onChange=f;this.onScrollChanged=g;this.active=false;this.selectionRange=new
tL();this.selectionChanged=false;this.delayedFlush=-1;this.resizeTimeout=-1;this.queue=[];this.delayedAndroidKey=null;this.scrollTargets=[];this.intersection=null;this.resize=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this.parentCheck=-1;this.dom=d.contentDOM;this.observer=new
MutationObserver(function(f){var
b=a(f),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;c.queue.push(g)}}catch(a){b.e(a)}finally{b.f()}if((l.ie&&l.ie_version<=11||l.ios&&d.composing)&&f.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length}))c.flushSoon();else
c.flush()});if(i3)this.onCharData=function(a){c.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue});c.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);if(typeof
ResizeObserver=="function"){this.resize=new
ResizeObserver(function(){if(c.view.docView.lastUpdate<Date.now()-75&&c.resizeTimeout<0)c.resizeTimeout=setTimeout(function(){c.resizeTimeout=-1;c.view.requestMeasure()},50)});this.resize.observe(d.scrollDOM)}this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof
IntersectionObserver=="function"){this.intersection=new
IntersectionObserver(function(a){if(c.parentCheck<0)c.parentCheck=setTimeout(c.listenForScroll.bind(c),1e3);if(a.length>0&&a[a.length-1].intersectionRatio>0!=c.intersecting){c.intersecting=!c.intersecting;if(c.intersecting!=c.view.inView)c.onScrollChanged(document.createEvent("Event"))}},{});this.intersection.observe(this.dom);this.gapIntersection=new
IntersectionObserver(function(a){if(a.length>0&&a[a.length-1].intersectionRatio>0)c.onScrollChanged(document.createEvent("Event"))},{})}this.listenForScroll();this.readSelectionRange();this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}c(e,[{key:"onScroll",value:function(a){if(this.intersecting)this.flush(false);this.onScrollChanged(a)}},{key:"updateGaps",value:function(c){if(this.gapIntersection&&(c.length!=this.gaps.length||this.gaps.some(function(a,b){return a!=c[b]}))){this.gapIntersection.disconnect();var
b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;this.gapIntersection.observe(e)}}catch(a){b.e(a)}finally{b.f()}this.gaps=c}}},{key:"onSelectionChange",value:function(d){if(!this.readSelectionRange()||this.delayedAndroidKey)return;var
b=this.view,a=this.selectionRange;if(b.state.facet(c1)?b.root.activeElement!=this.dom:!hS(b.dom,a))return;var
c=a.anchorNode&&b.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(d))return;if((l.ie&&l.ie_version<=11||l.android&&l.chrome)&&!b.state.selection.main.empty&&a.focusNode&&eR(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))this.flushSoon();else
this.flush(false)}},{key:"readSelectionRange",value:function(){var
b=this.view.root,c=eE(b),a=l.safari&&b.nodeType==11&&xI()==this.view.contentDOM&&BU(this.view)||c;if(this.selectionRange.eq(a))return false;this.selectionRange.setRange(a);return this.selectionChanged=true}},{key:"setSelectionRange",value:function(a,b){this.selectionRange.set(a.node,a.offset,b.node,b.offset);this.selectionChanged=false}},{key:"listenForScroll",value:function(){this.parentCheck=-1;var
d=0,c=null;for(var
b=this.dom;b;)if(b.nodeType==1){if(!c&&d<this.scrollTargets.length&&this.scrollTargets[d]==b)d++;else
if(!c)c=this.scrollTargets.slice(0,d);if(c)c.push(b);b=b.assignedSlot||b.parentNode}else
if(b.nodeType==11)b=b.host;else
break;if(d<this.scrollTargets.length&&!c)c=this.scrollTargets.slice(0,d);if(c){var
e=a(this.scrollTargets),g;try{for(e.s();!(g=e.n()).done;){var
i=g.value;i.removeEventListener("scroll",this.onScroll)}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.scrollTargets=c),h;try{for(f.s();!(h=f.n()).done;){var
j=h.value;j.addEventListener("scroll",this.onScroll)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{this.stop();return a()}finally{this.start();this.clear()}}},{key:"start",value:function(){if(this.active)return;this.observer.observe(this.dom,Bv);if(i3)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true}},{key:"stop",value:function(){if(!this.active)return;this.active=false;this.observer.disconnect();if(i3)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.selectionChanged=false}},{key:"delayAndroidKey",value:function(b,c){var
a=this;if(!this.delayedAndroidKey)requestAnimationFrame(function(){var
b=a.delayedAndroidKey;a.delayedAndroidKey=null;var
c=a.view.state;if(cW(a.view.contentDOM,b.key,b.keyCode))a.processRecords();else
a.flush();if(a.view.state==c)a.view.update([])});if(!this.delayedAndroidKey||b=="Enter")this.delayedAndroidKey={key:b,keyCode:c}}},{key:"flushSoon",value:function(){var
a=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20)}},{key:"forceFlush",value:function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}}},{key:"processRecords",value:function(){var
g=this.queue,d=a(this.observer.takeRecords()),h;try{for(d.s();!(h=d.n()).done;){var
k=h.value;g.push(k)}}catch(a){d.e(a)}finally{d.f()}if(g.length)this.queue=[];var
c=-1,f=-1,j=false,e=a(g),i;try{for(e.s();!(i=e.n()).done;){var
l=i.value,b=this.readMutation(l);if(!b)continue;if(b.typeOver)j=true;if(c==-1){c=b.from;f=b.to}else{c=Math.min(b.from,c);f=Math.max(b.to,f)}}}catch(a){e.e(a)}finally{e.f()}return{from:c,to:f,typeOver:j}}},{key:"flush",value:function(){var
d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.delayedFlush>=0||this.delayedAndroidKey)return;if(d)this.readSelectionRange();var
a=this.processRecords(),b=a.from,f=a.to,g=a.typeOver,c=this.selectionChanged&&hS(this.dom,this.selectionRange);if(b<0&&!c)return;this.selectionChanged=false;var
e=this.view.state;this.onChange(b,f,g);if(this.view.state==e)this.view.update([])}},{key:"readMutation",value:function(b){var
a=this.view.docView.nearest(b.target);if(!a||a.ignoreMutation(b))return null;a.markDirty(b.type=="attributes");if(b.type=="attributes")a.dirty|=4;if(b.type=="childList"){var
d=oe(a,b.previousSibling||b.target.previousSibling,-1),c=oe(a,b.nextSibling||b.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:false}}else
if(b.type=="characterData")return{from:a.posAtStart,to:a.posAtEnd,typeOver:b.target.nodeValue==b.oldValue};else
return null}},{key:"destroy",value:function(){var
c,d,e;this.stop();(c=this.intersection)===null||c===void
0?void
0:c.disconnect();(d=this.gapIntersection)===null||d===void
0?void
0:d.disconnect();(e=this.resize)===null||e===void
0?void
0:e.disconnect();var
b=a(this.scrollTargets),f;try{for(b.s();!(f=b.n()).done;){var
g=f.value;g.removeEventListener("scroll",this.onScroll)}}catch(a){b.e(a)}finally{b.f()}window.removeEventListener("scroll",this.onScroll);this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout)}}]);return e}();function
oe(c,a,e){while(a){var
b=Y.get(a);if(b&&b.parent==c)return b;var
d=a.parentNode;a=d!=c.dom?d:e>0?a.nextSibling:a.previousSibling}return null}function
BU(e){var
a=null;function
i(b){b.preventDefault();b.stopImmediatePropagation();a=b.getTargetRanges()[0]}e.contentDOM.addEventListener("beforeinput",i,true);document.execCommand("indent");e.contentDOM.removeEventListener("beforeinput",i,true);if(!a)return null;var
f=a.startContainer,g=a.startOffset,c=a.endContainer,d=a.endOffset,h=e.docView.domAtPos(e.state.selection.main.anchor);if(eR(h.node,h.offset,c,d)){var
b=[c,d,f,g];f=b[0];g=b[1];c=b[2];d=b[3]}return{anchorNode:f,anchorOffset:g,focusNode:c,focusOffset:d}}function
v_(a,C,H,K){var
b,e,c=a.state.selection.main;if(C>-1){var
j=a.docView.domBoundsAround(C,H,0);if(!j||a.state.readOnly)return;var
h=j.from,D=j.to,B=a.docView.impreciseHead||a.docView.impreciseAnchor?[]:Cv(a),n=new
jI(B,a);n.readRange(j.startDOM,j.endDOM);e=Cq(B,h);var
x=c.from,y=null;if(a.inputState.lastKeyCode===8&&a.inputState.lastKeyTime>Date.now()-100||l.android&&n.text.length<D-h){x=c.to;y="end"}var
k=yu(a.state.sliceDoc(h,D),n.text,x-h,y);if(k)b={from:h+k.from,to:h+k.toA,insert:a.state.toText(n.text.slice(k.from,k.toB))}}else
if(a.hasFocus||!a.state.facet(c1)){var
f=a.observer.selectionRange,u=a.docView,r=u.impreciseHead,q=u.impreciseAnchor,w=r&&r.node==f.focusNode&&r.offset==f.focusOffset||!g7(a.contentDOM,f.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(f.focusNode,f.focusOffset),v=q&&q.node==f.anchorNode&&q.offset==f.anchorOffset||!g7(a.contentDOM,f.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(f.anchorNode,f.anchorOffset);if(w!=c.head||v!=c.anchor)e=d.single(v,w)}if(!b&&!e)return;if(!b&&K&&!c.empty&&e&&e.main.empty)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,c.to)};else
if(b&&b.from>=c.from&&b.to<=c.to&&(b.from!=c.from||b.to!=c.to)&&c.to-c.from-(b.to-b.from)<=4)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,b.from).append(b.insert).append(a.state.doc.slice(b.to,c.to))};if(b){var
g=a.state;if(l.ios&&a.inputState.flushIOSKey(a))return;if(l.android&&(b.from==c.from&&b.to==c.to&&b.insert.length==1&&b.insert.lines==2&&cW(a.contentDOM,"Enter",13)||b.from==c.from-1&&b.to==c.to&&b.insert.length==0&&cW(a.contentDOM,"Backspace",8)||b.from==c.from&&b.to==c.to+1&&b.insert.length==0&&cW(a.contentDOM,"Delete",46)))return;var
E=b.insert.toString();if(a.state.facet(o6).some(function(c){return c(a,b.from,b.to,E)}))return;if(a.inputState.composing>=0)a.inputState.composing++;var
o;if(b.from>=c.from&&b.to<=c.to&&b.to-b.from>=(c.to-c.from)/3&&(!e||e.main.empty&&e.main.from==b.from+b.insert.length)&&a.inputState.composing<0){var
G=c.from<b.from?g.sliceDoc(c.from,b.from):"",F=c.to>b.to?g.sliceDoc(b.to,c.to):"";o=g.replaceSelection(a.state.toText(G+b.insert.sliceString(0,void
0,a.state.lineBreak)+F))}else{var
m=g.changes(b),i=e&&!g.selection.main.eq(e.main)&&e.main.to<=m.newLength?e.main:void
0;if(g.selection.ranges.length>1&&a.inputState.composing>=0&&b.to<=c.to&&b.to>=c.to-10){var
z=a.state.sliceDoc(b.from,b.to),p=mD(a)||a.state.doc.lineAt(c.head),I=c.to-b.to,J=c.to-c.from;o=g.changeByRange(function(e){if(e.from==c.from&&e.to==c.to)return{changes:m,range:i||e.map(m)};var
f=e.to-I,h=f-z.length;if(e.to-e.from!=J||a.state.sliceDoc(h,f)!=z||p&&e.to>=p.from&&e.from<=p.to)return{range:e};var
j=g.changes({from:h,to:f,insert:b.insert}),k=e.to-c.to;return{changes:j,range:!i?e.map(j):d.range(Math.max(0,i.anchor+k),Math.max(0,i.head+k))}})}else
o={changes:m,selection:i&&g.selection.replaceRange(i)}}var
s="input.type";if(a.composing){s+=".compose";if(a.inputState.compositionFirstChange){s+=".start";a.inputState.compositionFirstChange=false}}a.dispatch(o,{scrollIntoView:true,userEvent:s})}else
if(e&&!e.main.eq(c)){var
A=false,t="select";if(a.inputState.lastSelectionTime>Date.now()-50){if(a.inputState.lastSelectionOrigin=="select")A=true;t=a.inputState.lastSelectionOrigin}a.dispatch({selection:e,scrollIntoView:A,userEvent:t})}}function
yu(e,f,d,k){var
g=Math.min(e.length,f.length),a=0;while(a<g&&e.charCodeAt(a)==f.charCodeAt(a))a++;if(a==g&&e.length==f.length)return null;var
b=e.length,c=f.length;while(b>0&&c>0&&e.charCodeAt(b-1)==f.charCodeAt(c-1)){b--;c--}if(k=="end"){var
i=Math.max(0,a-Math.min(b,c));d-=b+i-a}if(b<a&&e.length<f.length){var
j=d<=a&&d>=b?a-d:0;a-=j;c=a+(c-b);b=a}else
if(c<a){var
h=d<=a&&d>=c?a-d:0;a-=h;b=a+(b-c);c=a}return{from:a,toA:b,toB:c}}function
Cv(d){var
b=[];if(d.root.activeElement!=d.contentDOM)return b;var
a=d.observer.selectionRange,c=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(c){b.push(new
jE(c,e));if(f!=c||g!=e)b.push(new
jE(f,g))}return b}function
Cq(a,c){if(a.length==0)return null;var
b=a[0].pos,e=a.length==2?a[1].pos:b;return b>-1&&e>-1?d.single(b+c,e+c):null}var
R=function(){function
f(){var
c=this,d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,f);this.plugins=[];this.pluginMap=new
Map();this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(a){return c.update([a])};this.dispatch=this.dispatch.bind(this);this.root=d.root||yU(d.parent)||document;this.viewState=new
kK(d.state||u.create());this.plugins=this.state.facet(dy).map(function(a){return new
fV(a)});var
e=a(this.plugins),g;try{for(e.s();!(g=e.n()).done;){var
h=g.value;h.update(this)}}catch(a){e.e(a)}finally{e.f()}this.observer=new
tF(this,function(a,b,d){v_(c,a,b,d)},function(a){c.inputState.runScrollHandlers(c,a);if(c.observer.intersecting)c.measure()});this.inputState=new
ul(this);this.docView=new
jQ(this);this.mountStyles();this.updateAttrs();this.updateState=0;x$();this.requestMeasure();if(d.parent)d.parent.appendChild(this.dom)}c(f,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var
a;this._dispatch(arguments.length==1&&(arguments.length<=0?undefined:arguments[0])instanceof
aj?arguments.length<=0?undefined:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function
b(h){if(this.updateState!=0)throw new
Error("Calls to EditorView.update are not allowed while an update is in progress");var
n=false,b,f=this.state,i=a(h),o;try{for(i.s();!(o=i.n()).done;){var
s=o.value;if(s.startState!=f)throw new
RangeError("Trying to update state with a transaction that doesn't start from the previous state.");f=s.state}}catch(a){i.e(a)}finally{i.f()}if(this.destroyed){this.viewState.state=f;return}if(f.facet(u.phrases)!=this.state.facet(u.phrases))return this.setState(f);b=new
kP(this,f,h);var
c=this.viewState.scrollTarget;try{this.updateState=2;var
j=a(h),p;try{for(j.s();!(p=j.n()).done;){var
m=p.value;if(c)c=c.map(m.changes);if(m.scrollIntoView){var
g=m.state.selection.main;c=new
dU(g.empty?g:d.cursor(g.head,g.head>g.anchor?-1:1))}var
k=a(m.effects),q;try{for(k.s();!(q=k.n()).done;){var
e=q.value;if(e.is(iy))c=new
dU(e.value);else
if(e.is(md))c=new
dU(e.value,"center");else
if(e.is(lE))c=e.value}}catch(a){k.e(a)}finally{k.f()}}}catch(a){j.e(a)}finally{j.f()}this.viewState.update(b,c);this.bidiCache=jq.update(this.bidiCache,b.changes);if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}n=this.docView.update(b);if(this.state.facet(dl)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(h);this.docView.updateSelection(n,h.some(function(a){return a.isUserEvent("select.pointer")}))}finally{this.updateState=0}if(n||c||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!b.empty){var
l=a(this.state.facet(iY)),r;try{for(l.s();!(r=l.n()).done;){var
t=r.value;t(b)}}catch(a){l.e(a)}finally{l.f()}}}},{key:"setState",value:function(d){if(this.updateState!=0)throw new
Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=d;return}this.updateState=2;var
h=this.hasFocus;try{var
b=a(this.plugins),e;try{for(b.s();!(e=b.n()).done;){var
i=e.value;i.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.viewState=new
kK(d);this.plugins=d.facet(dy).map(function(a){return new
fV(a)});this.pluginMap.clear();var
c=a(this.plugins),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;g.update(this)}}catch(a){c.e(a)}finally{c.f()}this.docView=new
jQ(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}if(h)this.focus();this.requestMeasure()}},{key:"updatePlugins",value:function(b){var
n=b.startState.facet(dy),p=b.state.facet(dy);if(n!=p){var
g=[],c=a(p),i;try{for(c.s();!(i=c.n()).done;){var
o=i.value,l=n.indexOf(o);if(l<0)g.push(new
fV(o));else{var
m=this.plugins[l];m.mustUpdate=b;g.push(m)}}}catch(a){c.e(a)}finally{c.f()}var
d=a(this.plugins),j;try{for(d.s();!(j=d.n()).done;){var
h=j.value;if(h.mustUpdate!=b)h.destroy(this)}}catch(a){d.e(a)}finally{d.f()}this.plugins=g;this.pluginMap.clear();this.inputState.ensureHandlers(this)}else{var
e=a(this.plugins),k;try{for(e.s();!(k=e.n()).done;){var
q=k.value;q.mustUpdate=b}}catch(a){e.e(a)}finally{e.f()}}for(var
f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}},{key:"measure",value:function(){var
k=this,q=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=0;if(q)this.observer.flush();var
c=null;try{for(var
h=0;;h++){this.updateState=1;var
n=this.viewport,g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var
e=[];if(!(g&4)){var
i=[e,this.measureRequests];this.measureRequests=i[0];e=i[1]}var
m=e.map(function(a){try{return a.read(k)}catch(a){bS(k.state,a);return je}}),b=new
kP(this,this.state),o=false,p=false;b.flags|=g;if(!c)c=b;else
c.flags|=g;this.updateState=2;if(!b.empty){this.updatePlugins(b);this.inputState.update(b);this.updateAttrs();o=this.docView.update(b)}for(var
d=0;d<e.length;d++)if(m[d]!=je)try{var
l=e[d];if(l.write)l.write(m[d],this)}catch(a){bS(this.state,a)}if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null;p=true}if(o)this.docView.updateSelection(true);if(this.viewport.from==n.from&&this.viewport.to==n.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0;this.measureScheduled=-1}if(c&&!c.empty){var
f=a(this.state.facet(iY)),j;try{for(f.s();!(j=f.n()).done;){var
r=j.value;r(c)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"themeClasses",get:function(){return gJ+" "+(this.state.facet(hb)?lW:l1)+" "+this.state.facet(sg)}},{key:"updateAttrs",value:function(){var
a=this,c=lQ(this,nY,{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),b={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:!this.state.facet(c1)?"false":"true","class":"cm-content",style:"".concat(l.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)b["aria-readonly"]="true";lQ(this,mK,b);this.observer.ignore(function(){iT(a.contentDOM,a.contentAttrs,b);iT(a.dom,a.editorAttrs,c)});this.editorAttrs=c;this.contentAttrs=b}},{key:"showAnnouncements",value:function(k){var
h=true,b=a(k),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j.effects),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;if(g.is(f.announce)){if(h)this.announceDOM.textContent="";h=false;var
i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=g.value}}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(dl);y.mount(this.root,this.styleModules.concat(wj).reverse())}},{key:"readMeasured",value:function(){if(this.updateState==2)throw new
Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false)}},{key:"requestMeasure",value:function(a){var
c=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame(function(){return c.measure()});if(a){if(a.key!=null)for(var
b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(e){var
d=[],b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;f.update(this).takeField(e,d)}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"plugin",value:function(b){var
a=this.pluginMap.get(b);if(a===void
0||a&&a.spec!=b)this.pluginMap.set(b,a=this.plugins.find(function(a){return a.spec==b})||null);return a&&a.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"blockAtHeight",value:function(c,b){var
a=hy(b,this);return this.elementAtHeight(c-a).moveY(a)}},{key:"elementAtHeight",value:function(a){this.readMeasured();return this.viewState.elementAtHeight(a)}},{key:"visualLineAtHeight",value:function(c,b){var
a=hy(b,this);return this.lineBlockAtHeight(c-a).moveY(a)}},{key:"lineBlockAtHeight",value:function(a){this.readMeasured();return this.viewState.lineBlockAtHeight(a)}},{key:"viewportLines",value:function(e,d){var
g=hy(d,this),b=a(this.viewportLineBlocks),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;e(f.moveY(g))}}catch(a){b.e(a)}finally{b.f()}}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"visualLineAt",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.lineBlockAt(b).moveY(a+this.viewState.paddingTop)}},{key:"lineBlockAt",value:function(a){return this.viewState.lineBlockAt(a)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(a,c,b){return iF(this,a,qt(this,a,c,b))}},{key:"moveByGroup",value:function(a,b){var
c=this;return iF(this,a,qt(this,a,b,function(b){return wL(c,a.head,b)}))}},{key:"moveToLineBoundary",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return AO(this,c,a,b)}},{key:"moveVertically",value:function(a,c,b){return iF(this,a,AS(this,a,c,b))}},{key:"scrollPosIntoView",value:function(a){this.dispatch({effects:iy.of(d.cursor(a))})}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(a,b)}},{key:"posAtCoords",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return qW(this,a,b)}},{key:"coordsAtPos",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var
a=this.docView.coordsAt(b,c);if(!a||a.left==a.right)return a;var
d=this.state.doc.lineAt(b),e=this.bidiSpans(d),f=e[bY.find(e,b-d.from,-1,c)];return ew(a,f.dir==aA.LTR==c>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(b){if(b.length>uD)return ss(b.length);var
f=this.textDirection,c=a(this.bidiCache),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.from==b.from&&d.dir==f)return d.order}}catch(a){c.e(a)}finally{c.f()}var
g=xj(b.text,this.textDirection);this.bidiCache.push(new
jq(b.from,b.to,f,g));return g}},{key:"hasFocus",get:function(){var
a;return(document.hasFocus()||l.safari&&((a=this.inputState)===null||a===void
0?void
0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var
a=this;this.observer.ignore(function(){oq(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.destroyed=true}}],[{key:"scrollIntoView",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return lE.of(new
dU(typeof
b=="number"?d.cursor(b):b,a.y,a.x,a.yMargin,a.xMargin))}},{key:"domEventHandlers",value:function(a){return kH.define(function(){return{}},{eventHandlers:a})}},{key:"theme",value:function(d,a){var
b=y.newName(),c=[sg.of(b),dl.of(gP(".".concat(b),d))];if(a&&a.dark)c.push(hb.of(true));return c}},{key:"baseTheme",value:function(a){return bf.lowest(dl.of(gP("."+gJ,a,pY)))}}]);return f}();R.scrollTo=iy;R.centerOn=md;R.styleModule=dl;R.inputHandler=o6;R.exceptionSink=n_;R.updateListener=iY;R.editable=c1;R.mouseSelectionStyle=qp;R.dragMovesSelection=nO;R.clickAddsSelectionRange=mq;R.decorations=bK;R.darkTheme=hb;R.contentAttributes=mK;R.editorAttributes=nY;R.lineWrapping=R.contentAttributes.of({"class":"cm-lineWrapping"});R.announce=j.define();var
uD=4096;function
hy(a,b){return(a==null?b.contentDOM.getBoundingClientRect().top:a)+b.viewState.paddingTop}var
ir=-1;function
x$(){window.addEventListener("resize",function(){if(ir==-1)ir=setTimeout(zk,50)})}function
zk(){ir=-1;var
c=document.querySelectorAll(".cm-content");for(var
a=0;a<c.length;a++){var
b=Y.get(c[a]);if(b)b.editorView.requestMeasure()}}var
je={},jq=function(){function
d(c,f,a,e){b(this,d);this.from=c;this.to=f;this.dir=a;this.order=e}c(d,null,[{key:"update",value:function(a,c){if(c.empty)return a;var
f=[],g=a.length?a[a.length-1].dir:aA.LTR;for(var
e=Math.max(0,a.length-10);e<a.length;e++){var
b=a[e];if(b.dir==g&&!c.touchesRange(b.from,b.to))f.push(new
d(c.mapPos(b.from,1),c.mapPos(b.to,-1),b.dir,b.order))}return f}}]);return d}();function
lQ(f,g,c){for(var
d=f.state.facet(g),a=d.length-1;a>=0;a--){var
b=d[a],e=typeof
b=="function"?b(f):b;if(e)g2(e,c)}return c}var
Dn=l.mac?"mac":l.windows?"win":l.linux?"linux":"key",th=!l.ios,CL={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(th)CL[".cm-line"].caretColor="transparent !important";var
Di=/x/.unicode!=null?"gu":"g",tZ=1024,A8=0,f0=c(function
a(c,d){b(this,a);this.from=c;this.to=d}),w=function(){function
a(){var
c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,a);this.id=A8++;this.perNode=!!c.perNode;this.deserialize=c.deserialize||function(){throw new
Error("This node type doesn't define a deserialize function")}}c(a,[{key:"add",value:function(a){var
d=this;if(this.perNode)throw new
RangeError("Can't add per-node props to node types");if(typeof
a!="function")a=aC.match(a);return function(c){var
b=a(c);return b===void
0?null:[d,b]}}}]);return a}();w.closedBy=new
w({deserialize:function(a){return a.split(" ")}});w.openedBy=new
w({deserialize:function(a){return a.split(" ")}});w.group=new
w({deserialize:function(a){return a.split(" ")}});w.contextHash=new
w({perNode:true});w.lookAhead=new
w({perNode:true});w.mounted=new
w({perNode:true});var
Be=Object.create(null),aC=function(){function
e(d,f,c){var
a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;b(this,e);this.name=d;this.props=f;this.id=c;this.flags=a}c(e,[{key:"prop",value:function(a){return this.props[a.id]}},{key:"isTop",get:function(){return(this.flags&1)>0}},{key:"isSkipped",get:function(){return(this.flags&2)>0}},{key:"isError",get:function(){return(this.flags&4)>0}},{key:"isAnonymous",get:function(){return(this.flags&8)>0}},{key:"is",value:function(a){if(typeof
a=="string"){if(this.name==a)return true;var
b=this.prop(w.group);return b?b.indexOf(a)>-1:false}return this.id==a}}],[{key:"define",value:function(b){var
g=b.props&&b.props.length?Object.create(null):Be,i=(b.top?1:0)|(b.skipped?2:0)|(b.error?4:0)|(b.name==null?8:0),h=new
e(b.name||"",g,b.id,i);if(b.props){var
d=a(b.props),f;try{for(d.s();!(f=d.n()).done;){var
c=f.value;if(!Array.isArray(c))c=c(h);if(c){if(c[0].perNode)throw new
RangeError("Can't store a per-node prop on a node type");g[c[0].id]=c[1]}}}catch(a){d.e(a)}finally{d.f()}}return h}},{key:"match",value:function(d){var
e=Object.create(null);for(var
f
in
d){var
b=a(f.split(" ")),c;try{for(b.s();!(c=b.n()).done;){var
g=c.value;e[g]=d[f]}}catch(a){b.e(a)}finally{b.f()}}return function(d){for(var
b=d.prop(w.group),a=-1;a<(b?b.length:0);a++){var
c=e[a<0?d.name:b[a]];if(c)return c}}}}]);return e}();aC.none=new
aC("",Object.create(null),0,8);var
u6=function(){function
g(c){b(this,g);this.types=c;for(var
a=0;a<c.length;a++)if(c[a].id!=a)throw new
RangeError("Node type ids should correspond to array positions when creating a node set")}c(g,[{key:"extend",value:function(){var
l=[];for(var
i=arguments.length,m=new
Array(i),f=0;f<i;f++)m[f]=arguments[f];var
d=a(this.types),j;try{for(d.s();!(j=d.n()).done;){var
b=j.value,c=null,e=a(m),k;try{for(e.s();!(k=e.n()).done;){var
n=k.value,h=n(b);if(h){if(!c)c=Object.assign({},b.props);c[h[0].id]=h[1]}}}catch(a){e.e(a)}finally{e.f()}l.push(c?new
aC(b.name,c,b.id,b.flags):b)}}catch(a){d.e(a)}finally{d.f()}return new
g(l)}}]);return g}(),dF=new
WeakMap(),jo=new
WeakMap(),S=function(){function
d(l,i,k,j,f){b(this,d);this.type=l;this.children=i;this.positions=k;this.length=j;this.props=null;if(f&&f.length){this.props=Object.create(null);var
c=a(f),g;try{for(c.s();!(g=c.n()).done;){var
h=bn(g.value,2),e=h[0],m=h[1];this.props[typeof
e=="number"?e:e.id]=m}}catch(a){c.e(a)}finally{c.f()}}}c(d,[{key:"toString",value:function(){var
d=this.prop(w.mounted);if(d&&!d.overlay)return d.tree.toString();var
b="",c=a(this.children),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value,f=g.toString();if(f){if(b)b+=",";b+=f}}}catch(a){c.e(a)}finally{c.f()}return!this.type.name?b:(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(b.length?"("+b+")":"")}},{key:"cursor",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=b!=null&&dF.get(this)||this.topNode,a=new
d4(c);if(b!=null){a.moveTo(b,d);dF.set(this,a._tree)}return a}},{key:"fullCursor",value:function(){return new
d4(this.topNode,1)}},{key:"topNode",get:function(){return new
cL(this,0,0,null)}},{key:"resolve",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,a=cs(dF.get(this)||this.topNode,b,c,false);dF.set(this,a);return a}},{key:"resolveInner",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,a=cs(jo.get(this)||this.topNode,b,c,true);jo.set(this,a);return a}},{key:"iterate",value:function(c){var
h=c.enter,g=c.leave,d=c.from,i=d===void
0?0:d,e=c.to,j=e===void
0?this.length:e;for(var
a=this.cursor(),f=function(){return a.node};;){var
b=false;if(a.from<=j&&a.to>=i&&(a.type.isAnonymous||h(a.type,a.from,a.to,f)!==false)){if(a.firstChild())continue;if(!a.type.isAnonymous)b=true}for(;;){if(b&&g)g(a.type,a.from,a.to,f);b=a.type.isAnonymous;if(a.nextSibling())break;if(!a.parent())return;b=true}}}},{key:"prop",value:function(a){return!a.perNode?this.type.prop(a):this.props?this.props[a.id]:void
0}},{key:"propValues",get:function(){var
b=[];if(this.props)for(var
a
in
this.props)b.push([+a,this.props[a]]);return b}},{key:"balance",value:function(){var
a=this,b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return this.children.length<=8?this:gG(aC.none,this.children,this.positions,0,this.children.length,0,this.length,function(b,e,c){return new
d(a.type,b,e,c,a.propValues)},b.makeTree||function(a,c,b){return new
d(aC.none,a,c,b)})}}],[{key:"build",value:function(a){return wJ(a)}}]);return d}();S.empty=new
S(aC.none,[],[],0);var
t7=function(){function
a(c,d){b(this,a);this.buffer=c;this.index=d}c(a,[{key:"id",get:function(){return this.buffer[this.index-4]}},{key:"start",get:function(){return this.buffer[this.index-3]}},{key:"end",get:function(){return this.buffer[this.index-2]}},{key:"size",get:function(){return this.buffer[this.index-1]}},{key:"pos",get:function(){return this.index}},{key:"next",value:function(){this.index-=4}},{key:"fork",value:function(){return new
a(this.buffer,this.index)}}]);return a}(),cK=function(){function
e(a,c,d){b(this,e);this.buffer=a;this.length=c;this.set=d}c(e,[{key:"type",get:function(){return aC.none}},{key:"toString",value:function(){var
b=[];for(var
a=0;a<this.buffer.length;){b.push(this.childString(a));a=this.buffer[a+3]}return b.join(",")}},{key:"childString",value:function(a){var
f=this.buffer[a],d=this.buffer[a+3],e=this.set.types[f],b=e.name;if(/\W/.test(b)&&!e.isError)b=JSON.stringify(b);a+=4;if(d==a)return b;var
c=[];while(a<d){c.push(this.childString(a));a=this.buffer[a+3]}return b+"("+c.join(",")+")"}},{key:"findChild",value:function(h,e,d,f,g){var
b=this.buffer,c=-1;for(var
a=h;a!=e;a=b[a+3])if(mj(g,f,b[a+1],b[a+2])){c=a;if(d>0)break}return c}},{key:"slice",value:function(g,h,f,i){var
c=this.buffer,b=new
Uint16Array(h-g);for(var
a=g,d=0;a<h;){b[d++]=c[a++];b[d++]=c[a++]-f;b[d++]=c[a++]-f;b[d++]=c[a++]-g}return new
e(b,i-f,this.set)}}]);return e}();function
mj(d,a,b,c){switch(d){case-2:return b<a;case-1:return c>=a&&b<a;case
0:return b<a&&c>a;case
1:return b<=a&&c>a;case
2:return c>a;case
4:return true}}function
k$(c,d){var
b=c.childBefore(d);while(b){var
a=b.lastChild;if(!a||a.to!=b.to)break;if(a.type.isError&&a.from==a.to){c=b;b=a.prevSibling}else
b=a}return c}function
cs(a,b,e,g){var
f;while(a.from==a.to||(e<1?a.from>=b:a.from>b)||(e>-1?a.to<=b:a.to<b)){var
i=!g&&a
instanceof
cL&&a.index<0?null:a.parent;if(!i)return a;a=i}if(g)for(var
c=a,d=c.parent;d;c=d,d=c.parent)if(c
instanceof
cL&&c.index<0&&((f=d.enter(b,e,true))===null||f===void
0?void
0:f.from)!=c.from)a=d;for(;;){var
h=a.enter(b,e,g);if(!h)return a;a=h}}var
cL=function(){function
f(e,a,d,c){b(this,f);this.node=e;this._from=a;this.index=d;this._parent=c}c(f,[{key:"type",get:function(){return this.node.type}},{key:"name",get:function(){return this.node.type.name}},{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._from+this.node.length}},{key:"nextChild",value:function(c,d,j,k){var
g=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;for(var
a=this;;){for(var
l=a.node,m=l.children,p=l.positions,o=d>0?m.length:-1;c!=o;c+=d){var
b=m[c],e=p[c]+a._from;if(!mj(k,j,e,e+b.length))continue;if(b
instanceof
cK){if(g&2)continue;var
n=b.findChild(0,b.buffer.length,d,j-e,k);if(n>-1)return new
fv(new
tg(a,b,c,e),null,n)}else
if(g&1||!b.type.isAnonymous||hQ(b)){var
i=void
0;if(!(g&1)&&b.props&&(i=b.prop(w.mounted))&&!i.overlay)return new
f(i.tree,e,c,a);var
h=new
f(b,e,c,a);return g&1||!h.type.isAnonymous?h:h.nextChild(d<0?b.children.length-1:0,d,j,k)}}if(g&1||!a.type.isAnonymous)return null;if(a.index>=0)c=a.index+d;else
c=d<0?-1:a._parent.node.children.length;a=a._parent;if(!a)return null}}},{key:"firstChild",get:function(){return this.nextChild(0,1,0,4)}},{key:"lastChild",get:function(){return this.nextChild(this.node.children.length-1,-1,0,4)}},{key:"childAfter",value:function(a){return this.nextChild(0,1,a,2)}},{key:"childBefore",value:function(a){return this.nextChild(this.node.children.length-1,-1,a,-2)}},{key:"enter",value:function(j,e){var
m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true,b;if(m&&(b=this.node.prop(w.mounted))&&b.overlay){var
d=j-this.from,c=a(b.overlay),g;try{for(c.s();!(g=c.n()).done;){var
h=g.value,i=h.from,k=h.to;if((e>0?i<=d:i<d)&&(e<0?k>=d:k>d))return new
f(b.tree,b.overlay[0].from+this.from,-1,this)}}catch(a){c.e(a)}finally{c.f()}}return this.nextChild(0,1,j,e,l?0:2)}},{key:"nextSignificantParent",value:function(){var
a=this;while(a.type.isAnonymous&&a._parent)a=a._parent;return a}},{key:"parent",get:function(){return this._parent?this._parent.nextSignificantParent():null}},{key:"nextSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}},{key:"prevSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}},{key:"cursor",get:function(){return new
d4(this)}},{key:"tree",get:function(){return this.node}},{key:"toTree",value:function(){return this.node}},{key:"resolve",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return cs(this,a,b,false)}},{key:"resolveInner",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return cs(this,a,b,true)}},{key:"enterUnfinishedNodesBefore",value:function(a){return k$(this,a)}},{key:"getChild",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,a=ec(this,d,c,b);return a.length?a[0]:null}},{key:"getChildren",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return ec(this,c,b,a)}},{key:"toString",value:function(){return this.node.toString()}}]);return f}();function
ec(e,f,d,c){var
a=e.cursor,b=[];if(!a.firstChild())return b;if(d!=null)while(!a.type.is(d))if(!a.nextSibling())return b;for(;;){if(c!=null&&a.type.is(c))return b;if(a.type.is(f))b.push(a.node);if(!a.nextSibling())return c==null?b:[]}}var
tg=c(function
a(e,c,d,f){b(this,a);this.parent=e;this.buffer=c;this.index=d;this.start=f}),fv=function(){function
a(c,e,d){b(this,a);this.context=c;this._parent=e;this.index=d;this.type=c.buffer.set.types[c.buffer.buffer[d]]}c(a,[{key:"name",get:function(){return this.type.name}},{key:"from",get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]}},{key:"to",get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]}},{key:"child",value:function(d,e,f){var
b=this.context.buffer,c=b.findChild(this.index+4,b.buffer[this.index+3],d,e-this.context.start,f);return c<0?null:new
a(this.context,this,c)}},{key:"firstChild",get:function(){return this.child(1,0,4)}},{key:"lastChild",get:function(){return this.child(-1,0,4)}},{key:"childAfter",value:function(a){return this.child(1,a,2)}},{key:"childBefore",value:function(a){return this.child(-1,a,-2)}},{key:"enter",value:function(f,d,g){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!e)return null;var
b=this.context.buffer,c=b.findChild(this.index+4,b.buffer[this.index+3],d>0?1:-1,f-this.context.start,d);return c<0?null:new
a(this.context,this,c)}},{key:"parent",get:function(){return this._parent||this.context.parent.nextSignificantParent()}},{key:"externalSibling",value:function(a){return this._parent?null:this.context.parent.nextChild(this.context.index+a,a,0,4)}},{key:"nextSibling",get:function(){var
b=this.context.buffer,c=b.buffer[this.index+3];if(c<(this._parent?b.buffer[this._parent.index+3]:b.buffer.length))return new
a(this.context,this._parent,c);return this.externalSibling(1)}},{key:"prevSibling",get:function(){var
c=this.context.buffer,b=this._parent?this._parent.index+4:0;if(this.index==b)return this.externalSibling(-1);return new
a(this.context,this._parent,c.findChild(b,this.index,-1,0,4))}},{key:"cursor",get:function(){return new
d4(this)}},{key:"tree",get:function(){return null}},{key:"toTree",value:function(){var
b=[],d=[],a=this.context.buffer,e=this.index+4,c=a.buffer[this.index+3];if(c>e){var
f=a.buffer[this.index+1],g=a.buffer[this.index+2];b.push(a.slice(e,c,f,g));d.push(0)}return new
S(this.type,b,d,this.to-this.from)}},{key:"resolve",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return cs(this,a,b,false)}},{key:"resolveInner",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return cs(this,a,b,true)}},{key:"enterUnfinishedNodesBefore",value:function(a){return k$(this,a)}},{key:"toString",value:function(){return this.context.buffer.childString(this.index)}},{key:"getChild",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,a=ec(this,d,c,b);return a.length?a[0]:null}},{key:"getChildren",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return ec(this,c,b,a)}}]);return a}(),d4=function(){function
d(a){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;b(this,d);this.mode=e;this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(a
instanceof
cL)this.yieldNode(a);else{this._tree=a.context.parent;this.buffer=a.context;for(var
c=a._parent;c;c=c._parent)this.stack.unshift(c.index);this.bufferNode=a;this.yieldBuf(a.index)}}c(d,[{key:"name",get:function(){return this.type.name}},{key:"yieldNode",value:function(a){if(!a)return false;this._tree=a;this.type=a.type;this.from=a.from;this.to=a.to;return true}},{key:"yieldBuf",value:function(b,e){this.index=b;var
c=this.buffer,d=c.start,a=c.buffer;this.type=e||a.set.types[a.buffer[b]];this.from=d+a.buffer[b+1];this.to=d+a.buffer[b+2];return true}},{key:"yield",value:function(a){if(!a)return false;if(a
instanceof
cL){this.buffer=null;return this.yieldNode(a)}this.buffer=a.context;return this.yieldBuf(a.index,a.type)}},{key:"toString",value:function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}},{key:"enterChild",value:function(a,d,e){if(!this.buffer)return this["yield"](this._tree.nextChild(a<0?this._tree.node.children.length-1:0,a,d,e,this.mode));var
b=this.buffer.buffer,c=b.findChild(this.index+4,b.buffer[this.index+3],a,d-this.buffer.start,e);if(c<0)return false;this.stack.push(this.index);return this.yieldBuf(c)}},{key:"firstChild",value:function(){return this.enterChild(1,0,4)}},{key:"lastChild",value:function(){return this.enterChild(-1,0,4)}},{key:"childAfter",value:function(a){return this.enterChild(1,a,2)}},{key:"childBefore",value:function(a){return this.enterChild(-1,a,-2)}},{key:"enter",value:function(b,c){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true,a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!this.buffer)return this["yield"](this._tree.enter(b,c,d&&!(this.mode&1),a));return a?this.enterChild(1,b,c):false}},{key:"parent",value:function
a(){if(!this.buffer)return this.yieldNode(this.mode&1?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var
a=this.mode&1?this.buffer.parent:this.buffer.parent.nextSignificantParent();this.buffer=null;return this.yieldNode(a)}},{key:"sibling",value:function(b){if(!this.buffer)return!this._tree._parent?false:this["yield"](this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+b,b,0,4,this.mode));var
c=this.buffer.buffer,a=this.stack.length-1;if(b<0){var
e=a<0?0:this.stack[a]+4;if(this.index!=e)return this.yieldBuf(c.findChild(e,this.index,-1,0,4))}else{var
d=c.buffer[this.index+3];if(d<(a<0?c.buffer.length:c.buffer[this.stack[a]+3]))return this.yieldBuf(d)}return a<0?this["yield"](this.buffer.parent.nextChild(this.buffer.index+b,b,0,4,this.mode)):false}},{key:"nextSibling",value:function(){return this.sibling(1)}},{key:"prevSibling",value:function(){return this.sibling(-1)}},{key:"atLastNode",value:function(e){var
c,a,b=this.buffer;if(b){if(e>0){if(this.index<b.buffer.buffer.length)return false}else
for(var
f=0;f<this.index;f++)if(b.buffer.buffer[f+3]<this.index)return false;c=b.index;a=b.parent}else{var
i=this._tree;c=i.index;a=i._parent}for(;a;d=a,c=d.index,a=d._parent,d){var
d;if(c>-1)for(var
g=c+e,j=e<0?-1:a.node.children.length;g!=j;g+=e){var
h=a.node.children[g];if(this.mode&1||h
instanceof
cK||!h.type.isAnonymous||hQ(h))return false}}return true}},{key:"move",value:function(a,b){if(b&&this.enterChild(a,0,4))return true;for(;;){if(this.sibling(a))return true;if(this.atLastNode(a)||!this.parent())return false}}},{key:"next",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.move(1,a)}},{key:"prev",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.move(-1,a)}},{key:"moveTo",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;while(this.from==this.to||(b<1?this.from>=a:this.from>a)||(b>-1?this.to<=a:this.to<a))if(!this.parent())break;while(this.enterChild(1,a,b));return this}},{key:"node",get:function(){if(!this.buffer)return this._tree;var
d=this.bufferNode,b=null,g=0;if(d&&d.context==this.buffer)scan:for(var
f=this.index,e=this.stack.length;e>=0;){for(var
a=d;a;a=a._parent)if(a.index==f){if(f==this.index)return a;b=a;g=e+1;break scan}f=this.stack[--e]}for(var
c=g;c<this.stack.length;c++)b=new
fv(this.buffer,b,this.stack[c]);return this.bufferNode=new
fv(this.buffer,b,this.index)}},{key:"tree",get:function(){return this.buffer?null:this._tree.node}}]);return d}();function
hQ(a){return a.children.some(function(a){return a
instanceof
cK||!a.type.isAnonymous||hQ(a)})}function
wJ(b){var
e,c=b.buffer,o=b.nodeSet,g=b.maxBufferLength,v=g===void
0?tZ:g,i=b.reused,M=i===void
0?[]:i,h=b.minRepeatType,n=h===void
0?o.types.length:h,a=Array.isArray(c)?new
t7(c,c.length):c,F=o.types,m=0,t=0;function
E(r,I,x,A,H){var
g=a.id,c=a.start,f=a.end,j=a.size,q=t;while(j<0){a.next();if(j==-1){var
J=M[g];x.push(J);A.push(c-r);return}else
if(j==-3){m=g;return}else
if(j==-4){t=g;return}else
throw new
RangeError("Unrecognized record size: ".concat(j))}var
s=F[g],l,d,B=c-r;if(f-c<=v&&(d=K(a.pos-I,H))){var
p=new
Uint16Array(d.size-d.skip),G=a.pos-d.size,y=p.length;while(a.pos>G)y=C(d.start,p,y);l=new
cK(p,f-d.start,o);B=d.start-r}else{var
w=a.pos-j;a.next();var
b=[],i=[],e=g>=n?g:-1,h=0,k=f;while(a.pos>w)if(e>=0&&a.id==e&&a.size>=0){if(a.end<=k-v){D(b,i,c,h,a.end,k,e,q);h=b.length;k=a.end}a.next()}else
E(c,w,b,i,e);if(e>=0&&h>0&&h<b.length)D(b,i,c,h,c,k,e,q);b.reverse();i.reverse();if(e>-1&&h>0){var
z=L(s);l=gG(s,b,i,0,b.length,0,f-c,z,z)}else
l=u(s,b,i,f-c,q-f)}x.push(l);A.push(B)}function
L(h){return function(c,g,d){var
e=0,b=c.length-1,a,f;if(b>=0&&(a=c[b])instanceof
S){if(!b&&a.type==h&&a.length==d)return a;if(f=a.prop(w.lookAhead))e=g[b]+a.length+f}return u(h,c,g,d,e)}}function
D(a,f,c,h,b,g,j,i){var
d=[],e=[];while(a.length>h){d.push(a.pop());e.push(f.pop()+c-b)}a.push(u(o.types[j],d,e,g-b,i-g));f.push(b-c)}function
u(h,e,g,f){var
c=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0,a=arguments.length>5?arguments[5]:undefined;if(m){var
d=[w.contextHash,m];a=a?[d].concat(a):[d]}if(c>25){var
b=[w.lookAhead,c];a=a?[b].concat(a):[b]}return new
S(h,e,g,f,a)}function
K(j,i){var
b=a.fork(),d=0,h=0,f=0,m=b.end-v,c={size:0,start:0,skip:0};scan:for(var
k=b.pos-j;b.pos>k;){var
e=b.size;if(b.id==i&&e>=0){c.size=d;c.start=h;c.skip=f;f+=4;d+=4;b.next();continue}var
l=b.pos-e;if(e<0||l<k||b.start<m)break;var
g=b.id>=n?4:0,o=b.start;b.next();while(b.pos>l){if(b.size<0)if(b.size==-3)g+=4;else
break scan;else
if(b.id>=n)g+=4;b.next()}h=o;d+=e;f+=g}if(i<0||d==j){c.size=d;c.start=h;c.skip=f}return c.size>4?c:void
0}function
C(f,c,b){var
e=a.id,i=a.start,g=a.end,d=a.size;a.next();if(d>=0&&e<n){var
j=b;if(d>4){var
h=a.pos-(d-4);while(a.pos>h)b=C(f,c,b)}c[--b]=j;c[--b]=g-f;c[--b]=i-f;c[--b]=e}else
if(d==-3)m=e;else
if(d==-4)t=e;return b}var
d=[],f=[];while(a.pos>0)E(b.start||0,b.bufferStart||0,d,f,-1);var
j=(e=b.length)!==null&&e!==void
0?e:d.length?f[0]+d[0].length:0;return new
S(F[b.topID],d.reverse(),f.reverse(),j)}var
qM=new
WeakMap();function
e7(e,c){if(!e.isAnonymous||c
instanceof
cK||c.type!=e)return 1;var
b=qM.get(c);if(b==null){b=1;var
d=a(c.children),g;try{for(d.s();!(g=d.n()).done;){var
f=g.value;if(f.type!=e||!(f
instanceof
S)){b=1;break}b+=e7(e,f)}}catch(a){d.e(a)}finally{d.f()}qM.set(c,b)}return b}function
gG(e,b,j,c,d,s,g,h,p){var
f=0;for(var
a=c;a<d;a++)f+=e7(e,b[a]);var
o=Math.ceil(f*1.5/8),i=[],n=[];function
m(b,d,q,l,k){for(var
a=q;a<l;){var
c=a,g=d[a],f=e7(e,b[a]);a++;for(;a<l;a++){var
j=e7(e,b[a]);if(f+j>=o)break;f+=j}if(a==c+1){if(f>o){var
h=b[c];m(h.children,h.positions,0,h.children.length,d[c]+k);continue}i.push(b[c])}else{var
r=d[a-1]+b[a-1].length-g;i.push(gG(e,b,d,c,a,g,r,null,p))}n.push(g+k-s)}}m(b,j,c,d,0);return(h||p)(i,n,g)}var
d5=function(){function
g(a,f,h,c){var
e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false,d=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;b(this,g);this.from=a;this.to=f;this.tree=h;this.offset=c;this.open=(e?1:0)|(d?2:0)}c(g,[{key:"openStart",get:function(){return(this.open&1)>0}},{key:"openEnd",get:function(){return(this.open&2)>0}}],[{key:"addTree",value:function(c){var
h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,f=[new
g(0,c.length,c,0,false,i)],b=a(h),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;if(e.to>c.length)f.push(e)}}catch(a){b.e(a)}finally{b.f()}return f}},{key:"applyChanges",value:function(c,j){var
o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:128;if(!j.length)return c;var
n=[],l=1,d=c.length?c[0]:null;for(var
h=0,i=0,f=0;;h++){var
b=h<j.length?j[h]:null,e=b?b.fromA:1e9;if(e-i>=o)while(d&&d.from<e){var
a=d;if(i>=a.from||e<=a.to||f){var
k=Math.max(a.from,i)-f,m=Math.min(a.to,e)-f;a=k>=m?null:new
g(k,m,a.tree,a.offset+f,h>0,!!b)}if(a)n.push(a);if(d.to>e)break;d=l<c.length?c[l++]:null}if(!b)break;i=b.toA;f=b.toA-b.toB}return n}}]);return g}(),kn=function(){function
a(){b(this,a)}c(a,[{key:"startParse",value:function(a,c,b){if(typeof
a=="string")a=new
vr(a);b=!b?[new
f0(0,a.length)]:b.length?b.map(function(a){return new
f0(a.from,a.to)}):[new
f0(0,0)];return this.createParse(a,c||[],b)}},{key:"parse",value:function
b(d,c,e){var
b=this.startParse(d,c,e);for(;;){var
a=b.advance();if(a)return a}}}]);return a}(),vr=function(){function
a(c){b(this,a);this.string=c}c(a,[{key:"length",get:function(){return this.string.length}},{key:"chunk",value:function(a){return this.string.slice(a)}},{key:"lineChunks",get:function(){return false}},{key:"read",value:function(a,b){return this.string.slice(a,b)}}]);return a}(),Ds=new
w({perNode:true}),eX=new
w();function
xU(a){return h.define({combine:a?function(b){return b.concat(a)}:void
0})}var
bd=function(){function
d(a,e,f){var
c=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];b(this,d);this.data=a;this.topNode=f;if(!u.prototype.hasOwnProperty("tree"))Object.defineProperty(u.prototype,"tree",{get:function(){return aq(this)}});this.parser=e;this.extension=[bx.of(this),u.languageData.of(function(a,b,c){return a.facet(pC(a,b,c))})].concat(c)}c(d,[{key:"isActiveAt",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;return pC(c,a,b)==this.data}},{key:"findRegions",value:function(c){var
l=this,b=c.facet(bx);if((b===null||b===void
0?void
0:b.data)==this.data)return[{from:0,to:c.doc.length}];if(!b||!b.allowsNesting)return[];var
e=[],d=function
k(d,b){if(d.prop(eX)==l.data){e.push({from:b,to:b+d.length});return}var
c=d.prop(w.mounted);if(c)if(c.tree.prop(eX)==l.data){if(c.overlay){var
g=a(c.overlay),i;try{for(g.s();!(i=g.n()).done;){var
h=i.value;e.push({from:h.from+b,to:h.to+b})}}catch(a){g.e(a)}finally{g.f()}}else
e.push({from:b,to:b+d.length});return}else
if(c.overlay){var
m=e.length;k(c.tree,c.overlay[0].from+b);if(e.length>m)return}for(var
f=0;f<d.children.length;f++){var
j=d.children[f];if(j
instanceof
S)k(j,d.positions[f]+b)}};d(aq(c),0);return e}},{key:"allowsNesting",get:function(){return true}}]);return d}();bd.setState=j.define();function
pC(d,e,f){var
c=d.facet(bx);if(!c)return null;var
b=c.data;if(c.allowsNesting)for(var
a=aq(d).topNode;a;a=a.enter(e,f,true,false))b=a.type.prop(eX)||b;return b}function
aq(b){var
a=b.field(bd.state,false);return a?a.tree:S.empty}var
t2=function(){function
d(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a.length;b(this,d);this.doc=a;this.length=c;this.cursorPos=0;this.string="";this.cursor=a.iter()}c(d,[{key:"syncTo",value:function(a){this.string=this.cursor.next(a-this.cursorPos).value;this.cursorPos=a+this.string.length;return this.cursorPos-this.string.length}},{key:"chunk",value:function(a){this.syncTo(a);return this.string}},{key:"lineChunks",get:function(){return true}},{key:"read",value:function(a,c){var
b=this.cursorPos-this.string.length;return a<b||c>=this.cursorPos?this.doc.sliceString(a,c):this.string.slice(a-b,c-b)}}]);return d}(),cV=null,fU=function(){function
g(c,f){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[],h=arguments.length>3?arguments[3]:undefined,i=arguments.length>4?arguments[4]:undefined,j=arguments.length>5?arguments[5]:undefined,e=arguments.length>6?arguments[6]:undefined,d=arguments.length>7?arguments[7]:undefined;b(this,g);this.parser=c;this.state=f;this.fragments=a;this.tree=h;this.treeLen=i;this.viewport=j;this.skipped=e;this.scheduleOn=d;this.parse=null;this.tempSkipped=[]}c(g,[{key:"startParse",value:function(){return this.parser.startParse(new
t2(this.state.doc),this.fragments)}},{key:"work",value:function(f,b){var
a=this;if(b!=null&&b>=this.state.doc.length)b=void
0;if(this.tree!=S.empty&&this.isDone(b!==null&&b!==void
0?b:this.state.doc.length)){this.takeTree();return true}return this.withContext(function(){var
c,e=Date.now()+f;if(!a.parse)a.parse=a.startParse();if(b!=null&&(a.parse.stoppedAt==null||a.parse.stoppedAt>b)&&b<a.state.doc.length)a.parse.stopAt(b);for(;;){var
d=a.parse.advance();if(d){a.fragments=a.withoutTempSkipped(d5.addTree(d,a.fragments,a.parse.stoppedAt!=null));a.treeLen=(c=a.parse.stoppedAt)!==null&&c!==void
0?c:a.state.doc.length;a.tree=d;a.parse=null;if(a.treeLen<(b!==null&&b!==void
0?b:a.state.doc.length))a.parse=a.startParse();else
return true}if(Date.now()>e)return false}})}},{key:"takeTree",value:function(){var
c=this,a,b;if(this.parse&&(a=this.parse.parsedPos)>=this.treeLen){if(this.parse.stoppedAt==null||this.parse.stoppedAt>a)this.parse.stopAt(a);this.withContext(function(){while(!(b=c.parse.advance()));});this.treeLen=a;this.tree=b;this.fragments=this.withoutTempSkipped(d5.addTree(this.tree,this.fragments,true));this.parse=null}}},{key:"withContext",value:function(a){var
b=cV;cV=this;try{return a()}finally{cV=b}}},{key:"withoutTempSkipped",value:function(b){for(var
a;a=this.tempSkipped.pop();)b=m_(b,a.from,a.to);return b}},{key:"changes",value:function(b,o){var
e=this.fragments,m=this.tree,n=this.treeLen,d=this.viewport,f=this.skipped;this.takeTree();if(!b.empty){var
k=[];b.iterChangedRanges(function(a,c,b,d){return k.push({fromA:a,toA:c,fromB:b,toB:d})});e=d5.applyChanges(e,k);m=S.empty;n=0;d={from:b.mapPos(d.from,-1),to:b.mapPos(d.to,1)};if(this.skipped.length){f=[];var
c=a(this.skipped),i;try{for(c.s();!(i=c.n()).done;){var
h=i.value,j=b.mapPos(h.from,1),l=b.mapPos(h.to,-1);if(j<l)f.push({from:j,to:l})}}catch(a){c.e(a)}finally{c.f()}}}return new
g(this.parser,o,e,m,n,d,f,this.scheduleOn)}},{key:"updateViewport",value:function(a){if(this.viewport.from==a.from&&this.viewport.to==a.to)return false;this.viewport=a;var
f=this.skipped.length;for(var
b=0;b<this.skipped.length;b++){var
c=this.skipped[b],d=c.from,e=c.to;if(d<a.to&&e>a.from){this.fragments=m_(this.fragments,d,e);this.skipped.splice(b--,1)}}if(this.skipped.length>=f)return false;this.reset();return true}},{key:"reset",value:function(){if(this.parse){this.takeTree();this.parse=null}}},{key:"skipUntilInView",value:function(a,b){this.skipped.push({from:a,to:b})}},{key:"isDone",value:function(a){a=Math.min(a,this.state.doc.length);var
b=this.fragments;return this.treeLen>=a&&b.length&&b[0].from==0&&b[0].to>=a}}],[{key:"getSkippingParser",value:function(g){return new(function(h){f(d,h);var
i=e(d);function
d(){b(this,d);return i.apply(this,arguments)}c(d,[{key:"createParse",value:function(e,c,d){var
f=d[0].from,h=d[d.length-1].to,b={parsedPos:f,advance:function(){var
b=cV;if(b){var
c=a(d),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;b.tempSkipped.push(i)}}catch(a){c.e(a)}finally{c.f()}if(g)b.scheduleOn=b.scheduleOn?Promise.all([b.scheduleOn,g]):g}this.parsedPos=h;return new
S(aC.none,[],[],h-f)},stoppedAt:null,stopAt:function(){}};return b}}]);return d}(kn))()}},{key:"get",value:function(){return cV}}]);return g}();function
m_(c,a,b){return d5.applyChanges(c,[{fromA:a,toA:b,fromB:a,toB:b}])}var
fG=function(){function
d(a){b(this,d);this.context=a;this.tree=a.tree}c(d,[{key:"apply",value:function(a){if(!a.docChanged)return this;var
b=this.context.changes(a.changes,a.state),c=this.context.treeLen==a.startState.doc.length?void
0:Math.max(a.changes.mapPos(this.context.treeLen),b.viewport.to);if(!b.work(20,c))b.takeTree();return new
d(b)}}],[{key:"init",value:function(b){var
c=Math.min(3e3,b.doc.length),a=new
fU(b.facet(bx).parser,b,[],S.empty,0,{from:0,to:c},[],null);if(!a.work(20,c))a.takeTree();return new
d(a)}}]);return d}();bd.state=ao.define({create:fG.init,update:function(f,b){var
c=a(b.effects),d;try{for(c.s();!(d=c.n()).done;){var
e=d.value;if(e.is(bd.setState))return e.value}}catch(a){c.e(a)}finally{c.f()}if(b.startState.facet(bx)!=b.state.facet(bx))return fG.init(b.state);return f.apply(b)}});var
rp=function(a){var
b=setTimeout(function(){return a()},500);return function(){return clearTimeout(b)}};if(typeof
requestIdleCallback!="undefined")rp=function(b){var
a=-1,c=setTimeout(function(){a=requestIdleCallback(b,{timeout:500-100})},100);return function(){return a<0?clearTimeout(c):cancelIdleCallback(a)}};var
BA=aM.fromClass(function(){function
a(c){b(this,a);this.view=c;this.working=null;this.workScheduled=0;this.chunkEnd=-1;this.chunkBudget=-1;this.work=this.work.bind(this);this.scheduleWork()}c(a,[{key:"update",value:function(b){var
a=this.view.state.field(bd.state).context;if(a.updateViewport(b.view.viewport)||this.view.viewport.to>a.treeLen)this.scheduleWork();if(b.docChanged){if(this.view.hasFocus)this.chunkBudget+=50;this.scheduleWork()}this.checkAsyncSchedule(a)}},{key:"scheduleWork",value:function(){if(this.working)return;var
b=this.view.state,a=b.field(bd.state);if(a.tree!=a.context.tree||!a.context.isDone(b.doc.length))this.working=rp(this.work)}},{key:"work",value:function(e){this.working=null;var
c=Date.now();if(this.chunkEnd<c&&(this.chunkEnd<0||this.view.hasFocus)){this.chunkEnd=c+3e4;this.chunkBudget=3e3}if(this.chunkBudget<=0)return;var
d=this.view,g=d.state,b=d.viewport.to,a=g.field(bd.state);if(a.tree==a.context.tree&&a.context.isDone(b+1e5))return;var
i=Math.min(this.chunkBudget,100,e?Math.max(25,e.timeRemaining()-5):1e9),h=a.context.treeLen<b&&g.doc.length>b+1e3,f=a.context.work(i,b+(h?0:1e5));this.chunkBudget-=Date.now()-c;if(f||this.chunkBudget<=0){a.context.takeTree();this.view.dispatch({effects:bd.setState.of(new
fG(a.context))})}if(this.chunkBudget>0&&!(f&&!h))this.scheduleWork();this.checkAsyncSchedule(a.context)}},{key:"checkAsyncSchedule",value:function(b){var
a=this;if(b.scheduleOn){this.workScheduled++;b.scheduleOn.then(function(){return a.scheduleWork()})["catch"](function(b){return aD(a.view.state,b)}).then(function(){return a.workScheduled--});b.scheduleOn=null}}},{key:"destroy",value:function(){if(this.working)this.working()}},{key:"isWorking",value:function(){return this.working||this.workScheduled>0}}]);return a}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),bx=h.define({combine:function(a){return a.length?a[0]:null},enables:[bd.state,BA]}),oY=h.define(),eO=h.define({combine:function(a){if(!a.length)return"  ";if(!/^(?: +|\t+)$/.test(a[0]))throw new
Error("Invalid indent unit: "+JSON.stringify(a[0]));return a[0]}});function
bQ(b){var
a=b.facet(eO);return a.charCodeAt(0)==9?b.tabSize*a.length:a.length}function
c8(d,a){var
b="",e=d.tabSize;if(d.facet(eO).charCodeAt(0)==9)while(a>=e){b+="\t";a-=e}for(var
c=0;c<a;c++)b+=" ";return b}function
hO(b,e){if(b
instanceof
u)b=new
dM(b);var
c=a(b.state.facet(oY)),d;try{for(c.s();!(d=c.n()).done;){var
h=d.value,f=h(b,e);if(f!=null)return f}}catch(a){c.e(a)}finally{c.f()}var
g=aq(b.state);return g?CJ(b,g,e):null}var
dM=function(){function
a(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};b(this,a);this.state=c;this.options=d;this.unit=bQ(c)}c(a,[{key:"lineAt",value:function(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,a=this.state.doc.lineAt(c),b=this.options.simulateBreak;if(b!=null&&b>=a.from&&b<=a.to)return(d<0?b<c:b<=c)?{text:a.text.slice(b-a.from),from:b}:{text:a.text.slice(0,b-a.from),from:a.from};return a}},{key:"textAfterPos",value:function(a){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(this.options.simulateDoubleBreak&&a==this.options.simulateBreak)return"";var
b=this.lineAt(a,e),d=b.text,c=b.from;return d.slice(a-c,Math.min(d.length,a+100-c))}},{key:"column",value:function(e){var
g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,b=this.lineAt(e,g),a=b.text,c=b.from,f=this.countColumn(a,e-c),d=this.options.overrideIndentation?this.options.overrideIndentation(c):-1;if(d>-1)f+=d-this.countColumn(a,a.search(/\S|$/));return f}},{key:"countColumn",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a.length;return cP(a,this.state.tabSize,b)}},{key:"lineIndent",value:function(g){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,a=this.lineAt(g,e),d=a.text,f=a.from,b=this.options.overrideIndentation;if(b){var
c=b(f);if(c>-1)return c}return this.countColumn(d,d.search(/\S|$/))}},{key:"simulatedBreak",get:function(){return this.options.simulateBreak||null}}]);return a}(),zM=new
w();function
CJ(c,b,a){return oX(b.resolveInner(a).enterUnfinishedNodesBefore(a),a,c)}function
zE(a){return a.pos==a.options.simulateBreak&&a.options.simulateDoubleBreak}function
zP(a){var
e=a.type.prop(zM);if(e)return e;var
d=a.firstChild,c;if(d&&(c=d.type.prop(w.closedBy))){var
b=a.lastChild,f=b&&c.indexOf(b.name)>-1;return function(a){return xZ(a,true,1,void
0,f&&!zE(a)?b.from:void
0)}}return a.parent==null?CS:null}function
oX(a,d,c){for(;a;a=a.parent){var
b=zP(a);if(b)return b(new
vw(c,d,a))}return null}function
CS(){return 0}var
vw=function(a){f(d,a);var
g=e(d);function
d(c,f,e){var
a;b(this,d);a=g.call(this,c.state,c.options);a.base=c;a.pos=f;a.node=e;return a}c(d,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){var
b=this.state.doc.lineAt(this.node.from);for(;;){var
a=this.node.resolve(b.from);while(a.parent&&a.parent.from==a.from)a=a.parent;if(z7(a,this.node))break;b=this.state.doc.lineAt(a.from)}return this.lineIndent(b.from)}},{key:"continue",value:function(){var
a=this.node.parent;return a?oX(a,this.pos,this.base):0}}]);return d}(dM);function
z7(c,b){for(var
a=b;a;a=a.parent)if(c==a)return true;return false}function
wF(d){var
c=d.node,b=c.childAfter(c.from),h=c.lastChild;if(!b)return null;var
f=d.options.simulateBreak,e=d.state.doc.lineAt(b.from),i=f==null||f<=e.from?e.to:Math.min(e.to,f);for(var
g=b.to;;){var
a=c.childAfter(g);if(!a||a==h)return null;if(!a.type.isSkipped)return a.from<i?b:null;g=a.to}}function
xZ(a,g,i,c,h){var
e=a.textAfter,d=e.match(/^\s*/)[0].length,f=c&&e.slice(d,d+c.length)==c||h==a.pos+d,b=g?wF(a):null;if(b)return f?a.column(b.from):a.column(b.to);return a.baseIndent+(f?0:a.unit*i)}var
t3=200;function
zN(){return u.transactionFilter.of(function(b){if(!b.docChanged||!b.isUserEvent("input.type"))return b;var
o=b.startState.languageDataAt("indentOnInput",b.startState.selection.main.head);if(!o.length)return b;var
j=b.newDoc,g=b.newSelection.main.head,m=j.lineAt(g);if(g>m.from+t3)return b;var
q=j.sliceString(m.from,g);if(!o.some(function(a){return a.test(q)}))return b;var
e=b.state,l=-1,f=[],d=a(e.selection.ranges),h;try{for(d.s();!(h=d.n()).done;){var
p=h.value.head,c=e.doc.lineAt(p);if(c.from==l)continue;l=c.from;var
k=hO(e,c.from);if(k==null)continue;var
i=/^\s*/.exec(c.text)[0],n=c8(e,k);if(i!=n)f.push({from:c.from,to:c.from+i.length,insert:n})}}catch(a){d.e(a)}finally{d.f()}return f.length?[b,{changes:f,sequential:true}]:b})}var
yN=h.define(),yM=new
w();function
CI(g,f,b){var
h=aq(g);if(h.length==0)return null;var
i=h.resolveInner(b),d=null;for(var
a=i;a;a=a.parent){if(a.to<=b||a.from>b)continue;if(d&&a.from<f)break;var
e=a.type.prop(yM);if(e){var
c=e(a,g);if(c&&c.from<=b&&c.from>=f&&c.to>b)d=c}}return d}function
eC(c,f,e){var
b=a(c.facet(yN)),d;try{for(b.s();!(d=b.n()).done;){var
h=d.value,g=h(c,f,e);if(g)return g}}catch(a){b.e(a)}finally{b.f()}return CI(c,f,e)}function
eF(a){var
b;if(a.nodeType==11)b=a.getSelection?a:a.ownerDocument;else
b=a;return b.getSelection()}function
g8(b,a){return a?b.contains(a.nodeType!=1?a.parentNode:a):false}function
xJ(){var
a=document.activeElement;while(a&&a.shadowRoot)a=a.shadowRoot.activeElement;return a}function
hT(b,a){if(!a.anchorNode)return false;try{return g8(b,a.anchorNode)}catch(a){return false}}function
cf(a){if(a.nodeType==3)return ds(a,0,a.nodeValue.length).getClientRects();else
if(a.nodeType==1)return a.getClientRects();else
return[]}function
eS(b,c,a,d){return a?rG(b,c,a,d,-1)||rG(b,c,a,d,1):false}function
hp(a){for(var
b=0;;b++){a=a.previousSibling;if(!a)return b}}function
rG(a,b,e,f,c){for(;;){if(a==e&&b==f)return true;if(b==(c<0?0:e0(a))){if(a.nodeName=="DIV")return false;var
d=a.parentNode;if(!d||d.nodeType!=1)return false;b=hp(a)+(c<0?0:1);a=d}else
if(a.nodeType==1){a=a.childNodes[b+(c<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")return false;b=c<0?e0(a):0}else
return false}}function
e0(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}var
kz={left:0,right:0,top:0,bottom:0};function
ex(a,c){var
b=c?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}function
Db(a){return{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}function
B6(o,a,h,k,i,f,g,s){var
n=o.ownerDocument,q=n.defaultView;for(var
c=o;c;)if(c.nodeType==1){var
b=void
0,m=c==n.body;if(m)b=Db(q);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}var
j=c.getBoundingClientRect();b={left:j.left,right:j.left+c.clientWidth,top:j.top,bottom:j.top+c.clientHeight}}var
d=0,e=0;if(i=="nearest"){if(a.top<b.top){e=-(b.top-a.top+g);if(h>0&&a.bottom>b.bottom+e)e=a.bottom-b.bottom+e+g}else
if(a.bottom>b.bottom){e=a.bottom-b.bottom+g;if(h<0&&a.top-e<b.top)e=-(b.top+e-a.top+g)}}else{var
p=a.bottom-a.top,l=b.bottom-b.top,v=i=="center"&&p<=l?a.top+p/2-l/2:i=="start"||i=="center"&&h<0?a.top-g:a.bottom-l+g;e=v-b.top}if(k=="nearest"){if(a.left<b.left){d=-(b.left-a.left+f);if(h>0&&a.right>b.right+d)d=a.right-b.right+d+f}else
if(a.right>b.right){d=a.right-b.right+f;if(h<0&&a.left<b.left+d)d=-(b.left+d-a.left+f)}}else{var
u=k=="center"?a.left+(a.right-a.left)/2-(b.right-b.left)/2:k=="start"==s?a.left-f:a.right-(b.right-b.left)+f;d=u-b.left}if(d||e)if(m)q.scrollBy(d,e);else{if(e){var
t=c.scrollTop;c.scrollTop+=e;e=c.scrollTop-t}if(d){var
r=c.scrollLeft;c.scrollLeft+=d;d=c.scrollLeft-r}a={left:a.left-d,top:a.top-e,right:a.right-d,bottom:a.bottom-e}}if(m)break;c=c.assignedSlot||c.parentNode;k=i="nearest"}else
if(c.nodeType==11)c=c.host;else
break}var
tM=function(){function
a(){b(this,a);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}c(a,[{key:"eq",value:function(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}},{key:"setRange",value:function(a){this.set(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}},{key:"set",value:function(a,b,c,d){this.anchorNode=a;this.anchorOffset=b;this.focusNode=c;this.focusOffset=d}}]);return a}(),cp=null;function
or(b){if(b.setActive)return b.setActive();if(cp)return b.focus(cp);var
c=[];for(var
a=b;a;a=a.parentNode){c.push(a,a.scrollTop,a.scrollLeft);if(a==a.ownerDocument)break}b.focus(cp==null?Object.defineProperties({},{preventScroll:{get:function(){cp={preventScroll:true};return true},configurable:true,enumerable:true}}):void
0);if(!cp){cp=false;for(var
d=0;d<c.length;){var
e=c[d++],g=c[d++],f=c[d++];if(e.scrollTop!=g)e.scrollTop=g;if(e.scrollLeft!=f)e.scrollLeft=f}}}var
rM;function
ds(c,b){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b,a=rM||(rM=document.createRange());a.setEnd(c,d);a.setStart(c,b);return a}function
cX(d,e,c){var
f={key:e,code:e,keyCode:c,which:c,cancelable:true},a=new
KeyboardEvent("keydown",f);a.synthetic=true;d.dispatchEvent(a);var
b=new
KeyboardEvent("keyup",f);b.synthetic=true;d.dispatchEvent(b);return a.defaultPrevented||b.defaultPrevented}function
yV(a){while(a){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function
mm(a){while(a.attributes.length)a.removeAttributeNode(a.attributes[0])}var
ax=function(){function
a(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;b(this,a);this.node=c;this.offset=d;this.precise=e}c(a,null,[{key:"before",value:function(b,c){return new
a(b.parentNode,hp(b),c)}},{key:"after",value:function(b,c){return new
a(b.parentNode,hp(b)+1,c)}}]);return a}(),ik=[],Z=function(){function
f(){b(this,f);this.parent=null;this.dom=null;this.dirty=2}c(f,[{key:"editorView",get:function(){if(!this.parent)throw new
Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(f){var
e=this.posAtStart,b=a(this.children),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c==f)return e;e+=c.length+c.breakAfter}}catch(a){b.e(a)}finally{b.f()}throw new
RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(a){return this.posBefore(a)+a.length}},{key:"coordsAt",value:function(a,b){return null}},{key:"sync",value:function(d){if(this.dirty&2){var
e=this.dom,b=e.firstChild,g=a(this.children),k;try{for(g.s();!(k=g.n()).done;){var
c=k.value;if(c.dirty){if(!c.dom&&b){var
j=f.get(b);if(!j||!j.parent&&j.constructor==c.constructor)c.reuseDOM(b)}c.sync(d);c.dirty=0}if(d&&!d.written&&d.node==e&&b!=c.dom)d.written=true;if(c.dom.parentNode==e){while(b&&b!=c.dom)b=rt(b);b=c.dom.nextSibling}else
e.insertBefore(c.dom,b)}}catch(a){g.e(a)}finally{g.f()}if(b&&d&&d.node==e)d.written=true;while(b)b=rt(b)}else
if(this.dirty&1){var
h=a(this.children),l;try{for(h.s();!(l=h.n()).done;){var
i=l.value;if(i.dirty){i.sync(d);i.dirty=0}}}catch(a){h.e(a)}finally{h.f()}}}},{key:"reuseDOM",value:function(a){}},{key:"localPosFromDOM",value:function(b,h){var
a;if(b==this.dom)a=this.dom.childNodes[h];else{var
d=e0(b)==0?0:h==0?-1:1;for(;;){var
c=b.parentNode;if(c==this.dom)break;if(d==0&&c.firstChild!=c.lastChild)if(b==c.firstChild)d=-1;else
d=1;b=c}if(d<0)a=b;else
a=b.nextSibling}if(a==this.dom.firstChild)return 0;while(a&&!f.get(a))a=a.nextSibling;if(!a)return this.length;for(var
g=0,i=0;;g++){var
e=this.children[g];if(e.dom==a)return i;i+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(g,i){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=-1,k=-1,f=-1,j=-1;for(var
b=0,a=h,l=h;b<this.children.length;b++){var
c=this.children[b],d=a+c.length;if(a<g&&d>i)return c.domBoundsAround(g,i,a);if(d>=g&&e==-1){e=b;k=a}if(a>i&&c.dom.parentNode==this.dom){f=b;j=l;break}l=d;a=d+c.breakAfter}return{from:k,to:j<0?h+this.length:j,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}},{key:"markDirty",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.dirty|=2;this.markParentsDirty(a)}},{key:"markParentsDirty",value:function(b){for(var
a=this.parent;a;a=a.parent){if(b)a.dirty|=2;if(a.dirty&1)return;a.dirty|=1;b=false}}},{key:"setParent",value:function(a){if(this.parent!=a){this.parent=a;if(this.dirty)this.markParentsDirty(true)}}},{key:"setDOM",value:function(a){if(this.dom)this.dom.cmView=null;this.dom=a;a.cmView=this}},{key:"rootView",get:function(){for(var
a=this;;){var
b=a.parent;if(!b)return a;a=b}}},{key:"replaceChildren",value:function(d,g){var
e,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ik;this.markDirty();for(var
a=d;a<g;a++){var
f=this.children[a];if(f.parent==this)f.destroy()}(e=this.children).splice.apply(e,[d,g-d].concat(P(c)));for(var
b=0;b<c.length;b++)c[b].setParent(this)}},{key:"ignoreMutation",value:function(a){return false}},{key:"ignoreEvent",value:function(a){return false}},{key:"childCursor",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new
jx(this.children,a,this.children.length)}},{key:"childPos",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(b,a)}},{key:"toString",value:function(){var
a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return true}},{key:"merge",value:function(a,f,e,b,d,c){return false}},{key:"become",value:function(a){return false}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(a){return a.cmView}}]);return f}();Z.prototype.breakAfter=0;function
rt(a){var
b=a.nextSibling;a.parentNode.removeChild(a);return b}var
jx=function(){function
a(c,e,d){b(this,a);this.children=c;this.pos=e;this.i=d;this.off=0}c(a,[{key:"findPos",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(a>this.pos||a==this.pos&&(c>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=a-this.pos;return this}var
b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return a}();function
rm(n,c,i,d,h,a,l,k,j){var
f=n.children,b=f.length?f[c]:null,g=a.length?a[a.length-1]:null,m=g?g.breakAfter:l;if(c==d&&b&&!l&&!m&&a.length<2&&b.merge(i,h,a.length?g:null,i==0,k,j))return;if(d<f.length){var
e=f[d];if(e&&h<e.length){if(c==d){e=e.split(h);h=0}if(!m&&g&&e.merge(0,h,g,true,0,j))a[a.length-1]=e;else{if(h)e.merge(0,h,null,false,0,j);a.push(e)}}else
if(e===null||e===void
0?void
0:e.breakAfter)if(g)g.breakAfter=1;else
l=1;d++}if(b){b.breakAfter=l;if(i>0){if(!l&&a.length&&b.merge(i,b.length,a[0],false,k,0))b.breakAfter=a.shift().breakAfter;else
if(i<b.length||b.children.length&&b.children[b.children.length-1].length==0)b.merge(i,b.length,null,false,k,0);c++}}while(c<d&&a.length)if(f[d-1].become(a[a.length-1])){d--;a.pop();j=a.length?0:k}else
if(f[c].become(a[0])){c++;a.shift();k=a.length?0:j}else
break;if(!a.length&&c&&d<f.length&&!f[c-1].breakAfter&&f[d].merge(0,0,f[c-1],false,k,j))c--;if(c<d||a.length)n.replaceChildren(c,d,a)}function
qc(c,i,k,j,o,n){var
g=c.childCursor(),d=g.findPos(k,1),p=d.i,q=d.off,e=g.findPos(i,-1),l=e.i,m=e.off,h=i-k,b=a(j),f;try{for(b.s();!(f=b.n()).done;){var
r=f.value;h+=r.length}}catch(a){b.e(a)}finally{b.f()}c.length+=h;rm(c,l,m,p,q,j,0,o,n)}var
vQ=typeof
navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],lA=bn(vQ,2),aG=lA[0],hk=lA[1],h6=/Edge\/(\d+)/.exec(aG.userAgent),oU=/MSIE \d/.test(aG.userAgent),h1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aG.userAgent),eL=!!(oU||h1||h6),oC=!eL&&/gecko\/(\d+)/i.test(aG.userAgent),gW=!eL&&/Chrome\/(\d+)/.exec(aG.userAgent),sL="webkitFontSmoothing"in
hk.documentElement.style,rB=!eL&&/Apple Computer/.test(aG.vendor),pk=rB&&(/Mobile\/\w+/.test(aG.userAgent)||aG.maxTouchPoints>2),m={mac:pk||/Mac/.test(aG.platform),windows:/Win/.test(aG.platform),linux:/Linux|X11/.test(aG.platform),ie:eL,ie_version:oU?hk.documentMode||6:h1?+h1[1]:h6?+h6[1]:0,gecko:oC,gecko_version:oC?+(/Firefox\/(\d+)/.exec(aG.userAgent)||[0,0])[1]:0,chrome:!!gW,chrome_version:gW?+gW[1]:0,ios:pk,android:/Android\b/.test(aG.userAgent),webkit:sL,safari:rB,webkit_version:sL?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hk.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},uJ=256,d1=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.text=d;return c}c(a,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(a&&a.node==this.dom)a.written=true;this.dom.nodeValue=this.text}}},{key:"reuseDOM",value:function(a){if(a.nodeType==3)this.createDOM(a)}},{key:"merge",value:function(c,d,b){if(b&&(!(b
instanceof
a)||this.length-(d-c)+b.length>uJ))return false;this.text=this.text.slice(0,c)+(b?b.text:"")+this.text.slice(d);this.markDirty();return true}},{key:"split",value:function(b){var
c=new
a(this.text.slice(b));this.text=this.text.slice(0,b);this.markDirty();return c}},{key:"localPosFromDOM",value:function(b,a){return b==this.dom?a:a?this.text.length:0}},{key:"domAtPos",value:function(a){return new
ax(this.dom,a)}},{key:"domBoundsAround",value:function(b,c,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return sd(this.dom,a,b)}}]);return a}(Z),dP=function(g){f(d,g);var
k=e(d);function
d(j){var
c,g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;b(this,d);c=k.call(this);c.mark=j;c.children=g;c.length=i;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;h.setParent(aQ(c))}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"setAttrs",value:function(a){mm(a);if(this.mark["class"])a.className=this.mark["class"];if(this.mark.attrs)for(var
b
in
this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);return a}},{key:"reuseDOM",value:function(a){if(a.nodeName==this.mark.tagName.toUpperCase()){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(a){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else
if(this.dirty&4)this.setAttrs(this.dom);t(r(d.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(b,f,a,g,e,c){if(a&&(!(a
instanceof
d&&a.mark.eq(this.mark))||b&&e<=0||f<this.length&&c<=0))return false;qc(this,b,f,a?a.children:[],e-1,c-1);this.markDirty();return true}},{key:"split",value:function(b){var
k=[],c=0,f=-1,j=0,e=a(this.children),h;try{for(e.s();!(h=e.n()).done;){var
g=h.value,i=c+g.length;if(i>b)k.push(c<b?g.split(b-c):g);if(f<0&&c>=b)f=j;c=i;j++}}catch(a){e.e(a)}finally{e.f()}var
l=this.length-b;this.length=b;if(f>-1){this.children.length=f;this.markDirty()}return new
d(this.mark,k,l)}},{key:"domAtPos",value:function(a){return o2(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return mQ(this,a,b)}}]);return d}(Z);function
sd(i,b,e){var
g=i.nodeValue.length;if(b>g)b=g;var
f=b,h=b,a=0;if(b==0&&e<0||b==g&&e>=0){if(!(m.chrome||m.gecko))if(b){f--;a=1}else{h++;a=-1}}else
if(e<0)f--;else
h++;var
d=ds(i,f,h).getClientRects();if(!d.length)return kz;var
c=d[(a?a<0:e>=0)?0:d.length-1];if(m.safari&&!a&&c.width==0)c=Array.prototype.find.call(d,function(a){return a.width})||c;return a?ex(c,a<0):c||null}var
ga=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.side=e;return c}c(a,[{key:"split",value:function(b){var
c=a.create(this.widget,this.length-b,this.side);this.length-=b;return c}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"become",value:function(b){if(b.length==this.length&&b
instanceof
a&&b.side==this.side)if(this.widget.constructor==b.widget.constructor){if(!this.widget.eq(b.widget))this.markDirty(true);this.widget=b.widget;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"overrideDOMText",get:function(){if(this.length==0)return p.empty;var
a=this;while(a.parent)a=a.parent;var
d=a.editorView,c=d&&d.state.doc,b=this.posAtStart;return c?c.slice(b,b+this.length):p.empty}},{key:"domAtPos",value:function(a){return a==0?ax.before(this.dom):ax.after(this.dom,a==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,e){var
d=this.dom.getClientRects(),b=null;if(!d.length)return kz;for(var
c=a>0?d.length-1:0;;c+=a>0?-1:1){b=d[c];if(a>0?c==0:c==d.length-1||b.top<b.bottom)break}return a==0&&e>0||a==this.length&&e<=0?b:ex(b,a==0)}},{key:"isEditable",get:function(){return false}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}],[{key:"create",value:function(b,c,d){return new(b.customView||a)(b,c,d)}}]);return a}(Z),tr=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"domAtPos",value:function(a){return new
ax(this.widget.text,a)}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(b,a){return!a?0:b.nodeType==3?Math.min(a,this.length):this.length}},{key:"ignoreMutation",value:function(){return false}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(a,b){return sd(this.widget.text,a,b)}},{key:"isEditable",get:function(){return true}}]);return a}(ga),ge=m.android?"\u200B\u200B":"\u200B",f8=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.side=d;return c}c(a,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return false}},{key:"become",value:function(b){return b
instanceof
a&&b.side==this.side}},{key:"split",value:function(){return new
a(this.side)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(document.createTextNode(ge));else
if(this.dirty&&this.dom.nodeValue!=ge)this.dom.nodeValue=ge}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(a){return ax.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(b){var
a=cf(this.dom);return a[a.length-1]||null}},{key:"overrideDOMText",get:function(){return p.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]);return a}(Z);d1.prototype.children=ga.prototype.children=f8.prototype.children=ik;function
o2(f,e,d){var
a=0;for(var
b=0;a<e.length;a++){var
c=e[a],g=b+c.length;if(g==b&&c.getSide()<=0)continue;if(d>b&&d<g&&c.dom.parentNode==f)return c.domAtPos(d-b);if(d<=b)break;b=g}for(;a>0;a--){var
h=e[a-1].dom;if(h.parentNode==f)return ax.after(h)}return new
ax(f,0)}function
pw(d,a,e){var
c,b=d.children;if(e>0&&a
instanceof
dP&&b.length&&(c=b[b.length-1])instanceof
dP&&c.mark.eq(a.mark))pw(c,a.children[0],e-1);else{b.push(a);a.setParent(d)}d.length+=a.length}function
mQ(a,f,g){for(var
e=0,c=0;c<a.children.length;c++){var
d=a.children[c],b=e+d.length,k=void
0;if((g<=0||b==a.length||d.getSide()>0?b>=f:b>f)&&(f<b||c+1==a.children.length||(k=a.children[c+1]).length||k.getSide()>0)){var
i=0;if(b==e){if(d.getSide()<=0)continue;i=g=-d.getSide()}var
h=d.coordsAt(f-e,g);return i&&h?ex(h,g<0):h}e=b}var
j=a.dom.lastChild;if(!j)return a.dom.getBoundingClientRect();var
l=cf(j);return l[l.length-1]||null}function
g3(c,a){for(var
b
in
c)if(b=="class"&&a["class"])a["class"]+=" "+c["class"];else
if(b=="style"&&a.style)a.style+=";"+c.style;else
a[b]=c[b];return a}function
gD(a,b){if(a==b)return true;if(!a||!b)return false;var
f=Object.keys(a),g=Object.keys(b);if(f.length!=g.length)return false;for(var
c=0,e=f;c<e.length;c++){var
d=e[c];if(g.indexOf(d)==-1||a[d]!==b[d])return false}return true}function
iU(d,c,a){if(c)for(var
e
in
c)if(!(a&&e
in
a))d.removeAttribute(e);if(a)for(var
b
in
a)if(!(c&&c[b]==a[b]))d.setAttribute(b,a[b])}var
d$=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return false}},{key:"updateDOM",value:function(a){return false}},{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(a){return true}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(a){}}]);return a}(),Q=function(a){a[a["Text"]=0]="Text";a[a["WidgetBefore"]=1]="WidgetBefore";a[a["WidgetAfter"]=2]="WidgetAfter";a[a["WidgetRange"]=3]="WidgetRange";return a}(Q||(Q={})),am=function(a){f(d,a);var
h=e(d);function
d(f,c,g,e){var
a;b(this,d);a=h.call(this);a.startSide=f;a.endSide=c;a.widget=g;a.spec=e;return a}c(d,[{key:"heightRelevant",get:function(){return false}},{key:"hasHeight",value:function(){return this.widget?this.widget.estimatedHeight>-1:false}}],[{key:"mark",value:function(a){return new
kb(a)}},{key:"widget",value:function(b){var
a=b.side||0,c=!!b.block;a+=c?a>0?3e8:-4e8:a>0?1e8:-1e8;return new
cD(b,a,a,c,b.widget||null,false)}},{key:"replace",value:function(b){var
a=!!b.block,c=oI(b,a),f=c.start,d=c.end,g=a?f?-3e8:-1:4e8,e=a?d?2e8:1:-5e8;return new
cD(b,g,e,a,b.widget||null,true)}},{key:"line",value:function(a){return new
fJ(a)}},{key:"set",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return k.of(a,b)}}]);return d}(aX);am.none=k.empty;var
kb=function(d){f(a,d);var
h=e(a);function
a(d){var
c;b(this,a);var
e=oI(d),g=e.start,f=e.end;c=h.call(this,g?-1:4e8,f?1:-5e8,null,d);c.tagName=d.tagName||"span";c["class"]=d["class"]||"";c.attrs=d.attributes||null;return c}c(a,[{key:"eq",value:function(b){return this==b||b
instanceof
a&&this.tagName==b.tagName&&this["class"]==b["class"]&&gD(this.attrs,b.attrs)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(b>=c)throw new
RangeError("Mark decorations may not be empty");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(am);kb.prototype.point=false;var
fJ=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,-2e8,-2e8,null,c)}c(a,[{key:"eq",value:function(b){return b
instanceof
a&&gD(this.spec.attributes,b.spec.attributes)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(c!=b)throw new
RangeError("Line decoration ranges must be zero-length");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(am);fJ.prototype.mapMode=z.TrackBefore;fJ.prototype.point=true;var
cD=function(d){f(a,d);var
j=e(a);function
a(h,e,f,d,i,g){var
c;b(this,a);c=j.call(this,e,f,i,h);c.block=d;c.isReplace=g;c.mapMode=!d?z.TrackDel:e<=0?z.TrackBefore:z.TrackAfter;return c}c(a,[{key:"type",get:function(){return this.startSide<this.endSide?Q.WidgetRange:this.startSide<=0?Q.WidgetBefore:Q.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(b){return b
instanceof
a&&C8(this.widget,b.widget)&&this.block==b.block&&this.startSide==b.startSide&&this.endSide==b.endSide}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(this.isReplace&&(b>c||b==c&&this.startSide>0&&this.endSide<=0))throw new
RangeError("Invalid range for replacement decoration");if(!this.isReplace&&c!=b)throw new
RangeError("Widget decorations can only have zero-length ranges");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(am);cD.prototype.point=true;function
oI(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,b=c.inclusiveStart,a=c.inclusiveEnd;if(b==null)b=c.inclusive;if(a==null)a=c.inclusive;return{start:b!==null&&b!==void
0?b:d,end:a!==null&&a!==void
0?a:d}}function
C8(a,b){return a==b||!!(a&&b&&a.compare(b))}function
gx(c,d,a){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,b=a.length-1;if(b>=0&&a[b]+e>=c)a[b]=Math.max(a[b],d);else
a.push(c,d)}var
aS=function(g){f(d,g);var
h=e(d);function
d(){var
a;b(this,d);a=h.apply(this,arguments);a.children=[];a.length=0;a.prevAttrs=void
0;a.attrs=null;a.breakAfter=0;return a}c(d,[{key:"merge",value:function(b,g,a,c,f,e){if(a){if(!(a
instanceof
d))return false;if(!this.dom)a.transferDOM(this)}if(c)this.setDeco(a?a.attrs:null);qc(this,b,g,a?a.children:[],f,e);return true}},{key:"split",value:function(g){var
b=new
d();b.breakAfter=this.breakAfter;if(this.length==0)return b;var
f=this.childPos(g),a=f.i,e=f.off;if(e){b.append(this.children[a].split(e),0);this.children[a].merge(e,this.children[a].length,null,false,0,0);a++}for(var
c=a;c<this.children.length;c++)b.append(this.children[c],0);while(a>0&&this.children[a-1].length==0)this.children[--a].destroy();this.children.length=a;this.markDirty();this.length=g;return b}},{key:"transferDOM",value:function(a){if(!this.dom)return;a.setDOM(this.dom);a.prevAttrs=this.prevAttrs===void
0?this.attrs:this.prevAttrs;this.prevAttrs=void
0;this.dom=null}},{key:"setDeco",value:function(a){if(!gD(this.attrs,a)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=a}}},{key:"append",value:function(a,b){pw(this,a,b)}},{key:"addLineDeco",value:function(c){var
a=c.spec.attributes,b=c.spec["class"];if(a)this.attrs=g3(a,this.attrs||{});if(b)this.attrs=g3({"class":b},this.attrs||{})}},{key:"domAtPos",value:function(a){return o2(this.dom,this.children,a)}},{key:"reuseDOM",value:function(a){if(a.nodeName=="DIV"){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(e){var
b;if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}else
if(this.dirty&4){mm(this.dom);this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}if(this.prevAttrs!==void
0){iU(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void
0}t(r(d.prototype),"sync",this).call(this,e);var
a=this.dom.lastChild;while(a&&Z.get(a)instanceof
dP)a=a.lastChild;if(!a||a.nodeName!="BR"&&((b=Z.get(a))===null||b===void
0?void
0:b.isEditable)==false&&(!m.ios||!this.children.some(function(a){return a
instanceof
d1}))){var
c=document.createElement("BR");c.cmIgnore=true;this.dom.appendChild(c)}}},{key:"measureTextSize",value:function(){if(this.children.length==0||this.length>20)return null;var
f=0,b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(!(d
instanceof
d1))return null;var
e=cf(d.dom);if(e.length!=1)return null;f+=e[0].width}}catch(a){b.e(a)}finally{b.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:f/this.length}}},{key:"coordsAt",value:function(a,b){return mQ(this,a,b)}},{key:"become",value:function(a){return false}},{key:"type",get:function(){return Q.Text}}],[{key:"find",value:function(e,g){for(var
b=0,f=0;b<e.children.length;b++){var
a=e.children[b],c=f+a.length;if(c>=g){if(a
instanceof
d)return a;if(c>g)break}f=c+a.breakAfter}return null}}]);return d}(Z),fn=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.type=e;c.breakAfter=0;return c}c(a,[{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"domAtPos",value:function(a){return a==0?ax.before(this.dom):ax.after(this.dom,a==this.length)}},{key:"split",value:function(b){var
d=this.length-b;this.length=b;var
c=new
a(this.widget,d,this.type);c.breakAfter=this.breakAfter;return c}},{key:"children",get:function(){return ik}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):p.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(b){if(b
instanceof
a&&b.type==this.type&&b.widget.constructor==this.widget.constructor){if(!b.widget.eq(this.widget))this.markDirty(true);this.widget=b.widget;this.length=b.length;this.breakAfter=b.breakAfter;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}]);return a}(Z),tB=function(){function
d(a,c,f,e){b(this,d);this.doc=a;this.pos=c;this.end=f;this.disallowBlockEffectsBelow=e;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=c}c(d,[{key:"posCovered",value:function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var
a=this.content[this.content.length-1];return!a.breakAfter&&!(a
instanceof
fn&&a.type==Q.WidgetBefore)}},{key:"getLine",value:function(){if(!this.curLine){this.content.push(this.curLine=new
aS());this.atCursorPos=true}return this.curLine}},{key:"flushBuffer",value:function(a){if(this.pendingBuffer){this.curLine.append(fi(new
f8(-1),a),a.length);this.pendingBuffer=0}}},{key:"addBlockWidget",value:function(a){this.flushBuffer([]);this.curLine=null;this.content.push(a)}},{key:"finish",value:function(a){if(!a)this.flushBuffer([]);else
this.pendingBuffer=0;if(!this.posCovered())this.getLine()}},{key:"buildText",value:function(a,e,c){while(a>0){if(this.textOff==this.text.length){var
b=this.cursor.next(this.skip),h=b.value,g=b.lineBreak,f=b.done;this.skip=0;if(f)throw new
Error("Ran out of text content when drawing inline views");if(g){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else
this.breakAtStart=1;this.flushBuffer([]);this.curLine=null;a--;continue}else{this.text=h;this.textOff=0}}var
d=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(e.slice(0,c));this.getLine().append(fi(new
d1(this.text.slice(this.textOff,this.textOff+d)),e),c);this.atCursorPos=true;this.textOff+=d;a-=d;c=0}}},{key:"span",value:function(d,b,c,a){this.buildText(b-d,c,a);this.pos=b;if(this.openStart<0)this.openStart=a}},{key:"point",value:function(f,e,a,b,d){var
c=e-f;if(a
instanceof
cD)if(a.block){var
k=a.type;if(k==Q.WidgetAfter&&!this.posCovered())this.getLine();this.addBlockWidget(new
fn(a.widget||new
ki("div"),c,k))}else{var
g=ga.create(a.widget||new
ki("span"),c,a.startSide),i=this.atCursorPos&&!g.isEditable&&d<=b.length&&(f<e||a.startSide>0),h=!g.isEditable&&(f<e||a.startSide<=0),j=this.getLine();if(this.pendingBuffer==2&&!i)this.pendingBuffer=0;this.flushBuffer(b);if(i){j.append(fi(new
f8(1),b),d);d=b.length+Math.max(0,d-b.length)}j.append(fi(g,b),d);this.atCursorPos=h;this.pendingBuffer=!h?0:f<e?1:2}else
if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(a);if(c){if(this.textOff+c<=this.text.length)this.textOff+=c;else{this.skip+=c-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=d}},{key:"filterPoint",value:function(d,c,a,b){if(b>=this.disallowBlockEffectsBelow||!(a
instanceof
cD))return true;if(a.block)throw new
RangeError("Block decorations may not be specified via plugins");return c<=this.doc.lineAt(this.pos).to}}],[{key:"build",value:function(g,b,c,e,f){var
a=new
d(g,b,c,f);a.openEnd=k.spans(e,b,c,a);if(a.openStart<0)a.openStart=a.openEnd;a.finish(a.openEnd);return a}}]);return d}();function
fi(c,e){var
b=a(e),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;c=new
dP(f,[c],c.length)}}catch(a){b.e(a)}finally{b.f()}return c}var
ki=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.tag=d;return c}c(a,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return a}(d$),Bl=[],mr=h.define(),nP=h.define(),qq=h.define(),n$=h.define(),iZ=h.define(),o7=h.define(),iz=j.define({map:function(b,a){return b.map(a)}}),me=j.define({map:function(b,a){return b.map(a)}}),dV=function(){function
a(c){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"nearest",d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"nearest",g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5,e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;b(this,a);this.range=c;this.y=f;this.x=d;this.yMargin=g;this.xMargin=e}c(a,[{key:"map",value:function(b){return b.empty?this:new
a(this.range.map(b),this.y,this.x,this.yMargin,this.xMargin)}}]);return a}(),rP=j.define({map:function(b,a){return b.map(a)}});function
bT(d,a,b){var
c=d.facet(n$);if(c.length)c[0](a);else
if(window.onerror)window.onerror(String(a),b,void
0,void
0,a);else
if(b)console.error(b+":",a);else
console.error(a)}var
c2=h.define({combine:function(a){return a.length?a[0]:true}}),u_=c(function
a(c,d){b(this,a);this.field=c;this.get=d}),aK=function(){function
a(){b(this,a)}c(a,[{key:"from",value:function(a){return new
u_(this,a)}}],[{key:"define",value:function(){return new
a()}}]);return a}();aK.decorations=aK.define();aK.atomicRanges=aK.define();aK.scrollMargins=aK.define();var
A5=0,dz=h.define(),kI=function(){function
d(e,a,c){b(this,d);this.id=e;this.create=a;this.fields=c;this.extension=dz.of(this)}c(d,null,[{key:"define",value:function(j,l){var
f=l||{},i=f.eventHandlers,e=f.provide,h=f.decorations,c=[];if(e){var
b=a(Array.isArray(e)?e:[e]),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;c.push(k)}}catch(a){b.e(a)}finally{b.f()}}if(i)c.push(nF.from(function(a){return{plugin:a,handlers:i}}));if(h)c.push(aK.decorations.from(h));return new
d(A5++,j,c)}},{key:"fromClass",value:function(b,a){return d.define(function(a){return new
b(a)},a)}}]);return d}(),nF=aK.define(),fW=function(){function
d(a){b(this,d);this.spec=a;this.mustUpdate=null;this.value=null}c(d,[{key:"takeField",value:function(h,g){if(this.spec){var
b=a(this.spec.fields),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,e=d.field,f=d.get;if(e==h)g.push(f(this.value))}}catch(a){b.e(a)}finally{b.f()}}}},{key:"update",value:function
a(b){if(!this.value){if(this.spec)try{this.value=this.spec.create(b)}catch(a){bT(b.state,a,"CodeMirror plugin crashed");this.deactivate()}}else
if(this.mustUpdate){var
a=this.mustUpdate;this.mustUpdate=null;if(this.value.update)try{this.value.update(a)}catch(b){bT(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(a){}this.deactivate()}}return this}},{key:"destroy",value:function(b){var
a;if((a=this.value)===null||a===void
0?void
0:a.destroy)try{this.value.destroy()}catch(a){bT(b.state,a,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]);return d}(),nZ=h.define(),mL=h.define(),bL=h.define(),dm=h.define(),cw=function(){function
d(a,e,c,f){b(this,d);this.fromA=a;this.toA=e;this.fromB=c;this.toB=f}c(d,[{key:"join",value:function(a){return new
d(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(c){var
a=c.length,b=this;for(;a>0;a--){var
d=c[a-1];if(d.fromA>b.toA)continue;if(d.toA<b.fromA)break;b=b.join(d);c.splice(a-1,1)}c.splice(a,0,b);return c}}],[{key:"extendWithRanges",value:function(f,c){if(c.length==0)return f;var
j=[];for(var
e=0,b=0,m=0,i=0;;e++){var
a=e==f.length?null:f[e],l=m-i,g=a?a.fromB:1e9;while(b<c.length&&c[b]<g){var
o=c[b],n=c[b+1],h=Math.max(i,o),k=Math.min(g,n);if(h<=k)new
d(h+l,k+l,h,k).addToSet(j);if(n>g)break;else
b+=2}if(!a)return j;new
d(a.fromA,a.toA,a.fromB,a.toB).addToSet(j);m=a.toA;i=a.toB}}}]);return d}(),kQ=function(){function
e(c,j){var
i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bl;b(this,e);this.view=c;this.state=j;this.transactions=i;this.flags=0;this.startState=c.state;this.changes=X.empty(this.startState.doc.length);var
d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
k=f.value;this.changes=this.changes.compose(k.changes)}}catch(a){d.e(a)}finally{d.f()}var
g=[];this.changes.iterChangedRanges(function(a,c,b,d){return g.push(new
cw(a,c,b,d))});this.changedRanges=g;var
h=c.hasFocus;if(h!=c.inputState.notifiedFocused){c.inputState.notifiedFocused=h;this.flags|=1}}c(e,[{key:"viewportChanged",get:function(){return(this.flags&4)>0}},{key:"heightChanged",get:function(){return(this.flags&2)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(this.flags&(8|2))>0}},{key:"focusChanged",get:function(){return(this.flags&1)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return this.flags==0&&this.transactions.length==0}}]);return e}(),at=function(a){a[a["LTR"]=0]="LTR";a[a["RTL"]=1]="RTL";return a}(at||(at={})),fD=at.LTR,vf=at.RTL;function
ni(c){var
b=[];for(var
a=0;a<c.length;a++)b.push(1<<+c[a]);return b}var
uy=ni("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),s0=ni("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fs=Object.create(null),a1=[];for(var
gl=0,k1=["()","[]","{}"];gl<k1.length;gl++){var
lo=k1[gl],ld=lo.charCodeAt(0),lv=lo.charCodeAt(1);fs[ld]=lv;fs[lv]=-ld}function
w5(a){return a<=247?uy[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?s0[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8203?256:a==8204?256:1}var
s_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,bZ=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.level=d}c(a,[{key:"dir",get:function(){return this.level%2?vf:fD}},{key:"side",value:function(b,a){return this.dir==a==b?this.to:this.from}}],[{key:"find",value:function(e,d,g,f){var
c=-1;for(var
b=0;b<e.length;b++){var
a=e[b];if(a.from<=d&&a.to>=d){if(a.level==g)return b;if(c<0||(f!=0?f<0?a.from<d:a.to>d:e[c].level>a.level))c=b}}if(c<0)throw new
RangeError("Index out of range");return c}}]);return a}(),M=[];function
xk(q,G){var
a=q.length,c=G==fD?1:2,R=G==fD?2:1;if(!q||c==1&&!s_.test(q))return st(a);for(var
r=0,I=c,J=c;r<a;r++){var
d=w5(q.charCodeAt(r));if(d==512)d=I;else
if(d==8&&J==4)d=16;M[r]=d==4?2:d;if(d&7)J=d;I=d}for(var
b=0,o=c,u=c;b<a;b++){var
j=M[b];if(j==128)if(b<a-1&&o==M[b+1]&&o&24)j=M[b]=o;else
M[b]=256;else
if(j==64){var
k=b+1;while(k<a&&M[k]==64)k++;var
S=b&&o==8||k<a&&M[k]==8?u==1?1:8:256;for(var
y=b;y<k;y++)M[y]=S;b=k-1}else
if(j==8&&u==1)M[b]=1;o=j;if(j&7)u=j}for(var
l=0,m=0,E=0,D,w,v;l<a;l++)if(w=fs[D=q.charCodeAt(l)])if(w<0){for(var
n=m-3;n>=0;n-=3)if(a1[n+1]==-w){var
x=a1[n+2],L=x&2?c:!(x&4)?0:x&1?R:c;if(L)M[l]=M[a1[n]]=L;m=n;break}}else
if(a1.length==189)break;else{a1[m++]=l;a1[m++]=D;a1[m++]=E}else
if((v=M[l])==2||v==1){var
H=v==c;E=H?0:1;for(var
p=m-3;p>=0;p-=3){var
F=a1[p+2];if(F&2)break;if(H)a1[p+2]|=2;else{if(F&4)break;a1[p+2]|=4}}}for(var
e=0;e<a;e++)if(M[e]==256){var
g=e+1;while(g<a&&M[g]==256)g++;var
C=(e?M[e-1]:c)==1,Q=(g<a?M[g]:c)==1,O=C==Q?C?1:2:c;for(var
t=e;t<g;t++)M[t]=O;e=g-1}var
s=[];if(c==1)for(var
f=0;f<a;){var
z=f,K=M[f++]!=1;while(f<a&&K==(M[f]!=1))f++;if(K)for(var
i=f;i>z;){var
N=i,A=M[--i]!=2;while(i>z&&A==(M[i-1]!=2))i--;s.push(new
bZ(i,N,A?2:1))}else
s.push(new
bZ(z,f,0))}else
for(var
h=0;h<a;){var
P=h,B=M[h++]==2;while(h<a&&B==(M[h]==2))h++;s.push(new
bZ(P,h,B?1:2))}return s}function
st(a){return[new
bZ(0,a,0)]}var
qC="";function
AY(c,e,b,l,a){var
k,f=l.head-c.from,h=-1;if(f==0){if(!a||!c.length)return null;if(e[0].level!=b){f=e[0].side(false,b);h=0}}else
if(f==c.length){if(a)return null;var
n=e[e.length-1];if(n.level!=b){f=n.side(true,b);h=e.length-1}}if(h<0)h=bZ.find(e,f,(k=l.bidiLevel)!==null&&k!==void
0?k:-1,l.assoc);var
g=e[h];if(f==g.side(a,b)){g=e[h+=a?1:-1];f=g.side(!a,b)}var
m=a==(g.dir==b),i=x(c.text,f,m);qC=c.text.slice(Math.min(f,i),Math.max(f,i));if(i!=g.side(a,b))return d.cursor(i+c.from,m?-1:1,g.level);var
j=h==(a?e.length-1:0)?null:e[h+(a?1:-1)];if(!j&&g.level!=b)return d.cursor(a?c.to:c.from,a?-1:1,b);if(j&&j.level<g.level)return d.cursor(j.side(!a,b)+c.from,a?1:-1,j.level);return d.cursor(i+c.from,a?-1:1,g.level)}var
jJ=function(){function
d(c,a){b(this,d);this.points=c;this.view=a;this.text="";this.lineBreak=a.state.lineBreak}c(d,[{key:"readRange",value:function(d,e){if(!d)return this;var
f=d.parentNode;for(var
a=d;;){this.findPointBefore(f,a);this.readNode(a);var
b=a.nextSibling;if(b==e)break;var
c=Z.get(a),g=Z.get(b);if(c&&g?c.breakAfter:(c?c.breakAfter:pp(a))||pp(b)&&(a.nodeName!="BR"||a.cmIgnore))this.text+=this.lineBreak;a=b}this.findPointBefore(f,e);return this}},{key:"readTextNode",value:function(d){var
b,c,a=d.nodeValue;if(/^\u200b/.test(a)&&((b=d.previousSibling)===null||b===void
0?void
0:b.contentEditable)=="false")a=a.slice(1);if(/\u200b$/.test(a)&&((c=d.nextSibling)===null||c===void
0?void
0:c.contentEditable)=="false")a=a.slice(0,a.length-1);return a}},{key:"readNode",value:function(a){if(a.cmIgnore)return;var
d=Z.get(a),c=d&&d.overrideDOMText,b;if(c!=null)b=c.sliceString(0,void
0,this.lineBreak);else
if(a.nodeType==3)b=this.readTextNode(a);else
if(a.nodeName=="BR")b=a.nextSibling?this.lineBreak:"";else
if(a.nodeType==1)this.readRange(a.firstChild,null);if(b!=null){this.findPointIn(a,b.length);this.text+=b;if(m.chrome&&this.view.inputState.lastKeyCode==13&&!a.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}}},{key:"findPointBefore",value:function(e,f){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==e&&e.childNodes[c.offset]==f)c.pos=this.text.length}}catch(a){b.e(a)}finally{b.f()}}},{key:"findPointIn",value:function(f,e){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==f)c.pos=this.text.length+Math.min(c.offset,e)}}catch(a){b.e(a)}finally{b.f()}}}]);return d}();function
pp(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}var
jF=c(function
a(c,d){b(this,a);this.node=c;this.offset=d;this.pos=-1}),jR=function(g){f(d,g);var
h=e(d);function
d(c){var
a;b(this,d);a=h.call(this);a.view=c;a.compositionDeco=am.none;a.decorations=[];a.pluginDecorationLength=0;a.minWidth=0;a.minWidthFrom=0;a.minWidthTo=0;a.impreciseAnchor=null;a.impreciseHead=null;a.forceSelection=false;a.lastUpdate=Date.now();a.setDOM(c.contentDOM);a.children=[new
aS()];a.children[0].setParent(aQ(a));a.updateDeco();a.updateInner([new
cw(0,0,0,c.state.doc.length)],0);return a}c(d,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(a){var
c=this,b=a.changedRanges;if(this.minWidth>0&&b.length)if(!b.every(function(a){var
b=a.fromA,d=a.toA;return d<c.minWidthFrom||b>c.minWidthTo}))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else{this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)}if(this.view.inputState.composing<0)this.compositionDeco=am.none;else
if(a.transactions.length||this.dirty)this.compositionDeco=xf(this.view,a.changes);if((m.ie||m.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines)this.forceSelection=true;var
f=this.decorations,d=this.updateDeco(),e=yq(f,d,a.changes);b=cw.extendWithRanges(b,e);if(this.dirty==0&&b.length==0)return false;else{this.updateInner(b,a.startState.doc.length);if(a.transactions.length)this.lastUpdate=Date.now();return true}}},{key:"updateInner",value:function(h,i){var
b=this;this.view.viewState.mustMeasureContent=true;this.updateChildren(h,i);var
d=this.view.observer;d.ignore(function(){b.dom.style.height=b.view.viewState.contentHeight+"px";b.dom.style.minWidth=b.minWidth?b.minWidth+"px":"";var
a=m.chrome||m.ios?{node:d.selectionRange.focusNode,written:false}:void
0;b.sync(a);b.dirty=0;if(a&&(a.written||d.selectionRange.focusNode!=a.node))b.forceSelection=true;b.dom.style.height=""});var
g=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var
c=a(this.children),f;try{for(c.s();!(f=c.n()).done;){var
e=f.value;if(e
instanceof
fn&&e.widget
instanceof
jk)g.push(e.dom)}}catch(a){c.e(a)}finally{c.f()}}d.updateGaps(g)}},{key:"updateChildren",value:function(f,n){var
g=this.childCursor(n);for(var
c=f.length-1;;c--){var
a=c>=0?f[c]:null;if(!a)break;var
j=a.fromA,q=a.toA,k=a.fromB,r=a.toB,b=tB.build(this.view.state.doc,k,r,this.decorations,this.pluginDecorationLength),i=b.content,h=b.breakAtStart,p=b.openStart,o=b.openEnd,d=g.findPos(q,1),s=d.i,t=d.off,e=g.findPos(j,-1),l=e.i,m=e.off;rm(this,l,m,s,t,i,h,p,o)}}},{key:"updateSelection",value:function(){var
f=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(i)this.view.observer.readSelectionRange();if(!(h||this.mayControlSelection())||m.ios&&this.view.inputState.rapidCompositionStart)return;var
g=this.forceSelection;this.forceSelection=false;var
d=this.view.state.selection.main,a=this.domAtPos(d.anchor),c=d.empty?a:this.domAtPos(d.head);if(m.gecko&&d.empty&&wz(a)){var
e=document.createTextNode("");this.view.observer.ignore(function(){return a.node.insertBefore(e,a.node.childNodes[a.offset]||null)});a=c=new
ax(e,0);g=true}var
b=this.view.observer.selectionRange;if(g||!b.focusNode||!eS(a.node,a.offset,b.anchorNode,b.anchorOffset)||!eS(c.node,c.offset,b.focusNode,b.focusOffset)){this.view.observer.ignore(function(){if(m.android&&m.chrome&&f.dom.contains(b.focusNode)&&zH(b.focusNode,f.dom)){f.dom.blur();f.dom.focus({preventScroll:true})}var
e=eF(f.root);if(d.empty){if(m.gecko){var
g=Ba(a.node,a.offset);if(g&&g!=(1|2)){var
h=qH(a.node,a.offset,g==1?1:-1);if(h)a=new
ax(h,g==1?0:h.nodeValue.length)}}e.collapse(a.node,a.offset);if(d.bidiLevel!=null&&b.cursorBidiLevel!=null)b.cursorBidiLevel=d.bidiLevel}else
if(e.extend){e.collapse(a.node,a.offset);e.extend(c.node,c.offset)}else{var
i=document.createRange();if(d.anchor>d.head){var
j=[c,a];a=j[0];c=j[1]}i.setEnd(c.node,c.offset);i.setStart(a.node,a.offset);e.removeAllRanges();e.addRange(i)}});this.view.observer.setSelectionRange(a,c)}this.impreciseAnchor=a.precise?null:new
ax(b.anchorNode,b.anchorOffset);this.impreciseHead=c.precise?null:new
ax(b.focusNode,b.focusOffset)}},{key:"enforceCursorAssoc",value:function(){if(this.compositionDeco.size)return;var
a=this.view.state.selection.main,c=eF(this.root);if(!a.empty||!a.assoc||!c.modify)return;var
b=aS.find(this,a.head);if(!b)return;var
g=b.posAtStart;if(a.head==g||a.head==g+b.length)return;var
e=this.coordsAt(a.head,-1),d=this.coordsAt(a.head,1);if(!e||!d||e.bottom>d.top)return;var
f=this.domAtPos(a.head+a.assoc);c.collapse(f.node,f.offset);c.modify("move",a.assoc<0?"forward":"backward","lineboundary")}},{key:"mayControlSelection",value:function(){return this.view.state.facet(c2)?this.root.activeElement==this.dom:hT(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(c){for(var
a=c;a;){var
b=Z.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}},{key:"posFromDOM",value:function(b,c){var
a=this.nearest(b);if(!a)throw new
RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(b,c)+a.posAtStart}},{key:"domAtPos",value:function(e){var
c=this.childCursor().findPos(e,-1),a=c.i,b=c.off;for(;a<this.children.length-1;){var
d=this.children[a];if(b<d.length||d
instanceof
aS)break;a++;b=0}return this.children[a].domAtPos(b)}},{key:"coordsAt",value:function(d,e){for(var
f=this.length,a=this.children.length-1;;a--){var
b=this.children[a],c=f-b.breakAfter-b.length;if(d>c||d==c&&b.type!=Q.WidgetBefore&&b.type!=Q.WidgetAfter&&(!a||e==2||this.children[a-1].breakAfter||this.children[a-1].type==Q.WidgetBefore&&e>-2))return b.coordsAt(d-c,e);f=c}}},{key:"measureVisibleLineHeights",value:function(){var
k=[],g=this.view.viewState.viewport,n=g.from,p=g.to,h=this.view.contentDOM.clientWidth,o=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1;for(var
b=0,c=0;c<this.children.length;c++){var
a=this.children[c],e=b+a.length;if(e>p)break;if(b>=n){var
d=a.dom.getBoundingClientRect();k.push(d.height);if(o){var
i=a.dom.lastChild,f=i?cf(i):[];if(f.length){var
j=f[f.length-1],m=this.view.textDirection==at.LTR?j.right-d.left:d.right-j.left;if(m>l){l=m;this.minWidth=h;this.minWidthFrom=b;this.minWidthTo=e}}}}b=e+a.breakAfter}return k}},{key:"measureTextSize",value:function(){var
i=this,c=a(this.children),d;try{for(c.s();!(d=c.n()).done;){var
f=d.value;if(f
instanceof
aS){var
h=f.measureTextSize();if(h)return h}}}catch(a){c.e(a)}finally{c.f()}var
b=document.createElement("div"),g,e;b.className="cm-line";b.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){i.dom.appendChild(b);var
a=cf(b.firstChild)[0];g=b.getBoundingClientRect().height;e=a?a.width/27:7;b.remove()});return{lineHeight:g,charWidth:e}}},{key:"childCursor",value:function(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length,a=this.children.length;if(a)b-=this.children[--a].length;return new
jx(this.children,b,a)}},{key:"computeBlockGapDeco",value:function(){var
f=[],c=this.view.viewState;for(var
b=0,d=0;;d++){var
a=d==c.viewports.length?null:c.viewports[d],e=a?a.from-1:this.length;if(e>b){var
g=c.lineBlockAt(e).bottom-c.lineBlockAt(b).top;f.push(am.replace({widget:new
jk(g),block:true,inclusive:true}).range(b,e))}if(!a)break;b=a.to+1}return am.set(f)}},{key:"updateDeco",value:function(){var
a=this.view.pluginField(aK.decorations);this.pluginDecorationLength=a.length;return this.decorations=[].concat(P(a),P(this.view.state.facet(bL)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(f){var
b=f.range,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(!c)return;if(!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1)))c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)};var
i=0,j=0,k=0,h=0,g=a(this.view.pluginField(aK.scrollMargins)),l;try{for(g.s();!(l=g.n()).done;){var
d=l.value;if(d){var
n=d.left,o=d.right,p=d.top,m=d.bottom;if(n!=null)i=Math.max(i,n);if(o!=null)j=Math.max(j,o);if(p!=null)k=Math.max(k,p);if(m!=null)h=Math.max(h,m)}}}catch(a){g.e(a)}finally{g.f()}var
q={left:c.left-i,top:c.top-k,right:c.right+j,bottom:c.bottom+h};B6(this.view.scrollDOM,q,b.head<b.anchor?-1:1,f.x,f.y,f.xMargin,f.yMargin,this.view.textDirection==at.LTR)}}]);return d}(Z);function
wz(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}var
jk=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.height=d;return c}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("div");this.updateDOM(a);return a}},{key:"eq",value:function(a){return a.height==this.height}},{key:"updateDOM",value:function(a){a.style.height=this.height+"px";return true}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(d$);function
mE(i){var
f=i.observer.selectionRange,c=f.focusNode&&qH(f.focusNode,f.focusOffset,0);if(!c)return null;var
a=i.docView.nearest(c);if(!a)return null;if(a
instanceof
aS){var
d=c;while(d.parentNode!=a.dom)d=d.parentNode;var
b=d.previousSibling;while(b&&!Z.get(b))b=b.previousSibling;var
h=b?Z.get(b).posAtEnd:a.posAtStart;return{from:h,to:h,node:d,text:c}}else{for(;;){var
j=a,e=j.parent;if(!e)return null;if(e
instanceof
aS)break;a=e}var
g=a.posAtStart;return{from:g,to:g+a.length,node:a.dom,text:c}}}function
xf(g,h){var
d=mE(g);if(!d)return am.none;var
i=d.from,k=d.to,e=d.node,j=d.text,a=h.mapPos(i,1),c=Math.max(a,h.mapPos(k,-1)),f=g.state,b=e.nodeType==3?e.nodeValue:new
jJ([],g).readRange(e.firstChild,null).text;if(c-a<b.length)if(f.sliceDoc(a,Math.min(f.doc.length,a+b.length))==b)c=a+b.length;else
if(f.sliceDoc(Math.max(0,c-b.length),c)==b)a=c-b.length;else
return am.none;else
if(f.sliceDoc(a,c)!=b)return am.none;return am.set(am.replace({widget:new
tw(e,j)}).range(a,c))}var
tw=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.top=e;c.text=d;return c}c(a,[{key:"eq",value:function(a){return this.top==a.top&&this.text==a.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return false}},{key:"customView",get:function(){return tr}}]);return a}(d$);function
qH(a,b,c){for(;;){if(a.nodeType==3)return a;if(a.nodeType==1&&b>0&&c<=0){a=a.childNodes[b-1];b=e0(a)}else
if(a.nodeType==1&&b<a.childNodes.length&&c>=0){a=a.childNodes[b];b=0}else
return null}}function
Ba(a,b){if(a.nodeType!=1)return 0;return(b&&a.childNodes[b-1].contentEditable=="false"?1:0)|(b<a.childNodes.length&&a.childNodes[b].contentEditable=="false"?2:0)}var
tS=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(a,b){gx(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){gx(a,b,this.changes)}}]);return a}();function
yq(b,c,d){var
a=new
tS();k.compare(b,c,d,a);return a.changes}function
zH(c,b){for(var
a=c;a&&a!=b;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return true;return false}function
y$(l,f){var
g=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,h=l.charCategorizer(f),a=l.doc.lineAt(f),e=f-a.from;if(a.length==0)return d.cursor(f);if(e==0)g=1;else
if(e==a.length)g=-1;var
b=e,c=e;if(g<0)b=x(a.text,e,false);else
c=x(a.text,e);var
i=h(a.text.slice(b,c));while(b>0){var
k=x(a.text,b,false);if(h(a.text.slice(k,b))!=i)break;b=k}while(c<a.length){var
j=x(a.text,c);if(h(a.text.slice(c,j))!=i)break;c=j}return d.range(b+a.from,c+a.from)}function
y0(b,a){return a.left>b?a.left-b:Math.max(0,b-a.right)}function
y5(b,a){return a.top>b?a.top-b:Math.max(0,b-a.bottom)}function
i$(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function
sF(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function
sA(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function
hu(k,h,g){var
f,b,m,n,o,p,c,d;for(var
e=k.firstChild;e;e=e.nextSibling){var
r=cf(e);for(var
l=0;l<r.length;l++){var
a=r[l];if(b&&i$(b,a))a=sF(sA(a,b.bottom),b.top);var
i=y0(h,a),j=y5(g,a);if(i==0&&j==0)return e.nodeType==3?nK(e,h,g):hu(e,h,g);if(!f||n>j||n==j&&m>i){f=e;b=a;m=i;n=j}if(i==0){if(g>a.bottom&&(!c||c.bottom<a.bottom)){o=e;c=a}else
if(g<a.top&&(!d||d.top>a.top)){p=e;d=a}}else
if(c&&i$(c,a))c=sA(c,a.bottom);else
if(d&&i$(d,a))d=sF(d,a.top)}}if(c&&c.bottom>=g){f=o;b=c}else
if(d&&d.top<=g){f=p;b=d}if(!f)return{node:k,offset:0};var
q=Math.max(b.left,Math.min(b.right,h));if(f.nodeType==3)return nK(f,q,g);if(!m&&f.contentEditable=="true")return hu(f,q,g);var
s=Array.prototype.indexOf.call(k.childNodes,f)+(h>=(b.left+b.right)/2?1:0);return{node:k,offset:s}}function
nK(c,d,j){var
o=c.nodeValue.length,f=-1,k=1e9,h=0;for(var
b=0;b<o;b++){var
l=ds(c,b,b+1).getClientRects();for(var
i=0;i<l.length;i++){var
a=l[i];if(a.top==a.bottom)continue;if(!h)h=d-a.left;var
g=(a.top>j?a.top-j:j-a.bottom)-1;if(a.left-1<=d&&a.right+1>=d&&g<k){var
n=d>=(a.left+a.right)/2,e=n;if(m.chrome||m.gecko){var
p=ds(c,b).getBoundingClientRect();if(p.left==a.right)e=!n}if(g<=0)return{node:c,offset:b+(e?1:0)};f=b+(e?1:0);k=g}}}return{node:c,offset:f>-1?f:h>0?c.nodeValue.length:0}}function
qX(a,s,p){var
d=s.x,e=s.y,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1,k,h=a.contentDOM.getBoundingClientRect(),v=h.top+a.viewState.paddingTop,b,u=a.viewState.docHeight,g=e-v;if(g<0)return 0;if(g>u)return a.state.doc.length;for(var
w=a.defaultLineHeight/2,t=false;;){b=a.elementAtHeight(g);if(b.type==Q.Text)break;for(;;){g=l>0?b.bottom+w:b.top-w;if(g>=0&&g<=u)break;if(t)return p?null:0;t=true;l=-l}}e=v+g;var
n=b.from;if(n<a.viewport.from)return a.viewport.from==0?0:p?null:q2(a,h,b,d,e);if(n>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:p?null:q2(a,h,b,d,e);var
i=a.dom.ownerDocument,y=a.root.elementFromPoint?a.root:i,c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null;if(!c){d=Math.max(h.left+1,Math.min(h.right-1,d));c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null}var
f,j=-1;if(c&&((k=a.docView.nearest(c))===null||k===void
0?void
0:k.isEditable)!=false)if(i.caretPositionFromPoint){var
o=i.caretPositionFromPoint(d,e);if(o){f=o.offsetNode;j=o.offset}}else
if(i.caretRangeFromPoint){var
q=i.caretRangeFromPoint(d,e);if(q){f=q.startContainer;j=q.startOffset;if(m.safari&&z_(f,j,d))f=void
0}}if(!f||!a.docView.dom.contains(f)){var
x=aS.find(a.docView,n);if(!x)return g>b.top+b.height/2?b.to:b.from;var
r=hu(x.dom,d,e);f=r.node;j=r.offset}return a.docView.posFromDOM(f,j)}function
q2(a,e,b,g,h){var
c=Math.round((g-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&b.height>a.defaultLineHeight*1.5){var
f=Math.floor((h-b.top)/a.defaultLineHeight);c+=f*a.viewState.heightOracle.lineLength}var
d=a.state.sliceDoc(b.from,b.to);return b.from+bO(d,c,a.state.tabSize)}function
z_(b,d,e){var
c;if(b.nodeType!=3||d!=(c=b.nodeValue.length))return false;for(var
a=b.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return false;return ds(b,c-1,c).getBoundingClientRect().left>e}function
AP(a,b,c,k){var
f=a.state.doc.lineAt(b.head),e=!k||!a.lineWrapping?null:a.coordsAtPos(b.assoc<0&&b.head>f.from?b.head-1:b.head);if(e){var
h=a.dom.getBoundingClientRect(),i=a.posAtCoords({x:c==(a.textDirection==at.LTR)?h.right-1:h.left+1,y:(e.top+e.bottom)/2});if(i!=null)return d.cursor(i,c?-1:1)}var
g=aS.find(a.docView,b.head),j=g?c?g.posAtEnd:g.posAtStart:c?f.to:f.from;return d.cursor(j,c?-1:1)}function
qu(b,k,e,i){var
a=b.state.doc.lineAt(k.head),j=b.bidiSpans(a);for(var
c=k,h=null;;){var
f=AY(a,j,b.textDirection,c,e),g=qC;if(!f){if(a.number==(e?b.state.doc.lines:1))return c;g="\n";a=b.state.doc.line(a.number+(e?1:-1));j=b.bidiSpans(a);f=d.cursor(e?a.from:a.to)}if(!h){if(!i)return f;h=i(g)}else
if(!h(g))return c;c=f}}function
wM(e,b,d){var
c=e.state.charCategorizer(b),a=c(d);return function(d){var
b=c(d);if(a==ak.Space)a=b;return a==b}}function
AT(a,g,p,j){var
b=g.head,f=p?1:-1;if(b==(p?a.state.doc.length:0))return d.cursor(b,g.assoc);var
c=g.goalColumn,m,e=a.contentDOM.getBoundingClientRect(),h=a.coordsAtPos(b),n=a.documentTop;if(h){if(c==null)c=h.left-e.left;m=f<0?h.top:h.bottom}else{var
k=a.viewState.lineBlockAt(b-n);if(c==null)c=Math.min(e.right-e.left,a.defaultCharacterWidth*(b-k.from));m=(f<0?k.top:k.bottom)+n}var
r=e.left+c,q=j!==null&&j!==void
0?j:a.defaultLineHeight>>1;for(var
o=0;;o+=10){var
i=m+(q+o)*f,l=qX(a,{x:r,y:i},false,f);if(i<e.top||i>e.bottom||(f<0?l<b:l>b))return d.cursor(l,g.assoc,void
0,c)}}function
iG(j,h,b){var
g=j.pluginField(aK.atomicRanges);for(;;){var
f=false,c=a(g),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;i.between(b.from-1,b.from+1,function(a,c,e){if(b.from>a&&b.from<c){b=h.from>b.from?d.cursor(a,1):d.cursor(c,-1);f=true}})}}catch(a){c.e(a)}finally{c.f()}if(!f)return b}}var
um=function(){function
e(a){var
d=this;b(this,e);this.lastKeyCode=0;this.lastKeyTime=0;this.pendingIOSKey=void
0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var
c=function(c){var
e=ad[c];a.contentDOM.addEventListener(c,function(b){if(c=="keydown"&&d.keydown(a,b))return;if(!n6(a,b)||d.ignoreDuringComposition(b))return;if(d.mustFlushObserver(b))a.observer.forceFlush();if(d.runCustomHandlers(c,a,b))b.preventDefault();else
e(a,b)});d.registeredEvents.push(c)};for(var
f
in
ad)c(f);this.notifiedFocused=a.hasFocus;this.ensureHandlers(a);if(m.safari)a.contentDOM.addEventListener("input",function(){return null})}c(e,[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var
d=this,g=this.customHandlers=c.pluginField(nF),b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,f=function(a){if(d.registeredEvents.indexOf(a)<0&&a!="scroll"){d.registeredEvents.push(a);c.contentDOM.addEventListener(a,function(b){if(!n6(c,b))return;if(d.runCustomHandlers(a,c,b))b.preventDefault()})}};for(var
i
in
h.handlers)f(i)}}catch(a){b.e(a)}finally{b.f()}}},{key:"runCustomHandlers",value:function(h,g,d){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value,e=f.handlers[h];if(e)try{if(e.call(f.plugin,d,g)||d.defaultPrevented)return true}catch(a){bT(g.state,a)}}}catch(a){b.e(a)}finally{b.f()}return false}},{key:"runScrollHandlers",value:function(f,g){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value,d=e.handlers.scroll;if(d)try{d.call(e.plugin,g,f)}catch(a){bT(f.state,a)}}}catch(a){b.e(a)}finally{b.f()}}},{key:"keydown",value:function(b,a){var
d=this;this.lastKeyCode=a.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(b,a))return true;if(m.android&&m.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8)){b.observer.delayAndroidKey(a.key,a.keyCode);return true}var
c;if(m.ios&&(c=kr.find(function(b){return b.keyCode==a.keyCode}))&&!(a.ctrlKey||a.altKey||a.metaKey)&&!a.synthetic){this.pendingIOSKey=c;setTimeout(function(){return d.flushIOSKey(b)},250);return true}return false}},{key:"flushIOSKey",value:function(b){var
a=this.pendingIOSKey;if(!a)return false;this.pendingIOSKey=void
0;return cX(b.contentDOM,a.key,a.keyCode)}},{key:"ignoreDuringComposition",value:function(a){if(!/^key/.test(a.type))return false;if(this.composing>0)return true;if(m.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false}},{key:"screenKeyEvent",value:function(c,a){var
b=a.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(a.keyCode==27)this.lastEscPress=Date.now();else
if(AJ.indexOf(a.keyCode)<0)this.lastEscPress=0;return b}},{key:"mustFlushObserver",value:function(a){return a.type=="keydown"&&a.keyCode!=229||a.type=="compositionend"&&!m.ios}},{key:"startMouseSelection",value:function(a){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=a}},{key:"update",value:function(a){if(this.mouseSelection)this.mouseSelection.update(a);if(a.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){if(this.mouseSelection)this.mouseSelection.destroy()}}]);return e}(),kr=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],AJ=[16,17,18,20,91,92,224,225],uX=function(){function
d(c,a,g,f){b(this,d);this.view=c;this.style=g;this.mustSelect=f;this.lastEvent=a;var
e=c.contentDOM.ownerDocument;e.addEventListener("mousemove",this.move=this.move.bind(this));e.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=a.shiftKey;this.multiple=c.state.facet(u.allowMultipleSelections)&&v6(c,a);this.dragMove=x3(c,a);this.dragging=z2(c,a)&&hJ(a)==1?null:false;if(this.dragging===false){a.preventDefault();this.select(a)}}c(d,[{key:"move",value:function(a){if(a.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=a)}},{key:"up",value:function(a){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var
a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=null}},{key:"select",value:function(b){var
a=this.style.get(b,this.extend,this.multiple);if(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:true});this.mustSelect=false}},{key:"update",value:function(a){var
b=this;if(a.docChanged&&this.dragging)this.dragging=this.dragging.map(a.changes);if(this.style.update(a))setTimeout(function(){return b.select(b.lastEvent)},20)}}]);return d}();function
v6(c,a){var
b=c.state.facet(mr);return b.length?b[0](a):m.mac?a.metaKey:a.ctrlKey}function
x3(c,a){var
b=c.state.facet(nP);return b.length?b[0](a):m.mac?!a.altKey:!a.ctrlKey}function
z2(f,a){var
g=f.state.selection.main;if(g.empty)return false;var
e=eF(f.root);if(e.rangeCount==0)return true;var
d=e.getRangeAt(0).getClientRects();for(var
c=0;c<d.length;c++){var
b=d[c];if(b.left<=a.clientX&&b.right>=a.clientX&&b.top<=a.clientY&&b.bottom>=a.clientY)return true}return false}function
n6(d,b){if(!b.bubbles)return true;if(b.defaultPrevented)return false;for(var
a=b.target,c;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(c=Z.get(a))&&c.ignoreEvent(b))return false;return true}var
ad=Object.create(null),l$=m.ie&&m.ie_version<15||m.ios&&m.webkit_version<604;function
wW(b){var
c=b.dom.parentNode;if(!c)return;var
a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){b.focus();a.remove();nA(b,a.value)},50)}function
nA(e,i){var
a=e.state,c,h=1,b=a.toText(i),g=b.lines==a.selection.ranges.length,f=h$!=null&&a.selection.ranges.every(function(a){return a.empty})&&h$==b.toString();if(f){var
j=-1;c=a.changeByRange(function(e){var
c=a.doc.lineAt(e.from);if(c.from==j)return{range:e};j=c.from;var
f=a.toText((g?b.line(h++).text:i)+a.lineBreak);return{changes:{from:c.from,insert:f},range:d.cursor(e.from+f.length)}})}else
if(g)c=a.changeByRange(function(a){var
c=b.line(h++);return{changes:{from:a.from,to:a.to,insert:c.text},range:d.cursor(a.from+c.length)}});else
c=a.replaceSelection(b);e.dispatch(c,{userEvent:"input.paste",scrollIntoView:true})}ad.keydown=function(a,b){a.inputState.setSelectionOrigin("select")};var
pU=0;ad.touchstart=function(a,b){pU=Date.now();a.inputState.setSelectionOrigin("select.pointer")};ad.touchmove=function(a){a.inputState.setSelectionOrigin("select.pointer")};ad.mousedown=function(b,d){b.observer.flush();if(pU>Date.now()-2e3&&hJ(d)==1)return;var
c=null,e=a(b.state.facet(qq)),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;c=h(b,d);if(c)break}}catch(a){e.e(a)}finally{e.f()}if(!c&&d.button==0)c=wt(b,d);if(c){var
g=b.root.activeElement!=b.contentDOM;if(g)b.observer.ignore(function(){return or(b.contentDOM)});b.inputState.startMouseSelection(new
uX(b,d,c,g))}};function
rd(e,b,g,h){if(h==1)return d.cursor(b,g);else
if(h==2)return y$(e.state,b,g);else{var
a=aS.find(e.docView,b),f=e.state.doc.lineAt(a?a.posAtEnd:b),i=a?a.posAtStart:f.from,c=a?a.posAtEnd:f.to;if(c<e.state.doc.length&&c==f.to)c++;return d.range(i,c)}}var
pf=function(b,a){return b>=a.top&&b<=a.bottom},pa=function(b,c,a){return pf(c,a)&&b>=a.left&&b<=a.right};function
yB(h,f,g,d){var
a=aS.find(h.docView,f);if(!a)return 1;var
c=f-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;var
b=a.coordsAt(c,-1);if(b&&pa(g,d,b))return-1;var
e=a.coordsAt(c,1);if(e&&pa(g,d,e))return 1;return b&&pf(d,b)?-1:1}function
q8(c,a){var
b=c.posAtCoords({x:a.clientX,y:a.clientY},false);return{pos:b,bias:yB(c,b,a.clientX,a.clientY)}}var
s5=m.ie&&m.ie_version<=11,pF=null,pK=0,pP=0;function
hJ(a){if(!s5)return a.detail;var
b=pF,c=pP;pF=a;pP=Date.now();return pK=!b||c>Date.now()-400&&Math.abs(b.clientX-a.clientX)<2&&Math.abs(b.clientY-a.clientY)<2?(pK+1)%3:1}function
wt(g,a){var
b=q8(g,a),n=hJ(a),e=g.state.selection,m=b,f=a;return{update:function(a){if(a.docChanged){if(b)b.pos=a.changes.mapPos(b.pos);e=e.map(a.changes);f=null}},get:function(h,j,o){var
c;if(f&&h.clientX==f.clientX&&h.clientY==f.clientY)c=m;else{c=m=q8(g,h);f=h}if(!c||!b)return e;var
a=rd(g,c.pos,c.bias,n);if(b.pos!=c.pos&&!j){var
k=rd(g,b.pos,b.bias,n),i=Math.min(k.from,a.from),l=Math.max(k.to,a.to);a=i<a.from?d.range(i,l):d.range(l,i)}if(j)return e.replaceRange(e.main.extend(a.from,a.to));else
if(o)return e.addRange(a);else
return d.create([a])}}}ad.dragstart=function(c,a){var
b=c.state.selection.main,d=c.inputState.mouseSelection;if(d)d.dragging=b;if(a.dataTransfer){a.dataTransfer.setData("Text",c.state.sliceDoc(b.from,b.to));a.dataTransfer.effectAllowed="copyMove"}};function
nU(b,f,h,i){if(!h)return;var
e=b.posAtCoords({x:f.clientX,y:f.clientY},false);f.preventDefault();var
a=b.inputState.mouseSelection,d=i&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,g={from:e,insert:h},c=b.state.changes(d?[d,g]:g);b.focus();b.dispatch({changes:c,selection:{anchor:c.mapPos(e,-1),head:c.mapPos(e,1)},userEvent:d?"move.drop":"input.drop"})}ad.drop=function(c,a){if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();var
b=a.dataTransfer.files;if(b&&b.length)(function(){a.preventDefault();var
f=Array(b.length),h=0,e=function(){if(++h==b.length)nU(c,a,f.filter(function(a){return a!=null}).join(c.state.lineBreak),false)},g=function(c){var
a=new
FileReader();a.onerror=e;a.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(a.result))f[c]=a.result;e()};a.readAsText(b[c])};for(var
d=0;d<b.length;d++)g(d)}());else
nU(c,a,a.dataTransfer.getData("Text"),true)};ad.paste=function(a,b){if(a.state.readOnly)return b.preventDefault();a.observer.flush();var
c=l$?null:b.clipboardData;if(c){nA(a,c.getData("text/plain"));b.preventDefault()}else
wW(a)};function
wR(d,c){var
b=d.dom.parentNode;if(!b)return;var
a=b.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.value=c;a.focus();a.selectionEnd=c.length;a.selectionStart=0;setTimeout(function(){a.remove();d.focus()},50)}function
xp(b){var
f=[],h=[],k=false,d=a(b.selection.ranges),i;try{for(d.s();!(i=d.n()).done;){var
g=i.value;if(!g.empty){f.push(b.sliceDoc(g.from,g.to));h.push(g)}}}catch(a){d.e(a)}finally{d.f()}if(!f.length){var
l=-1,e=a(b.selection.ranges),j;try{for(e.s();!(j=e.n()).done;){var
m=j.value.from,c=b.doc.lineAt(m);if(c.number>l){f.push(c.text);h.push({from:c.from,to:Math.min(b.doc.length,c.to+1)})}l=c.number}}catch(a){e.e(a)}finally{e.f()}k=true}return{text:f.join(b.lineBreak),ranges:h,linewise:k}}var
h$=null;ad.copy=ad.cut=function(b,e){var
c=xp(b.state),a=c.text,g=c.ranges,f=c.linewise;if(!a&&!f)return;h$=f?a:null;var
d=l$?null:e.clipboardData;if(d){e.preventDefault();d.clearData();d.setData("text/plain",a)}else
wR(b,a);if(e.type=="cut"&&!b.state.readOnly)b.dispatch({changes:g,scrollIntoView:true,userEvent:"delete.cut"})};ad.focus=ad.blur=function(a){setTimeout(function(){if(a.hasFocus!=a.inputState.notifiedFocused)a.update([])},10)};ad.beforeprint=function(a){a.viewState.printing=true;a.requestMeasure();setTimeout(function(){a.viewState.printing=false;a.requestMeasure()},2e3)};function
ox(a,b){if(a.docView.compositionDeco.size){a.inputState.rapidCompositionStart=b;try{a.update([])}finally{a.inputState.rapidCompositionStart=false}}}ad.compositionstart=ad.compositionupdate=function(a){if(a.inputState.compositionFirstChange==null)a.inputState.compositionFirstChange=true;if(a.inputState.composing<0){a.inputState.composing=0;if(a.docView.compositionDeco.size){a.observer.flush();ox(a,true)}}};ad.compositionend=function(a){a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionFirstChange=null;setTimeout(function(){if(a.inputState.composing<0)ox(a,false)},50)};ad.contextmenu=function(a){a.inputState.lastContextMenu=Date.now()};ad.beforeinput=function(b,d){var
c,a;if(m.chrome&&m.android&&(a=kr.find(function(a){return a.inputType==d.inputType}))){b.observer.delayAndroidKey(a.key,a.keyCode);if(a.key=="Backspace"||a.key=="Delete"){var
e=((c=window.visualViewport)===null||c===void
0?void
0:c.height)||0;setTimeout(function(){var
a;if((((a=window.visualViewport)===null||a===void
0?void
0:a.height)||0)>e+10&&b.hasFocus){b.contentDOM.blur();b.focus()}},100)}}};var
sT=["pre-wrap","normal","pre-line","break-spaces"],ue=function(){function
a(){b(this,a);this.doc=p.empty;this.lineWrapping=false;this.direction=at.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}c(a,[{key:"heightForGap",value:function(b,c){var
a=this.doc.lineAt(c).number-this.doc.lineAt(b).number+1;if(this.lineWrapping)a+=Math.ceil((c-b-a*this.lineLength*0.5)/this.lineLength);return this.lineHeight*a}},{key:"heightForLine",value:function(a){if(!this.lineWrapping)return this.lineHeight;var
b=1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5)));return b*this.lineHeight}},{key:"setDoc",value:function(a){this.doc=a;return this}},{key:"mustRefreshForStyle",value:function(b,a){return sT.indexOf(b)>-1!=this.lineWrapping||this.direction!=a}},{key:"mustRefreshForHeights",value:function(c){var
d=false;for(var
a=0;a<c.length;a++){var
b=c[a];if(b<0)a++;else
if(!this.heightSamples[Math.floor(b*10)]){d=true;this.heightSamples[Math.floor(b*10)]=true}}return d}},{key:"refresh",value:function(j,c,f,h,i,e){var
g=sT.indexOf(j)>-1,b=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=g||this.direction!=c;this.lineWrapping=g;this.direction=c;this.lineHeight=f;this.charWidth=h;this.lineLength=i;if(b){this.heightSamples={};for(var
a=0;a<e.length;a++){var
d=e[a];if(d<0)a++;else
this.heightSamples[Math.floor(d*10)]=true}}return b}}]);return a}(),uR=function(){function
a(c,d){b(this,a);this.from=c;this.heights=d;this.index=0}c(a,[{key:"more",get:function(){return this.index<this.heights.length}}]);return a}(),b4=function(){function
d(a,e,f,c,g){b(this,d);this.from=a;this.length=e;this.top=f;this.height=c;this.type=g}c(d,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(a){var
b=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new
d(this.from,this.length+a.length,this.top,this.height+a.height,b)}},{key:"moveY",value:function(a){return!a?this:new
d(this.from,this.length,this.top+a,this.height,Array.isArray(this.type)?this.type.map(function(b){return b.moveY(a)}):this.type)}}]);return d}(),E=function(a){a[a["ByPos"]=0]="ByPos";a[a["ByHeight"]=1]="ByHeight";a[a["ByPosNoHeight"]=2]="ByPosNoHeight";return a}(E||(E={})),dH=1e-3,a7=function(){function
f(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;b(this,f);this.length=d;this.height=c;this.flags=a}c(f,[{key:"outdated",get:function(){return(this.flags&2)>0},set:function(a){this.flags=(a?2:0)|this.flags&~2}},{key:"setHeight",value:function(b,a){if(this.height!=a){if(Math.abs(this.height-a)>dH)b.heightChanged=true;this.height=a}}},{key:"replace",value:function(b,c,a){return f.of(a)}},{key:"decomposeLeft",value:function(b,a){a.push(this)}},{key:"decomposeRight",value:function(b,a){a.push(this)}},{key:"applyChanges",value:function(m,i,k,e){var
d=this;for(var
a=e.length-1;a>=0;a--){var
g=e[a],b=g.fromA,f=g.toA,h=g.fromB,l=g.toB,c=d.lineAt(b,E.ByPosNoHeight,i,0,0),j=c.to>=f?c:d.lineAt(f,E.ByPosNoHeight,i,0,0);l+=j.to-f;f=j.to;while(a>0&&c.from<=e[a-1].toA){b=e[a-1].fromA;h=e[a-1].fromB;a--;if(b<c.from)c=d.lineAt(b,E.ByPosNoHeight,i,0,0)}h+=c.from-b;b=c.from;var
n=u3.build(k,m,h,l);d=d.replace(b,f,n)}return d.updateHeight(k,0)}}],[{key:"empty",value:function(){return new
ba(0,0)}},{key:"of",value:function(a){if(a.length==1)return a[0];var
b=0,c=a.length,h=0,g=0;for(;;)if(b==c)if(h>g*2){var
e=a[b-1];if(e["break"])a.splice(--b,1,e.left,null,e.right);else
a.splice(--b,1,e.left,e.right);c+=1+e["break"];h-=e.size}else
if(g>h*2){var
d=a[c];if(d["break"])a.splice(c,1,d.left,null,d.right);else
a.splice(c,1,d.left,d.right);c+=2+d["break"];g-=d.size}else
break;else
if(h<g){var
k=a[b++];if(k)h+=k.size}else{var
j=a[--c];if(j)g+=j.size}var
i=0;if(a[b-1]==null){i=1;b--}else
if(a[b]==null){i=1;c++}return new
t$(f.of(a.slice(0,b)),i,f.of(a.slice(c)))}}]);return f}();a7.prototype.size=1;var
jY=function(d){f(a,d);var
g=e(a);function
a(e,d,f){var
c;b(this,a);c=g.call(this,e,d);c.type=f;return c}c(a,[{key:"blockAt",value:function(d,c,b,a){return new
b4(a,this.length,b,this.height,this.type)}},{key:"lineAt",value:function(e,d,a,c,b){return this.blockAt(0,a,c,b)}},{key:"forEachLine",value:function(e,f,a,d,c,b){b(this.blockAt(0,a,d,c))}},{key:"updateHeight",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=b&&a.more)this.setHeight(c,a.heights[a.index++]);this.outdated=false;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return a}(a7),ba=function(a){f(d,a);var
g=e(d);function
d(e,c){var
a;b(this,d);a=g.call(this,e,c,Q.Text);a.collapsed=0;a.widgetHeight=0;return a}c(d,[{key:"replace",value:function(c,e,b){var
a=b[0];if(b.length==1&&(a
instanceof
d||a
instanceof
b_&&a.flags&4)&&Math.abs(this.length-a.length)<10){if(a
instanceof
b_)a=new
d(a.length,this.height);else
a.height=this.height;if(!this.outdated)a.outdated=false;return a}else
return a7.of(b)}},{key:"updateHeight",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=d&&a.more)this.setHeight(b,a.heights[a.index++]);else
if(c||this.outdated)this.setHeight(b,Math.max(this.widgetHeight,b.heightForLine(this.length-this.collapsed)));this.outdated=false;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return d}(jY),b_=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,c,0)}c(a,[{key:"lines",value:function(a,d){var
b=a.lineAt(d).number,c=a.lineAt(d+this.length).number;return{firstLine:b,lastLine:c,lineHeight:this.height/(c-b+1)}}},{key:"blockAt",value:function(i,d,g,l){var
a=this.lines(d,l),e=a.firstLine,j=a.lastLine,b=a.lineHeight,f=Math.max(0,Math.min(j-e,Math.floor((i-g)/b))),c=d.line(e+f),h=c.from,k=c.length;return new
b4(h,k,g+b*f,b,Q.Text)}},{key:"lineAt",value:function(c,j,a,i,h){if(j==E.ByHeight)return this.blockAt(c,a,i,h);if(j==E.ByPosNoHeight){var
d=a.lineAt(c),f=d.from,o=d.to;return new
b4(f,o-f,0,0,Q.Text)}var
e=this.lines(a,h),k=e.firstLine,g=e.lineHeight,b=a.lineAt(c),l=b.from,m=b.length,n=b.number;return new
b4(l,m,i+g*(n-k),g,Q.Text)}},{key:"forEachLine",value:function(h,l,g,e,d,j){var
f=this.lines(g,d),k=f.firstLine,c=f.lineHeight;for(var
b=Math.max(h,d),i=Math.min(d+this.length,l);b<=i;){var
a=g.lineAt(b);if(b==h)e+=c*(a.number-k);j(new
b4(a.from,a.length,e,c,Q.Text));e+=c;b=a.to+1}}},{key:"replace",value:function(d,g,b){var
c=this.length-g;if(c>0){var
f=b[b.length-1];if(f
instanceof
a)b[b.length-1]=new
a(f.length+c);else
b.push(null,new
a(c-1))}if(d>0){var
e=b[0];if(e
instanceof
a)b[0]=new
a(d+e.length);else
b.unshift(new
a(d-1),null)}return a7.of(b)}},{key:"decomposeLeft",value:function(c,b){b.push(new
a(c-1),null)}},{key:"decomposeRight",value:function(b,c){c.push(null,new
a(this.length-b-1))}},{key:"updateHeight",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,b=arguments.length>3?arguments[3]:undefined,h=c+this.length;if(b&&b.from<=c+this.length&&b.more){var
e=[],f=Math.max(c,b.from),g=-1,n=d.heightChanged;if(b.from>c)e.push(new
a(b.from-c-1).updateHeight(d,c));while(f<=h&&b.more){var
j=d.doc.lineAt(f).length;if(e.length)e.push(null);var
i=b.heights[b.index++];if(g==-1)g=i;else
if(Math.abs(i-g)>=dH)g=-2;var
k=new
ba(j,i);k.outdated=false;e.push(k);f+=j+1}if(f<=h)e.push(null,new
a(h-f).updateHeight(d,f));var
l=a7.of(e);d.heightChanged=n||g<0||Math.abs(l.height-this.height)>=dH||Math.abs(g-this.lines(d.doc,c).lineHeight)>=dH;return l}else
if(m||this.outdated){this.setHeight(d,d.heightForGap(c,c+this.length));this.outdated=false}return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return a}(a7),t$=function(d){f(g,d);var
h=e(g);function
g(c,e,d){var
a;b(this,g);a=h.call(this,c.length+e+d.length,c.height+d.height,e|(c.outdated||d.outdated?2:0));a.left=c;a.right=d;a.size=c.size+d.size;return a}c(g,[{key:"break",get:function(){return this.flags&1}},{key:"blockAt",value:function(a,b,e,d){var
c=e+this.left.height;return a<c?this.left.blockAt(a,b,e,d):this.right.blockAt(a,b,c,d+this.left.length+this["break"])}},{key:"lineAt",value:function(e,d,c,i,g){var
h=i+this.left.height,a=g+this.left.length+this["break"],f=d==E.ByHeight?e<h:e<a,b=f?this.left.lineAt(e,d,c,i,g):this.right.lineAt(e,d,c,h,a);if(this["break"]||(f?b.to<a:b.from>a))return b;var
j=d==E.ByPosNoHeight?E.ByPosNoHeight:E.ByPos;return f?b.join(this.right.lineAt(a,j,c,h,a)):this.left.lineAt(a,j,c,i,g).join(b)}},{key:"forEachLine",value:function(b,c,d,h,g,e){var
i=h+this.left.height,f=g+this.left.length+this["break"];if(this["break"]){if(b<f)this.left.forEachLine(b,c,d,h,g,e);if(c>=f)this.right.forEachLine(b,c,d,i,f,e)}else{var
a=this.lineAt(f,E.ByPos,d,h,g);if(b<a.from)this.left.forEachLine(b,a.from-1,d,h,g,e);if(a.to>=b&&a.from<=c)e(a);if(c>a.to)this.right.forEachLine(a.to+1,c,d,i,f,e)}}},{key:"replace",value:function(c,d,f){var
g=this.left.length+this["break"];if(d<g)return this.balanced(this.left.replace(c,d,f),this.right);if(c>this.left.length)return this.balanced(this.left,this.right.replace(c-g,d-g,f));var
b=[];if(c>0)this.decomposeLeft(c,b);var
i=b.length,e=a(f),h;try{for(e.s();!(h=e.n()).done;){var
j=h.value;b.push(j)}}catch(a){e.e(a)}finally{e.f()}if(c>0)qh(b,i-1);if(d<this.length){var
k=b.length;this.decomposeRight(d,b);qh(b,k)}return a7.of(b)}},{key:"decomposeLeft",value:function(b,c){var
a=this.left.length;if(b<=a)return this.left.decomposeLeft(b,c);c.push(this.left);if(this["break"]){a++;if(b>=a)c.push(null)}if(b>a)this.right.decomposeLeft(b-a,c)}},{key:"decomposeRight",value:function(a,b){var
d=this.left.length,c=d+this["break"];if(a>=c)return this.right.decomposeRight(a-c,b);if(a<d)this.left.decomposeRight(a,b);if(this["break"]&&a<c)b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return a7.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(f){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined,b=this.left,c=this.right,h=e+b.length+this["break"],g=null;if(a&&a.from<=e+b.length&&a.more)g=b=b.updateHeight(f,e,d,a);else
b.updateHeight(f,e,d);if(a&&a.from<=h+c.length&&a.more)g=c=c.updateHeight(f,h,d,a);else
c.updateHeight(f,h,d);if(g)return this.balanced(b,c);this.height=this.left.height+this.right.height;this.outdated=false;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}}]);return g}(a7);function
qh(b,a){var
d,c;if(b[a]==null&&(d=b[a-1])instanceof
b_&&(c=b[a+1])instanceof
b_)b.splice(a-1,3,new
b_(d.length+1+c.length))}var
BM=5,u3=function(){function
d(a,c){b(this,d);this.pos=a;this.oracle=c;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=a}c(d,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(d,b){if(this.lineStart>-1){var
a=Math.min(b,this.lineEnd),c=this.nodes[this.nodes.length-1];if(c
instanceof
ba)c.length+=a-this.pos;else
if(a>this.pos||!this.isCovered)this.nodes.push(new
ba(a-this.pos,-1));this.writtenTo=a;if(b>a){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=b}},{key:"point",value:function(c,d,a){if(c<d||a.heightRelevant){var
b=a.widget?a.widget.estimatedHeight:0;if(b<0)b=this.oracle.lineHeight;var
e=d-c;if(a.block)this.addBlock(new
jY(e,b,a.type));else
if(e||b>=BM)this.addLineDeco(b,e)}else
if(d>c)this.span(c,d);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}},{key:"enterLine",value:function(){if(this.lineStart>-1)return;var
b=this.oracle.doc.lineAt(this.pos),a=b.from,c=b.to;this.lineStart=a;this.lineEnd=c;if(this.writtenTo<a){if(this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,a-1));this.nodes.push(null)}if(this.pos>a)this.nodes.push(new
ba(this.pos-a,-1));this.writtenTo=this.pos}},{key:"blankContent",value:function(a,c){var
b=new
b_(c-a);if(this.oracle.doc.lineAt(a).to==c)b.flags|=4;return b}},{key:"ensureLine",value:function(){this.enterLine();var
a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a
instanceof
ba)return a;var
b=new
ba(0,-1);this.nodes.push(b);return b}},{key:"addBlock",value:function(a){this.enterLine();if(a.type==Q.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos=this.pos+a.length;if(a.type!=Q.WidgetBefore)this.covering=a}},{key:"addLineDeco",value:function(c,b){var
a=this.ensureLine();a.length+=b;a.collapsed+=b;a.widgetHeight=Math.max(a.widgetHeight,c);this.writtenTo=this.pos=this.pos+b}},{key:"finish",value:function(g){var
e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e
instanceof
ba)&&!this.isCovered)this.nodes.push(new
ba(0,-1));else
if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var
f=g,b=a(this.nodes),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c
instanceof
ba)c.updateHeight(this.oracle,f);f+=c?c.length:1}}catch(a){b.e(a)}finally{b.f()}return this.nodes}}],[{key:"build",value:function(e,c,a,f){var
b=new
d(a,e);k.spans(c,a,f,b,0);return b.finish(a)}}]);return d}();function
zs(b,c,d){var
a=new
tW();k.compare(b,c,d,a,0);return a.changes}var
tW=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,d,a,b){if(c<d||a&&a.heightRelevant||b&&b.heightRelevant)gx(c,d,this.changes,5)}}]);return a}();function
C3(h,k){var
c=h.getBoundingClientRect(),d=Math.max(0,c.left),i=Math.min(innerWidth,c.right),f=Math.max(0,c.top),g=Math.min(innerHeight,c.bottom),l=h.ownerDocument.body;for(var
b=h.parentNode;b&&b!=l;)if(b.nodeType==1){var
a=b,j=window.getComputedStyle(a);if((a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)&&j.overflow!="visible"){var
e=a.getBoundingClientRect();d=Math.max(d,e.left);i=Math.min(i,e.right);f=Math.max(f,e.top);g=Math.min(g,e.bottom)}b=j.position=="absolute"||j.position=="fixed"?a.offsetParent:a.parentNode}else
if(b.nodeType==11)b=b.host;else
break;return{left:d-c.left,right:Math.max(d,i)-c.left,top:f-(c.top+k),bottom:Math.max(f,g)-(c.top+k)}}var
fO=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.size=d}c(a,[{key:"draw",value:function(a){return am.replace({widget:new
us(this.size,a)}).range(this.from,this.to)}}],[{key:"same",value:function(b,e){if(b.length!=e.length)return false;for(var
a=0;a<b.length;a++){var
c=b[a],d=e[a];if(c.from!=d.from||c.to!=d.to||c.size!=d.size)return false}return true}}]);return a}(),us=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.size=d;c.vertical=e;return c}c(a,[{key:"eq",value:function(a){return a.size==this.size&&a.vertical==this.vertical}},{key:"toDOM",value:function(){var
a=document.createElement("div");if(this.vertical)a.style.height=this.size+"px";else{a.style.width=this.size+"px";a.style.height="2px";a.style.display="inline-block"}return a}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(d$),kL=function(){function
d(a){b(this,d);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentDOMWidth=0;this.contentDOMHeight=0;this.editorHeight=0;this.editorWidth=0;this.heightOracle=new
ue();this.scaler=j3;this.scrollTarget=null;this.printing=false;this.mustMeasureContent=true;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=a7.empty().applyChanges(a.facet(bL),p.empty,this.heightOracle.setDoc(a.doc),[new
cw(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateViewportLines();this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=am.set(this.lineGaps.map(function(a){return a.draw(false)}));this.computeVisibleRanges()}c(d,[{key:"updateForViewport",value:function(){var
h=this,b=[this.viewport],d=this.state.selection.main,c=function(e){var
a=e?d.head:d.anchor;if(!b.some(function(b){var
c=b.from,d=b.to;return a>=c&&a<=d})){var
c=h.lineBlockAt(a),f=c.from,g=c.to;b.push(new
d8(f,g))}};for(var
a=0;a<=1;a++)c(a);this.viewports=b.sort(function(a,b){return a.from-b.from});this.scaler=this.heightMap.height<=7e6?j3:new
td(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var
a=this;this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(b){a.viewportLines.push(a.scaler.scale==1?b:da(b,a.scaler))})}},{key:"update",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,g=this.state;this.state=a.state;var
e=this.state.facet(bL),f=a.changedRanges,d=cw.extendWithRanges(f,zs(a.startState.facet(bL),e,a?a.changes:X.empty(this.state.doc.length))),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,g.doc,this.heightOracle.setDoc(this.state.doc),d);if(this.heightMap.height!=h)a.flags|=2;var
b=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(c&&(c.range.head<b.from||c.range.head>b.to)||!this.viewportIsAppropriate(b))b=this.getViewport(0,c);var
i=!a.changes.empty||a.flags&2||b.from!=this.viewport.from||b.to!=this.viewport.to;this.viewport=b;this.updateForViewport();if(i)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();if(c)this.scrollTarget=c;if(!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc)this.mustEnforceCursorAssoc=true}},{key:"measure",value:function(a){var
e=a.contentDOM,j=window.getComputedStyle(e),b=this.heightOracle,u=j.whiteSpace,q=j.direction=="rtl"?at.RTL:at.LTR,c=this.heightOracle.mustRefreshForStyle(u,q),m=c||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,d=0,f=0;if(m){this.mustMeasureContent=false;this.contentDOMHeight=e.clientHeight;var
s=parseInt(j.paddingTop)||0,r=parseInt(j.paddingBottom)||0;if(this.paddingTop!=s||this.paddingBottom!=r){d|=8;this.paddingTop=s;this.paddingBottom=r}}var
n=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:C3(e,this.paddingTop),i=n.top-this.pixelViewport.top,h=n.bottom-this.pixelViewport.bottom;this.pixelViewport=n;var
k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView){this.inView=k;if(k)m=true}if(!this.inView)return 0;var
g=e.clientWidth;if(this.contentDOMWidth!=g||this.editorHeight!=a.scrollDOM.clientHeight||this.editorWidth!=a.scrollDOM.clientWidth){this.contentDOMWidth=g;this.editorHeight=a.scrollDOM.clientHeight;this.editorWidth=a.scrollDOM.clientWidth;d|=8}if(m){var
l=a.docView.measureVisibleLineHeights();if(b.mustRefreshForHeights(l))c=true;if(c||b.lineWrapping&&Math.abs(g-this.contentDOMWidth)>b.charWidth){var
o=a.docView.measureTextSize(),v=o.lineHeight,p=o.charWidth;c=b.refresh(u,q,v,p,g/p,l);if(c){a.docView.minWidth=0;d|=8}}if(i>0&&h>0)f=Math.max(i,h);else
if(i<0&&h<0)f=Math.min(i,h);b.heightChanged=false;this.heightMap=this.heightMap.updateHeight(b,0,c,new
uR(this.viewport.from,l));if(b.heightChanged)d|=2}var
t=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(t)this.viewport=this.getViewport(f,this.scrollTarget);this.updateForViewport();if(d&2||t)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps));d|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;a.docView.enforceCursorAssoc()}return d}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(j,c){var
i=0.5-Math.max(-0.5,Math.min(0.5,j/1e3/2)),b=this.heightMap,a=this.state.doc,l=this.visibleTop,k=this.visibleBottom,e=new
d8(b.lineAt(l-i*1e3,E.ByHeight,a,0,0).from,b.lineAt(k+(1-i)*1e3,E.ByHeight,a,0,0).to);if(c){var
g=c.range.head,h=this.editorHeight;if(g<e.from||g>e.to){var
f=b.lineAt(g,E.ByPos,a,0,0),d;if(c.y=="center")d=(f.top+f.bottom)/2-h/2;else
if(c.y=="start"||c.y=="nearest"&&g<e.from)d=f.top;else
d=f.bottom-h;e=new
d8(b.lineAt(d-1e3/2,E.ByHeight,a,0,0).from,b.lineAt(d+h+1e3/2,E.ByHeight,a,0,0).to)}}return e}},{key:"mapViewport",value:function(b,a){var
c=a.mapPos(b.from,-1),d=a.mapPos(b.to,1);return new
d8(this.heightMap.lineAt(c,E.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,E.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var
d=a.from,e=a.to,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!this.inView)return true;var
i=this.heightMap.lineAt(d,E.ByPos,this.state.doc,0,0),f=i.top,j=this.heightMap.lineAt(e,E.ByPos,this.state.doc,0,0),c=j.bottom,h=this.visibleTop,g=this.visibleBottom;return(d==0||f<=h-Math.max(10,Math.min(-b,250)))&&(e==this.state.doc.length||c>=g+Math.max(10,Math.min(b,250)))&&f>h-2*1e3&&c<g+2*1e3}},{key:"mapLineGaps",value:function(e,d){if(!e.length||d.empty)return e;var
g=[],c=a(e),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(!d.touchesRange(b.from,b.to))g.push(new
fO(d.mapPos(b.from),d.mapPos(b.to),b.size))}}catch(a){c.e(a)}finally{c.f()}return g}},{key:"ensureLineGaps",value:function(p){var
b=this,i=[];if(this.heightOracle.direction!=at.LTR)return i;var
c=a(this.viewportLines),n;try{var
d=function(){var
a=n.value;if(a.length<4e3)return"continue";var
d=Ao(a.from,a.to,b.state);if(d.total<4e3)return"continue";var
f=void
0,g=void
0;if(b.heightOracle.lineWrapping){var
k=2e3/b.heightOracle.lineLength*b.heightOracle.lineHeight;f=er(d,(b.visibleTop-a.top-k)/a.height);g=er(d,(b.visibleBottom-a.top+k)/a.height)}else{var
m=d.total*b.heightOracle.charWidth,l=2e3*b.heightOracle.charWidth;f=er(d,(b.pixelViewport.left-l)/m);g=er(d,(b.pixelViewport.right+l)/m)}var
e=[];if(f>a.from)e.push({from:a.from,to:f});if(g<a.to)e.push({from:g,to:a.to});var
c=b.state.selection.main;if(c.from>=a.from&&c.from<=a.to)nb(e,c.from-10,c.from+10);if(!c.empty&&c.to>=a.from&&c.to<=a.to)nb(e,c.to-10,c.to+10);var
o=function(){var
f=j[h],c=f.from,e=f.to;if(e-c>1e3)i.push(yk(p,function(b){return b.from>=a.from&&b.to<=a.to&&Math.abs(b.from-c)<1e3&&Math.abs(b.to-e)<1e3})||new
fO(c,e,b.gapSize(a,c,e,d)))};for(var
h=0,j=e;h<j.length;h++)o()};for(c.s();!(n=c.n()).done;){var
e=d();if(e==="continue")continue}}catch(a){c.e(a)}finally{c.f()}return i}},{key:"gapSize",value:function(d,c,e,a){var
b=ok(a,e)-ok(a,c);return this.heightOracle.lineWrapping?d.height*b:a.total*this.heightOracle.charWidth*b}},{key:"updateLineGaps",value:function(a){var
b=this;if(!fO.same(a,this.lineGaps)){this.lineGaps=a;this.lineGapDeco=am.set(a.map(function(a){return a.draw(b.heightOracle.lineWrapping)}))}}},{key:"computeVisibleRanges",value:function(){var
b=this.state.facet(bL);if(this.lineGaps.length)b=b.concat(this.lineGapDeco);var
a=[];k.spans(b,this.viewport.from,this.viewport.to,{span:function(b,c){a.push({from:b,to:c})},point:function(){}},20);var
c=a.length!=this.visibleRanges.length||this.visibleRanges.some(function(c,b){return c.from!=a[b].from||c.to!=a[b].to});this.visibleRanges=a;return c?4:0}},{key:"lineBlockAt",value:function(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(function(b){return b.from<=a&&b.to>=a})||da(this.heightMap.lineAt(a,E.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(a){return da(this.heightMap.lineAt(this.scaler.fromDOM(a),E.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(a){return da(this.heightMap.blockAt(this.scaler.fromDOM(a),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]);return d}(),d8=c(function
a(c,d){b(this,a);this.from=c;this.to=d});function
Ao(e,b,f){var
c=[],a=e,d=0;k.spans(f.facet(bL),e,b,{span:function(){},point:function(b,e){if(b>a){c.push({from:a,to:b});d+=b-a}a=e}},20);if(a<b){c.push({from:a,to:b});d+=b-a}return{total:d,ranges:c}}function
er(f,c){var
j=f.total,a=f.ranges;if(c<=0)return a[0].from;if(c>=1)return a[a.length-1].to;var
b=Math.floor(j*c);for(var
d=0;;d++){var
e=a[d],g=e.from,i=e.to,h=i-g;if(b<=h)return g+b;b-=h}}function
ok(h,g){var
c=0,b=a(h.ranges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,f=e.from,i=e.to;if(g<=i){c+=g-f;break}c+=i-f}}catch(a){b.e(a)}finally{b.f()}return c/h.total}function
nb(d,e,f){for(var
b=0;b<d.length;b++){var
a=d[b];if(a.from<f&&a.to>e){var
c=[];if(a.from<e)c.push({from:a.from,to:e});if(a.to>f)c.push({from:f,to:a.to});d.splice.apply(d,[b,1].concat(c));b+=c.length-1}}}function
yk(e,f){var
b=a(e),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(f(d))return d}}catch(a){b.e(a)}finally{b.f()}return void
0}var
j3={toDOM:function(a){return a},fromDOM:function(a){return a},scale:1},td=function(){function
g(j,e,l){b(this,g);var
f=0,i=0,k=0;this.viewports=l.map(function(a){var
c=a.from,d=a.to,g=e.lineAt(c,E.ByPos,j,0,0).top,b=e.lineAt(d,E.ByPos,j,0,0).bottom;f+=b-g;return{from:c,to:d,top:g,bottom:b,domTop:0,domBottom:0}});this.scale=(7e6-f)/(e.height-f);var
d=a(this.viewports),h;try{for(d.s();!(h=d.n()).done;){var
c=h.value;c.domTop=k+(c.top-i)*this.scale;k=c.domBottom=c.domTop+(c.bottom-c.top);i=c.bottom}}catch(a){d.e(a)}finally{d.f()}}c(g,[{key:"toDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.top)return e+(b-d)*this.scale;if(b<=a.bottom)return a.domTop+(b-a.top);d=a.bottom;e=a.domBottom}}},{key:"fromDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.domTop)return d+(b-e)/this.scale;if(b<=a.domBottom)return a.top+(b-a.domTop);d=a.bottom;e=a.domBottom}}}]);return g}();function
da(a,b){if(b.scale==1)return a;var
c=b.toDOM(a.top),d=b.toDOM(a.bottom);return new
b4(a.from,a.length,c,d-c,Array.isArray(a.type)?a.type.map(function(a){return da(a,b)}):a.type)}var
sh=h.define({combine:function(a){return a.join(" ")}}),hc=h.define({combine:function(a){return a.indexOf(true)>-1}}),gK=y.newName(),l2=y.newName(),lX=y.newName(),pZ={"&light":"."+l2,"&dark":"."+lX};function
gQ(c,a,b){return new
y(a,{finish:function(a){return/&/.test(a)?a.replace(/&\w*/,function(a){if(a=="&")return c;if(!b||!b[a])throw new
RangeError("Unsupported selector: ".concat(a));return b[a]}):c+" "+a}})}var
wk=gQ("."+gK,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pZ),Bw={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true},i4=m.ie&&m.ie_version<=11,tG=function(){function
e(d,f,g){var
c=this;b(this,e);this.view=d;this.onChange=f;this.onScrollChanged=g;this.active=false;this.selectionRange=new
tM();this.selectionChanged=false;this.delayedFlush=-1;this.resizeTimeout=-1;this.queue=[];this.delayedAndroidKey=null;this.scrollTargets=[];this.intersection=null;this.resize=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this.parentCheck=-1;this.dom=d.contentDOM;this.observer=new
MutationObserver(function(f){var
b=a(f),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;c.queue.push(g)}}catch(a){b.e(a)}finally{b.f()}if((m.ie&&m.ie_version<=11||m.ios&&d.composing)&&f.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length}))c.flushSoon();else
c.flush()});if(i4)this.onCharData=function(a){c.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue});c.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);if(typeof
ResizeObserver=="function"){this.resize=new
ResizeObserver(function(){if(c.view.docView.lastUpdate<Date.now()-75&&c.resizeTimeout<0)c.resizeTimeout=setTimeout(function(){c.resizeTimeout=-1;c.view.requestMeasure()},50)});this.resize.observe(d.scrollDOM)}this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof
IntersectionObserver=="function"){this.intersection=new
IntersectionObserver(function(a){if(c.parentCheck<0)c.parentCheck=setTimeout(c.listenForScroll.bind(c),1e3);if(a.length>0&&a[a.length-1].intersectionRatio>0!=c.intersecting){c.intersecting=!c.intersecting;if(c.intersecting!=c.view.inView)c.onScrollChanged(document.createEvent("Event"))}},{});this.intersection.observe(this.dom);this.gapIntersection=new
IntersectionObserver(function(a){if(a.length>0&&a[a.length-1].intersectionRatio>0)c.onScrollChanged(document.createEvent("Event"))},{})}this.listenForScroll();this.readSelectionRange();this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}c(e,[{key:"onScroll",value:function(a){if(this.intersecting)this.flush(false);this.onScrollChanged(a)}},{key:"updateGaps",value:function(c){if(this.gapIntersection&&(c.length!=this.gaps.length||this.gaps.some(function(a,b){return a!=c[b]}))){this.gapIntersection.disconnect();var
b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;this.gapIntersection.observe(e)}}catch(a){b.e(a)}finally{b.f()}this.gaps=c}}},{key:"onSelectionChange",value:function(d){if(!this.readSelectionRange()||this.delayedAndroidKey)return;var
b=this.view,a=this.selectionRange;if(b.state.facet(c2)?b.root.activeElement!=this.dom:!hT(b.dom,a))return;var
c=a.anchorNode&&b.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(d))return;if((m.ie&&m.ie_version<=11||m.android&&m.chrome)&&!b.state.selection.main.empty&&a.focusNode&&eS(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))this.flushSoon();else
this.flush(false)}},{key:"readSelectionRange",value:function(){var
b=this.view.root,c=eF(b),a=m.safari&&b.nodeType==11&&xJ()==this.view.contentDOM&&BV(this.view)||c;if(this.selectionRange.eq(a))return false;this.selectionRange.setRange(a);return this.selectionChanged=true}},{key:"setSelectionRange",value:function(a,b){this.selectionRange.set(a.node,a.offset,b.node,b.offset);this.selectionChanged=false}},{key:"listenForScroll",value:function(){this.parentCheck=-1;var
d=0,c=null;for(var
b=this.dom;b;)if(b.nodeType==1){if(!c&&d<this.scrollTargets.length&&this.scrollTargets[d]==b)d++;else
if(!c)c=this.scrollTargets.slice(0,d);if(c)c.push(b);b=b.assignedSlot||b.parentNode}else
if(b.nodeType==11)b=b.host;else
break;if(d<this.scrollTargets.length&&!c)c=this.scrollTargets.slice(0,d);if(c){var
e=a(this.scrollTargets),g;try{for(e.s();!(g=e.n()).done;){var
i=g.value;i.removeEventListener("scroll",this.onScroll)}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.scrollTargets=c),h;try{for(f.s();!(h=f.n()).done;){var
j=h.value;j.addEventListener("scroll",this.onScroll)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{this.stop();return a()}finally{this.start();this.clear()}}},{key:"start",value:function(){if(this.active)return;this.observer.observe(this.dom,Bw);if(i4)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true}},{key:"stop",value:function(){if(!this.active)return;this.active=false;this.observer.disconnect();if(i4)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.selectionChanged=false}},{key:"delayAndroidKey",value:function(b,c){var
a=this;if(!this.delayedAndroidKey)requestAnimationFrame(function(){var
b=a.delayedAndroidKey;a.delayedAndroidKey=null;var
c=a.view.state;if(cX(a.view.contentDOM,b.key,b.keyCode))a.processRecords();else
a.flush();if(a.view.state==c)a.view.update([])});if(!this.delayedAndroidKey||b=="Enter")this.delayedAndroidKey={key:b,keyCode:c}}},{key:"flushSoon",value:function(){var
a=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20)}},{key:"forceFlush",value:function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}}},{key:"processRecords",value:function(){var
g=this.queue,d=a(this.observer.takeRecords()),h;try{for(d.s();!(h=d.n()).done;){var
k=h.value;g.push(k)}}catch(a){d.e(a)}finally{d.f()}if(g.length)this.queue=[];var
c=-1,f=-1,j=false,e=a(g),i;try{for(e.s();!(i=e.n()).done;){var
l=i.value,b=this.readMutation(l);if(!b)continue;if(b.typeOver)j=true;if(c==-1){c=b.from;f=b.to}else{c=Math.min(b.from,c);f=Math.max(b.to,f)}}}catch(a){e.e(a)}finally{e.f()}return{from:c,to:f,typeOver:j}}},{key:"flush",value:function(){var
d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.delayedFlush>=0||this.delayedAndroidKey)return;if(d)this.readSelectionRange();var
a=this.processRecords(),b=a.from,f=a.to,g=a.typeOver,c=this.selectionChanged&&hT(this.dom,this.selectionRange);if(b<0&&!c)return;this.selectionChanged=false;var
e=this.view.state;this.onChange(b,f,g);if(this.view.state==e)this.view.update([])}},{key:"readMutation",value:function(b){var
a=this.view.docView.nearest(b.target);if(!a||a.ignoreMutation(b))return null;a.markDirty(b.type=="attributes");if(b.type=="attributes")a.dirty|=4;if(b.type=="childList"){var
d=of(a,b.previousSibling||b.target.previousSibling,-1),c=of(a,b.nextSibling||b.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:false}}else
if(b.type=="characterData")return{from:a.posAtStart,to:a.posAtEnd,typeOver:b.target.nodeValue==b.oldValue};else
return null}},{key:"destroy",value:function(){var
c,d,e;this.stop();(c=this.intersection)===null||c===void
0?void
0:c.disconnect();(d=this.gapIntersection)===null||d===void
0?void
0:d.disconnect();(e=this.resize)===null||e===void
0?void
0:e.disconnect();var
b=a(this.scrollTargets),f;try{for(b.s();!(f=b.n()).done;){var
g=f.value;g.removeEventListener("scroll",this.onScroll)}}catch(a){b.e(a)}finally{b.f()}window.removeEventListener("scroll",this.onScroll);this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout)}}]);return e}();function
of(c,a,e){while(a){var
b=Z.get(a);if(b&&b.parent==c)return b;var
d=a.parentNode;a=d!=c.dom?d:e>0?a.nextSibling:a.previousSibling}return null}function
BV(e){var
a=null;function
i(b){b.preventDefault();b.stopImmediatePropagation();a=b.getTargetRanges()[0]}e.contentDOM.addEventListener("beforeinput",i,true);document.execCommand("indent");e.contentDOM.removeEventListener("beforeinput",i,true);if(!a)return null;var
f=a.startContainer,g=a.startOffset,c=a.endContainer,d=a.endOffset,h=e.docView.domAtPos(e.state.selection.main.anchor);if(eS(h.node,h.offset,c,d)){var
b=[c,d,f,g];f=b[0];g=b[1];c=b[2];d=b[3]}return{anchorNode:f,anchorOffset:g,focusNode:c,focusOffset:d}}function
v$(a,C,H,K){var
b,e,c=a.state.selection.main;if(C>-1){var
j=a.docView.domBoundsAround(C,H,0);if(!j||a.state.readOnly)return;var
h=j.from,D=j.to,B=a.docView.impreciseHead||a.docView.impreciseAnchor?[]:Cw(a),n=new
jJ(B,a);n.readRange(j.startDOM,j.endDOM);e=Cr(B,h);var
x=c.from,y=null;if(a.inputState.lastKeyCode===8&&a.inputState.lastKeyTime>Date.now()-100||m.android&&n.text.length<D-h){x=c.to;y="end"}var
k=yv(a.state.sliceDoc(h,D),n.text,x-h,y);if(k)b={from:h+k.from,to:h+k.toA,insert:a.state.toText(n.text.slice(k.from,k.toB))}}else
if(a.hasFocus||!a.state.facet(c2)){var
f=a.observer.selectionRange,u=a.docView,r=u.impreciseHead,q=u.impreciseAnchor,w=r&&r.node==f.focusNode&&r.offset==f.focusOffset||!g8(a.contentDOM,f.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(f.focusNode,f.focusOffset),v=q&&q.node==f.anchorNode&&q.offset==f.anchorOffset||!g8(a.contentDOM,f.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(f.anchorNode,f.anchorOffset);if(w!=c.head||v!=c.anchor)e=d.single(v,w)}if(!b&&!e)return;if(!b&&K&&!c.empty&&e&&e.main.empty)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,c.to)};else
if(b&&b.from>=c.from&&b.to<=c.to&&(b.from!=c.from||b.to!=c.to)&&c.to-c.from-(b.to-b.from)<=4)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,b.from).append(b.insert).append(a.state.doc.slice(b.to,c.to))};if(b){var
g=a.state;if(m.ios&&a.inputState.flushIOSKey(a))return;if(m.android&&(b.from==c.from&&b.to==c.to&&b.insert.length==1&&b.insert.lines==2&&cX(a.contentDOM,"Enter",13)||b.from==c.from-1&&b.to==c.to&&b.insert.length==0&&cX(a.contentDOM,"Backspace",8)||b.from==c.from&&b.to==c.to+1&&b.insert.length==0&&cX(a.contentDOM,"Delete",46)))return;var
E=b.insert.toString();if(a.state.facet(o7).some(function(c){return c(a,b.from,b.to,E)}))return;if(a.inputState.composing>=0)a.inputState.composing++;var
o;if(b.from>=c.from&&b.to<=c.to&&b.to-b.from>=(c.to-c.from)/3&&(!e||e.main.empty&&e.main.from==b.from+b.insert.length)&&a.inputState.composing<0){var
G=c.from<b.from?g.sliceDoc(c.from,b.from):"",F=c.to>b.to?g.sliceDoc(b.to,c.to):"";o=g.replaceSelection(a.state.toText(G+b.insert.sliceString(0,void
0,a.state.lineBreak)+F))}else{var
l=g.changes(b),i=e&&!g.selection.main.eq(e.main)&&e.main.to<=l.newLength?e.main:void
0;if(g.selection.ranges.length>1&&a.inputState.composing>=0&&b.to<=c.to&&b.to>=c.to-10){var
z=a.state.sliceDoc(b.from,b.to),p=mE(a)||a.state.doc.lineAt(c.head),I=c.to-b.to,J=c.to-c.from;o=g.changeByRange(function(e){if(e.from==c.from&&e.to==c.to)return{changes:l,range:i||e.map(l)};var
f=e.to-I,h=f-z.length;if(e.to-e.from!=J||a.state.sliceDoc(h,f)!=z||p&&e.to>=p.from&&e.from<=p.to)return{range:e};var
j=g.changes({from:h,to:f,insert:b.insert}),k=e.to-c.to;return{changes:j,range:!i?e.map(j):d.range(Math.max(0,i.anchor+k),Math.max(0,i.head+k))}})}else
o={changes:l,selection:i&&g.selection.replaceRange(i)}}var
s="input.type";if(a.composing){s+=".compose";if(a.inputState.compositionFirstChange){s+=".start";a.inputState.compositionFirstChange=false}}a.dispatch(o,{scrollIntoView:true,userEvent:s})}else
if(e&&!e.main.eq(c)){var
A=false,t="select";if(a.inputState.lastSelectionTime>Date.now()-50){if(a.inputState.lastSelectionOrigin=="select")A=true;t=a.inputState.lastSelectionOrigin}a.dispatch({selection:e,scrollIntoView:A,userEvent:t})}}function
yv(e,f,d,k){var
g=Math.min(e.length,f.length),a=0;while(a<g&&e.charCodeAt(a)==f.charCodeAt(a))a++;if(a==g&&e.length==f.length)return null;var
b=e.length,c=f.length;while(b>0&&c>0&&e.charCodeAt(b-1)==f.charCodeAt(c-1)){b--;c--}if(k=="end"){var
i=Math.max(0,a-Math.min(b,c));d-=b+i-a}if(b<a&&e.length<f.length){var
j=d<=a&&d>=b?a-d:0;a-=j;c=a+(c-b);b=a}else
if(c<a){var
h=d<=a&&d>=c?a-d:0;a-=h;b=a+(b-c);c=a}return{from:a,toA:b,toB:c}}function
Cw(d){var
b=[];if(d.root.activeElement!=d.contentDOM)return b;var
a=d.observer.selectionRange,c=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(c){b.push(new
jF(c,e));if(f!=c||g!=e)b.push(new
jF(f,g))}return b}function
Cr(a,c){if(a.length==0)return null;var
b=a[0].pos,e=a.length==2?a[1].pos:b;return b>-1&&e>-1?d.single(b+c,e+c):null}var
ai=function(){function
f(){var
c=this,d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,f);this.plugins=[];this.pluginMap=new
Map();this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(a){return c.update([a])};this.dispatch=this.dispatch.bind(this);this.root=d.root||yV(d.parent)||document;this.viewState=new
kL(d.state||u.create());this.plugins=this.state.facet(dz).map(function(a){return new
fW(a)});var
e=a(this.plugins),g;try{for(e.s();!(g=e.n()).done;){var
h=g.value;h.update(this)}}catch(a){e.e(a)}finally{e.f()}this.observer=new
tG(this,function(a,b,d){v$(c,a,b,d)},function(a){c.inputState.runScrollHandlers(c,a);if(c.observer.intersecting)c.measure()});this.inputState=new
um(this);this.docView=new
jR(this);this.mountStyles();this.updateAttrs();this.updateState=0;ya();this.requestMeasure();if(d.parent)d.parent.appendChild(this.dom)}c(f,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var
a;this._dispatch(arguments.length==1&&(arguments.length<=0?undefined:arguments[0])instanceof
aj?arguments.length<=0?undefined:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function
b(h){if(this.updateState!=0)throw new
Error("Calls to EditorView.update are not allowed while an update is in progress");var
n=false,b,f=this.state,i=a(h),o;try{for(i.s();!(o=i.n()).done;){var
s=o.value;if(s.startState!=f)throw new
RangeError("Trying to update state with a transaction that doesn't start from the previous state.");f=s.state}}catch(a){i.e(a)}finally{i.f()}if(this.destroyed){this.viewState.state=f;return}if(f.facet(u.phrases)!=this.state.facet(u.phrases))return this.setState(f);b=new
kQ(this,f,h);var
c=this.viewState.scrollTarget;try{this.updateState=2;var
j=a(h),p;try{for(j.s();!(p=j.n()).done;){var
m=p.value;if(c)c=c.map(m.changes);if(m.scrollIntoView){var
g=m.state.selection.main;c=new
dV(g.empty?g:d.cursor(g.head,g.head>g.anchor?-1:1))}var
k=a(m.effects),q;try{for(k.s();!(q=k.n()).done;){var
e=q.value;if(e.is(iz))c=new
dV(e.value);else
if(e.is(me))c=new
dV(e.value,"center");else
if(e.is(rP))c=e.value}}catch(a){k.e(a)}finally{k.f()}}}catch(a){j.e(a)}finally{j.f()}this.viewState.update(b,c);this.bidiCache=jr.update(this.bidiCache,b.changes);if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}n=this.docView.update(b);if(this.state.facet(dm)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(h);this.docView.updateSelection(n,h.some(function(a){return a.isUserEvent("select.pointer")}))}finally{this.updateState=0}if(n||c||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!b.empty){var
l=a(this.state.facet(iZ)),r;try{for(l.s();!(r=l.n()).done;){var
t=r.value;t(b)}}catch(a){l.e(a)}finally{l.f()}}}},{key:"setState",value:function(d){if(this.updateState!=0)throw new
Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=d;return}this.updateState=2;var
h=this.hasFocus;try{var
b=a(this.plugins),e;try{for(b.s();!(e=b.n()).done;){var
i=e.value;i.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.viewState=new
kL(d);this.plugins=d.facet(dz).map(function(a){return new
fW(a)});this.pluginMap.clear();var
c=a(this.plugins),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;g.update(this)}}catch(a){c.e(a)}finally{c.f()}this.docView=new
jR(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}if(h)this.focus();this.requestMeasure()}},{key:"updatePlugins",value:function(b){var
n=b.startState.facet(dz),p=b.state.facet(dz);if(n!=p){var
g=[],c=a(p),i;try{for(c.s();!(i=c.n()).done;){var
o=i.value,l=n.indexOf(o);if(l<0)g.push(new
fW(o));else{var
m=this.plugins[l];m.mustUpdate=b;g.push(m)}}}catch(a){c.e(a)}finally{c.f()}var
d=a(this.plugins),j;try{for(d.s();!(j=d.n()).done;){var
h=j.value;if(h.mustUpdate!=b)h.destroy(this)}}catch(a){d.e(a)}finally{d.f()}this.plugins=g;this.pluginMap.clear();this.inputState.ensureHandlers(this)}else{var
e=a(this.plugins),k;try{for(e.s();!(k=e.n()).done;){var
q=k.value;q.mustUpdate=b}}catch(a){e.e(a)}finally{e.f()}}for(var
f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}},{key:"measure",value:function(){var
k=this,q=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=0;if(q)this.observer.flush();var
c=null;try{for(var
h=0;;h++){this.updateState=1;var
n=this.viewport,g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var
e=[];if(!(g&4)){var
i=[e,this.measureRequests];this.measureRequests=i[0];e=i[1]}var
m=e.map(function(a){try{return a.read(k)}catch(a){bT(k.state,a);return jf}}),b=new
kQ(this,this.state),o=false,p=false;b.flags|=g;if(!c)c=b;else
c.flags|=g;this.updateState=2;if(!b.empty){this.updatePlugins(b);this.inputState.update(b);this.updateAttrs();o=this.docView.update(b)}for(var
d=0;d<e.length;d++)if(m[d]!=jf)try{var
l=e[d];if(l.write)l.write(m[d],this)}catch(a){bT(this.state,a)}if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null;p=true}if(o)this.docView.updateSelection(true);if(this.viewport.from==n.from&&this.viewport.to==n.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0;this.measureScheduled=-1}if(c&&!c.empty){var
f=a(this.state.facet(iZ)),j;try{for(f.s();!(j=f.n()).done;){var
r=j.value;r(c)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"themeClasses",get:function(){return gK+" "+(this.state.facet(hc)?lX:l2)+" "+this.state.facet(sh)}},{key:"updateAttrs",value:function(){var
a=this,c=lR(this,nZ,{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),b={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:!this.state.facet(c2)?"false":"true","class":"cm-content",style:"".concat(m.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)b["aria-readonly"]="true";lR(this,mL,b);this.observer.ignore(function(){iU(a.contentDOM,a.contentAttrs,b);iU(a.dom,a.editorAttrs,c)});this.editorAttrs=c;this.contentAttrs=b}},{key:"showAnnouncements",value:function(k){var
h=true,b=a(k),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j.effects),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;if(g.is(f.announce)){if(h)this.announceDOM.textContent="";h=false;var
i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=g.value}}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(dm);y.mount(this.root,this.styleModules.concat(wk).reverse())}},{key:"readMeasured",value:function(){if(this.updateState==2)throw new
Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false)}},{key:"requestMeasure",value:function(a){var
c=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame(function(){return c.measure()});if(a){if(a.key!=null)for(var
b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(e){var
d=[],b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;f.update(this).takeField(e,d)}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"plugin",value:function(b){var
a=this.pluginMap.get(b);if(a===void
0||a&&a.spec!=b)this.pluginMap.set(b,a=this.plugins.find(function(a){return a.spec==b})||null);return a&&a.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"blockAtHeight",value:function(c,b){var
a=hz(b,this);return this.elementAtHeight(c-a).moveY(a)}},{key:"elementAtHeight",value:function(a){this.readMeasured();return this.viewState.elementAtHeight(a)}},{key:"visualLineAtHeight",value:function(c,b){var
a=hz(b,this);return this.lineBlockAtHeight(c-a).moveY(a)}},{key:"lineBlockAtHeight",value:function(a){this.readMeasured();return this.viewState.lineBlockAtHeight(a)}},{key:"viewportLines",value:function(e,d){var
g=hz(d,this),b=a(this.viewportLineBlocks),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;e(f.moveY(g))}}catch(a){b.e(a)}finally{b.f()}}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"visualLineAt",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.lineBlockAt(b).moveY(a+this.viewState.paddingTop)}},{key:"lineBlockAt",value:function(a){return this.viewState.lineBlockAt(a)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(a,c,b){return iG(this,a,qu(this,a,c,b))}},{key:"moveByGroup",value:function(a,b){var
c=this;return iG(this,a,qu(this,a,b,function(b){return wM(c,a.head,b)}))}},{key:"moveToLineBoundary",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return AP(this,c,a,b)}},{key:"moveVertically",value:function(a,c,b){return iG(this,a,AT(this,a,c,b))}},{key:"scrollPosIntoView",value:function(a){this.dispatch({effects:iz.of(d.cursor(a))})}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(a,b)}},{key:"posAtCoords",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return qX(this,a,b)}},{key:"coordsAtPos",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var
a=this.docView.coordsAt(b,c);if(!a||a.left==a.right)return a;var
d=this.state.doc.lineAt(b),e=this.bidiSpans(d),f=e[bZ.find(e,b-d.from,-1,c)];return ex(a,f.dir==at.LTR==c>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(b){if(b.length>uE)return st(b.length);var
f=this.textDirection,c=a(this.bidiCache),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.from==b.from&&d.dir==f)return d.order}}catch(a){c.e(a)}finally{c.f()}var
g=xk(b.text,this.textDirection);this.bidiCache.push(new
jr(b.from,b.to,f,g));return g}},{key:"hasFocus",get:function(){var
a;return(document.hasFocus()||m.safari&&((a=this.inputState)===null||a===void
0?void
0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var
a=this;this.observer.ignore(function(){or(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.destroyed=true}}],[{key:"scrollIntoView",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return rP.of(new
dV(typeof
b=="number"?d.cursor(b):b,a.y,a.x,a.yMargin,a.xMargin))}},{key:"domEventHandlers",value:function(a){return kI.define(function(){return{}},{eventHandlers:a})}},{key:"theme",value:function(d,a){var
b=y.newName(),c=[sh.of(b),dm.of(gQ(".".concat(b),d))];if(a&&a.dark)c.push(hc.of(true));return c}},{key:"baseTheme",value:function(a){return bf.lowest(dm.of(gQ("."+gK,a,pZ)))}}]);return f}();ai.scrollTo=iz;ai.centerOn=me;ai.styleModule=dm;ai.inputHandler=o7;ai.exceptionSink=n$;ai.updateListener=iZ;ai.editable=c2;ai.mouseSelectionStyle=qq;ai.dragMovesSelection=nP;ai.clickAddsSelectionRange=mr;ai.decorations=bL;ai.darkTheme=hc;ai.contentAttributes=mL;ai.editorAttributes=nZ;ai.lineWrapping=ai.contentAttributes.of({"class":"cm-lineWrapping"});ai.announce=j.define();var
uE=4096;function
hz(a,b){return(a==null?b.contentDOM.getBoundingClientRect().top:a)+b.viewState.paddingTop}var
is=-1;function
ya(){window.addEventListener("resize",function(){if(is==-1)is=setTimeout(zl,50)})}function
zl(){is=-1;var
c=document.querySelectorAll(".cm-content");for(var
a=0;a<c.length;a++){var
b=Z.get(c[a]);if(b)b.editorView.requestMeasure()}}var
jf={},jr=function(){function
d(c,f,a,e){b(this,d);this.from=c;this.to=f;this.dir=a;this.order=e}c(d,null,[{key:"update",value:function(a,c){if(c.empty)return a;var
f=[],g=a.length?a[a.length-1].dir:at.LTR;for(var
e=Math.max(0,a.length-10);e<a.length;e++){var
b=a[e];if(b.dir==g&&!c.touchesRange(b.from,b.to))f.push(new
d(c.mapPos(b.from,1),c.mapPos(b.to,-1),b.dir,b.order))}return f}}]);return d}();function
lR(f,g,c){for(var
d=f.state.facet(g),a=d.length-1;a>=0;a--){var
b=d[a],e=typeof
b=="function"?b(f):b;if(e)g3(e,c)}return c}var
Do=m.mac?"mac":m.windows?"win":m.linux?"linux":"key",ti=!m.ios,CM={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(ti)CM[".cm-line"].caretColor="transparent !important";var
Dj=/x/.unicode!=null?"gu":"g",a4=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"eq",value:function(a){return false}},{key:"destroy",value:function(a){}}]);return a}(aX);a4.prototype.elementClass="";a4.prototype.toDOM=void
0;a4.prototype.mapMode=z.TrackBefore;a4.prototype.startSide=a4.prototype.endSide=-1;a4.prototype.point=true;var
eI=h.define(),xT={"class":"",renderEmptyElements:false,elementStyle:"",markers:function(){return k.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},cS=h.define();function
oN(a){return[oO(),cS.of(Object.assign(Object.assign({},xT),a))]}var
wl=ai.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),iS=h.define({combine:function(a){return a.some(function(a){return a})}});function
oO(a){var
b=[zd,wl];if(a&&a.fixed===false)b.push(iS.of(true));return b}var
zd=kI.fromClass(function(){function
e(c){b(this,e);this.view=c;this.prevViewport=c.viewport;this.dom=document.createElement("div");this.dom.className="cm-gutters";this.dom.setAttribute("aria-hidden","true");this.dom.style.minHeight=this.view.contentHeight+"px";this.gutters=c.state.facet(cS).map(function(a){return new
kE(c,a)});var
d=a(this.gutters),f;try{for(d.s();!(f=d.n()).done;){var
g=f.value;this.dom.appendChild(g.dom)}}catch(a){d.e(a)}finally{d.f()}this.fixed=!c.state.facet(iS);if(this.fixed)this.dom.style.position="sticky";this.syncGutters(false);c.scrollDOM.insertBefore(this.dom,c.contentDOM)}c(e,[{key:"update",value:function(a){if(this.updateGutters(a)){var
c=this.prevViewport,b=a.view.viewport,d=Math.min(c.to,b.to)-Math.max(c.from,b.from);this.syncGutters(d<(b.to-b.from)*0.8)}if(a.geometryChanged)this.dom.style.minHeight=this.view.contentHeight+"px";if(this.view.state.facet(iS)!=!this.fixed){this.fixed=!this.fixed;this.dom.style.position=this.fixed?"sticky":""}this.prevViewport=a.view.viewport}},{key:"syncGutters",value:function(q){var
n=this,s=this.dom.nextSibling;if(q)this.dom.remove();var
u=k.iter(this.view.state.facet(eI),this.view.viewport.from),h=[],p=this.gutters.map(function(a){return new
vx(a,n.view.viewport,-n.view.documentPadding.top)}),c=a(this.view.viewportLineBlocks),i;try{for(c.s();!(i=c.n()).done;){var
b=i.value,g=void
0;if(Array.isArray(b.type)){var
e=a(b.type),l;try{for(e.s();!(l=e.n()).done;){var
o=l.value;if(o.type==Q.Text){g=o;break}}}catch(a){e.e(a)}finally{e.f()}}else
g=b.type==Q.Text?b:void
0;if(!g)continue;if(h.length)h=[];lK(u,h,b.from);var
f=a(p),m;try{for(f.s();!(m=f.n()).done;){var
t=m.value;t.line(this.view,g,h)}}catch(a){f.e(a)}finally{f.f()}}}catch(a){c.e(a)}finally{c.f()}var
d=a(p),j;try{for(d.s();!(j=d.n()).done;){var
r=j.value;r.finish()}}catch(a){d.e(a)}finally{d.f()}if(q)this.view.scrollDOM.insertBefore(this.dom,s)}},{key:"updateGutters",value:function(b){var
r=b.startState.facet(cS),q=b.state.facet(cS),i=b.docChanged||b.heightChanged||b.viewportChanged||!k.eq(b.startState.facet(eI),b.state.facet(eI),b.view.viewport.from,b.view.viewport.to);if(r==q){var
d=a(this.gutters),m;try{for(d.s();!(m=d.n()).done;){var
t=m.value;if(t.update(b))i=true}}catch(a){d.e(a)}finally{d.f()}}else{i=true;var
c=[],e=a(q),n;try{for(e.s();!(n=e.n()).done;){var
p=n.value,j=r.indexOf(p);if(j<0)c.push(new
kE(this.view,p));else{this.gutters[j].update(b);c.push(this.gutters[j])}}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.gutters),o;try{for(f.s();!(o=f.n()).done;){var
g=o.value;g.dom.remove();if(c.indexOf(g)<0)g.destroy()}}catch(a){f.e(a)}finally{f.f()}for(var
h=0,l=c;h<l.length;h++){var
s=l[h];this.dom.appendChild(s.dom)}this.gutters=c}return i}},{key:"destroy",value:function(){var
b=a(this.gutters),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy()}}catch(a){b.e(a)}finally{b.f()}this.dom.remove()}}]);return e}(),{provide:aK.scrollMargins.from(function(a){if(a.gutters.length==0||!a.fixed)return null;return a.view.textDirection==at.LTR?{left:a.dom.offsetWidth}:{right:a.dom.offsetWidth}})});function
lO(a){return Array.isArray(a)?a:[a]}function
lK(a,c,b){while(a.value&&a.from<=b){if(a.from==b)c.push(a.value);a.next()}}var
vx=function(){function
a(c,e,d){b(this,a);this.gutter=c;this.height=d;this.localMarkers=[];this.i=0;this.cursor=k.iter(c.markers,e.from)}c(a,[{key:"line",value:function(d,a,f){if(this.localMarkers.length)this.localMarkers=[];lK(this.cursor,this.localMarkers,a.from);var
c=f.length?this.localMarkers.concat(f):this.localMarkers,g=this.gutter.config.lineMarker(d,a,c);if(g)c.unshift(g);var
b=this.gutter;if(c.length==0&&!b.config.renderEmptyElements)return;var
e=a.top-this.height;if(this.i==b.elements.length){var
h=new
jV(d,a.height,e,c);b.elements.push(h);b.dom.appendChild(h.dom)}else
b.elements[this.i].update(d,a.height,e,c);this.height=a.bottom;this.i++}},{key:"finish",value:function(){var
a=this.gutter;while(a.elements.length>this.i){var
b=a.elements.pop();a.dom.removeChild(b.dom);b.destroy()}}}]);return a}(),kE=function(){function
d(a,c){var
f=this;b(this,d);this.view=a;this.config=c;this.elements=[];this.spacer=null;this.dom=document.createElement("div");this.dom.className="cm-gutter"+(this.config["class"]?" "+this.config["class"]:"");var
e=function(d){f.dom.addEventListener(d,function(b){var
e=a.lineBlockAtHeight(b.clientY-a.documentTop);if(c.domEventHandlers[d](a,e,b))b.preventDefault()})};for(var
g
in
c.domEventHandlers)e(g);this.markers=lO(c.markers(a));if(c.initialSpacer){this.spacer=new
jV(a,0,0,[c.initialSpacer(a)]);this.dom.appendChild(this.spacer.dom);this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none"}}c(d,[{key:"update",value:function(a){var
d=this.markers;this.markers=lO(this.config.markers(a.view));if(this.spacer&&this.config.updateSpacer){var
b=this.config.updateSpacer(this.spacer.markers[0],a);if(b!=this.spacer.markers[0])this.spacer.update(a.view,0,0,[b])}var
c=a.view.viewport;return!k.eq(this.markers,d,c.from,c.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(a):false)}},{key:"destroy",value:function(){var
b=a(this.elements),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy()}}catch(a){b.e(a)}finally{b.f()}}}]);return d}(),jV=function(){function
a(f,d,c,e){b(this,a);this.height=-1;this.above=0;this.markers=[];this.dom=document.createElement("div");this.update(f,d,c,e)}c(a,[{key:"update",value:function(d,b,a,c){if(this.height!=b)this.dom.style.height=(this.height=b)+"px";if(this.above!=a)this.dom.style.marginTop=(this.above=a)?a+"px":"";if(!B1(this.markers,c))this.setMarkers(d,c)}},{key:"setMarkers",value:function(m,e){var
i="cm-gutterElement",a=this.dom.firstChild;for(var
j=0,c=0;;){var
g=c,b=j<e.length?e[j++]:null,f=false;if(b){var
h=b.elementClass;if(h)i+=" "+h;for(var
d=c;d<this.markers.length;d++)if(this.markers[d].compare(b)){g=d;f=true;break}}else
g=this.markers.length;while(c<g){var
k=this.markers[c++];if(k.toDOM){k.destroy(a);var
l=a.nextSibling;a.remove();a=l}}if(!b)break;if(b.toDOM)if(f)a=a.nextSibling;else
this.dom.insertBefore(b.toDOM(m),a);if(f)c++}this.dom.className=i;this.markers=e}},{key:"destroy",value:function(){this.setMarkers(null,[])}}]);return a}();function
B1(b,c){if(b.length!=c.length)return false;for(var
a=0;a<b.length;a++)if(!b[a].compare(c[a]))return false;return true}var
Ak=h.define(),cm=h.define({combine:function(a){return bw(a,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(d,c){var
b=Object.assign({},d),a=function(a){var
e=b[a],d=c[a];b[a]=e?function(c,b,a){return e(c,b,a)||d(c,b,a)}:d};for(var
e
in
c)a(e);return b}})}}),fS=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.number=d;return c}c(a,[{key:"eq",value:function(a){return this.number==a.number}},{key:"toDOM",value:function(){return document.createTextNode(this.number)}}]);return a}(a4);function
hF(a,b){return a.state.facet(cm).formatNumber(b,a.state)}var
Aj=cS.compute([cm],function(a){return{"class":"cm-lineNumbers",renderEmptyElements:false,markers:function(a){return a.state.facet(Ak)},lineMarker:function(a,b,c){if(c.some(function(a){return a.toDOM}))return null;return new
fS(hF(a,a.state.doc.lineAt(b.from).number))},lineMarkerChange:function(a){return a.startState.facet(cm)!=a.state.facet(cm)},initialSpacer:function(a){return new
fS(hF(a,p_(a.state.doc.lines)))},updateSpacer:function(b,c){var
a=hF(c.view,p_(c.view.state.doc.lines));return a==b.number?b:new
fS(a)},domEventHandlers:a.facet(cm).domEventHandlers}});function
Al(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[cm.of(a),oO(),Aj]}function
p_(b){var
a=9;while(a<b)a=a*10+9;return a}var
v0=new(function(d){f(a,d);var
g=e(a);function
a(){var
c;b(this,a);c=g.apply(this,arguments);c.elementClass="cm-activeLineGutter";return c}return c(a)}(a4))(),vZ=eI.compute(["selection"],function(h){var
f=[],e=-1,b=a(h.selection.ranges),d;try{for(b.s();!(d=b.n()).done;){var
g=d.value;if(g.empty){var
c=h.doc.lineAt(g.head).from;if(c>e){e=c;f.push(v0.range(c))}}}}catch(a){b.e(a)}finally{b.f()}return k.of(f)});function
zx(){return vZ}function
p9(c,b){var
a=b.mapPos(c.from,1),d=b.mapPos(c.to,-1);return a>=d?void
0:{from:a,to:d}}var
eA=j.define({map:p9}),dw=j.define({map:p9});function
r6(e){var
c=[],b=a(e.state.selection.ranges),d;try{var
f=function(){var
a=d.value.head;if(c.some(function(b){return b.from<=a&&b.to>=a}))return"continue";c.push(e.lineBlockAt(a))};for(b.s();!(d=b.n()).done;){var
g=f();if(g==="continue")continue}}catch(a){b.e(a)}finally{b.f()}return c}var
bP=ao.define({create:function(){return ag.none},update:function(b,e){b=b.map(e.changes);var
d=a(e.effects),f;try{var
h=function(){var
a=f.value;if(a.is(eA)&&!yI(b,a.value.from,a.value.to))b=b.update({add:[yO.range(a.value.from,a.value.to)]});else
if(a.is(dw))b=b.update({filter:function(b,c){return a.value.from!=b||a.value.to!=c},filterFrom:a.value.from,filterTo:a.value.to})};for(d.s();!(f=d.n()).done;)h()}catch(a){d.e(a)}finally{d.f()}if(e.selection){var
g=false,c=e.selection.main.head;b.between(c,c,function(a,b){if(a<c&&b>c)g=true});if(g)b=b.update({filterFrom:c,filterTo:c,filter:function(a,b){return b<=c||a>=c}})}return b},provide:function(a){return R.decorations.from(a)}});function
eB(d,c,e){var
b,a=null;(b=d.field(bP,false))===null||b===void
0?void
0:b.between(c,e,function(b,c){if(!a||a.from>b)a={from:b,to:c}});return a}function
yI(c,a,e){var
b=false;c.between(a,a,function(c,d){if(c==a&&d==e)b=true});return b}function
p$(b,a){return b.field(bP,false)?a:a.concat(j.appendConfig.of(mz()))}var
yH=function(b){var
c=a(r6(b)),e;try{for(c.s();!(e=c.n()).done;){var
f=e.value,d=eC(b.state,f.from,f.to);if(d){b.dispatch({effects:p$(b.state,[eA.of(d),lM(b,d)])});return true}}}catch(a){c.e(a)}finally{c.f()}return false},CY=function(b){if(!b.state.field(bP,false))return false;var
d=[],c=a(r6(b)),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value,e=eB(b.state,g.from,g.to);if(e)d.push(dw.of(e),lM(b,e,false))}}catch(a){c.e(a)}finally{c.f()}if(d.length)b.dispatch({effects:d});return d.length>0};function
lM(a,b){var
c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true,d=a.state.doc.lineAt(b.from).number,e=a.state.doc.lineAt(b.to).number;return R.announce.of("".concat(a.state.phrase(c?"Folded lines":"Unfolded lines")," ").concat(d," ").concat(a.state.phrase("to")," ").concat(e,"."))}var
yG=function(a){var
f=a.state,b=[];for(var
e=0;e<f.doc.length;){var
d=a.lineBlockAt(e),c=eC(f,d.from,d.to);if(c)b.push(eA.of(c));e=(c?a.lineBlockAt(c.to):d).to+1}if(b.length)a.dispatch({effects:p$(a.state,b)});return!!b.length},CX=function(b){var
a=b.state.field(bP,false);if(!a||!a.size)return false;var
c=[];a.between(0,b.state.doc.length,function(a,b){c.push(dw.of({from:a,to:b}))});b.dispatch({effects:c});return true},yL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:yH},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:CY},{key:"Ctrl-Alt-[",run:yG},{key:"Ctrl-Alt-]",run:CX}],xM={placeholderDOM:null,placeholderText:"\u2026"},ou=h.define({combine:function(a){return bw(a,xM)}});function
mz(a){var
b=[bP,wm];if(a)b.push(ou.of(a));return b}var
yO=ag.replace({widget:new(function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"toDOM",value:function(b){var
d=b.state,c=d.facet(ou),e=function(a){var
d=b.lineBlockAt(b.posAtDOM(a.target)),c=eB(b.state,d.from,d.to);if(c)b.dispatch({effects:dw.of(c)});a.preventDefault()};if(c.placeholderDOM)return c.placeholderDOM(b,e);var
a=document.createElement("span");a.textContent=c.placeholderText;a.setAttribute("aria-label",d.phrase("folded code"));a.title=d.phrase("unfold");a.className="cm-foldPlaceholder";a.onclick=e;return a}}]);return a}(cN))()}),yK={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{}},fz=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.config=d;c.open=e;return c}c(a,[{key:"eq",value:function(a){return this.config==a.config&&this.open==a.open}},{key:"toDOM",value:function(b){if(this.config.markerDOM)return this.config.markerDOM(this.open);var
a=document.createElement("span");a.textContent=this.open?this.config.openText:this.config.closedText;a.title=b.state.phrase(this.open?"Fold line":"Unfold line");return a}}]);return a}(a4);function
yJ(){var
g=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},d=Object.assign(Object.assign({},yK),g),h=new
fz(d,true),i=new
fz(d,false),f=kH.fromClass(function(){function
d(a){b(this,d);this.from=a.viewport.from;this.markers=this.buildMarkers(a)}c(d,[{key:"update",value:function(a){if(a.docChanged||a.viewportChanged||a.startState.facet(bx)!=a.state.facet(bx)||a.startState.field(bP,false)!=a.state.field(bP,false))this.markers=this.buildMarkers(a.view)}},{key:"buildMarkers",value:function(d){var
f=new
cb(),c=a(d.viewportLineBlocks),e;try{for(c.s();!(e=c.n()).done;){var
b=e.value,g=eB(d.state,b.from,b.to)?i:eC(d.state,b.from,b.to)?h:null;if(g)f.add(b.from,b.from,g)}}catch(a){c.e(a)}finally{c.f()}return f.finish()}}]);return d}()),e=d.domEventHandlers;return[f,oN({"class":"cm-foldGutter",markers:function(b){var
a;return((a=b.plugin(f))===null||a===void
0?void
0:a.markers)||k.empty},initialSpacer:function(){return new
fz(d,false)},domEventHandlers:Object.assign(Object.assign({},e),{click:function(b,a,f){if(e.click&&e.click(b,a,f))return true;var
c=eB(b.state,a.from,a.to);if(c){b.dispatch({effects:dw.of(c)});return true}var
d=eC(b.state,a.from,a.to);if(d){b.dispatch({effects:eA.of(d)});return true}return false}})}),mz()]}var
wm=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});function
eG(a){var
b;if(a.nodeType==11)b=a.getSelection?a:a.ownerDocument;else
b=a;return b.getSelection()}function
g9(b,a){return a?b.contains(a.nodeType!=1?a.parentNode:a):false}function
xK(){var
a=document.activeElement;while(a&&a.shadowRoot)a=a.shadowRoot.activeElement;return a}function
hU(b,a){if(!a.anchorNode)return false;try{return g9(b,a.anchorNode)}catch(a){return false}}function
cg(a){if(a.nodeType==3)return dt(a,0,a.nodeValue.length).getClientRects();else
if(a.nodeType==1)return a.getClientRects();else
return[]}function
eT(b,c,a,d){return a?rH(b,c,a,d,-1)||rH(b,c,a,d,1):false}function
hq(a){for(var
b=0;;b++){a=a.previousSibling;if(!a)return b}}function
rH(a,b,e,f,c){for(;;){if(a==e&&b==f)return true;if(b==(c<0?0:e1(a))){if(a.nodeName=="DIV")return false;var
d=a.parentNode;if(!d||d.nodeType!=1)return false;b=hq(a)+(c<0?0:1);a=d}else
if(a.nodeType==1){a=a.childNodes[b+(c<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")return false;b=c<0?e1(a):0}else
return false}}function
e1(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}var
kA={left:0,right:0,top:0,bottom:0};function
ey(a,c){var
b=c?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}function
Dc(a){return{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}function
B7(o,a,h,k,i,f,g,s){var
n=o.ownerDocument,q=n.defaultView;for(var
c=o;c;)if(c.nodeType==1){var
b=void
0,m=c==n.body;if(m)b=Dc(q);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}var
j=c.getBoundingClientRect();b={left:j.left,right:j.left+c.clientWidth,top:j.top,bottom:j.top+c.clientHeight}}var
d=0,e=0;if(i=="nearest"){if(a.top<b.top){e=-(b.top-a.top+g);if(h>0&&a.bottom>b.bottom+e)e=a.bottom-b.bottom+e+g}else
if(a.bottom>b.bottom){e=a.bottom-b.bottom+g;if(h<0&&a.top-e<b.top)e=-(b.top+e-a.top+g)}}else{var
p=a.bottom-a.top,l=b.bottom-b.top,v=i=="center"&&p<=l?a.top+p/2-l/2:i=="start"||i=="center"&&h<0?a.top-g:a.bottom-l+g;e=v-b.top}if(k=="nearest"){if(a.left<b.left){d=-(b.left-a.left+f);if(h>0&&a.right>b.right+d)d=a.right-b.right+d+f}else
if(a.right>b.right){d=a.right-b.right+f;if(h<0&&a.left<b.left+d)d=-(b.left+d-a.left+f)}}else{var
u=k=="center"?a.left+(a.right-a.left)/2-(b.right-b.left)/2:k=="start"==s?a.left-f:a.right-(b.right-b.left)+f;d=u-b.left}if(d||e)if(m)q.scrollBy(d,e);else{if(e){var
t=c.scrollTop;c.scrollTop+=e;e=c.scrollTop-t}if(d){var
r=c.scrollLeft;c.scrollLeft+=d;d=c.scrollLeft-r}a={left:a.left-d,top:a.top-e,right:a.right-d,bottom:a.bottom-e}}if(m)break;c=c.assignedSlot||c.parentNode;k=i="nearest"}else
if(c.nodeType==11)c=c.host;else
break}var
tN=function(){function
a(){b(this,a);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}c(a,[{key:"eq",value:function(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}},{key:"setRange",value:function(a){this.set(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}},{key:"set",value:function(a,b,c,d){this.anchorNode=a;this.anchorOffset=b;this.focusNode=c;this.focusOffset=d}}]);return a}(),cq=null;function
os(b){if(b.setActive)return b.setActive();if(cq)return b.focus(cq);var
c=[];for(var
a=b;a;a=a.parentNode){c.push(a,a.scrollTop,a.scrollLeft);if(a==a.ownerDocument)break}b.focus(cq==null?Object.defineProperties({},{preventScroll:{get:function(){cq={preventScroll:true};return true},configurable:true,enumerable:true}}):void
0);if(!cq){cq=false;for(var
d=0;d<c.length;){var
e=c[d++],g=c[d++],f=c[d++];if(e.scrollTop!=g)e.scrollTop=g;if(e.scrollLeft!=f)e.scrollLeft=f}}}var
rN;function
dt(c,b){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b,a=rN||(rN=document.createRange());a.setEnd(c,d);a.setStart(c,b);return a}function
cY(d,e,c){var
f={key:e,code:e,keyCode:c,which:c,cancelable:true},a=new
KeyboardEvent("keydown",f);a.synthetic=true;d.dispatchEvent(a);var
b=new
KeyboardEvent("keyup",f);b.synthetic=true;d.dispatchEvent(b);return a.defaultPrevented||b.defaultPrevented}function
yW(a){while(a){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function
mn(a){while(a.attributes.length)a.removeAttributeNode(a.attributes[0])}var
ay=function(){function
a(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;b(this,a);this.node=c;this.offset=d;this.precise=e}c(a,null,[{key:"before",value:function(b,c){return new
a(b.parentNode,hq(b),c)}},{key:"after",value:function(b,c){return new
a(b.parentNode,hq(b)+1,c)}}]);return a}(),il=[],_=function(){function
f(){b(this,f);this.parent=null;this.dom=null;this.dirty=2}c(f,[{key:"editorView",get:function(){if(!this.parent)throw new
Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(f){var
e=this.posAtStart,b=a(this.children),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c==f)return e;e+=c.length+c.breakAfter}}catch(a){b.e(a)}finally{b.f()}throw new
RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(a){return this.posBefore(a)+a.length}},{key:"coordsAt",value:function(a,b){return null}},{key:"sync",value:function(d){if(this.dirty&2){var
e=this.dom,b=e.firstChild,g=a(this.children),k;try{for(g.s();!(k=g.n()).done;){var
c=k.value;if(c.dirty){if(!c.dom&&b){var
j=f.get(b);if(!j||!j.parent&&j.constructor==c.constructor)c.reuseDOM(b)}c.sync(d);c.dirty=0}if(d&&!d.written&&d.node==e&&b!=c.dom)d.written=true;if(c.dom.parentNode==e){while(b&&b!=c.dom)b=ru(b);b=c.dom.nextSibling}else
e.insertBefore(c.dom,b)}}catch(a){g.e(a)}finally{g.f()}if(b&&d&&d.node==e)d.written=true;while(b)b=ru(b)}else
if(this.dirty&1){var
h=a(this.children),l;try{for(h.s();!(l=h.n()).done;){var
i=l.value;if(i.dirty){i.sync(d);i.dirty=0}}}catch(a){h.e(a)}finally{h.f()}}}},{key:"reuseDOM",value:function(a){}},{key:"localPosFromDOM",value:function(b,h){var
a;if(b==this.dom)a=this.dom.childNodes[h];else{var
d=e1(b)==0?0:h==0?-1:1;for(;;){var
c=b.parentNode;if(c==this.dom)break;if(d==0&&c.firstChild!=c.lastChild)if(b==c.firstChild)d=-1;else
d=1;b=c}if(d<0)a=b;else
a=b.nextSibling}if(a==this.dom.firstChild)return 0;while(a&&!f.get(a))a=a.nextSibling;if(!a)return this.length;for(var
g=0,i=0;;g++){var
e=this.children[g];if(e.dom==a)return i;i+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(g,i){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=-1,k=-1,f=-1,j=-1;for(var
b=0,a=h,l=h;b<this.children.length;b++){var
c=this.children[b],d=a+c.length;if(a<g&&d>i)return c.domBoundsAround(g,i,a);if(d>=g&&e==-1){e=b;k=a}if(a>i&&c.dom.parentNode==this.dom){f=b;j=l;break}l=d;a=d+c.breakAfter}return{from:k,to:j<0?h+this.length:j,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}},{key:"markDirty",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.dirty|=2;this.markParentsDirty(a)}},{key:"markParentsDirty",value:function(b){for(var
a=this.parent;a;a=a.parent){if(b)a.dirty|=2;if(a.dirty&1)return;a.dirty|=1;b=false}}},{key:"setParent",value:function(a){if(this.parent!=a){this.parent=a;if(this.dirty)this.markParentsDirty(true)}}},{key:"setDOM",value:function(a){if(this.dom)this.dom.cmView=null;this.dom=a;a.cmView=this}},{key:"rootView",get:function(){for(var
a=this;;){var
b=a.parent;if(!b)return a;a=b}}},{key:"replaceChildren",value:function(d,g){var
e,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:il;this.markDirty();for(var
a=d;a<g;a++){var
f=this.children[a];if(f.parent==this)f.destroy()}(e=this.children).splice.apply(e,[d,g-d].concat(P(c)));for(var
b=0;b<c.length;b++)c[b].setParent(this)}},{key:"ignoreMutation",value:function(a){return false}},{key:"ignoreEvent",value:function(a){return false}},{key:"childCursor",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new
jy(this.children,a,this.children.length)}},{key:"childPos",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(b,a)}},{key:"toString",value:function(){var
a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return true}},{key:"merge",value:function(a,f,e,b,d,c){return false}},{key:"become",value:function(a){return false}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(a){return a.cmView}}]);return f}();_.prototype.breakAfter=0;function
ru(a){var
b=a.nextSibling;a.parentNode.removeChild(a);return b}var
jy=function(){function
a(c,e,d){b(this,a);this.children=c;this.pos=e;this.i=d;this.off=0}c(a,[{key:"findPos",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(a>this.pos||a==this.pos&&(c>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=a-this.pos;return this}var
b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return a}();function
rn(n,c,i,d,h,a,l,k,j){var
f=n.children,b=f.length?f[c]:null,g=a.length?a[a.length-1]:null,m=g?g.breakAfter:l;if(c==d&&b&&!l&&!m&&a.length<2&&b.merge(i,h,a.length?g:null,i==0,k,j))return;if(d<f.length){var
e=f[d];if(e&&h<e.length){if(c==d){e=e.split(h);h=0}if(!m&&g&&e.merge(0,h,g,true,0,j))a[a.length-1]=e;else{if(h)e.merge(0,h,null,false,0,j);a.push(e)}}else
if(e===null||e===void
0?void
0:e.breakAfter)if(g)g.breakAfter=1;else
l=1;d++}if(b){b.breakAfter=l;if(i>0){if(!l&&a.length&&b.merge(i,b.length,a[0],false,k,0))b.breakAfter=a.shift().breakAfter;else
if(i<b.length||b.children.length&&b.children[b.children.length-1].length==0)b.merge(i,b.length,null,false,k,0);c++}}while(c<d&&a.length)if(f[d-1].become(a[a.length-1])){d--;a.pop();j=a.length?0:k}else
if(f[c].become(a[0])){c++;a.shift();k=a.length?0:j}else
break;if(!a.length&&c&&d<f.length&&!f[c-1].breakAfter&&f[d].merge(0,0,f[c-1],false,k,j))c--;if(c<d||a.length)n.replaceChildren(c,d,a)}function
qd(c,i,k,j,o,n){var
g=c.childCursor(),d=g.findPos(k,1),p=d.i,q=d.off,e=g.findPos(i,-1),l=e.i,m=e.off,h=i-k,b=a(j),f;try{for(b.s();!(f=b.n()).done;){var
r=f.value;h+=r.length}}catch(a){b.e(a)}finally{b.f()}c.length+=h;rn(c,l,m,p,q,j,0,o,n)}var
vS=typeof
navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],lB=bn(vS,2),aH=lB[0],hl=lB[1],h7=/Edge\/(\d+)/.exec(aH.userAgent),oV=/MSIE \d/.test(aH.userAgent),h2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aH.userAgent),eM=!!(oV||h2||h7),oD=!eM&&/gecko\/(\d+)/i.test(aH.userAgent),gX=!eM&&/Chrome\/(\d+)/.exec(aH.userAgent),sM="webkitFontSmoothing"in
hl.documentElement.style,rC=!eM&&/Apple Computer/.test(aH.vendor),pl=rC&&(/Mobile\/\w+/.test(aH.userAgent)||aH.maxTouchPoints>2),n={mac:pl||/Mac/.test(aH.platform),windows:/Win/.test(aH.platform),linux:/Linux|X11/.test(aH.platform),ie:eM,ie_version:oV?hl.documentMode||6:h2?+h2[1]:h7?+h7[1]:0,gecko:oD,gecko_version:oD?+(/Firefox\/(\d+)/.exec(aH.userAgent)||[0,0])[1]:0,chrome:!!gX,chrome_version:gX?+gX[1]:0,ios:pl,android:/Android\b/.test(aH.userAgent),webkit:sM,safari:rC,webkit_version:sM?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hl.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},uK=256,d2=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.text=d;return c}c(a,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(a&&a.node==this.dom)a.written=true;this.dom.nodeValue=this.text}}},{key:"reuseDOM",value:function(a){if(a.nodeType==3)this.createDOM(a)}},{key:"merge",value:function(c,d,b){if(b&&(!(b
instanceof
a)||this.length-(d-c)+b.length>uK))return false;this.text=this.text.slice(0,c)+(b?b.text:"")+this.text.slice(d);this.markDirty();return true}},{key:"split",value:function(b){var
c=new
a(this.text.slice(b));this.text=this.text.slice(0,b);this.markDirty();return c}},{key:"localPosFromDOM",value:function(b,a){return b==this.dom?a:a?this.text.length:0}},{key:"domAtPos",value:function(a){return new
ay(this.dom,a)}},{key:"domBoundsAround",value:function(b,c,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return se(this.dom,a,b)}}]);return a}(_),dQ=function(g){f(d,g);var
k=e(d);function
d(j){var
c,g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;b(this,d);c=k.call(this);c.mark=j;c.children=g;c.length=i;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;h.setParent(aQ(c))}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"setAttrs",value:function(a){mn(a);if(this.mark["class"])a.className=this.mark["class"];if(this.mark.attrs)for(var
b
in
this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);return a}},{key:"reuseDOM",value:function(a){if(a.nodeName==this.mark.tagName.toUpperCase()){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(a){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else
if(this.dirty&4)this.setAttrs(this.dom);t(r(d.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(b,f,a,g,e,c){if(a&&(!(a
instanceof
d&&a.mark.eq(this.mark))||b&&e<=0||f<this.length&&c<=0))return false;qd(this,b,f,a?a.children:[],e-1,c-1);this.markDirty();return true}},{key:"split",value:function(b){var
k=[],c=0,f=-1,j=0,e=a(this.children),h;try{for(e.s();!(h=e.n()).done;){var
g=h.value,i=c+g.length;if(i>b)k.push(c<b?g.split(b-c):g);if(f<0&&c>=b)f=j;c=i;j++}}catch(a){e.e(a)}finally{e.f()}var
l=this.length-b;this.length=b;if(f>-1){this.children.length=f;this.markDirty()}return new
d(this.mark,k,l)}},{key:"domAtPos",value:function(a){return o3(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return mR(this,a,b)}}]);return d}(_);function
se(i,b,e){var
g=i.nodeValue.length;if(b>g)b=g;var
f=b,h=b,a=0;if(b==0&&e<0||b==g&&e>=0){if(!(n.chrome||n.gecko))if(b){f--;a=1}else{h++;a=-1}}else
if(e<0)f--;else
h++;var
d=dt(i,f,h).getClientRects();if(!d.length)return kA;var
c=d[(a?a<0:e>=0)?0:d.length-1];if(n.safari&&!a&&c.width==0)c=Array.prototype.find.call(d,function(a){return a.width})||c;return a?ey(c,a<0):c||null}var
gb=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.side=e;return c}c(a,[{key:"split",value:function(b){var
c=a.create(this.widget,this.length-b,this.side);this.length-=b;return c}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"become",value:function(b){if(b.length==this.length&&b
instanceof
a&&b.side==this.side)if(this.widget.constructor==b.widget.constructor){if(!this.widget.eq(b.widget))this.markDirty(true);this.widget=b.widget;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"overrideDOMText",get:function(){if(this.length==0)return p.empty;var
a=this;while(a.parent)a=a.parent;var
d=a.editorView,c=d&&d.state.doc,b=this.posAtStart;return c?c.slice(b,b+this.length):p.empty}},{key:"domAtPos",value:function(a){return a==0?ay.before(this.dom):ay.after(this.dom,a==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,e){var
d=this.dom.getClientRects(),b=null;if(!d.length)return kA;for(var
c=a>0?d.length-1:0;;c+=a>0?-1:1){b=d[c];if(a>0?c==0:c==d.length-1||b.top<b.bottom)break}return a==0&&e>0||a==this.length&&e<=0?b:ey(b,a==0)}},{key:"isEditable",get:function(){return false}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}],[{key:"create",value:function(b,c,d){return new(b.customView||a)(b,c,d)}}]);return a}(_),ts=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"domAtPos",value:function(a){return new
ay(this.widget.text,a)}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(b,a){return!a?0:b.nodeType==3?Math.min(a,this.length):this.length}},{key:"ignoreMutation",value:function(){return false}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(a,b){return se(this.widget.text,a,b)}},{key:"isEditable",get:function(){return true}}]);return a}(gb),gf=n.android?"\u200B\u200B":"\u200B",f9=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.side=d;return c}c(a,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return false}},{key:"become",value:function(b){return b
instanceof
a&&b.side==this.side}},{key:"split",value:function(){return new
a(this.side)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(document.createTextNode(gf));else
if(this.dirty&&this.dom.nodeValue!=gf)this.dom.nodeValue=gf}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(a){return ay.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(b){var
a=cg(this.dom);return a[a.length-1]||null}},{key:"overrideDOMText",get:function(){return p.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]);return a}(_);d2.prototype.children=gb.prototype.children=f9.prototype.children=il;function
o3(f,e,d){var
a=0;for(var
b=0;a<e.length;a++){var
c=e[a],g=b+c.length;if(g==b&&c.getSide()<=0)continue;if(d>b&&d<g&&c.dom.parentNode==f)return c.domAtPos(d-b);if(d<=b)break;b=g}for(;a>0;a--){var
h=e[a-1].dom;if(h.parentNode==f)return ay.after(h)}return new
ay(f,0)}function
px(d,a,e){var
c,b=d.children;if(e>0&&a
instanceof
dQ&&b.length&&(c=b[b.length-1])instanceof
dQ&&c.mark.eq(a.mark))px(c,a.children[0],e-1);else{b.push(a);a.setParent(d)}d.length+=a.length}function
mR(a,f,g){for(var
e=0,c=0;c<a.children.length;c++){var
d=a.children[c],b=e+d.length,k=void
0;if((g<=0||b==a.length||d.getSide()>0?b>=f:b>f)&&(f<b||c+1==a.children.length||(k=a.children[c+1]).length||k.getSide()>0)){var
i=0;if(b==e){if(d.getSide()<=0)continue;i=g=-d.getSide()}var
h=d.coordsAt(f-e,g);return i&&h?ey(h,g<0):h}e=b}var
j=a.dom.lastChild;if(!j)return a.dom.getBoundingClientRect();var
l=cg(j);return l[l.length-1]||null}function
g4(c,a){for(var
b
in
c)if(b=="class"&&a["class"])a["class"]+=" "+c["class"];else
if(b=="style"&&a.style)a.style+=";"+c.style;else
a[b]=c[b];return a}function
gE(a,b){if(a==b)return true;if(!a||!b)return false;var
f=Object.keys(a),g=Object.keys(b);if(f.length!=g.length)return false;for(var
c=0,e=f;c<e.length;c++){var
d=e[c];if(g.indexOf(d)==-1||a[d]!==b[d])return false}return true}function
iV(d,c,a){if(c)for(var
e
in
c)if(!(a&&e
in
a))d.removeAttribute(e);if(a)for(var
b
in
a)if(!(c&&c[b]==a[b]))d.setAttribute(b,a[b])}var
ea=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return false}},{key:"updateDOM",value:function(a){return false}},{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(a){return true}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(a){}}]);return a}(),V=function(a){a[a["Text"]=0]="Text";a[a["WidgetBefore"]=1]="WidgetBefore";a[a["WidgetAfter"]=2]="WidgetAfter";a[a["WidgetRange"]=3]="WidgetRange";return a}(V||(V={})),an=function(a){f(d,a);var
h=e(d);function
d(f,c,g,e){var
a;b(this,d);a=h.call(this);a.startSide=f;a.endSide=c;a.widget=g;a.spec=e;return a}c(d,[{key:"heightRelevant",get:function(){return false}},{key:"hasHeight",value:function(){return this.widget?this.widget.estimatedHeight>-1:false}}],[{key:"mark",value:function(a){return new
kc(a)}},{key:"widget",value:function(b){var
a=b.side||0,c=!!b.block;a+=c?a>0?3e8:-4e8:a>0?1e8:-1e8;return new
cE(b,a,a,c,b.widget||null,false)}},{key:"replace",value:function(b){var
a=!!b.block,c=oJ(b,a),f=c.start,d=c.end,g=a?f?-3e8:-1:4e8,e=a?d?2e8:1:-5e8;return new
cE(b,g,e,a,b.widget||null,true)}},{key:"line",value:function(a){return new
fK(a)}},{key:"set",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return k.of(a,b)}}]);return d}(aX);an.none=k.empty;var
kc=function(d){f(a,d);var
h=e(a);function
a(d){var
c;b(this,a);var
e=oJ(d),g=e.start,f=e.end;c=h.call(this,g?-1:4e8,f?1:-5e8,null,d);c.tagName=d.tagName||"span";c["class"]=d["class"]||"";c.attrs=d.attributes||null;return c}c(a,[{key:"eq",value:function(b){return this==b||b
instanceof
a&&this.tagName==b.tagName&&this["class"]==b["class"]&&gE(this.attrs,b.attrs)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(b>=c)throw new
RangeError("Mark decorations may not be empty");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(an);kc.prototype.point=false;var
fK=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,-2e8,-2e8,null,c)}c(a,[{key:"eq",value:function(b){return b
instanceof
a&&gE(this.spec.attributes,b.spec.attributes)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(c!=b)throw new
RangeError("Line decoration ranges must be zero-length");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(an);fK.prototype.mapMode=z.TrackBefore;fK.prototype.point=true;var
cE=function(d){f(a,d);var
j=e(a);function
a(h,e,f,d,i,g){var
c;b(this,a);c=j.call(this,e,f,i,h);c.block=d;c.isReplace=g;c.mapMode=!d?z.TrackDel:e<=0?z.TrackBefore:z.TrackAfter;return c}c(a,[{key:"type",get:function(){return this.startSide<this.endSide?V.WidgetRange:this.startSide<=0?V.WidgetBefore:V.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(b){return b
instanceof
a&&C9(this.widget,b.widget)&&this.block==b.block&&this.startSide==b.startSide&&this.endSide==b.endSide}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(this.isReplace&&(b>c||b==c&&this.startSide>0&&this.endSide<=0))throw new
RangeError("Invalid range for replacement decoration");if(!this.isReplace&&c!=b)throw new
RangeError("Widget decorations can only have zero-length ranges");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(an);cE.prototype.point=true;function
oJ(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,b=c.inclusiveStart,a=c.inclusiveEnd;if(b==null)b=c.inclusive;if(a==null)a=c.inclusive;return{start:b!==null&&b!==void
0?b:d,end:a!==null&&a!==void
0?a:d}}function
C9(a,b){return a==b||!!(a&&b&&a.compare(b))}function
gy(c,d,a){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,b=a.length-1;if(b>=0&&a[b]+e>=c)a[b]=Math.max(a[b],d);else
a.push(c,d)}var
aT=function(g){f(d,g);var
h=e(d);function
d(){var
a;b(this,d);a=h.apply(this,arguments);a.children=[];a.length=0;a.prevAttrs=void
0;a.attrs=null;a.breakAfter=0;return a}c(d,[{key:"merge",value:function(b,g,a,c,f,e){if(a){if(!(a
instanceof
d))return false;if(!this.dom)a.transferDOM(this)}if(c)this.setDeco(a?a.attrs:null);qd(this,b,g,a?a.children:[],f,e);return true}},{key:"split",value:function(g){var
b=new
d();b.breakAfter=this.breakAfter;if(this.length==0)return b;var
f=this.childPos(g),a=f.i,e=f.off;if(e){b.append(this.children[a].split(e),0);this.children[a].merge(e,this.children[a].length,null,false,0,0);a++}for(var
c=a;c<this.children.length;c++)b.append(this.children[c],0);while(a>0&&this.children[a-1].length==0)this.children[--a].destroy();this.children.length=a;this.markDirty();this.length=g;return b}},{key:"transferDOM",value:function(a){if(!this.dom)return;a.setDOM(this.dom);a.prevAttrs=this.prevAttrs===void
0?this.attrs:this.prevAttrs;this.prevAttrs=void
0;this.dom=null}},{key:"setDeco",value:function(a){if(!gE(this.attrs,a)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=a}}},{key:"append",value:function(a,b){px(this,a,b)}},{key:"addLineDeco",value:function(c){var
a=c.spec.attributes,b=c.spec["class"];if(a)this.attrs=g4(a,this.attrs||{});if(b)this.attrs=g4({"class":b},this.attrs||{})}},{key:"domAtPos",value:function(a){return o3(this.dom,this.children,a)}},{key:"reuseDOM",value:function(a){if(a.nodeName=="DIV"){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(e){var
b;if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}else
if(this.dirty&4){mn(this.dom);this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}if(this.prevAttrs!==void
0){iV(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void
0}t(r(d.prototype),"sync",this).call(this,e);var
a=this.dom.lastChild;while(a&&_.get(a)instanceof
dQ)a=a.lastChild;if(!a||a.nodeName!="BR"&&((b=_.get(a))===null||b===void
0?void
0:b.isEditable)==false&&(!n.ios||!this.children.some(function(a){return a
instanceof
d2}))){var
c=document.createElement("BR");c.cmIgnore=true;this.dom.appendChild(c)}}},{key:"measureTextSize",value:function(){if(this.children.length==0||this.length>20)return null;var
f=0,b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(!(d
instanceof
d2))return null;var
e=cg(d.dom);if(e.length!=1)return null;f+=e[0].width}}catch(a){b.e(a)}finally{b.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:f/this.length}}},{key:"coordsAt",value:function(a,b){return mR(this,a,b)}},{key:"become",value:function(a){return false}},{key:"type",get:function(){return V.Text}}],[{key:"find",value:function(e,g){for(var
b=0,f=0;b<e.children.length;b++){var
a=e.children[b],c=f+a.length;if(c>=g){if(a
instanceof
d)return a;if(c>g)break}f=c+a.breakAfter}return null}}]);return d}(_),fo=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.type=e;c.breakAfter=0;return c}c(a,[{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"domAtPos",value:function(a){return a==0?ay.before(this.dom):ay.after(this.dom,a==this.length)}},{key:"split",value:function(b){var
d=this.length-b;this.length=b;var
c=new
a(this.widget,d,this.type);c.breakAfter=this.breakAfter;return c}},{key:"children",get:function(){return il}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):p.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(b){if(b
instanceof
a&&b.type==this.type&&b.widget.constructor==this.widget.constructor){if(!b.widget.eq(this.widget))this.markDirty(true);this.widget=b.widget;this.length=b.length;this.breakAfter=b.breakAfter;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}]);return a}(_),tC=function(){function
d(a,c,f,e){b(this,d);this.doc=a;this.pos=c;this.end=f;this.disallowBlockEffectsBelow=e;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=c}c(d,[{key:"posCovered",value:function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var
a=this.content[this.content.length-1];return!a.breakAfter&&!(a
instanceof
fo&&a.type==V.WidgetBefore)}},{key:"getLine",value:function(){if(!this.curLine){this.content.push(this.curLine=new
aT());this.atCursorPos=true}return this.curLine}},{key:"flushBuffer",value:function(a){if(this.pendingBuffer){this.curLine.append(fj(new
f9(-1),a),a.length);this.pendingBuffer=0}}},{key:"addBlockWidget",value:function(a){this.flushBuffer([]);this.curLine=null;this.content.push(a)}},{key:"finish",value:function(a){if(!a)this.flushBuffer([]);else
this.pendingBuffer=0;if(!this.posCovered())this.getLine()}},{key:"buildText",value:function(a,e,c){while(a>0){if(this.textOff==this.text.length){var
b=this.cursor.next(this.skip),h=b.value,g=b.lineBreak,f=b.done;this.skip=0;if(f)throw new
Error("Ran out of text content when drawing inline views");if(g){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else
this.breakAtStart=1;this.flushBuffer([]);this.curLine=null;a--;continue}else{this.text=h;this.textOff=0}}var
d=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(e.slice(0,c));this.getLine().append(fj(new
d2(this.text.slice(this.textOff,this.textOff+d)),e),c);this.atCursorPos=true;this.textOff+=d;a-=d;c=0}}},{key:"span",value:function(d,b,c,a){this.buildText(b-d,c,a);this.pos=b;if(this.openStart<0)this.openStart=a}},{key:"point",value:function(f,e,a,b,d){var
c=e-f;if(a
instanceof
cE)if(a.block){var
k=a.type;if(k==V.WidgetAfter&&!this.posCovered())this.getLine();this.addBlockWidget(new
fo(a.widget||new
kj("div"),c,k))}else{var
g=gb.create(a.widget||new
kj("span"),c,a.startSide),i=this.atCursorPos&&!g.isEditable&&d<=b.length&&(f<e||a.startSide>0),h=!g.isEditable&&(f<e||a.startSide<=0),j=this.getLine();if(this.pendingBuffer==2&&!i)this.pendingBuffer=0;this.flushBuffer(b);if(i){j.append(fj(new
f9(1),b),d);d=b.length+Math.max(0,d-b.length)}j.append(fj(g,b),d);this.atCursorPos=h;this.pendingBuffer=!h?0:f<e?1:2}else
if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(a);if(c){if(this.textOff+c<=this.text.length)this.textOff+=c;else{this.skip+=c-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=d}},{key:"filterPoint",value:function(d,c,a,b){if(b>=this.disallowBlockEffectsBelow||!(a
instanceof
cE))return true;if(a.block)throw new
RangeError("Block decorations may not be specified via plugins");return c<=this.doc.lineAt(this.pos).to}}],[{key:"build",value:function(g,b,c,e,f){var
a=new
d(g,b,c,f);a.openEnd=k.spans(e,b,c,a);if(a.openStart<0)a.openStart=a.openEnd;a.finish(a.openEnd);return a}}]);return d}();function
fj(c,e){var
b=a(e),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;c=new
dQ(f,[c],c.length)}}catch(a){b.e(a)}finally{b.f()}return c}var
kj=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.tag=d;return c}c(a,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return a}(ea),Bm=[],ms=h.define(),nQ=h.define(),qr=h.define(),oa=h.define(),i0=h.define(),o8=h.define(),iA=j.define({map:function(b,a){return b.map(a)}}),mf=j.define({map:function(b,a){return b.map(a)}}),dW=function(){function
a(c){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"nearest",d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"nearest",g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5,e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;b(this,a);this.range=c;this.y=f;this.x=d;this.yMargin=g;this.xMargin=e}c(a,[{key:"map",value:function(b){return b.empty?this:new
a(this.range.map(b),this.y,this.x,this.yMargin,this.xMargin)}}]);return a}(),rQ=j.define({map:function(b,a){return b.map(a)}});function
bU(d,a,b){var
c=d.facet(oa);if(c.length)c[0](a);else
if(window.onerror)window.onerror(String(a),b,void
0,void
0,a);else
if(b)console.error(b+":",a);else
console.error(a)}var
c3=h.define({combine:function(a){return a.length?a[0]:true}}),u$=c(function
a(c,d){b(this,a);this.field=c;this.get=d}),aL=function(){function
a(){b(this,a)}c(a,[{key:"from",value:function(a){return new
u$(this,a)}}],[{key:"define",value:function(){return new
a()}}]);return a}();aL.decorations=aL.define();aL.atomicRanges=aL.define();aL.scrollMargins=aL.define();var
A6=0,dA=h.define(),vy=function(){function
d(e,a,c){b(this,d);this.id=e;this.create=a;this.fields=c;this.extension=dA.of(this)}c(d,null,[{key:"define",value:function(j,l){var
f=l||{},i=f.eventHandlers,e=f.provide,h=f.decorations,c=[];if(e){var
b=a(Array.isArray(e)?e:[e]),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;c.push(k)}}catch(a){b.e(a)}finally{b.f()}}if(i)c.push(nG.from(function(a){return{plugin:a,handlers:i}}));if(h)c.push(aL.decorations.from(h));return new
d(A6++,j,c)}},{key:"fromClass",value:function(b,a){return d.define(function(a){return new
b(a)},a)}}]);return d}(),nG=aL.define(),fX=function(){function
d(a){b(this,d);this.spec=a;this.mustUpdate=null;this.value=null}c(d,[{key:"takeField",value:function(h,g){if(this.spec){var
b=a(this.spec.fields),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,e=d.field,f=d.get;if(e==h)g.push(f(this.value))}}catch(a){b.e(a)}finally{b.f()}}}},{key:"update",value:function
a(b){if(!this.value){if(this.spec)try{this.value=this.spec.create(b)}catch(a){bU(b.state,a,"CodeMirror plugin crashed");this.deactivate()}}else
if(this.mustUpdate){var
a=this.mustUpdate;this.mustUpdate=null;if(this.value.update)try{this.value.update(a)}catch(b){bU(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(a){}this.deactivate()}}return this}},{key:"destroy",value:function(b){var
a;if((a=this.value)===null||a===void
0?void
0:a.destroy)try{this.value.destroy()}catch(a){bU(b.state,a,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]);return d}(),n0=h.define(),mM=h.define(),bM=h.define(),dn=h.define(),cx=function(){function
d(a,e,c,f){b(this,d);this.fromA=a;this.toA=e;this.fromB=c;this.toB=f}c(d,[{key:"join",value:function(a){return new
d(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(c){var
a=c.length,b=this;for(;a>0;a--){var
d=c[a-1];if(d.fromA>b.toA)continue;if(d.toA<b.fromA)break;b=b.join(d);c.splice(a-1,1)}c.splice(a,0,b);return c}}],[{key:"extendWithRanges",value:function(f,c){if(c.length==0)return f;var
j=[];for(var
e=0,b=0,m=0,i=0;;e++){var
a=e==f.length?null:f[e],l=m-i,g=a?a.fromB:1e9;while(b<c.length&&c[b]<g){var
o=c[b],n=c[b+1],h=Math.max(i,o),k=Math.min(g,n);if(h<=k)new
d(h+l,k+l,h,k).addToSet(j);if(n>g)break;else
b+=2}if(!a)return j;new
d(a.fromA,a.toA,a.fromB,a.toB).addToSet(j);m=a.toA;i=a.toB}}}]);return d}(),kR=function(){function
e(c,j){var
i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bm;b(this,e);this.view=c;this.state=j;this.transactions=i;this.flags=0;this.startState=c.state;this.changes=X.empty(this.startState.doc.length);var
d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
k=f.value;this.changes=this.changes.compose(k.changes)}}catch(a){d.e(a)}finally{d.f()}var
g=[];this.changes.iterChangedRanges(function(a,c,b,d){return g.push(new
cx(a,c,b,d))});this.changedRanges=g;var
h=c.hasFocus;if(h!=c.inputState.notifiedFocused){c.inputState.notifiedFocused=h;this.flags|=1}}c(e,[{key:"viewportChanged",get:function(){return(this.flags&4)>0}},{key:"heightChanged",get:function(){return(this.flags&2)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(this.flags&(8|2))>0}},{key:"focusChanged",get:function(){return(this.flags&1)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return this.flags==0&&this.transactions.length==0}}]);return e}(),B=function(a){a[a["LTR"]=0]="LTR";a[a["RTL"]=1]="RTL";return a}(B||(B={})),fE=B.LTR,vg=B.RTL;function
nj(c){var
b=[];for(var
a=0;a<c.length;a++)b.push(1<<+c[a]);return b}var
uz=nj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),s1=nj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ft=Object.create(null),a2=[];for(var
gm=0,k2=["()","[]","{}"];gm<k2.length;gm++){var
lp=k2[gm],le=lp.charCodeAt(0),lw=lp.charCodeAt(1);ft[le]=lw;ft[lw]=-le}function
w6(a){return a<=247?uz[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?s1[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8203?256:a==8204?256:1}var
s$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b0=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.level=d}c(a,[{key:"dir",get:function(){return this.level%2?vg:fE}},{key:"side",value:function(b,a){return this.dir==a==b?this.to:this.from}}],[{key:"find",value:function(e,d,g,f){var
c=-1;for(var
b=0;b<e.length;b++){var
a=e[b];if(a.from<=d&&a.to>=d){if(a.level==g)return b;if(c<0||(f!=0?f<0?a.from<d:a.to>d:e[c].level>a.level))c=b}}if(c<0)throw new
RangeError("Index out of range");return c}}]);return a}(),N=[];function
xl(q,G){var
a=q.length,c=G==fE?1:2,R=G==fE?2:1;if(!q||c==1&&!s$.test(q))return su(a);for(var
r=0,I=c,J=c;r<a;r++){var
d=w6(q.charCodeAt(r));if(d==512)d=I;else
if(d==8&&J==4)d=16;N[r]=d==4?2:d;if(d&7)J=d;I=d}for(var
b=0,o=c,u=c;b<a;b++){var
j=N[b];if(j==128)if(b<a-1&&o==N[b+1]&&o&24)j=N[b]=o;else
N[b]=256;else
if(j==64){var
k=b+1;while(k<a&&N[k]==64)k++;var
S=b&&o==8||k<a&&N[k]==8?u==1?1:8:256;for(var
y=b;y<k;y++)N[y]=S;b=k-1}else
if(j==8&&u==1)N[b]=1;o=j;if(j&7)u=j}for(var
l=0,m=0,E=0,D,w,v;l<a;l++)if(w=ft[D=q.charCodeAt(l)])if(w<0){for(var
n=m-3;n>=0;n-=3)if(a2[n+1]==-w){var
x=a2[n+2],L=x&2?c:!(x&4)?0:x&1?R:c;if(L)N[l]=N[a2[n]]=L;m=n;break}}else
if(a2.length==189)break;else{a2[m++]=l;a2[m++]=D;a2[m++]=E}else
if((v=N[l])==2||v==1){var
H=v==c;E=H?0:1;for(var
p=m-3;p>=0;p-=3){var
F=a2[p+2];if(F&2)break;if(H)a2[p+2]|=2;else{if(F&4)break;a2[p+2]|=4}}}for(var
e=0;e<a;e++)if(N[e]==256){var
g=e+1;while(g<a&&N[g]==256)g++;var
C=(e?N[e-1]:c)==1,Q=(g<a?N[g]:c)==1,O=C==Q?C?1:2:c;for(var
t=e;t<g;t++)N[t]=O;e=g-1}var
s=[];if(c==1)for(var
f=0;f<a;){var
z=f,K=N[f++]!=1;while(f<a&&K==(N[f]!=1))f++;if(K)for(var
i=f;i>z;){var
M=i,A=N[--i]!=2;while(i>z&&A==(N[i-1]!=2))i--;s.push(new
b0(i,M,A?2:1))}else
s.push(new
b0(z,f,0))}else
for(var
h=0;h<a;){var
P=h,B=N[h++]==2;while(h<a&&B==(N[h]==2))h++;s.push(new
b0(P,h,B?1:2))}return s}function
su(a){return[new
b0(0,a,0)]}var
qD="";function
AZ(c,e,b,l,a){var
k,f=l.head-c.from,h=-1;if(f==0){if(!a||!c.length)return null;if(e[0].level!=b){f=e[0].side(false,b);h=0}}else
if(f==c.length){if(a)return null;var
n=e[e.length-1];if(n.level!=b){f=n.side(true,b);h=e.length-1}}if(h<0)h=b0.find(e,f,(k=l.bidiLevel)!==null&&k!==void
0?k:-1,l.assoc);var
g=e[h];if(f==g.side(a,b)){g=e[h+=a?1:-1];f=g.side(!a,b)}var
m=a==(g.dir==b),i=x(c.text,f,m);qD=c.text.slice(Math.min(f,i),Math.max(f,i));if(i!=g.side(a,b))return d.cursor(i+c.from,m?-1:1,g.level);var
j=h==(a?e.length-1:0)?null:e[h+(a?1:-1)];if(!j&&g.level!=b)return d.cursor(a?c.to:c.from,a?-1:1,b);if(j&&j.level<g.level)return d.cursor(j.side(!a,b)+c.from,a?1:-1,j.level);return d.cursor(i+c.from,a?-1:1,g.level)}var
jK=function(){function
d(c,a){b(this,d);this.points=c;this.view=a;this.text="";this.lineBreak=a.state.lineBreak}c(d,[{key:"readRange",value:function(d,e){if(!d)return this;var
f=d.parentNode;for(var
a=d;;){this.findPointBefore(f,a);this.readNode(a);var
b=a.nextSibling;if(b==e)break;var
c=_.get(a),g=_.get(b);if(c&&g?c.breakAfter:(c?c.breakAfter:pq(a))||pq(b)&&(a.nodeName!="BR"||a.cmIgnore))this.text+=this.lineBreak;a=b}this.findPointBefore(f,e);return this}},{key:"readTextNode",value:function(d){var
b,c,a=d.nodeValue;if(/^\u200b/.test(a)&&((b=d.previousSibling)===null||b===void
0?void
0:b.contentEditable)=="false")a=a.slice(1);if(/\u200b$/.test(a)&&((c=d.nextSibling)===null||c===void
0?void
0:c.contentEditable)=="false")a=a.slice(0,a.length-1);return a}},{key:"readNode",value:function(a){if(a.cmIgnore)return;var
d=_.get(a),c=d&&d.overrideDOMText,b;if(c!=null)b=c.sliceString(0,void
0,this.lineBreak);else
if(a.nodeType==3)b=this.readTextNode(a);else
if(a.nodeName=="BR")b=a.nextSibling?this.lineBreak:"";else
if(a.nodeType==1)this.readRange(a.firstChild,null);if(b!=null){this.findPointIn(a,b.length);this.text+=b;if(n.chrome&&this.view.inputState.lastKeyCode==13&&!a.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}}},{key:"findPointBefore",value:function(e,f){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==e&&e.childNodes[c.offset]==f)c.pos=this.text.length}}catch(a){b.e(a)}finally{b.f()}}},{key:"findPointIn",value:function(f,e){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==f)c.pos=this.text.length+Math.min(c.offset,e)}}catch(a){b.e(a)}finally{b.f()}}}]);return d}();function
pq(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}var
jG=c(function
a(c,d){b(this,a);this.node=c;this.offset=d;this.pos=-1}),jS=function(g){f(d,g);var
h=e(d);function
d(c){var
a;b(this,d);a=h.call(this);a.view=c;a.compositionDeco=an.none;a.decorations=[];a.pluginDecorationLength=0;a.minWidth=0;a.minWidthFrom=0;a.minWidthTo=0;a.impreciseAnchor=null;a.impreciseHead=null;a.forceSelection=false;a.lastUpdate=Date.now();a.setDOM(c.contentDOM);a.children=[new
aT()];a.children[0].setParent(aQ(a));a.updateDeco();a.updateInner([new
cx(0,0,0,c.state.doc.length)],0);return a}c(d,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(a){var
c=this,b=a.changedRanges;if(this.minWidth>0&&b.length)if(!b.every(function(a){var
b=a.fromA,d=a.toA;return d<c.minWidthFrom||b>c.minWidthTo}))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else{this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)}if(this.view.inputState.composing<0)this.compositionDeco=an.none;else
if(a.transactions.length||this.dirty)this.compositionDeco=xg(this.view,a.changes);if((n.ie||n.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines)this.forceSelection=true;var
f=this.decorations,d=this.updateDeco(),e=yr(f,d,a.changes);b=cx.extendWithRanges(b,e);if(this.dirty==0&&b.length==0)return false;else{this.updateInner(b,a.startState.doc.length);if(a.transactions.length)this.lastUpdate=Date.now();return true}}},{key:"updateInner",value:function(h,i){var
b=this;this.view.viewState.mustMeasureContent=true;this.updateChildren(h,i);var
d=this.view.observer;d.ignore(function(){b.dom.style.height=b.view.viewState.contentHeight+"px";b.dom.style.minWidth=b.minWidth?b.minWidth+"px":"";var
a=n.chrome||n.ios?{node:d.selectionRange.focusNode,written:false}:void
0;b.sync(a);b.dirty=0;if(a&&(a.written||d.selectionRange.focusNode!=a.node))b.forceSelection=true;b.dom.style.height=""});var
g=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var
c=a(this.children),f;try{for(c.s();!(f=c.n()).done;){var
e=f.value;if(e
instanceof
fo&&e.widget
instanceof
jl)g.push(e.dom)}}catch(a){c.e(a)}finally{c.f()}}d.updateGaps(g)}},{key:"updateChildren",value:function(f,n){var
g=this.childCursor(n);for(var
c=f.length-1;;c--){var
a=c>=0?f[c]:null;if(!a)break;var
j=a.fromA,q=a.toA,k=a.fromB,r=a.toB,b=tC.build(this.view.state.doc,k,r,this.decorations,this.pluginDecorationLength),i=b.content,h=b.breakAtStart,p=b.openStart,o=b.openEnd,d=g.findPos(q,1),s=d.i,t=d.off,e=g.findPos(j,-1),l=e.i,m=e.off;rn(this,l,m,s,t,i,h,p,o)}}},{key:"updateSelection",value:function(){var
f=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(i)this.view.observer.readSelectionRange();if(!(h||this.mayControlSelection())||n.ios&&this.view.inputState.rapidCompositionStart)return;var
g=this.forceSelection;this.forceSelection=false;var
d=this.view.state.selection.main,a=this.domAtPos(d.anchor),c=d.empty?a:this.domAtPos(d.head);if(n.gecko&&d.empty&&wA(a)){var
e=document.createTextNode("");this.view.observer.ignore(function(){return a.node.insertBefore(e,a.node.childNodes[a.offset]||null)});a=c=new
ay(e,0);g=true}var
b=this.view.observer.selectionRange;if(g||!b.focusNode||!eT(a.node,a.offset,b.anchorNode,b.anchorOffset)||!eT(c.node,c.offset,b.focusNode,b.focusOffset)){this.view.observer.ignore(function(){if(n.android&&n.chrome&&f.dom.contains(b.focusNode)&&zI(b.focusNode,f.dom)){f.dom.blur();f.dom.focus({preventScroll:true})}var
e=eG(f.root);if(d.empty){if(n.gecko){var
g=Bb(a.node,a.offset);if(g&&g!=(1|2)){var
h=qI(a.node,a.offset,g==1?1:-1);if(h)a=new
ay(h,g==1?0:h.nodeValue.length)}}e.collapse(a.node,a.offset);if(d.bidiLevel!=null&&b.cursorBidiLevel!=null)b.cursorBidiLevel=d.bidiLevel}else
if(e.extend){e.collapse(a.node,a.offset);e.extend(c.node,c.offset)}else{var
i=document.createRange();if(d.anchor>d.head){var
j=[c,a];a=j[0];c=j[1]}i.setEnd(c.node,c.offset);i.setStart(a.node,a.offset);e.removeAllRanges();e.addRange(i)}});this.view.observer.setSelectionRange(a,c)}this.impreciseAnchor=a.precise?null:new
ay(b.anchorNode,b.anchorOffset);this.impreciseHead=c.precise?null:new
ay(b.focusNode,b.focusOffset)}},{key:"enforceCursorAssoc",value:function(){if(this.compositionDeco.size)return;var
a=this.view.state.selection.main,c=eG(this.root);if(!a.empty||!a.assoc||!c.modify)return;var
b=aT.find(this,a.head);if(!b)return;var
g=b.posAtStart;if(a.head==g||a.head==g+b.length)return;var
e=this.coordsAt(a.head,-1),d=this.coordsAt(a.head,1);if(!e||!d||e.bottom>d.top)return;var
f=this.domAtPos(a.head+a.assoc);c.collapse(f.node,f.offset);c.modify("move",a.assoc<0?"forward":"backward","lineboundary")}},{key:"mayControlSelection",value:function(){return this.view.state.facet(c3)?this.root.activeElement==this.dom:hU(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(c){for(var
a=c;a;){var
b=_.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}},{key:"posFromDOM",value:function(b,c){var
a=this.nearest(b);if(!a)throw new
RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(b,c)+a.posAtStart}},{key:"domAtPos",value:function(e){var
c=this.childCursor().findPos(e,-1),a=c.i,b=c.off;for(;a<this.children.length-1;){var
d=this.children[a];if(b<d.length||d
instanceof
aT)break;a++;b=0}return this.children[a].domAtPos(b)}},{key:"coordsAt",value:function(d,e){for(var
f=this.length,a=this.children.length-1;;a--){var
b=this.children[a],c=f-b.breakAfter-b.length;if(d>c||d==c&&b.type!=V.WidgetBefore&&b.type!=V.WidgetAfter&&(!a||e==2||this.children[a-1].breakAfter||this.children[a-1].type==V.WidgetBefore&&e>-2))return b.coordsAt(d-c,e);f=c}}},{key:"measureVisibleLineHeights",value:function(){var
k=[],g=this.view.viewState.viewport,n=g.from,p=g.to,h=this.view.contentDOM.clientWidth,o=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1;for(var
b=0,c=0;c<this.children.length;c++){var
a=this.children[c],e=b+a.length;if(e>p)break;if(b>=n){var
d=a.dom.getBoundingClientRect();k.push(d.height);if(o){var
i=a.dom.lastChild,f=i?cg(i):[];if(f.length){var
j=f[f.length-1],m=this.view.textDirection==B.LTR?j.right-d.left:d.right-j.left;if(m>l){l=m;this.minWidth=h;this.minWidthFrom=b;this.minWidthTo=e}}}}b=e+a.breakAfter}return k}},{key:"measureTextSize",value:function(){var
i=this,c=a(this.children),d;try{for(c.s();!(d=c.n()).done;){var
f=d.value;if(f
instanceof
aT){var
h=f.measureTextSize();if(h)return h}}}catch(a){c.e(a)}finally{c.f()}var
b=document.createElement("div"),g,e;b.className="cm-line";b.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){i.dom.appendChild(b);var
a=cg(b.firstChild)[0];g=b.getBoundingClientRect().height;e=a?a.width/27:7;b.remove()});return{lineHeight:g,charWidth:e}}},{key:"childCursor",value:function(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length,a=this.children.length;if(a)b-=this.children[--a].length;return new
jy(this.children,b,a)}},{key:"computeBlockGapDeco",value:function(){var
f=[],c=this.view.viewState;for(var
b=0,d=0;;d++){var
a=d==c.viewports.length?null:c.viewports[d],e=a?a.from-1:this.length;if(e>b){var
g=c.lineBlockAt(e).bottom-c.lineBlockAt(b).top;f.push(an.replace({widget:new
jl(g),block:true,inclusive:true}).range(b,e))}if(!a)break;b=a.to+1}return an.set(f)}},{key:"updateDeco",value:function(){var
a=this.view.pluginField(aL.decorations);this.pluginDecorationLength=a.length;return this.decorations=[].concat(P(a),P(this.view.state.facet(bM)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(f){var
b=f.range,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(!c)return;if(!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1)))c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)};var
i=0,j=0,k=0,h=0,g=a(this.view.pluginField(aL.scrollMargins)),l;try{for(g.s();!(l=g.n()).done;){var
d=l.value;if(d){var
n=d.left,o=d.right,p=d.top,m=d.bottom;if(n!=null)i=Math.max(i,n);if(o!=null)j=Math.max(j,o);if(p!=null)k=Math.max(k,p);if(m!=null)h=Math.max(h,m)}}}catch(a){g.e(a)}finally{g.f()}var
q={left:c.left-i,top:c.top-k,right:c.right+j,bottom:c.bottom+h};B7(this.view.scrollDOM,q,b.head<b.anchor?-1:1,f.x,f.y,f.xMargin,f.yMargin,this.view.textDirection==B.LTR)}}]);return d}(_);function
wA(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}var
jl=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.height=d;return c}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("div");this.updateDOM(a);return a}},{key:"eq",value:function(a){return a.height==this.height}},{key:"updateDOM",value:function(a){a.style.height=this.height+"px";return true}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(ea);function
mF(i){var
f=i.observer.selectionRange,c=f.focusNode&&qI(f.focusNode,f.focusOffset,0);if(!c)return null;var
a=i.docView.nearest(c);if(!a)return null;if(a
instanceof
aT){var
d=c;while(d.parentNode!=a.dom)d=d.parentNode;var
b=d.previousSibling;while(b&&!_.get(b))b=b.previousSibling;var
h=b?_.get(b).posAtEnd:a.posAtStart;return{from:h,to:h,node:d,text:c}}else{for(;;){var
j=a,e=j.parent;if(!e)return null;if(e
instanceof
aT)break;a=e}var
g=a.posAtStart;return{from:g,to:g+a.length,node:a.dom,text:c}}}function
xg(g,h){var
d=mF(g);if(!d)return an.none;var
i=d.from,k=d.to,e=d.node,j=d.text,a=h.mapPos(i,1),c=Math.max(a,h.mapPos(k,-1)),f=g.state,b=e.nodeType==3?e.nodeValue:new
jK([],g).readRange(e.firstChild,null).text;if(c-a<b.length)if(f.sliceDoc(a,Math.min(f.doc.length,a+b.length))==b)c=a+b.length;else
if(f.sliceDoc(Math.max(0,c-b.length),c)==b)a=c-b.length;else
return an.none;else
if(f.sliceDoc(a,c)!=b)return an.none;return an.set(an.replace({widget:new
tx(e,j)}).range(a,c))}var
tx=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.top=e;c.text=d;return c}c(a,[{key:"eq",value:function(a){return this.top==a.top&&this.text==a.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return false}},{key:"customView",get:function(){return ts}}]);return a}(ea);function
qI(a,b,c){for(;;){if(a.nodeType==3)return a;if(a.nodeType==1&&b>0&&c<=0){a=a.childNodes[b-1];b=e1(a)}else
if(a.nodeType==1&&b<a.childNodes.length&&c>=0){a=a.childNodes[b];b=0}else
return null}}function
Bb(a,b){if(a.nodeType!=1)return 0;return(b&&a.childNodes[b-1].contentEditable=="false"?1:0)|(b<a.childNodes.length&&a.childNodes[b].contentEditable=="false"?2:0)}var
tT=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(a,b){gy(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){gy(a,b,this.changes)}}]);return a}();function
yr(b,c,d){var
a=new
tT();k.compare(b,c,d,a);return a.changes}function
zI(c,b){for(var
a=c;a&&a!=b;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return true;return false}function
za(l,f){var
g=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,h=l.charCategorizer(f),a=l.doc.lineAt(f),e=f-a.from;if(a.length==0)return d.cursor(f);if(e==0)g=1;else
if(e==a.length)g=-1;var
b=e,c=e;if(g<0)b=x(a.text,e,false);else
c=x(a.text,e);var
i=h(a.text.slice(b,c));while(b>0){var
k=x(a.text,b,false);if(h(a.text.slice(k,b))!=i)break;b=k}while(c<a.length){var
j=x(a.text,c);if(h(a.text.slice(c,j))!=i)break;c=j}return d.range(b+a.from,c+a.from)}function
y1(b,a){return a.left>b?a.left-b:Math.max(0,b-a.right)}function
y6(b,a){return a.top>b?a.top-b:Math.max(0,b-a.bottom)}function
ja(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function
sG(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function
sB(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function
hv(k,h,g){var
f,b,m,n,o,p,c,d;for(var
e=k.firstChild;e;e=e.nextSibling){var
r=cg(e);for(var
l=0;l<r.length;l++){var
a=r[l];if(b&&ja(b,a))a=sG(sB(a,b.bottom),b.top);var
i=y1(h,a),j=y6(g,a);if(i==0&&j==0)return e.nodeType==3?nL(e,h,g):hv(e,h,g);if(!f||n>j||n==j&&m>i){f=e;b=a;m=i;n=j}if(i==0){if(g>a.bottom&&(!c||c.bottom<a.bottom)){o=e;c=a}else
if(g<a.top&&(!d||d.top>a.top)){p=e;d=a}}else
if(c&&ja(c,a))c=sB(c,a.bottom);else
if(d&&ja(d,a))d=sG(d,a.top)}}if(c&&c.bottom>=g){f=o;b=c}else
if(d&&d.top<=g){f=p;b=d}if(!f)return{node:k,offset:0};var
q=Math.max(b.left,Math.min(b.right,h));if(f.nodeType==3)return nL(f,q,g);if(!m&&f.contentEditable=="true")return hv(f,q,g);var
s=Array.prototype.indexOf.call(k.childNodes,f)+(h>=(b.left+b.right)/2?1:0);return{node:k,offset:s}}function
nL(c,d,j){var
o=c.nodeValue.length,f=-1,k=1e9,h=0;for(var
b=0;b<o;b++){var
l=dt(c,b,b+1).getClientRects();for(var
i=0;i<l.length;i++){var
a=l[i];if(a.top==a.bottom)continue;if(!h)h=d-a.left;var
g=(a.top>j?a.top-j:j-a.bottom)-1;if(a.left-1<=d&&a.right+1>=d&&g<k){var
m=d>=(a.left+a.right)/2,e=m;if(n.chrome||n.gecko){var
p=dt(c,b).getBoundingClientRect();if(p.left==a.right)e=!m}if(g<=0)return{node:c,offset:b+(e?1:0)};f=b+(e?1:0);k=g}}}return{node:c,offset:f>-1?f:h>0?c.nodeValue.length:0}}function
qY(a,s,p){var
d=s.x,e=s.y,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1,k,h=a.contentDOM.getBoundingClientRect(),v=h.top+a.viewState.paddingTop,b,u=a.viewState.docHeight,g=e-v;if(g<0)return 0;if(g>u)return a.state.doc.length;for(var
w=a.defaultLineHeight/2,t=false;;){b=a.elementAtHeight(g);if(b.type==V.Text)break;for(;;){g=l>0?b.bottom+w:b.top-w;if(g>=0&&g<=u)break;if(t)return p?null:0;t=true;l=-l}}e=v+g;var
m=b.from;if(m<a.viewport.from)return a.viewport.from==0?0:p?null:q3(a,h,b,d,e);if(m>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:p?null:q3(a,h,b,d,e);var
i=a.dom.ownerDocument,y=a.root.elementFromPoint?a.root:i,c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null;if(!c){d=Math.max(h.left+1,Math.min(h.right-1,d));c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null}var
f,j=-1;if(c&&((k=a.docView.nearest(c))===null||k===void
0?void
0:k.isEditable)!=false)if(i.caretPositionFromPoint){var
o=i.caretPositionFromPoint(d,e);if(o){f=o.offsetNode;j=o.offset}}else
if(i.caretRangeFromPoint){var
q=i.caretRangeFromPoint(d,e);if(q){f=q.startContainer;j=q.startOffset;if(n.safari&&z$(f,j,d))f=void
0}}if(!f||!a.docView.dom.contains(f)){var
x=aT.find(a.docView,m);if(!x)return g>b.top+b.height/2?b.to:b.from;var
r=hv(x.dom,d,e);f=r.node;j=r.offset}return a.docView.posFromDOM(f,j)}function
q3(a,e,b,g,h){var
c=Math.round((g-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&b.height>a.defaultLineHeight*1.5){var
f=Math.floor((h-b.top)/a.defaultLineHeight);c+=f*a.viewState.heightOracle.lineLength}var
d=a.state.sliceDoc(b.from,b.to);return b.from+bO(d,c,a.state.tabSize)}function
z$(b,d,e){var
c;if(b.nodeType!=3||d!=(c=b.nodeValue.length))return false;for(var
a=b.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return false;return dt(b,c-1,c).getBoundingClientRect().left>e}function
AQ(a,b,c,k){var
f=a.state.doc.lineAt(b.head),e=!k||!a.lineWrapping?null:a.coordsAtPos(b.assoc<0&&b.head>f.from?b.head-1:b.head);if(e){var
h=a.dom.getBoundingClientRect(),i=a.posAtCoords({x:c==(a.textDirection==B.LTR)?h.right-1:h.left+1,y:(e.top+e.bottom)/2});if(i!=null)return d.cursor(i,c?-1:1)}var
g=aT.find(a.docView,b.head),j=g?c?g.posAtEnd:g.posAtStart:c?f.to:f.from;return d.cursor(j,c?-1:1)}function
qv(b,k,e,i){var
a=b.state.doc.lineAt(k.head),j=b.bidiSpans(a);for(var
c=k,h=null;;){var
f=AZ(a,j,b.textDirection,c,e),g=qD;if(!f){if(a.number==(e?b.state.doc.lines:1))return c;g="\n";a=b.state.doc.line(a.number+(e?1:-1));j=b.bidiSpans(a);f=d.cursor(e?a.from:a.to)}if(!h){if(!i)return f;h=i(g)}else
if(!h(g))return c;c=f}}function
wN(e,b,d){var
c=e.state.charCategorizer(b),a=c(d);return function(d){var
b=c(d);if(a==ak.Space)a=b;return a==b}}function
AU(a,g,p,j){var
b=g.head,f=p?1:-1;if(b==(p?a.state.doc.length:0))return d.cursor(b,g.assoc);var
c=g.goalColumn,m,e=a.contentDOM.getBoundingClientRect(),h=a.coordsAtPos(b),n=a.documentTop;if(h){if(c==null)c=h.left-e.left;m=f<0?h.top:h.bottom}else{var
k=a.viewState.lineBlockAt(b-n);if(c==null)c=Math.min(e.right-e.left,a.defaultCharacterWidth*(b-k.from));m=(f<0?k.top:k.bottom)+n}var
r=e.left+c,q=j!==null&&j!==void
0?j:a.defaultLineHeight>>1;for(var
o=0;;o+=10){var
i=m+(q+o)*f,l=qY(a,{x:r,y:i},false,f);if(i<e.top||i>e.bottom||(f<0?l<b:l>b))return d.cursor(l,g.assoc,void
0,c)}}function
iH(j,h,b){var
g=j.pluginField(aL.atomicRanges);for(;;){var
f=false,c=a(g),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;i.between(b.from-1,b.from+1,function(a,c,e){if(b.from>a&&b.from<c){b=h.from>b.from?d.cursor(a,1):d.cursor(c,-1);f=true}})}}catch(a){c.e(a)}finally{c.f()}if(!f)return b}}var
un=function(){function
e(a){var
d=this;b(this,e);this.lastKeyCode=0;this.lastKeyTime=0;this.pendingIOSKey=void
0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var
c=function(c){var
e=ae[c];a.contentDOM.addEventListener(c,function(b){if(c=="keydown"&&d.keydown(a,b))return;if(!n7(a,b)||d.ignoreDuringComposition(b))return;if(d.mustFlushObserver(b))a.observer.forceFlush();if(d.runCustomHandlers(c,a,b))b.preventDefault();else
e(a,b)});d.registeredEvents.push(c)};for(var
f
in
ae)c(f);this.notifiedFocused=a.hasFocus;this.ensureHandlers(a);if(n.safari)a.contentDOM.addEventListener("input",function(){return null})}c(e,[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var
d=this,g=this.customHandlers=c.pluginField(nG),b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,f=function(a){if(d.registeredEvents.indexOf(a)<0&&a!="scroll"){d.registeredEvents.push(a);c.contentDOM.addEventListener(a,function(b){if(!n7(c,b))return;if(d.runCustomHandlers(a,c,b))b.preventDefault()})}};for(var
i
in
h.handlers)f(i)}}catch(a){b.e(a)}finally{b.f()}}},{key:"runCustomHandlers",value:function(h,g,d){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value,e=f.handlers[h];if(e)try{if(e.call(f.plugin,d,g)||d.defaultPrevented)return true}catch(a){bU(g.state,a)}}}catch(a){b.e(a)}finally{b.f()}return false}},{key:"runScrollHandlers",value:function(f,g){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value,d=e.handlers.scroll;if(d)try{d.call(e.plugin,g,f)}catch(a){bU(f.state,a)}}}catch(a){b.e(a)}finally{b.f()}}},{key:"keydown",value:function(b,a){var
d=this;this.lastKeyCode=a.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(b,a))return true;if(n.android&&n.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8)){b.observer.delayAndroidKey(a.key,a.keyCode);return true}var
c;if(n.ios&&(c=ks.find(function(b){return b.keyCode==a.keyCode}))&&!(a.ctrlKey||a.altKey||a.metaKey)&&!a.synthetic){this.pendingIOSKey=c;setTimeout(function(){return d.flushIOSKey(b)},250);return true}return false}},{key:"flushIOSKey",value:function(b){var
a=this.pendingIOSKey;if(!a)return false;this.pendingIOSKey=void
0;return cY(b.contentDOM,a.key,a.keyCode)}},{key:"ignoreDuringComposition",value:function(a){if(!/^key/.test(a.type))return false;if(this.composing>0)return true;if(n.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false}},{key:"screenKeyEvent",value:function(c,a){var
b=a.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(a.keyCode==27)this.lastEscPress=Date.now();else
if(AK.indexOf(a.keyCode)<0)this.lastEscPress=0;return b}},{key:"mustFlushObserver",value:function(a){return a.type=="keydown"&&a.keyCode!=229||a.type=="compositionend"&&!n.ios}},{key:"startMouseSelection",value:function(a){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=a}},{key:"update",value:function(a){if(this.mouseSelection)this.mouseSelection.update(a);if(a.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){if(this.mouseSelection)this.mouseSelection.destroy()}}]);return e}(),ks=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],AK=[16,17,18,20,91,92,224,225],uY=function(){function
d(c,a,g,f){b(this,d);this.view=c;this.style=g;this.mustSelect=f;this.lastEvent=a;var
e=c.contentDOM.ownerDocument;e.addEventListener("mousemove",this.move=this.move.bind(this));e.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=a.shiftKey;this.multiple=c.state.facet(u.allowMultipleSelections)&&v7(c,a);this.dragMove=x4(c,a);this.dragging=z3(c,a)&&hK(a)==1?null:false;if(this.dragging===false){a.preventDefault();this.select(a)}}c(d,[{key:"move",value:function(a){if(a.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=a)}},{key:"up",value:function(a){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var
a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=null}},{key:"select",value:function(b){var
a=this.style.get(b,this.extend,this.multiple);if(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:true});this.mustSelect=false}},{key:"update",value:function(a){var
b=this;if(a.docChanged&&this.dragging)this.dragging=this.dragging.map(a.changes);if(this.style.update(a))setTimeout(function(){return b.select(b.lastEvent)},20)}}]);return d}();function
v7(c,a){var
b=c.state.facet(ms);return b.length?b[0](a):n.mac?a.metaKey:a.ctrlKey}function
x4(c,a){var
b=c.state.facet(nQ);return b.length?b[0](a):n.mac?!a.altKey:!a.ctrlKey}function
z3(f,a){var
g=f.state.selection.main;if(g.empty)return false;var
e=eG(f.root);if(e.rangeCount==0)return true;var
d=e.getRangeAt(0).getClientRects();for(var
c=0;c<d.length;c++){var
b=d[c];if(b.left<=a.clientX&&b.right>=a.clientX&&b.top<=a.clientY&&b.bottom>=a.clientY)return true}return false}function
n7(d,b){if(!b.bubbles)return true;if(b.defaultPrevented)return false;for(var
a=b.target,c;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(c=_.get(a))&&c.ignoreEvent(b))return false;return true}var
ae=Object.create(null),ma=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function
wX(b){var
c=b.dom.parentNode;if(!c)return;var
a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){b.focus();a.remove();nB(b,a.value)},50)}function
nB(e,i){var
a=e.state,c,h=1,b=a.toText(i),g=b.lines==a.selection.ranges.length,f=ia!=null&&a.selection.ranges.every(function(a){return a.empty})&&ia==b.toString();if(f){var
j=-1;c=a.changeByRange(function(e){var
c=a.doc.lineAt(e.from);if(c.from==j)return{range:e};j=c.from;var
f=a.toText((g?b.line(h++).text:i)+a.lineBreak);return{changes:{from:c.from,insert:f},range:d.cursor(e.from+f.length)}})}else
if(g)c=a.changeByRange(function(a){var
c=b.line(h++);return{changes:{from:a.from,to:a.to,insert:c.text},range:d.cursor(a.from+c.length)}});else
c=a.replaceSelection(b);e.dispatch(c,{userEvent:"input.paste",scrollIntoView:true})}ae.keydown=function(a,b){a.inputState.setSelectionOrigin("select")};var
pV=0;ae.touchstart=function(a,b){pV=Date.now();a.inputState.setSelectionOrigin("select.pointer")};ae.touchmove=function(a){a.inputState.setSelectionOrigin("select.pointer")};ae.mousedown=function(b,d){b.observer.flush();if(pV>Date.now()-2e3&&hK(d)==1)return;var
c=null,e=a(b.state.facet(qr)),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;c=h(b,d);if(c)break}}catch(a){e.e(a)}finally{e.f()}if(!c&&d.button==0)c=wu(b,d);if(c){var
g=b.root.activeElement!=b.contentDOM;if(g)b.observer.ignore(function(){return os(b.contentDOM)});b.inputState.startMouseSelection(new
uY(b,d,c,g))}};function
re(e,b,g,h){if(h==1)return d.cursor(b,g);else
if(h==2)return za(e.state,b,g);else{var
a=aT.find(e.docView,b),f=e.state.doc.lineAt(a?a.posAtEnd:b),i=a?a.posAtStart:f.from,c=a?a.posAtEnd:f.to;if(c<e.state.doc.length&&c==f.to)c++;return d.range(i,c)}}var
pg=function(b,a){return b>=a.top&&b<=a.bottom},pb=function(b,c,a){return pg(c,a)&&b>=a.left&&b<=a.right};function
yC(h,f,g,d){var
a=aT.find(h.docView,f);if(!a)return 1;var
c=f-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;var
b=a.coordsAt(c,-1);if(b&&pb(g,d,b))return-1;var
e=a.coordsAt(c,1);if(e&&pb(g,d,e))return 1;return b&&pg(d,b)?-1:1}function
q9(c,a){var
b=c.posAtCoords({x:a.clientX,y:a.clientY},false);return{pos:b,bias:yC(c,b,a.clientX,a.clientY)}}var
s6=n.ie&&n.ie_version<=11,pG=null,pL=0,pQ=0;function
hK(a){if(!s6)return a.detail;var
b=pG,c=pQ;pG=a;pQ=Date.now();return pL=!b||c>Date.now()-400&&Math.abs(b.clientX-a.clientX)<2&&Math.abs(b.clientY-a.clientY)<2?(pL+1)%3:1}function
wu(g,a){var
b=q9(g,a),n=hK(a),e=g.state.selection,m=b,f=a;return{update:function(a){if(a.docChanged){if(b)b.pos=a.changes.mapPos(b.pos);e=e.map(a.changes);f=null}},get:function(h,j,o){var
c;if(f&&h.clientX==f.clientX&&h.clientY==f.clientY)c=m;else{c=m=q9(g,h);f=h}if(!c||!b)return e;var
a=re(g,c.pos,c.bias,n);if(b.pos!=c.pos&&!j){var
k=re(g,b.pos,b.bias,n),i=Math.min(k.from,a.from),l=Math.max(k.to,a.to);a=i<a.from?d.range(i,l):d.range(l,i)}if(j)return e.replaceRange(e.main.extend(a.from,a.to));else
if(o)return e.addRange(a);else
return d.create([a])}}}ae.dragstart=function(c,a){var
b=c.state.selection.main,d=c.inputState.mouseSelection;if(d)d.dragging=b;if(a.dataTransfer){a.dataTransfer.setData("Text",c.state.sliceDoc(b.from,b.to));a.dataTransfer.effectAllowed="copyMove"}};function
nV(b,f,h,i){if(!h)return;var
e=b.posAtCoords({x:f.clientX,y:f.clientY},false);f.preventDefault();var
a=b.inputState.mouseSelection,d=i&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,g={from:e,insert:h},c=b.state.changes(d?[d,g]:g);b.focus();b.dispatch({changes:c,selection:{anchor:c.mapPos(e,-1),head:c.mapPos(e,1)},userEvent:d?"move.drop":"input.drop"})}ae.drop=function(c,a){if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();var
b=a.dataTransfer.files;if(b&&b.length)(function(){a.preventDefault();var
f=Array(b.length),h=0,e=function(){if(++h==b.length)nV(c,a,f.filter(function(a){return a!=null}).join(c.state.lineBreak),false)},g=function(c){var
a=new
FileReader();a.onerror=e;a.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(a.result))f[c]=a.result;e()};a.readAsText(b[c])};for(var
d=0;d<b.length;d++)g(d)}());else
nV(c,a,a.dataTransfer.getData("Text"),true)};ae.paste=function(a,b){if(a.state.readOnly)return b.preventDefault();a.observer.flush();var
c=ma?null:b.clipboardData;if(c){nB(a,c.getData("text/plain"));b.preventDefault()}else
wX(a)};function
wS(d,c){var
b=d.dom.parentNode;if(!b)return;var
a=b.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.value=c;a.focus();a.selectionEnd=c.length;a.selectionStart=0;setTimeout(function(){a.remove();d.focus()},50)}function
xq(b){var
f=[],h=[],k=false,d=a(b.selection.ranges),i;try{for(d.s();!(i=d.n()).done;){var
g=i.value;if(!g.empty){f.push(b.sliceDoc(g.from,g.to));h.push(g)}}}catch(a){d.e(a)}finally{d.f()}if(!f.length){var
l=-1,e=a(b.selection.ranges),j;try{for(e.s();!(j=e.n()).done;){var
m=j.value.from,c=b.doc.lineAt(m);if(c.number>l){f.push(c.text);h.push({from:c.from,to:Math.min(b.doc.length,c.to+1)})}l=c.number}}catch(a){e.e(a)}finally{e.f()}k=true}return{text:f.join(b.lineBreak),ranges:h,linewise:k}}var
ia=null;ae.copy=ae.cut=function(b,e){var
c=xq(b.state),a=c.text,g=c.ranges,f=c.linewise;if(!a&&!f)return;ia=f?a:null;var
d=ma?null:e.clipboardData;if(d){e.preventDefault();d.clearData();d.setData("text/plain",a)}else
wS(b,a);if(e.type=="cut"&&!b.state.readOnly)b.dispatch({changes:g,scrollIntoView:true,userEvent:"delete.cut"})};ae.focus=ae.blur=function(a){setTimeout(function(){if(a.hasFocus!=a.inputState.notifiedFocused)a.update([])},10)};ae.beforeprint=function(a){a.viewState.printing=true;a.requestMeasure();setTimeout(function(){a.viewState.printing=false;a.requestMeasure()},2e3)};function
oy(a,b){if(a.docView.compositionDeco.size){a.inputState.rapidCompositionStart=b;try{a.update([])}finally{a.inputState.rapidCompositionStart=false}}}ae.compositionstart=ae.compositionupdate=function(a){if(a.inputState.compositionFirstChange==null)a.inputState.compositionFirstChange=true;if(a.inputState.composing<0){a.inputState.composing=0;if(a.docView.compositionDeco.size){a.observer.flush();oy(a,true)}}};ae.compositionend=function(a){a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionFirstChange=null;setTimeout(function(){if(a.inputState.composing<0)oy(a,false)},50)};ae.contextmenu=function(a){a.inputState.lastContextMenu=Date.now()};ae.beforeinput=function(b,d){var
c,a;if(n.chrome&&n.android&&(a=ks.find(function(a){return a.inputType==d.inputType}))){b.observer.delayAndroidKey(a.key,a.keyCode);if(a.key=="Backspace"||a.key=="Delete"){var
e=((c=window.visualViewport)===null||c===void
0?void
0:c.height)||0;setTimeout(function(){var
a;if((((a=window.visualViewport)===null||a===void
0?void
0:a.height)||0)>e+10&&b.hasFocus){b.contentDOM.blur();b.focus()}},100)}}};var
sU=["pre-wrap","normal","pre-line","break-spaces"],uf=function(){function
a(){b(this,a);this.doc=p.empty;this.lineWrapping=false;this.direction=B.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}c(a,[{key:"heightForGap",value:function(b,c){var
a=this.doc.lineAt(c).number-this.doc.lineAt(b).number+1;if(this.lineWrapping)a+=Math.ceil((c-b-a*this.lineLength*0.5)/this.lineLength);return this.lineHeight*a}},{key:"heightForLine",value:function(a){if(!this.lineWrapping)return this.lineHeight;var
b=1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5)));return b*this.lineHeight}},{key:"setDoc",value:function(a){this.doc=a;return this}},{key:"mustRefreshForStyle",value:function(b,a){return sU.indexOf(b)>-1!=this.lineWrapping||this.direction!=a}},{key:"mustRefreshForHeights",value:function(c){var
d=false;for(var
a=0;a<c.length;a++){var
b=c[a];if(b<0)a++;else
if(!this.heightSamples[Math.floor(b*10)]){d=true;this.heightSamples[Math.floor(b*10)]=true}}return d}},{key:"refresh",value:function(j,c,f,h,i,e){var
g=sU.indexOf(j)>-1,b=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=g||this.direction!=c;this.lineWrapping=g;this.direction=c;this.lineHeight=f;this.charWidth=h;this.lineLength=i;if(b){this.heightSamples={};for(var
a=0;a<e.length;a++){var
d=e[a];if(d<0)a++;else
this.heightSamples[Math.floor(d*10)]=true}}return b}}]);return a}(),uS=function(){function
a(c,d){b(this,a);this.from=c;this.heights=d;this.index=0}c(a,[{key:"more",get:function(){return this.index<this.heights.length}}]);return a}(),b5=function(){function
d(a,e,f,c,g){b(this,d);this.from=a;this.length=e;this.top=f;this.height=c;this.type=g}c(d,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(a){var
b=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new
d(this.from,this.length+a.length,this.top,this.height+a.height,b)}},{key:"moveY",value:function(a){return!a?this:new
d(this.from,this.length,this.top+a,this.height,Array.isArray(this.type)?this.type.map(function(b){return b.moveY(a)}):this.type)}}]);return d}(),F=function(a){a[a["ByPos"]=0]="ByPos";a[a["ByHeight"]=1]="ByHeight";a[a["ByPosNoHeight"]=2]="ByPosNoHeight";return a}(F||(F={})),dI=1e-3,a8=function(){function
f(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;b(this,f);this.length=d;this.height=c;this.flags=a}c(f,[{key:"outdated",get:function(){return(this.flags&2)>0},set:function(a){this.flags=(a?2:0)|this.flags&~2}},{key:"setHeight",value:function(b,a){if(this.height!=a){if(Math.abs(this.height-a)>dI)b.heightChanged=true;this.height=a}}},{key:"replace",value:function(b,c,a){return f.of(a)}},{key:"decomposeLeft",value:function(b,a){a.push(this)}},{key:"decomposeRight",value:function(b,a){a.push(this)}},{key:"applyChanges",value:function(m,i,k,e){var
d=this;for(var
a=e.length-1;a>=0;a--){var
g=e[a],b=g.fromA,f=g.toA,h=g.fromB,l=g.toB,c=d.lineAt(b,F.ByPosNoHeight,i,0,0),j=c.to>=f?c:d.lineAt(f,F.ByPosNoHeight,i,0,0);l+=j.to-f;f=j.to;while(a>0&&c.from<=e[a-1].toA){b=e[a-1].fromA;h=e[a-1].fromB;a--;if(b<c.from)c=d.lineAt(b,F.ByPosNoHeight,i,0,0)}h+=c.from-b;b=c.from;var
n=u4.build(k,m,h,l);d=d.replace(b,f,n)}return d.updateHeight(k,0)}}],[{key:"empty",value:function(){return new
bb(0,0)}},{key:"of",value:function(a){if(a.length==1)return a[0];var
b=0,c=a.length,h=0,g=0;for(;;)if(b==c)if(h>g*2){var
e=a[b-1];if(e["break"])a.splice(--b,1,e.left,null,e.right);else
a.splice(--b,1,e.left,e.right);c+=1+e["break"];h-=e.size}else
if(g>h*2){var
d=a[c];if(d["break"])a.splice(c,1,d.left,null,d.right);else
a.splice(c,1,d.left,d.right);c+=2+d["break"];g-=d.size}else
break;else
if(h<g){var
k=a[b++];if(k)h+=k.size}else{var
j=a[--c];if(j)g+=j.size}var
i=0;if(a[b-1]==null){i=1;b--}else
if(a[b]==null){i=1;c++}return new
ua(f.of(a.slice(0,b)),i,f.of(a.slice(c)))}}]);return f}();a8.prototype.size=1;var
jZ=function(d){f(a,d);var
g=e(a);function
a(e,d,f){var
c;b(this,a);c=g.call(this,e,d);c.type=f;return c}c(a,[{key:"blockAt",value:function(d,c,b,a){return new
b5(a,this.length,b,this.height,this.type)}},{key:"lineAt",value:function(e,d,a,c,b){return this.blockAt(0,a,c,b)}},{key:"forEachLine",value:function(e,f,a,d,c,b){b(this.blockAt(0,a,d,c))}},{key:"updateHeight",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=b&&a.more)this.setHeight(c,a.heights[a.index++]);this.outdated=false;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return a}(a8),bb=function(a){f(d,a);var
g=e(d);function
d(e,c){var
a;b(this,d);a=g.call(this,e,c,V.Text);a.collapsed=0;a.widgetHeight=0;return a}c(d,[{key:"replace",value:function(c,e,b){var
a=b[0];if(b.length==1&&(a
instanceof
d||a
instanceof
b$&&a.flags&4)&&Math.abs(this.length-a.length)<10){if(a
instanceof
b$)a=new
d(a.length,this.height);else
a.height=this.height;if(!this.outdated)a.outdated=false;return a}else
return a8.of(b)}},{key:"updateHeight",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=d&&a.more)this.setHeight(b,a.heights[a.index++]);else
if(c||this.outdated)this.setHeight(b,Math.max(this.widgetHeight,b.heightForLine(this.length-this.collapsed)));this.outdated=false;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return d}(jZ),b$=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,c,0)}c(a,[{key:"lines",value:function(a,d){var
b=a.lineAt(d).number,c=a.lineAt(d+this.length).number;return{firstLine:b,lastLine:c,lineHeight:this.height/(c-b+1)}}},{key:"blockAt",value:function(i,d,g,l){var
a=this.lines(d,l),e=a.firstLine,j=a.lastLine,b=a.lineHeight,f=Math.max(0,Math.min(j-e,Math.floor((i-g)/b))),c=d.line(e+f),h=c.from,k=c.length;return new
b5(h,k,g+b*f,b,V.Text)}},{key:"lineAt",value:function(c,j,a,i,h){if(j==F.ByHeight)return this.blockAt(c,a,i,h);if(j==F.ByPosNoHeight){var
d=a.lineAt(c),f=d.from,o=d.to;return new
b5(f,o-f,0,0,V.Text)}var
e=this.lines(a,h),k=e.firstLine,g=e.lineHeight,b=a.lineAt(c),l=b.from,m=b.length,n=b.number;return new
b5(l,m,i+g*(n-k),g,V.Text)}},{key:"forEachLine",value:function(h,l,g,e,d,j){var
f=this.lines(g,d),k=f.firstLine,c=f.lineHeight;for(var
b=Math.max(h,d),i=Math.min(d+this.length,l);b<=i;){var
a=g.lineAt(b);if(b==h)e+=c*(a.number-k);j(new
b5(a.from,a.length,e,c,V.Text));e+=c;b=a.to+1}}},{key:"replace",value:function(d,g,b){var
c=this.length-g;if(c>0){var
f=b[b.length-1];if(f
instanceof
a)b[b.length-1]=new
a(f.length+c);else
b.push(null,new
a(c-1))}if(d>0){var
e=b[0];if(e
instanceof
a)b[0]=new
a(d+e.length);else
b.unshift(new
a(d-1),null)}return a8.of(b)}},{key:"decomposeLeft",value:function(c,b){b.push(new
a(c-1),null)}},{key:"decomposeRight",value:function(b,c){c.push(null,new
a(this.length-b-1))}},{key:"updateHeight",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,b=arguments.length>3?arguments[3]:undefined,h=c+this.length;if(b&&b.from<=c+this.length&&b.more){var
e=[],f=Math.max(c,b.from),g=-1,n=d.heightChanged;if(b.from>c)e.push(new
a(b.from-c-1).updateHeight(d,c));while(f<=h&&b.more){var
j=d.doc.lineAt(f).length;if(e.length)e.push(null);var
i=b.heights[b.index++];if(g==-1)g=i;else
if(Math.abs(i-g)>=dI)g=-2;var
k=new
bb(j,i);k.outdated=false;e.push(k);f+=j+1}if(f<=h)e.push(null,new
a(h-f).updateHeight(d,f));var
l=a8.of(e);d.heightChanged=n||g<0||Math.abs(l.height-this.height)>=dI||Math.abs(g-this.lines(d.doc,c).lineHeight)>=dI;return l}else
if(m||this.outdated){this.setHeight(d,d.heightForGap(c,c+this.length));this.outdated=false}return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return a}(a8),ua=function(d){f(g,d);var
h=e(g);function
g(c,e,d){var
a;b(this,g);a=h.call(this,c.length+e+d.length,c.height+d.height,e|(c.outdated||d.outdated?2:0));a.left=c;a.right=d;a.size=c.size+d.size;return a}c(g,[{key:"break",get:function(){return this.flags&1}},{key:"blockAt",value:function(a,b,e,d){var
c=e+this.left.height;return a<c?this.left.blockAt(a,b,e,d):this.right.blockAt(a,b,c,d+this.left.length+this["break"])}},{key:"lineAt",value:function(e,d,c,i,g){var
h=i+this.left.height,a=g+this.left.length+this["break"],f=d==F.ByHeight?e<h:e<a,b=f?this.left.lineAt(e,d,c,i,g):this.right.lineAt(e,d,c,h,a);if(this["break"]||(f?b.to<a:b.from>a))return b;var
j=d==F.ByPosNoHeight?F.ByPosNoHeight:F.ByPos;return f?b.join(this.right.lineAt(a,j,c,h,a)):this.left.lineAt(a,j,c,i,g).join(b)}},{key:"forEachLine",value:function(b,c,d,h,g,e){var
i=h+this.left.height,f=g+this.left.length+this["break"];if(this["break"]){if(b<f)this.left.forEachLine(b,c,d,h,g,e);if(c>=f)this.right.forEachLine(b,c,d,i,f,e)}else{var
a=this.lineAt(f,F.ByPos,d,h,g);if(b<a.from)this.left.forEachLine(b,a.from-1,d,h,g,e);if(a.to>=b&&a.from<=c)e(a);if(c>a.to)this.right.forEachLine(a.to+1,c,d,i,f,e)}}},{key:"replace",value:function(c,d,f){var
g=this.left.length+this["break"];if(d<g)return this.balanced(this.left.replace(c,d,f),this.right);if(c>this.left.length)return this.balanced(this.left,this.right.replace(c-g,d-g,f));var
b=[];if(c>0)this.decomposeLeft(c,b);var
i=b.length,e=a(f),h;try{for(e.s();!(h=e.n()).done;){var
j=h.value;b.push(j)}}catch(a){e.e(a)}finally{e.f()}if(c>0)qi(b,i-1);if(d<this.length){var
k=b.length;this.decomposeRight(d,b);qi(b,k)}return a8.of(b)}},{key:"decomposeLeft",value:function(b,c){var
a=this.left.length;if(b<=a)return this.left.decomposeLeft(b,c);c.push(this.left);if(this["break"]){a++;if(b>=a)c.push(null)}if(b>a)this.right.decomposeLeft(b-a,c)}},{key:"decomposeRight",value:function(a,b){var
d=this.left.length,c=d+this["break"];if(a>=c)return this.right.decomposeRight(a-c,b);if(a<d)this.left.decomposeRight(a,b);if(this["break"]&&a<c)b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return a8.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(f){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined,b=this.left,c=this.right,h=e+b.length+this["break"],g=null;if(a&&a.from<=e+b.length&&a.more)g=b=b.updateHeight(f,e,d,a);else
b.updateHeight(f,e,d);if(a&&a.from<=h+c.length&&a.more)g=c=c.updateHeight(f,h,d,a);else
c.updateHeight(f,h,d);if(g)return this.balanced(b,c);this.height=this.left.height+this.right.height;this.outdated=false;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}}]);return g}(a8);function
qi(b,a){var
d,c;if(b[a]==null&&(d=b[a-1])instanceof
b$&&(c=b[a+1])instanceof
b$)b.splice(a-1,3,new
b$(d.length+1+c.length))}var
BN=5,u4=function(){function
d(a,c){b(this,d);this.pos=a;this.oracle=c;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=a}c(d,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(d,b){if(this.lineStart>-1){var
a=Math.min(b,this.lineEnd),c=this.nodes[this.nodes.length-1];if(c
instanceof
bb)c.length+=a-this.pos;else
if(a>this.pos||!this.isCovered)this.nodes.push(new
bb(a-this.pos,-1));this.writtenTo=a;if(b>a){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=b}},{key:"point",value:function(c,d,a){if(c<d||a.heightRelevant){var
b=a.widget?a.widget.estimatedHeight:0;if(b<0)b=this.oracle.lineHeight;var
e=d-c;if(a.block)this.addBlock(new
jZ(e,b,a.type));else
if(e||b>=BN)this.addLineDeco(b,e)}else
if(d>c)this.span(c,d);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}},{key:"enterLine",value:function(){if(this.lineStart>-1)return;var
b=this.oracle.doc.lineAt(this.pos),a=b.from,c=b.to;this.lineStart=a;this.lineEnd=c;if(this.writtenTo<a){if(this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,a-1));this.nodes.push(null)}if(this.pos>a)this.nodes.push(new
bb(this.pos-a,-1));this.writtenTo=this.pos}},{key:"blankContent",value:function(a,c){var
b=new
b$(c-a);if(this.oracle.doc.lineAt(a).to==c)b.flags|=4;return b}},{key:"ensureLine",value:function(){this.enterLine();var
a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a
instanceof
bb)return a;var
b=new
bb(0,-1);this.nodes.push(b);return b}},{key:"addBlock",value:function(a){this.enterLine();if(a.type==V.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos=this.pos+a.length;if(a.type!=V.WidgetBefore)this.covering=a}},{key:"addLineDeco",value:function(c,b){var
a=this.ensureLine();a.length+=b;a.collapsed+=b;a.widgetHeight=Math.max(a.widgetHeight,c);this.writtenTo=this.pos=this.pos+b}},{key:"finish",value:function(g){var
e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e
instanceof
bb)&&!this.isCovered)this.nodes.push(new
bb(0,-1));else
if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var
f=g,b=a(this.nodes),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c
instanceof
bb)c.updateHeight(this.oracle,f);f+=c?c.length:1}}catch(a){b.e(a)}finally{b.f()}return this.nodes}}],[{key:"build",value:function(e,c,a,f){var
b=new
d(a,e);k.spans(c,a,f,b,0);return b.finish(a)}}]);return d}();function
zt(b,c,d){var
a=new
tX();k.compare(b,c,d,a,0);return a.changes}var
tX=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,d,a,b){if(c<d||a&&a.heightRelevant||b&&b.heightRelevant)gy(c,d,this.changes,5)}}]);return a}();function
C4(h,k){var
c=h.getBoundingClientRect(),d=Math.max(0,c.left),i=Math.min(innerWidth,c.right),f=Math.max(0,c.top),g=Math.min(innerHeight,c.bottom),l=h.ownerDocument.body;for(var
b=h.parentNode;b&&b!=l;)if(b.nodeType==1){var
a=b,j=window.getComputedStyle(a);if((a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)&&j.overflow!="visible"){var
e=a.getBoundingClientRect();d=Math.max(d,e.left);i=Math.min(i,e.right);f=Math.max(f,e.top);g=Math.min(g,e.bottom)}b=j.position=="absolute"||j.position=="fixed"?a.offsetParent:a.parentNode}else
if(b.nodeType==11)b=b.host;else
break;return{left:d-c.left,right:Math.max(d,i)-c.left,top:f-(c.top+k),bottom:Math.max(f,g)-(c.top+k)}}var
fP=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.size=d}c(a,[{key:"draw",value:function(a){return an.replace({widget:new
ut(this.size,a)}).range(this.from,this.to)}}],[{key:"same",value:function(b,e){if(b.length!=e.length)return false;for(var
a=0;a<b.length;a++){var
c=b[a],d=e[a];if(c.from!=d.from||c.to!=d.to||c.size!=d.size)return false}return true}}]);return a}(),ut=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.size=d;c.vertical=e;return c}c(a,[{key:"eq",value:function(a){return a.size==this.size&&a.vertical==this.vertical}},{key:"toDOM",value:function(){var
a=document.createElement("div");if(this.vertical)a.style.height=this.size+"px";else{a.style.width=this.size+"px";a.style.height="2px";a.style.display="inline-block"}return a}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(ea),kM=function(){function
d(a){b(this,d);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentDOMWidth=0;this.contentDOMHeight=0;this.editorHeight=0;this.editorWidth=0;this.heightOracle=new
uf();this.scaler=j4;this.scrollTarget=null;this.printing=false;this.mustMeasureContent=true;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=a8.empty().applyChanges(a.facet(bM),p.empty,this.heightOracle.setDoc(a.doc),[new
cx(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateViewportLines();this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=an.set(this.lineGaps.map(function(a){return a.draw(false)}));this.computeVisibleRanges()}c(d,[{key:"updateForViewport",value:function(){var
h=this,b=[this.viewport],d=this.state.selection.main,c=function(e){var
a=e?d.head:d.anchor;if(!b.some(function(b){var
c=b.from,d=b.to;return a>=c&&a<=d})){var
c=h.lineBlockAt(a),f=c.from,g=c.to;b.push(new
d9(f,g))}};for(var
a=0;a<=1;a++)c(a);this.viewports=b.sort(function(a,b){return a.from-b.from});this.scaler=this.heightMap.height<=7e6?j4:new
te(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var
a=this;this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(b){a.viewportLines.push(a.scaler.scale==1?b:db(b,a.scaler))})}},{key:"update",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,g=this.state;this.state=a.state;var
e=this.state.facet(bM),f=a.changedRanges,d=cx.extendWithRanges(f,zt(a.startState.facet(bM),e,a?a.changes:X.empty(this.state.doc.length))),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,g.doc,this.heightOracle.setDoc(this.state.doc),d);if(this.heightMap.height!=h)a.flags|=2;var
b=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(c&&(c.range.head<b.from||c.range.head>b.to)||!this.viewportIsAppropriate(b))b=this.getViewport(0,c);var
i=!a.changes.empty||a.flags&2||b.from!=this.viewport.from||b.to!=this.viewport.to;this.viewport=b;this.updateForViewport();if(i)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();if(c)this.scrollTarget=c;if(!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc)this.mustEnforceCursorAssoc=true}},{key:"measure",value:function(a){var
e=a.contentDOM,j=window.getComputedStyle(e),b=this.heightOracle,u=j.whiteSpace,q=j.direction=="rtl"?B.RTL:B.LTR,c=this.heightOracle.mustRefreshForStyle(u,q),m=c||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,d=0,f=0;if(m){this.mustMeasureContent=false;this.contentDOMHeight=e.clientHeight;var
s=parseInt(j.paddingTop)||0,r=parseInt(j.paddingBottom)||0;if(this.paddingTop!=s||this.paddingBottom!=r){d|=8;this.paddingTop=s;this.paddingBottom=r}}var
n=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:C4(e,this.paddingTop),i=n.top-this.pixelViewport.top,h=n.bottom-this.pixelViewport.bottom;this.pixelViewport=n;var
k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView){this.inView=k;if(k)m=true}if(!this.inView)return 0;var
g=e.clientWidth;if(this.contentDOMWidth!=g||this.editorHeight!=a.scrollDOM.clientHeight||this.editorWidth!=a.scrollDOM.clientWidth){this.contentDOMWidth=g;this.editorHeight=a.scrollDOM.clientHeight;this.editorWidth=a.scrollDOM.clientWidth;d|=8}if(m){var
l=a.docView.measureVisibleLineHeights();if(b.mustRefreshForHeights(l))c=true;if(c||b.lineWrapping&&Math.abs(g-this.contentDOMWidth)>b.charWidth){var
o=a.docView.measureTextSize(),v=o.lineHeight,p=o.charWidth;c=b.refresh(u,q,v,p,g/p,l);if(c){a.docView.minWidth=0;d|=8}}if(i>0&&h>0)f=Math.max(i,h);else
if(i<0&&h<0)f=Math.min(i,h);b.heightChanged=false;this.heightMap=this.heightMap.updateHeight(b,0,c,new
uS(this.viewport.from,l));if(b.heightChanged)d|=2}var
t=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(t)this.viewport=this.getViewport(f,this.scrollTarget);this.updateForViewport();if(d&2||t)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps));d|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;a.docView.enforceCursorAssoc()}return d}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(j,c){var
i=0.5-Math.max(-0.5,Math.min(0.5,j/1e3/2)),b=this.heightMap,a=this.state.doc,l=this.visibleTop,k=this.visibleBottom,e=new
d9(b.lineAt(l-i*1e3,F.ByHeight,a,0,0).from,b.lineAt(k+(1-i)*1e3,F.ByHeight,a,0,0).to);if(c){var
g=c.range.head,h=this.editorHeight;if(g<e.from||g>e.to){var
f=b.lineAt(g,F.ByPos,a,0,0),d;if(c.y=="center")d=(f.top+f.bottom)/2-h/2;else
if(c.y=="start"||c.y=="nearest"&&g<e.from)d=f.top;else
d=f.bottom-h;e=new
d9(b.lineAt(d-1e3/2,F.ByHeight,a,0,0).from,b.lineAt(d+h+1e3/2,F.ByHeight,a,0,0).to)}}return e}},{key:"mapViewport",value:function(b,a){var
c=a.mapPos(b.from,-1),d=a.mapPos(b.to,1);return new
d9(this.heightMap.lineAt(c,F.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,F.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var
d=a.from,e=a.to,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!this.inView)return true;var
i=this.heightMap.lineAt(d,F.ByPos,this.state.doc,0,0),f=i.top,j=this.heightMap.lineAt(e,F.ByPos,this.state.doc,0,0),c=j.bottom,h=this.visibleTop,g=this.visibleBottom;return(d==0||f<=h-Math.max(10,Math.min(-b,250)))&&(e==this.state.doc.length||c>=g+Math.max(10,Math.min(b,250)))&&f>h-2*1e3&&c<g+2*1e3}},{key:"mapLineGaps",value:function(e,d){if(!e.length||d.empty)return e;var
g=[],c=a(e),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(!d.touchesRange(b.from,b.to))g.push(new
fP(d.mapPos(b.from),d.mapPos(b.to),b.size))}}catch(a){c.e(a)}finally{c.f()}return g}},{key:"ensureLineGaps",value:function(p){var
b=this,i=[];if(this.heightOracle.direction!=B.LTR)return i;var
c=a(this.viewportLines),n;try{var
d=function(){var
a=n.value;if(a.length<4e3)return"continue";var
d=Ap(a.from,a.to,b.state);if(d.total<4e3)return"continue";var
f=void
0,g=void
0;if(b.heightOracle.lineWrapping){var
k=2e3/b.heightOracle.lineLength*b.heightOracle.lineHeight;f=es(d,(b.visibleTop-a.top-k)/a.height);g=es(d,(b.visibleBottom-a.top+k)/a.height)}else{var
m=d.total*b.heightOracle.charWidth,l=2e3*b.heightOracle.charWidth;f=es(d,(b.pixelViewport.left-l)/m);g=es(d,(b.pixelViewport.right+l)/m)}var
e=[];if(f>a.from)e.push({from:a.from,to:f});if(g<a.to)e.push({from:g,to:a.to});var
c=b.state.selection.main;if(c.from>=a.from&&c.from<=a.to)nc(e,c.from-10,c.from+10);if(!c.empty&&c.to>=a.from&&c.to<=a.to)nc(e,c.to-10,c.to+10);var
o=function(){var
f=j[h],c=f.from,e=f.to;if(e-c>1e3)i.push(yl(p,function(b){return b.from>=a.from&&b.to<=a.to&&Math.abs(b.from-c)<1e3&&Math.abs(b.to-e)<1e3})||new
fP(c,e,b.gapSize(a,c,e,d)))};for(var
h=0,j=e;h<j.length;h++)o()};for(c.s();!(n=c.n()).done;){var
e=d();if(e==="continue")continue}}catch(a){c.e(a)}finally{c.f()}return i}},{key:"gapSize",value:function(d,c,e,a){var
b=ol(a,e)-ol(a,c);return this.heightOracle.lineWrapping?d.height*b:a.total*this.heightOracle.charWidth*b}},{key:"updateLineGaps",value:function(a){var
b=this;if(!fP.same(a,this.lineGaps)){this.lineGaps=a;this.lineGapDeco=an.set(a.map(function(a){return a.draw(b.heightOracle.lineWrapping)}))}}},{key:"computeVisibleRanges",value:function(){var
b=this.state.facet(bM);if(this.lineGaps.length)b=b.concat(this.lineGapDeco);var
a=[];k.spans(b,this.viewport.from,this.viewport.to,{span:function(b,c){a.push({from:b,to:c})},point:function(){}},20);var
c=a.length!=this.visibleRanges.length||this.visibleRanges.some(function(c,b){return c.from!=a[b].from||c.to!=a[b].to});this.visibleRanges=a;return c?4:0}},{key:"lineBlockAt",value:function(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(function(b){return b.from<=a&&b.to>=a})||db(this.heightMap.lineAt(a,F.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(a){return db(this.heightMap.lineAt(this.scaler.fromDOM(a),F.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(a){return db(this.heightMap.blockAt(this.scaler.fromDOM(a),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]);return d}(),d9=c(function
a(c,d){b(this,a);this.from=c;this.to=d});function
Ap(e,b,f){var
c=[],a=e,d=0;k.spans(f.facet(bM),e,b,{span:function(){},point:function(b,e){if(b>a){c.push({from:a,to:b});d+=b-a}a=e}},20);if(a<b){c.push({from:a,to:b});d+=b-a}return{total:d,ranges:c}}function
es(f,c){var
j=f.total,a=f.ranges;if(c<=0)return a[0].from;if(c>=1)return a[a.length-1].to;var
b=Math.floor(j*c);for(var
d=0;;d++){var
e=a[d],g=e.from,i=e.to,h=i-g;if(b<=h)return g+b;b-=h}}function
ol(h,g){var
c=0,b=a(h.ranges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,f=e.from,i=e.to;if(g<=i){c+=g-f;break}c+=i-f}}catch(a){b.e(a)}finally{b.f()}return c/h.total}function
nc(d,e,f){for(var
b=0;b<d.length;b++){var
a=d[b];if(a.from<f&&a.to>e){var
c=[];if(a.from<e)c.push({from:a.from,to:e});if(a.to>f)c.push({from:f,to:a.to});d.splice.apply(d,[b,1].concat(c));b+=c.length-1}}}function
yl(e,f){var
b=a(e),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(f(d))return d}}catch(a){b.e(a)}finally{b.f()}return void
0}var
j4={toDOM:function(a){return a},fromDOM:function(a){return a},scale:1},te=function(){function
g(j,e,l){b(this,g);var
f=0,i=0,k=0;this.viewports=l.map(function(a){var
c=a.from,d=a.to,g=e.lineAt(c,F.ByPos,j,0,0).top,b=e.lineAt(d,F.ByPos,j,0,0).bottom;f+=b-g;return{from:c,to:d,top:g,bottom:b,domTop:0,domBottom:0}});this.scale=(7e6-f)/(e.height-f);var
d=a(this.viewports),h;try{for(d.s();!(h=d.n()).done;){var
c=h.value;c.domTop=k+(c.top-i)*this.scale;k=c.domBottom=c.domTop+(c.bottom-c.top);i=c.bottom}}catch(a){d.e(a)}finally{d.f()}}c(g,[{key:"toDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.top)return e+(b-d)*this.scale;if(b<=a.bottom)return a.domTop+(b-a.top);d=a.bottom;e=a.domBottom}}},{key:"fromDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.domTop)return d+(b-e)/this.scale;if(b<=a.domBottom)return a.top+(b-a.domTop);d=a.bottom;e=a.domBottom}}}]);return g}();function
db(a,b){if(b.scale==1)return a;var
c=b.toDOM(a.top),d=b.toDOM(a.bottom);return new
b5(a.from,a.length,c,d-c,Array.isArray(a.type)?a.type.map(function(a){return db(a,b)}):a.type)}var
si=h.define({combine:function(a){return a.join(" ")}}),hd=h.define({combine:function(a){return a.indexOf(true)>-1}}),gL=y.newName(),l3=y.newName(),lY=y.newName(),p0={"&light":"."+l3,"&dark":"."+lY};function
gR(c,a,b){return new
y(a,{finish:function(a){return/&/.test(a)?a.replace(/&\w*/,function(a){if(a=="&")return c;if(!b||!b[a])throw new
RangeError("Unsupported selector: ".concat(a));return b[a]}):c+" "+a}})}var
wn=gR("."+gL,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},p0),Bx={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true},i5=n.ie&&n.ie_version<=11,tH=function(){function
e(d,f,g){var
c=this;b(this,e);this.view=d;this.onChange=f;this.onScrollChanged=g;this.active=false;this.selectionRange=new
tN();this.selectionChanged=false;this.delayedFlush=-1;this.resizeTimeout=-1;this.queue=[];this.delayedAndroidKey=null;this.scrollTargets=[];this.intersection=null;this.resize=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this.parentCheck=-1;this.dom=d.contentDOM;this.observer=new
MutationObserver(function(f){var
b=a(f),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;c.queue.push(g)}}catch(a){b.e(a)}finally{b.f()}if((n.ie&&n.ie_version<=11||n.ios&&d.composing)&&f.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length}))c.flushSoon();else
c.flush()});if(i5)this.onCharData=function(a){c.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue});c.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);if(typeof
ResizeObserver=="function"){this.resize=new
ResizeObserver(function(){if(c.view.docView.lastUpdate<Date.now()-75&&c.resizeTimeout<0)c.resizeTimeout=setTimeout(function(){c.resizeTimeout=-1;c.view.requestMeasure()},50)});this.resize.observe(d.scrollDOM)}this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof
IntersectionObserver=="function"){this.intersection=new
IntersectionObserver(function(a){if(c.parentCheck<0)c.parentCheck=setTimeout(c.listenForScroll.bind(c),1e3);if(a.length>0&&a[a.length-1].intersectionRatio>0!=c.intersecting){c.intersecting=!c.intersecting;if(c.intersecting!=c.view.inView)c.onScrollChanged(document.createEvent("Event"))}},{});this.intersection.observe(this.dom);this.gapIntersection=new
IntersectionObserver(function(a){if(a.length>0&&a[a.length-1].intersectionRatio>0)c.onScrollChanged(document.createEvent("Event"))},{})}this.listenForScroll();this.readSelectionRange();this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}c(e,[{key:"onScroll",value:function(a){if(this.intersecting)this.flush(false);this.onScrollChanged(a)}},{key:"updateGaps",value:function(c){if(this.gapIntersection&&(c.length!=this.gaps.length||this.gaps.some(function(a,b){return a!=c[b]}))){this.gapIntersection.disconnect();var
b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;this.gapIntersection.observe(e)}}catch(a){b.e(a)}finally{b.f()}this.gaps=c}}},{key:"onSelectionChange",value:function(d){if(!this.readSelectionRange()||this.delayedAndroidKey)return;var
b=this.view,a=this.selectionRange;if(b.state.facet(c3)?b.root.activeElement!=this.dom:!hU(b.dom,a))return;var
c=a.anchorNode&&b.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(d))return;if((n.ie&&n.ie_version<=11||n.android&&n.chrome)&&!b.state.selection.main.empty&&a.focusNode&&eT(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))this.flushSoon();else
this.flush(false)}},{key:"readSelectionRange",value:function(){var
b=this.view.root,c=eG(b),a=n.safari&&b.nodeType==11&&xK()==this.view.contentDOM&&BW(this.view)||c;if(this.selectionRange.eq(a))return false;this.selectionRange.setRange(a);return this.selectionChanged=true}},{key:"setSelectionRange",value:function(a,b){this.selectionRange.set(a.node,a.offset,b.node,b.offset);this.selectionChanged=false}},{key:"listenForScroll",value:function(){this.parentCheck=-1;var
d=0,c=null;for(var
b=this.dom;b;)if(b.nodeType==1){if(!c&&d<this.scrollTargets.length&&this.scrollTargets[d]==b)d++;else
if(!c)c=this.scrollTargets.slice(0,d);if(c)c.push(b);b=b.assignedSlot||b.parentNode}else
if(b.nodeType==11)b=b.host;else
break;if(d<this.scrollTargets.length&&!c)c=this.scrollTargets.slice(0,d);if(c){var
e=a(this.scrollTargets),g;try{for(e.s();!(g=e.n()).done;){var
i=g.value;i.removeEventListener("scroll",this.onScroll)}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.scrollTargets=c),h;try{for(f.s();!(h=f.n()).done;){var
j=h.value;j.addEventListener("scroll",this.onScroll)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{this.stop();return a()}finally{this.start();this.clear()}}},{key:"start",value:function(){if(this.active)return;this.observer.observe(this.dom,Bx);if(i5)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true}},{key:"stop",value:function(){if(!this.active)return;this.active=false;this.observer.disconnect();if(i5)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.selectionChanged=false}},{key:"delayAndroidKey",value:function(b,c){var
a=this;if(!this.delayedAndroidKey)requestAnimationFrame(function(){var
b=a.delayedAndroidKey;a.delayedAndroidKey=null;var
c=a.view.state;if(cY(a.view.contentDOM,b.key,b.keyCode))a.processRecords();else
a.flush();if(a.view.state==c)a.view.update([])});if(!this.delayedAndroidKey||b=="Enter")this.delayedAndroidKey={key:b,keyCode:c}}},{key:"flushSoon",value:function(){var
a=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20)}},{key:"forceFlush",value:function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}}},{key:"processRecords",value:function(){var
g=this.queue,d=a(this.observer.takeRecords()),h;try{for(d.s();!(h=d.n()).done;){var
k=h.value;g.push(k)}}catch(a){d.e(a)}finally{d.f()}if(g.length)this.queue=[];var
c=-1,f=-1,j=false,e=a(g),i;try{for(e.s();!(i=e.n()).done;){var
l=i.value,b=this.readMutation(l);if(!b)continue;if(b.typeOver)j=true;if(c==-1){c=b.from;f=b.to}else{c=Math.min(b.from,c);f=Math.max(b.to,f)}}}catch(a){e.e(a)}finally{e.f()}return{from:c,to:f,typeOver:j}}},{key:"flush",value:function(){var
d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.delayedFlush>=0||this.delayedAndroidKey)return;if(d)this.readSelectionRange();var
a=this.processRecords(),b=a.from,f=a.to,g=a.typeOver,c=this.selectionChanged&&hU(this.dom,this.selectionRange);if(b<0&&!c)return;this.selectionChanged=false;var
e=this.view.state;this.onChange(b,f,g);if(this.view.state==e)this.view.update([])}},{key:"readMutation",value:function(b){var
a=this.view.docView.nearest(b.target);if(!a||a.ignoreMutation(b))return null;a.markDirty(b.type=="attributes");if(b.type=="attributes")a.dirty|=4;if(b.type=="childList"){var
d=og(a,b.previousSibling||b.target.previousSibling,-1),c=og(a,b.nextSibling||b.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:false}}else
if(b.type=="characterData")return{from:a.posAtStart,to:a.posAtEnd,typeOver:b.target.nodeValue==b.oldValue};else
return null}},{key:"destroy",value:function(){var
c,d,e;this.stop();(c=this.intersection)===null||c===void
0?void
0:c.disconnect();(d=this.gapIntersection)===null||d===void
0?void
0:d.disconnect();(e=this.resize)===null||e===void
0?void
0:e.disconnect();var
b=a(this.scrollTargets),f;try{for(b.s();!(f=b.n()).done;){var
g=f.value;g.removeEventListener("scroll",this.onScroll)}}catch(a){b.e(a)}finally{b.f()}window.removeEventListener("scroll",this.onScroll);this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout)}}]);return e}();function
og(c,a,e){while(a){var
b=_.get(a);if(b&&b.parent==c)return b;var
d=a.parentNode;a=d!=c.dom?d:e>0?a.nextSibling:a.previousSibling}return null}function
BW(e){var
a=null;function
i(b){b.preventDefault();b.stopImmediatePropagation();a=b.getTargetRanges()[0]}e.contentDOM.addEventListener("beforeinput",i,true);document.execCommand("indent");e.contentDOM.removeEventListener("beforeinput",i,true);if(!a)return null;var
f=a.startContainer,g=a.startOffset,c=a.endContainer,d=a.endOffset,h=e.docView.domAtPos(e.state.selection.main.anchor);if(eT(h.node,h.offset,c,d)){var
b=[c,d,f,g];f=b[0];g=b[1];c=b[2];d=b[3]}return{anchorNode:f,anchorOffset:g,focusNode:c,focusOffset:d}}function
wa(a,C,H,K){var
b,e,c=a.state.selection.main;if(C>-1){var
j=a.docView.domBoundsAround(C,H,0);if(!j||a.state.readOnly)return;var
h=j.from,D=j.to,B=a.docView.impreciseHead||a.docView.impreciseAnchor?[]:Cx(a),m=new
jK(B,a);m.readRange(j.startDOM,j.endDOM);e=Cs(B,h);var
x=c.from,y=null;if(a.inputState.lastKeyCode===8&&a.inputState.lastKeyTime>Date.now()-100||n.android&&m.text.length<D-h){x=c.to;y="end"}var
k=yw(a.state.sliceDoc(h,D),m.text,x-h,y);if(k)b={from:h+k.from,to:h+k.toA,insert:a.state.toText(m.text.slice(k.from,k.toB))}}else
if(a.hasFocus||!a.state.facet(c3)){var
f=a.observer.selectionRange,u=a.docView,r=u.impreciseHead,q=u.impreciseAnchor,w=r&&r.node==f.focusNode&&r.offset==f.focusOffset||!g9(a.contentDOM,f.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(f.focusNode,f.focusOffset),v=q&&q.node==f.anchorNode&&q.offset==f.anchorOffset||!g9(a.contentDOM,f.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(f.anchorNode,f.anchorOffset);if(w!=c.head||v!=c.anchor)e=d.single(v,w)}if(!b&&!e)return;if(!b&&K&&!c.empty&&e&&e.main.empty)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,c.to)};else
if(b&&b.from>=c.from&&b.to<=c.to&&(b.from!=c.from||b.to!=c.to)&&c.to-c.from-(b.to-b.from)<=4)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,b.from).append(b.insert).append(a.state.doc.slice(b.to,c.to))};if(b){var
g=a.state;if(n.ios&&a.inputState.flushIOSKey(a))return;if(n.android&&(b.from==c.from&&b.to==c.to&&b.insert.length==1&&b.insert.lines==2&&cY(a.contentDOM,"Enter",13)||b.from==c.from-1&&b.to==c.to&&b.insert.length==0&&cY(a.contentDOM,"Backspace",8)||b.from==c.from&&b.to==c.to+1&&b.insert.length==0&&cY(a.contentDOM,"Delete",46)))return;var
E=b.insert.toString();if(a.state.facet(o8).some(function(c){return c(a,b.from,b.to,E)}))return;if(a.inputState.composing>=0)a.inputState.composing++;var
o;if(b.from>=c.from&&b.to<=c.to&&b.to-b.from>=(c.to-c.from)/3&&(!e||e.main.empty&&e.main.from==b.from+b.insert.length)&&a.inputState.composing<0){var
G=c.from<b.from?g.sliceDoc(c.from,b.from):"",F=c.to>b.to?g.sliceDoc(b.to,c.to):"";o=g.replaceSelection(a.state.toText(G+b.insert.sliceString(0,void
0,a.state.lineBreak)+F))}else{var
l=g.changes(b),i=e&&!g.selection.main.eq(e.main)&&e.main.to<=l.newLength?e.main:void
0;if(g.selection.ranges.length>1&&a.inputState.composing>=0&&b.to<=c.to&&b.to>=c.to-10){var
z=a.state.sliceDoc(b.from,b.to),p=mF(a)||a.state.doc.lineAt(c.head),I=c.to-b.to,J=c.to-c.from;o=g.changeByRange(function(e){if(e.from==c.from&&e.to==c.to)return{changes:l,range:i||e.map(l)};var
f=e.to-I,h=f-z.length;if(e.to-e.from!=J||a.state.sliceDoc(h,f)!=z||p&&e.to>=p.from&&e.from<=p.to)return{range:e};var
j=g.changes({from:h,to:f,insert:b.insert}),k=e.to-c.to;return{changes:j,range:!i?e.map(j):d.range(Math.max(0,i.anchor+k),Math.max(0,i.head+k))}})}else
o={changes:l,selection:i&&g.selection.replaceRange(i)}}var
s="input.type";if(a.composing){s+=".compose";if(a.inputState.compositionFirstChange){s+=".start";a.inputState.compositionFirstChange=false}}a.dispatch(o,{scrollIntoView:true,userEvent:s})}else
if(e&&!e.main.eq(c)){var
A=false,t="select";if(a.inputState.lastSelectionTime>Date.now()-50){if(a.inputState.lastSelectionOrigin=="select")A=true;t=a.inputState.lastSelectionOrigin}a.dispatch({selection:e,scrollIntoView:A,userEvent:t})}}function
yw(e,f,d,k){var
g=Math.min(e.length,f.length),a=0;while(a<g&&e.charCodeAt(a)==f.charCodeAt(a))a++;if(a==g&&e.length==f.length)return null;var
b=e.length,c=f.length;while(b>0&&c>0&&e.charCodeAt(b-1)==f.charCodeAt(c-1)){b--;c--}if(k=="end"){var
i=Math.max(0,a-Math.min(b,c));d-=b+i-a}if(b<a&&e.length<f.length){var
j=d<=a&&d>=b?a-d:0;a-=j;c=a+(c-b);b=a}else
if(c<a){var
h=d<=a&&d>=c?a-d:0;a-=h;b=a+(b-c);c=a}return{from:a,toA:b,toB:c}}function
Cx(d){var
b=[];if(d.root.activeElement!=d.contentDOM)return b;var
a=d.observer.selectionRange,c=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(c){b.push(new
jG(c,e));if(f!=c||g!=e)b.push(new
jG(f,g))}return b}function
Cs(a,c){if(a.length==0)return null;var
b=a[0].pos,e=a.length==2?a[1].pos:b;return b>-1&&e>-1?d.single(b+c,e+c):null}var
aa=function(){function
f(){var
c=this,d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,f);this.plugins=[];this.pluginMap=new
Map();this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(a){return c.update([a])};this.dispatch=this.dispatch.bind(this);this.root=d.root||yW(d.parent)||document;this.viewState=new
kM(d.state||u.create());this.plugins=this.state.facet(dA).map(function(a){return new
fX(a)});var
e=a(this.plugins),g;try{for(e.s();!(g=e.n()).done;){var
h=g.value;h.update(this)}}catch(a){e.e(a)}finally{e.f()}this.observer=new
tH(this,function(a,b,d){wa(c,a,b,d)},function(a){c.inputState.runScrollHandlers(c,a);if(c.observer.intersecting)c.measure()});this.inputState=new
un(this);this.docView=new
jS(this);this.mountStyles();this.updateAttrs();this.updateState=0;yb();this.requestMeasure();if(d.parent)d.parent.appendChild(this.dom)}c(f,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var
a;this._dispatch(arguments.length==1&&(arguments.length<=0?undefined:arguments[0])instanceof
aj?arguments.length<=0?undefined:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function
b(h){if(this.updateState!=0)throw new
Error("Calls to EditorView.update are not allowed while an update is in progress");var
n=false,b,f=this.state,i=a(h),o;try{for(i.s();!(o=i.n()).done;){var
s=o.value;if(s.startState!=f)throw new
RangeError("Trying to update state with a transaction that doesn't start from the previous state.");f=s.state}}catch(a){i.e(a)}finally{i.f()}if(this.destroyed){this.viewState.state=f;return}if(f.facet(u.phrases)!=this.state.facet(u.phrases))return this.setState(f);b=new
kR(this,f,h);var
c=this.viewState.scrollTarget;try{this.updateState=2;var
j=a(h),p;try{for(j.s();!(p=j.n()).done;){var
m=p.value;if(c)c=c.map(m.changes);if(m.scrollIntoView){var
g=m.state.selection.main;c=new
dW(g.empty?g:d.cursor(g.head,g.head>g.anchor?-1:1))}var
k=a(m.effects),q;try{for(k.s();!(q=k.n()).done;){var
e=q.value;if(e.is(iA))c=new
dW(e.value);else
if(e.is(mf))c=new
dW(e.value,"center");else
if(e.is(rQ))c=e.value}}catch(a){k.e(a)}finally{k.f()}}}catch(a){j.e(a)}finally{j.f()}this.viewState.update(b,c);this.bidiCache=js.update(this.bidiCache,b.changes);if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}n=this.docView.update(b);if(this.state.facet(dn)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(h);this.docView.updateSelection(n,h.some(function(a){return a.isUserEvent("select.pointer")}))}finally{this.updateState=0}if(n||c||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!b.empty){var
l=a(this.state.facet(i0)),r;try{for(l.s();!(r=l.n()).done;){var
t=r.value;t(b)}}catch(a){l.e(a)}finally{l.f()}}}},{key:"setState",value:function(d){if(this.updateState!=0)throw new
Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=d;return}this.updateState=2;var
h=this.hasFocus;try{var
b=a(this.plugins),e;try{for(b.s();!(e=b.n()).done;){var
i=e.value;i.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.viewState=new
kM(d);this.plugins=d.facet(dA).map(function(a){return new
fX(a)});this.pluginMap.clear();var
c=a(this.plugins),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;g.update(this)}}catch(a){c.e(a)}finally{c.f()}this.docView=new
jS(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}if(h)this.focus();this.requestMeasure()}},{key:"updatePlugins",value:function(b){var
n=b.startState.facet(dA),p=b.state.facet(dA);if(n!=p){var
g=[],c=a(p),i;try{for(c.s();!(i=c.n()).done;){var
o=i.value,l=n.indexOf(o);if(l<0)g.push(new
fX(o));else{var
m=this.plugins[l];m.mustUpdate=b;g.push(m)}}}catch(a){c.e(a)}finally{c.f()}var
d=a(this.plugins),j;try{for(d.s();!(j=d.n()).done;){var
h=j.value;if(h.mustUpdate!=b)h.destroy(this)}}catch(a){d.e(a)}finally{d.f()}this.plugins=g;this.pluginMap.clear();this.inputState.ensureHandlers(this)}else{var
e=a(this.plugins),k;try{for(e.s();!(k=e.n()).done;){var
q=k.value;q.mustUpdate=b}}catch(a){e.e(a)}finally{e.f()}}for(var
f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}},{key:"measure",value:function(){var
k=this,q=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=0;if(q)this.observer.flush();var
c=null;try{for(var
h=0;;h++){this.updateState=1;var
n=this.viewport,g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var
e=[];if(!(g&4)){var
i=[e,this.measureRequests];this.measureRequests=i[0];e=i[1]}var
m=e.map(function(a){try{return a.read(k)}catch(a){bU(k.state,a);return jg}}),b=new
kR(this,this.state),o=false,p=false;b.flags|=g;if(!c)c=b;else
c.flags|=g;this.updateState=2;if(!b.empty){this.updatePlugins(b);this.inputState.update(b);this.updateAttrs();o=this.docView.update(b)}for(var
d=0;d<e.length;d++)if(m[d]!=jg)try{var
l=e[d];if(l.write)l.write(m[d],this)}catch(a){bU(this.state,a)}if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null;p=true}if(o)this.docView.updateSelection(true);if(this.viewport.from==n.from&&this.viewport.to==n.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0;this.measureScheduled=-1}if(c&&!c.empty){var
f=a(this.state.facet(i0)),j;try{for(f.s();!(j=f.n()).done;){var
r=j.value;r(c)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"themeClasses",get:function(){return gL+" "+(this.state.facet(hd)?lY:l3)+" "+this.state.facet(si)}},{key:"updateAttrs",value:function(){var
a=this,c=lS(this,n0,{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),b={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:!this.state.facet(c3)?"false":"true","class":"cm-content",style:"".concat(n.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)b["aria-readonly"]="true";lS(this,mM,b);this.observer.ignore(function(){iV(a.contentDOM,a.contentAttrs,b);iV(a.dom,a.editorAttrs,c)});this.editorAttrs=c;this.contentAttrs=b}},{key:"showAnnouncements",value:function(k){var
h=true,b=a(k),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j.effects),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;if(g.is(f.announce)){if(h)this.announceDOM.textContent="";h=false;var
i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=g.value}}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(dn);y.mount(this.root,this.styleModules.concat(wn).reverse())}},{key:"readMeasured",value:function(){if(this.updateState==2)throw new
Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false)}},{key:"requestMeasure",value:function(a){var
c=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame(function(){return c.measure()});if(a){if(a.key!=null)for(var
b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(e){var
d=[],b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;f.update(this).takeField(e,d)}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"plugin",value:function(b){var
a=this.pluginMap.get(b);if(a===void
0||a&&a.spec!=b)this.pluginMap.set(b,a=this.plugins.find(function(a){return a.spec==b})||null);return a&&a.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"blockAtHeight",value:function(c,b){var
a=hA(b,this);return this.elementAtHeight(c-a).moveY(a)}},{key:"elementAtHeight",value:function(a){this.readMeasured();return this.viewState.elementAtHeight(a)}},{key:"visualLineAtHeight",value:function(c,b){var
a=hA(b,this);return this.lineBlockAtHeight(c-a).moveY(a)}},{key:"lineBlockAtHeight",value:function(a){this.readMeasured();return this.viewState.lineBlockAtHeight(a)}},{key:"viewportLines",value:function(e,d){var
g=hA(d,this),b=a(this.viewportLineBlocks),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;e(f.moveY(g))}}catch(a){b.e(a)}finally{b.f()}}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"visualLineAt",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.lineBlockAt(b).moveY(a+this.viewState.paddingTop)}},{key:"lineBlockAt",value:function(a){return this.viewState.lineBlockAt(a)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(a,c,b){return iH(this,a,qv(this,a,c,b))}},{key:"moveByGroup",value:function(a,b){var
c=this;return iH(this,a,qv(this,a,b,function(b){return wN(c,a.head,b)}))}},{key:"moveToLineBoundary",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return AQ(this,c,a,b)}},{key:"moveVertically",value:function(a,c,b){return iH(this,a,AU(this,a,c,b))}},{key:"scrollPosIntoView",value:function(a){this.dispatch({effects:iA.of(d.cursor(a))})}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(a,b)}},{key:"posAtCoords",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return qY(this,a,b)}},{key:"coordsAtPos",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var
a=this.docView.coordsAt(b,c);if(!a||a.left==a.right)return a;var
d=this.state.doc.lineAt(b),e=this.bidiSpans(d),f=e[b0.find(e,b-d.from,-1,c)];return ey(a,f.dir==B.LTR==c>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(b){if(b.length>uF)return su(b.length);var
f=this.textDirection,c=a(this.bidiCache),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.from==b.from&&d.dir==f)return d.order}}catch(a){c.e(a)}finally{c.f()}var
g=xl(b.text,this.textDirection);this.bidiCache.push(new
js(b.from,b.to,f,g));return g}},{key:"hasFocus",get:function(){var
a;return(document.hasFocus()||n.safari&&((a=this.inputState)===null||a===void
0?void
0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var
a=this;this.observer.ignore(function(){os(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.destroyed=true}}],[{key:"scrollIntoView",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return rQ.of(new
dW(typeof
b=="number"?d.cursor(b):b,a.y,a.x,a.yMargin,a.xMargin))}},{key:"domEventHandlers",value:function(a){return vy.define(function(){return{}},{eventHandlers:a})}},{key:"theme",value:function(d,a){var
b=y.newName(),c=[si.of(b),dn.of(gR(".".concat(b),d))];if(a&&a.dark)c.push(hd.of(true));return c}},{key:"baseTheme",value:function(a){return bf.lowest(dn.of(gR("."+gL,a,p0)))}}]);return f}();aa.scrollTo=iA;aa.centerOn=mf;aa.styleModule=dn;aa.inputHandler=o8;aa.exceptionSink=oa;aa.updateListener=i0;aa.editable=c3;aa.mouseSelectionStyle=qr;aa.dragMovesSelection=nQ;aa.clickAddsSelectionRange=ms;aa.decorations=bM;aa.darkTheme=hd;aa.contentAttributes=mM;aa.editorAttributes=n0;aa.lineWrapping=aa.contentAttributes.of({"class":"cm-lineWrapping"});aa.announce=j.define();var
uF=4096;function
hA(a,b){return(a==null?b.contentDOM.getBoundingClientRect().top:a)+b.viewState.paddingTop}var
it=-1;function
yb(){window.addEventListener("resize",function(){if(it==-1)it=setTimeout(zm,50)})}function
zm(){it=-1;var
c=document.querySelectorAll(".cm-content");for(var
a=0;a<c.length;a++){var
b=_.get(c[a]);if(b)b.editorView.requestMeasure()}}var
jg={},js=function(){function
d(c,f,a,e){b(this,d);this.from=c;this.to=f;this.dir=a;this.order=e}c(d,null,[{key:"update",value:function(a,c){if(c.empty)return a;var
f=[],g=a.length?a[a.length-1].dir:B.LTR;for(var
e=Math.max(0,a.length-10);e<a.length;e++){var
b=a[e];if(b.dir==g&&!c.touchesRange(b.from,b.to))f.push(new
d(c.mapPos(b.from,1),c.mapPos(b.to,-1),b.dir,b.order))}return f}}]);return d}();function
lS(f,g,c){for(var
d=f.state.facet(g),a=d.length-1;a>=0;a--){var
b=d[a],e=typeof
b=="function"?b(f):b;if(e)g4(e,c)}return c}var
Dp=n.mac?"mac":n.windows?"win":n.linux?"linux":"key",tj=!n.ios,CN={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(tj)CN[".cm-line"].caretColor="transparent !important";var
Dk=/x/.unicode!=null?"gu":"g",wo=v.baseTheme({".cm-matchingBracket":{backgroundColor:"#328c8252"},".cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),jO=1e4,jN="()[]{}",l7=h.define({combine:function(a){return bw(a,{afterCursor:true,brackets:jN,maxScanDistance:jO})}}),AF=s.mark({"class":"cm-matchingBracket"}),Bp=s.mark({"class":"cm-nonmatchingBracket"}),wD=ao.define({create:function(){return s.none},update:function(j,b){if(!b.docChanged&&!b.selection)return j;var
g=[],e=b.state.facet(l7),f=a(b.state.selection.ranges),h;try{for(f.s();!(h=f.n()).done;){var
d=h.value;if(!d.empty)continue;var
c=bk(b.state,d.head,-1,e)||d.head>0&&bk(b.state,d.head-1,1,e)||e.afterCursor&&(bk(b.state,d.head,1,e)||d.head<b.state.doc.length&&bk(b.state,d.head+1,-1,e));if(!c)continue;var
i=c.matched?AF:Bp;g.push(i.range(c.start.from,c.start.to));if(c.end)g.push(i.range(c.end.from,c.end.to))}}catch(a){f.e(a)}finally{f.f()}return s.set(g,true)},provide:function(a){return v.decorations.from(a)}}),wE=[wD,wo];function
wC(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[l7.of(a),wE]}function
id(c,a,d){var
e=c.prop(a<0?w.openedBy:w.closedBy);if(e)return e;if(c.name.length==1){var
b=d.indexOf(c.name);if(b>-1&&b%2==(a<0?1:0))return[d[b+a]]}return null}function
bk(e,d,b){var
f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},j=f.maxScanDistance||jO,c=f.brackets||jN,i=aq(e),h=i.resolveInner(d,b);for(var
a=h;a;a=a.parent){var
g=id(a.type,b,c);if(g&&a.from<a.to)return AD(e,d,b,a,g,c)}return AE(e,d,b,i,h.type,j,c)}function
AD(j,i,c,b,h,g){var
f=b.parent,e={from:b.from,to:b.to},d=0,a=f===null||f===void
0?void
0:f.cursor;if(a&&(c<0?a.childBefore(b.from):a.childAfter(b.to)))do
if(c<0?a.to<=b.from:a.from>=b.to)if(d==0&&h.indexOf(a.type.name)>-1&&a.from<a.to)return{start:e,end:{from:a.from,to:a.to},matched:true};else
if(id(a.type,c,g))d++;else
if(id(a.type,-c,g)){d--;if(d==0)return{start:e,end:a.from==a.to?void
0:{from:a.from,to:a.to},matched:false}}while(c<0?a.prevSibling():a.nextSibling());return{start:e,matched:false}}function
AE(f,b,a,r,q,o,l){var
p=a<0?f.sliceDoc(b-1,b):f.sliceDoc(b,b+1),h=l.indexOf(p);if(h<0||h%2==0!=a>0)return null;var
m={from:a<0?b-1:b,to:a>0?b+1:b},k=f.doc.iterRange(b,a>0?f.doc.length:0),i=0;for(var
e=0;!k.next().done&&e<=o;){var
d=k.value;if(a<0)e+=d.length;var
g=b+e*a;for(var
c=a>0?0:d.length-1,n=a>0?d.length:-1;c!=n;c+=a){var
j=l.indexOf(d[c]);if(j<0||r.resolve(g+c,1).type!=q)continue;if(j%2==0==a>0)i++;else
if(i==1)return{start:m,end:{from:g+c,to:g+c+1},matched:j>>1==h>>1};else
i--}if(a>0)e+=d.length}return k.done?{start:m,matched:false}:null}function
ct(a,b){return d.create(a.ranges.map(b),a.mainIndex)}function
bm(b,a){return b.update({selection:a,scrollIntoView:true,userEvent:"select"})}function
br(b,e){var
a=b.state,d=b.dispatch,c=ct(a.selection,e);if(c.eq(a.selection))return false;d(bm(a,c));return true}function
e8(a,b){return d.cursor(b?a.to:a.from)}function
mX(c,b){return br(c,function(a){return a.empty?c.moveByChar(a,b):e8(a,b)})}var
m1=function(a){return mX(a,a.textDirection!=B.LTR)},m2=function(a){return mX(a,a.textDirection==B.LTR)};function
mY(c,b){return br(c,function(a){return a.empty?c.moveByGroup(a,b):e8(a,b)})}var
xy=function(a){return mY(a,a.textDirection!=B.LTR)},xz=function(a){return mY(a,a.textDirection==B.LTR)};function
zT(d,a,c){if(a.type.prop(c))return true;var
b=a.to-a.from;return b&&(b>2||/[^\s,.;:]/.test(d.sliceDoc(a.from,a.to)))||a.firstChild}function
e5(f,j,b){var
a=aq(f).resolveInner(j.head),i=b?w.closedBy:w.openedBy;for(var
g=j.head;;){var
c=b?a.childAfter(g):a.childBefore(g);if(!c)break;if(zT(f,c,i))a=c;else
g=b?c.to:c.from}var
k=a.type.prop(i),e,h;if(k&&(e=b?bk(f,a.from,1):bk(f,a.to,-1))&&e.matched)h=b?e.end.to:e.end.from;else
h=b?a.to:a.from;return d.cursor(h,b?-1:1)}var
xD=function(a){return br(a,function(b){return e5(a.state,b,a.textDirection!=B.LTR)})},xE=function(a){return br(a,function(b){return e5(a.state,b,a.textDirection==B.LTR)})};function
mZ(c,b){return br(c,function(a){if(!a.empty)return e8(a,b);var
d=c.moveVertically(a,b);return d.head!=a.head?d:c.moveToLineBoundary(a,b)})}var
m8=function(a){return mZ(a,false)},m7=function(a){return mZ(a,true)};function
m0(a,f){var
c=a.state,e=ct(c.selection,function(b){return b.empty?a.moveVertically(b,f,a.dom.clientHeight):e8(b,f)});if(e.eq(c.selection))return false;var
b=a.coordsAtPos(c.selection.main.head),d=a.scrollDOM.getBoundingClientRect();a.dispatch(bm(c,e),{effects:b&&b.top>d.top&&b.bottom<d.bottom?aa.scrollIntoView(e.main.head,{y:"start",yMargin:b.top-d.top}):void
0});return true}var
m9=function(a){return m0(a,false)},ha=function(a){return m0(a,true)};function
e4(f,c,e){var
a=f.lineBlockAt(c.head),b=f.moveToLineBoundary(c,e);if(b.head==c.head&&b.head!=(e?a.to:a.from))b=f.moveToLineBoundary(c,e,false);if(!e&&b.head==a.from&&a.length){var
g=/^\s*/.exec(f.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;if(g&&c.head!=a.from+g)b=d.cursor(a.from+g)}return b}var
m6=function(a){return br(a,function(b){return e4(a,b,true)})},m5=function(a){return br(a,function(b){return e4(a,b,false)})},xB=function(a){return br(a,function(b){return d.cursor(a.lineBlockAt(b.head).from,1)})},xA=function(a){return br(a,function(b){return d.cursor(a.lineBlockAt(b.head).to,-1)})};function
CP(b,a,g){var
f=false,c=ct(b.selection,function(a){var
c=bk(b,a.head,-1)||bk(b,a.head,1)||a.head>0&&bk(b,a.head-1,1)||a.head<b.doc.length&&bk(b,a.head+1,-1);if(!c||!c.end)return a;f=true;var
e=c.start.from==a.head?c.end.to:c.end.from;return g?d.range(a.anchor,e):d.cursor(e)});if(!f)return false;a(bm(b,c));return true}var
xC=function(a){var
c=a.state,b=a.dispatch;return CP(c,b,false)};function
bi(a,c){var
b=ct(a.state.selection,function(b){var
a=c(b);return d.range(b.anchor,a.head,a.goalColumn)});if(b.eq(a.state.selection))return false;a.dispatch(bm(a.state,b));return true}function
rS(a,c){return bi(a,function(b){return a.moveByChar(b,c)})}var
rW=function(a){return rS(a,a.textDirection!=B.LTR)},rX=function(a){return rS(a,a.textDirection==B.LTR)};function
rT(a,c){return bi(a,function(b){return a.moveByGroup(b,c)})}var
Cb=function(a){return rT(a,a.textDirection!=B.LTR)},Cc=function(a){return rT(a,a.textDirection==B.LTR)},Ck=function(a){return bi(a,function(b){return e5(a.state,b,a.textDirection!=B.LTR)})},Cl=function(a){return bi(a,function(b){return e5(a.state,b,a.textDirection==B.LTR)})};function
rU(a,c){return bi(a,function(b){return a.moveVertically(b,c)})}var
r3=function(a){return rU(a,false)},r2=function(a){return rU(a,true)};function
rV(a,c){return bi(a,function(b){return a.moveVertically(b,c,a.dom.clientHeight)})}var
r5=function(a){return rV(a,false)},r4=function(a){return rV(a,true)},r1=function(a){return bi(a,function(b){return e4(a,b,true)})},r0=function(a){return bi(a,function(b){return e4(a,b,false)})},Cf=function(a){return bi(a,function(b){return d.cursor(a.lineBlockAt(b.head).from)})},Ce=function(a){return bi(a,function(b){return d.cursor(a.lineBlockAt(b.head).to)})},m4=function(a){var
c=a.state,b=a.dispatch;b(bm(c,{anchor:0}));return true},m3=function(a){var
b=a.state,c=a.dispatch;c(bm(b,{anchor:b.doc.length}));return true},rZ=function(a){var
b=a.state,c=a.dispatch;c(bm(b,{anchor:b.selection.main.anchor,head:0}));return true},rY=function(b){var
a=b.state,c=b.dispatch;c(bm(a,{anchor:a.selection.main.anchor,head:a.doc.length}));return true},Ca=function(a){var
b=a.state,c=a.dispatch;c(b.update({selection:{anchor:0,head:b.doc.length},userEvent:"select"}));return true},Cd=function(b){var
a=b.state,c=b.dispatch,e=e_(a).map(function(b){var
c=b.from,e=b.to;return d.range(c,Math.min(e+1,a.doc.length))});c(a.update({selection:d.create(e),userEvent:"select"}));return true},Ci=function(a){var
e=a.state,b=a.dispatch,c=ct(e.selection,function(b){var
c,a=aq(e).resolveInner(b.head,1);while(!(a.from<b.from&&a.to>=b.to||a.to>b.to&&a.from<=b.from||!((c=a.parent)===null||c===void
0?void
0:c.parent)))a=a.parent;return d.range(a.to,a.from)});b(bm(e,c));return true},CA=function(c){var
e=c.state,f=c.dispatch,a=e.selection,b=null;if(a.ranges.length>1)b=d.create([a.main]);else
if(!a.main.empty)b=d.create([d.cursor(a.main.head)]);if(!b)return false;f(bm(e,b));return true};function
em(b,g){var
a=b.state,e=b.dispatch;if(a.readOnly)return false;var
f="delete.selection",c=a.changeByRange(function(e){var
a=e.from,b=e.to;if(a==b){var
c=g(a);if(c<a)f="delete.backward";else
if(c>a)f="delete.forward";a=Math.min(a,c);b=Math.max(b,c)}return a==b?{range:e}:{changes:{from:a,to:b},range:d.cursor(a)}});if(c.changes.empty)return false;e(a.update(c,{scrollIntoView:true,userEvent:f}));return true}function
fa(e,b,f){if(e
instanceof
aa){var
c=a(e.pluginField(aL.atomicRanges)),d;try{for(c.s();!(d=c.n()).done;){var
g=d.value;g.between(b,b,function(a,c){if(a<b&&c>b)b=f?c:a})}}catch(a){c.e(a)}finally{c.f()}}return b}var
nl=function(h,d){return em(h,function(a){var
e=h.state,b=e.doc.lineAt(a),c,f;if(!d&&a>b.from&&a<b.from+200&&!/[^ \t]/.test(c=b.text.slice(0,a-b.from))){if(c[c.length-1]=="\t")return a-1;var
i=cP(c,e.tabSize),j=i%bQ(e)||bQ(e);for(var
g=0;g<j&&c[c.length-1-g]==" ";g++)a--;f=a}else{f=x(b.text,a-b.from,d,d)+b.from;if(f==a&&b.number!=(d?e.doc.lines:1))f+=d?1:-1}return fa(h,f,d)})},hh=function(a){return nl(a,false)},nn=function(a){return nl(a,true)},nm=function(h,c){return em(h,function(f){var
a=f,g=h.state,b=g.doc.lineAt(a),k=g.charCategorizer(a);for(var
d=null;;){if(a==(c?b.to:b.from)){if(a==f&&b.number!=(c?g.doc.lines:1))a+=c?1:-1;break}var
e=x(b.text,a-b.from,c)+b.from,j=b.text.slice(Math.min(a,e)-b.from,Math.max(a,e)-b.from),i=k(j);if(d!=null&&i!=d)break;if(j!=" "||a!=f)d=i;a=e}return fa(h,a,c)})},no=function(a){return nm(a,false)},xW=function(a){return nm(a,true)},np=function(a){return em(a,function(b){var
c=a.lineBlockAt(b).to;return fa(a,b<c?c:Math.min(a.state.doc.length,b+1),true)})},xY=function(b){return em(b,function(a){var
c=b.lineBlockAt(a).from;return fa(b,a>c?c:Math.max(0,a-1),false)})},CE=function(b){var
a=b.state,e=b.dispatch;if(a.readOnly)return false;var
c=a.changeByRange(function(a){return{changes:{from:a.from,to:a.to,insert:p.of(["",""])},range:d.cursor(a.from)}});e(a.update(c,{scrollIntoView:true,userEvent:"input"}));return true},CU=function(a){var
c=a.state,e=a.dispatch;if(c.readOnly)return false;var
b=c.changeByRange(function(e){if(!e.empty||e.from==0||e.from==c.doc.length)return{range:e};var
a=e.from,b=c.doc.lineAt(a),g=a==b.from?a-1:x(b.text,a-b.from,false)+b.from,f=a==b.to?a+1:x(b.text,a-b.from,true)+b.from;return{changes:{from:g,to:f,insert:c.doc.slice(a,f).append(c.doc.slice(g,a))},range:d.cursor(f)}});if(b.changes.empty)return false;e(c.update(b,{scrollIntoView:true,userEvent:"move.character"}));return true};function
e_(f){var
e=[],j=-1,d=a(f.selection.ranges),g;try{for(d.s();!(g=d.n()).done;){var
b=g.value,i=f.doc.lineAt(b.from),c=f.doc.lineAt(b.to);if(!b.empty&&b.to==c.from)c=f.doc.lineAt(b.to-1);if(j>=i.number){var
h=e[e.length-1];h.to=c.to;h.ranges.push(b)}else
e.push({from:i.from,to:c.to,ranges:[b]});j=c.number+1}}catch(a){d.e(a)}finally{d.f()}return e}function
qy(c,r,k){if(c.readOnly)return false;var
i=[],l=[],f=a(e_(c)),o;try{for(f.s();!(o=f.n()).done;){var
b=o.value;if(k?b.to==c.doc.length:b.from==0)continue;var
e=c.doc.lineAt(k?b.to+1:b.from-1),j=e.length+1;if(k){i.push({from:b.to,to:e.to},{from:b.from,insert:e.text+c.lineBreak});var
g=a(b.ranges),p;try{for(g.s();!(p=g.n()).done;){var
m=p.value;l.push(d.range(Math.min(c.doc.length,m.anchor+j),Math.min(c.doc.length,m.head+j)))}}catch(a){g.e(a)}finally{g.f()}}else{i.push({from:e.from,to:b.from},{from:b.to,insert:c.lineBreak+e.text});var
h=a(b.ranges),q;try{for(h.s();!(q=h.n()).done;){var
n=q.value;l.push(d.range(n.anchor-j,n.head-j))}}catch(a){h.e(a)}finally{h.f()}}}}catch(a){f.e(a)}finally{f.f()}if(!i.length)return false;r(c.update({changes:i,scrollIntoView:true,selection:d.create(l,c.selection.mainIndex),userEvent:"move.line"}));return true}var
AM=function(a){var
c=a.state,b=a.dispatch;return qy(c,b,false)},AL=function(a){var
c=a.state,b=a.dispatch;return qy(c,b,true)};function
mT(b,g,h){if(b.readOnly)return false;var
e=[],d=a(e_(b)),f;try{for(d.s();!(f=d.n()).done;){var
c=f.value;if(h)e.push({from:c.from,insert:b.doc.slice(c.from,c.to)+b.lineBreak});else
e.push({from:c.to,insert:b.lineBreak+b.doc.slice(c.from,c.to)})}}catch(a){d.e(a)}finally{d.f()}g(b.update({changes:e,scrollIntoView:true,userEvent:"input.copyline"}));return true}var
xt=function(a){var
c=a.state,b=a.dispatch;return mT(c,b,false)},xs=function(a){var
c=a.state,b=a.dispatch;return mT(c,b,true)},xX=function(b){if(b.state.readOnly)return false;var
a=b.state,c=a.changes(e_(a).map(function(d){var
b=d.from,c=d.to;if(b>0)b--;else
if(c<a.doc.length)c++;return{from:b,to:c}})),d=ct(a.selection,function(a){return b.moveVertically(a,true)}).map(c);b.dispatch({changes:c,selection:d,scrollIntoView:true,userEvent:"delete.line"});return true};function
zY(d,a){if(/\(\)|\[\]|\{\}/.test(d.sliceDoc(a-1,a+1)))return{from:a,to:a};var
f=aq(d).resolveInner(a),c=f.childBefore(a),b=f.childAfter(a),e;if(c&&b&&c.to<=a&&b.from>=a&&(e=c.type.prop(w.closedBy))&&e.indexOf(b.name)>-1&&d.doc.lineAt(c.to).from==d.doc.lineAt(b.from).from)return{from:c.to,to:b.from};return null}var
zS=qK(false),zQ=qK(true);function
qK(k){return function(a){var
c=a.state,e=a.dispatch;if(c.readOnly)return false;var
b=c.changeByRange(function(j){var
a=j.from,e=j.to,b=c.doc.lineAt(a),f=!k&&a==e&&zY(c,a);if(k)a=e=(e<=b.to?b:c.doc.lineAt(e)).to;var
i=new
dM(c,{simulateBreak:a,simulateDoubleBreak:!!f}),g=hO(i,a);if(g==null)g=/^\s*/.exec(c.doc.lineAt(a).text)[0].length;while(e<b.to&&/\s/.test(b.text[e-b.from]))e++;if(f){a=f.from;e=f.to}else
if(a>b.from&&a<b.from+100&&!/\S/.test(b.text.slice(0,a)))a=b.from;var
h=["",c8(c,g)];if(f)h.push(c8(c,i.lineIndent(b.from,-1)));return{changes:{from:a,to:e,insert:p.of(h)},range:d.cursor(a+1+h[1].length)}});e(c.update(b,{scrollIntoView:true,userEvent:"input"}));return true}}function
gT(f,i){var
h=-1;return f.changeByRange(function(a){var
c=[];for(var
e=a.from;e<=a.to;){var
b=f.doc.lineAt(e);if(b.number>h&&(a.empty||a.to>b.from)){i(b,c,a);h=b.number}e=b.to+1}var
g=f.changes(c);return{changes:c,range:d.range(g.mapPos(a.anchor,1),g.mapPos(a.head,1))}})}var
zO=function(a){var
b=a.state,d=a.dispatch;if(b.readOnly)return false;var
f=Object.create(null),i=new
dM(b,{overrideIndentation:function(b){var
a=f[b];return a==null?-1:a}}),c=gT(b,function(a,g,h){var
c=hO(i,a.from);if(c==null)return;if(!/\S/.test(a.text))c=0;var
d=/^\s*/.exec(a.text)[0],e=c8(b,c);if(d!=e||h.from<a.from+d.length){f[a.from]=c;g.push({from:a.from,to:a.from+d.length,insert:e})}});if(!c.changes.empty)d(b.update(c,{userEvent:"indent"}));return true},zL=function(b){var
a=b.state,c=b.dispatch;if(a.readOnly)return false;c(a.update(gT(a,function(c,b){b.push({from:c.from,insert:a.facet(eO)})}),{userEvent:"input.indent"}));return true},zK=function(a){var
b=a.state,c=a.dispatch;if(b.readOnly)return false;c(b.update(gT(b,function(e,f){var
c=/^\s*/.exec(e.text)[0];if(!c)return;var
g=cP(c,b.tabSize),a=0,d=c8(b,Math.max(0,g-bQ(b)));while(a<c.length&&a<d.length&&c.charCodeAt(a)==d.charCodeAt(a))a++;f.push({from:e.from+a,to:e.from+c.length,insert:d.slice(a)})}),{userEvent:"delete.dedent"}));return true},x9=[{key:"Ctrl-b",run:m1,shift:rW,preventDefault:true},{key:"Ctrl-f",run:m2,shift:rX},{key:"Ctrl-p",run:m8,shift:r3},{key:"Ctrl-n",run:m7,shift:r2},{key:"Ctrl-a",run:xB,shift:Cf},{key:"Ctrl-e",run:xA,shift:Ce},{key:"Ctrl-d",run:nn},{key:"Ctrl-h",run:hh},{key:"Ctrl-k",run:np},{key:"Ctrl-Alt-h",run:no},{key:"Ctrl-o",run:CE},{key:"Ctrl-t",run:CU},{key:"Ctrl-v",run:ha}],CF=[{key:"ArrowLeft",run:m1,shift:rW,preventDefault:true},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:xy,shift:Cb},{mac:"Cmd-ArrowLeft",run:m5,shift:r0},{key:"ArrowRight",run:m2,shift:rX,preventDefault:true},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:xz,shift:Cc},{mac:"Cmd-ArrowRight",run:m6,shift:r1},{key:"ArrowUp",run:m8,shift:r3,preventDefault:true},{mac:"Cmd-ArrowUp",run:m4,shift:rZ},{mac:"Ctrl-ArrowUp",run:m9,shift:r5},{key:"ArrowDown",run:m7,shift:r2,preventDefault:true},{mac:"Cmd-ArrowDown",run:m3,shift:rY},{mac:"Ctrl-ArrowDown",run:ha,shift:r4},{key:"PageUp",run:m9,shift:r5},{key:"PageDown",run:ha,shift:r4},{key:"Home",run:m5,shift:r0},{key:"Mod-Home",run:m4,shift:rZ},{key:"End",run:m6,shift:r1},{key:"Mod-End",run:m3,shift:rY},{key:"Enter",run:zS},{key:"Mod-a",run:Ca},{key:"Backspace",run:hh,shift:hh},{key:"Delete",run:nn},{key:"Mod-Backspace",mac:"Alt-Backspace",run:no},{key:"Mod-Delete",mac:"Alt-Delete",run:xW},{mac:"Mod-Backspace",run:xY},{mac:"Mod-Delete",run:np}].concat(x9.map(function(a){return{mac:a.key,run:a.run,shift:a.shift}})),xQ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:xD,shift:Ck},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:xE,shift:Cl},{key:"Alt-ArrowUp",run:AM},{key:"Shift-Alt-ArrowUp",run:xt},{key:"Alt-ArrowDown",run:AL},{key:"Shift-Alt-ArrowDown",run:xs},{key:"Escape",run:CA},{key:"Mod-Enter",run:zQ},{key:"Alt-l",mac:"Ctrl-l",run:Cd},{key:"Mod-i",run:Ci,preventDefault:true},{key:"Mod-[",run:zK},{key:"Mod-]",run:zL},{key:"Mod-Alt-\\",run:zO},{key:"Shift-Mod-k",run:xX},{key:"Shift-Mod-\\",run:xC}].concat(CF),el={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},bH=j.define({map:function(c,b){var
a=b.mapPos(c,-1,z.TrackAfter);return a==null?void
0:a}}),iJ=j.define({map:function(b,a){return a.mapPos(b)}}),g0=new(function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}return c(a)}(aX))();g0.startSide=1;g0.endSide=-1;var
l8=ao.define({create:function(){return k.empty},update:function(c,b){if(b.selection){var
g=b.state.doc.lineAt(b.selection.main.head).from,h=b.startState.doc.lineAt(b.startState.selection.main.head).from;if(g!=b.changes.mapPos(h,-1))c=k.empty}c=c.map(b.changes);var
d=a(b.effects),e;try{var
f=function(){var
a=e.value;if(a.is(bH))c=c.update({add:[g0.range(a.value,a.value+1)]});else
if(a.is(iJ))c=c.update({filter:function(b){return b!=a.value}})};for(d.s();!(e=d.n()).done;)f()}catch(a){d.e(a)}finally{d.f()}return c}});function
w8(){return[v.inputHandler.of(zf),l8]}var
hg="()[]{}<>";function
mx(b){for(var
a=0;a<hg.length;a+=2)if(hg.charCodeAt(a)==b)return hg.charAt(a+1);return hG(b<128?b:b+1)}function
mI(b,a){return b.languageDataAt("closeBrackets",a)[0]||el}function
zf(b,e,f,a){if(b.composing)return false;var
c=b.state.selection.main;if(a.length>2||a.length==2&&aN(ap(a,0))==1||e!=c.from||f!=c.to)return false;var
d=zR(b.state,a);if(!d)return false;b.dispatch(d);return true}var
xV=function(b){var
c=b.state,h=b.dispatch,f=mI(c,c.selection.main.head),j=f.brackets||el.brackets,g=null,e=c.changeByRange(function(b){if(b.empty){var
i=BE(c.doc,b.head),f=a(j),h;try{for(f.s();!(h=f.n()).done;){var
e=h.value;if(e==i&&e6(c.doc,b.head)==mx(ap(e,0)))return{changes:{from:b.head-e.length,to:b.head+e.length},range:d.cursor(b.head-e.length),userEvent:"delete.backward"}}}catch(a){f.e(a)}finally{f.f()}}return{range:g=b}});if(!g)h(c.update(e,{scrollIntoView:true}));return!g},w9=[{key:"Backspace",run:xV}];function
zR(c,g){var
h=mI(c,c.selection.main.head),i=h.brackets||el.brackets,d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
b=f.value,e=mx(ap(b,0));if(g==b)return e==b?zo(c,b,i.indexOf(b+b+b)>-1):zi(c,b,e,h.before||el.before);if(g==e&&mw(c,c.selection.main.from))return ze(c,b,e)}}catch(a){d.e(a)}finally{d.f()}return null}function
mw(b,c){var
a=false;b.field(l8).between(0,b.doc.length,function(b){if(b==c)a=true});return a}function
e6(c,b){var
a=c.sliceString(b,b+2);return a.slice(0,aN(ap(a,0)))}function
BE(c,b){var
a=c.sliceString(b-2,b);return aN(ap(a,0))==a.length?a:a.slice(1)}function
zi(e,b,f,h){var
g=null,a=e.changeByRange(function(a){if(!a.empty)return{changes:[{insert:b,from:a.from},{insert:f,from:a.to}],effects:bH.of(a.to+b.length),range:d.range(a.anchor+b.length,a.head+b.length)};var
c=e6(e.doc,a.head);if(!c||/\s/.test(c)||h.indexOf(c)>-1)return{changes:{insert:b+f,from:a.head},effects:bH.of(a.head+b.length),range:d.cursor(a.head+b.length)};return{range:g=a}});return g?null:e.update(a,{scrollIntoView:true,userEvent:"input.type"})}function
ze(a,f,c){var
e=null,b=a.selection.ranges.map(function(b){if(b.empty&&e6(a.doc,b.head)==c)return d.cursor(b.head+c.length);return e=b});return e?null:a.update({selection:d.create(b,a.selection.mainIndex),scrollIntoView:true,effects:a.selection.ranges.map(function(a){var
b=a.from;return iJ.of(b)})})}function
zo(c,a,h){var
i=null,b=c.changeByRange(function(e){if(!e.empty)return{changes:[{insert:a,from:e.from},{insert:a,from:e.to}],effects:bH.of(e.to+a.length),range:d.range(e.anchor+a.length,e.head+a.length)};var
b=e.head,f=e6(c.doc,b);if(f==a){if(qO(c,b))return{changes:{insert:a+a,from:b},effects:bH.of(b+a.length),range:d.cursor(b+a.length)};else
if(mw(c,b)){var
j=h&&c.sliceDoc(b,b+a.length*3)==a+a+a;return{range:d.cursor(b+a.length*(j?3:1)),effects:iJ.of(b)}}}else
if(h&&c.sliceDoc(b-2*a.length,b)==a+a&&qO(c,b-2*a.length))return{changes:{insert:a+a+a+a,from:b},effects:bH.of(b+a.length),range:d.cursor(b+a.length)};else
if(c.charCategorizer(b)(f)!=ak.Word){var
g=c.sliceDoc(b-1,b);if(g!=a&&c.charCategorizer(b)(g)!=ak.Word)return{changes:{insert:a+a,from:b},effects:bH.of(b+a.length),range:d.cursor(b+a.length)}}return{range:i=e}});return i?null:c.update(b,{scrollIntoView:true,userEvent:"input.type"})}function
qO(c,a){var
b=aq(c).resolveInner(a+1);return b.parent&&b.from==a}function
eH(a){var
b;if(a.nodeType==11)b=a.getSelection?a:a.ownerDocument;else
b=a;return b.getSelection()}function
g_(b,a){return a?b.contains(a.nodeType!=1?a.parentNode:a):false}function
xL(){var
a=document.activeElement;while(a&&a.shadowRoot)a=a.shadowRoot.activeElement;return a}function
hV(b,a){if(!a.anchorNode)return false;try{return g_(b,a.anchorNode)}catch(a){return false}}function
ch(a){if(a.nodeType==3)return du(a,0,a.nodeValue.length).getClientRects();else
if(a.nodeType==1)return a.getClientRects();else
return[]}function
eU(b,c,a,d){return a?rI(b,c,a,d,-1)||rI(b,c,a,d,1):false}function
hr(a){for(var
b=0;;b++){a=a.previousSibling;if(!a)return b}}function
rI(a,b,e,f,c){for(;;){if(a==e&&b==f)return true;if(b==(c<0?0:e2(a))){if(a.nodeName=="DIV")return false;var
d=a.parentNode;if(!d||d.nodeType!=1)return false;b=hr(a)+(c<0?0:1);a=d}else
if(a.nodeType==1){a=a.childNodes[b+(c<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")return false;b=c<0?e2(a):0}else
return false}}function
e2(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}var
kB={left:0,right:0,top:0,bottom:0};function
ez(a,c){var
b=c?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}function
Dd(a){return{left:0,right:a.innerWidth,top:0,bottom:a.innerHeight}}function
B8(o,a,h,k,i,f,g,s){var
n=o.ownerDocument,q=n.defaultView;for(var
c=o;c;)if(c.nodeType==1){var
b=void
0,m=c==n.body;if(m)b=Dd(q);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}var
j=c.getBoundingClientRect();b={left:j.left,right:j.left+c.clientWidth,top:j.top,bottom:j.top+c.clientHeight}}var
d=0,e=0;if(i=="nearest"){if(a.top<b.top){e=-(b.top-a.top+g);if(h>0&&a.bottom>b.bottom+e)e=a.bottom-b.bottom+e+g}else
if(a.bottom>b.bottom){e=a.bottom-b.bottom+g;if(h<0&&a.top-e<b.top)e=-(b.top+e-a.top+g)}}else{var
p=a.bottom-a.top,l=b.bottom-b.top,v=i=="center"&&p<=l?a.top+p/2-l/2:i=="start"||i=="center"&&h<0?a.top-g:a.bottom-l+g;e=v-b.top}if(k=="nearest"){if(a.left<b.left){d=-(b.left-a.left+f);if(h>0&&a.right>b.right+d)d=a.right-b.right+d+f}else
if(a.right>b.right){d=a.right-b.right+f;if(h<0&&a.left<b.left+d)d=-(b.left+d-a.left+f)}}else{var
u=k=="center"?a.left+(a.right-a.left)/2-(b.right-b.left)/2:k=="start"==s?a.left-f:a.right-(b.right-b.left)+f;d=u-b.left}if(d||e)if(m)q.scrollBy(d,e);else{if(e){var
t=c.scrollTop;c.scrollTop+=e;e=c.scrollTop-t}if(d){var
r=c.scrollLeft;c.scrollLeft+=d;d=c.scrollLeft-r}a={left:a.left-d,top:a.top-e,right:a.right-d,bottom:a.bottom-e}}if(m)break;c=c.assignedSlot||c.parentNode;k=i="nearest"}else
if(c.nodeType==11)c=c.host;else
break}var
tO=function(){function
a(){b(this,a);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}c(a,[{key:"eq",value:function(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}},{key:"setRange",value:function(a){this.set(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}},{key:"set",value:function(a,b,c,d){this.anchorNode=a;this.anchorOffset=b;this.focusNode=c;this.focusOffset=d}}]);return a}(),cr=null;function
ot(b){if(b.setActive)return b.setActive();if(cr)return b.focus(cr);var
c=[];for(var
a=b;a;a=a.parentNode){c.push(a,a.scrollTop,a.scrollLeft);if(a==a.ownerDocument)break}b.focus(cr==null?Object.defineProperties({},{preventScroll:{get:function(){cr={preventScroll:true};return true},configurable:true,enumerable:true}}):void
0);if(!cr){cr=false;for(var
d=0;d<c.length;){var
e=c[d++],g=c[d++],f=c[d++];if(e.scrollTop!=g)e.scrollTop=g;if(e.scrollLeft!=f)e.scrollLeft=f}}}var
rO;function
du(c,b){var
d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b,a=rO||(rO=document.createRange());a.setEnd(c,d);a.setStart(c,b);return a}function
cZ(d,e,c){var
f={key:e,code:e,keyCode:c,which:c,cancelable:true},a=new
KeyboardEvent("keydown",f);a.synthetic=true;d.dispatchEvent(a);var
b=new
KeyboardEvent("keyup",f);b.synthetic=true;d.dispatchEvent(b);return a.defaultPrevented||b.defaultPrevented}function
yX(a){while(a){if(a&&(a.nodeType==9||a.nodeType==11&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function
mo(a){while(a.attributes.length)a.removeAttributeNode(a.attributes[0])}var
az=function(){function
a(c,d){var
e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;b(this,a);this.node=c;this.offset=d;this.precise=e}c(a,null,[{key:"before",value:function(b,c){return new
a(b.parentNode,hr(b),c)}},{key:"after",value:function(b,c){return new
a(b.parentNode,hr(b)+1,c)}}]);return a}(),im=[],$=function(){function
f(){b(this,f);this.parent=null;this.dom=null;this.dirty=2}c(f,[{key:"editorView",get:function(){if(!this.parent)throw new
Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(f){var
e=this.posAtStart,b=a(this.children),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c==f)return e;e+=c.length+c.breakAfter}}catch(a){b.e(a)}finally{b.f()}throw new
RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(a){return this.posBefore(a)+a.length}},{key:"coordsAt",value:function(a,b){return null}},{key:"sync",value:function(d){if(this.dirty&2){var
e=this.dom,b=e.firstChild,g=a(this.children),k;try{for(g.s();!(k=g.n()).done;){var
c=k.value;if(c.dirty){if(!c.dom&&b){var
j=f.get(b);if(!j||!j.parent&&j.constructor==c.constructor)c.reuseDOM(b)}c.sync(d);c.dirty=0}if(d&&!d.written&&d.node==e&&b!=c.dom)d.written=true;if(c.dom.parentNode==e){while(b&&b!=c.dom)b=rv(b);b=c.dom.nextSibling}else
e.insertBefore(c.dom,b)}}catch(a){g.e(a)}finally{g.f()}if(b&&d&&d.node==e)d.written=true;while(b)b=rv(b)}else
if(this.dirty&1){var
h=a(this.children),l;try{for(h.s();!(l=h.n()).done;){var
i=l.value;if(i.dirty){i.sync(d);i.dirty=0}}}catch(a){h.e(a)}finally{h.f()}}}},{key:"reuseDOM",value:function(a){}},{key:"localPosFromDOM",value:function(b,h){var
a;if(b==this.dom)a=this.dom.childNodes[h];else{var
d=e2(b)==0?0:h==0?-1:1;for(;;){var
c=b.parentNode;if(c==this.dom)break;if(d==0&&c.firstChild!=c.lastChild)if(b==c.firstChild)d=-1;else
d=1;b=c}if(d<0)a=b;else
a=b.nextSibling}if(a==this.dom.firstChild)return 0;while(a&&!f.get(a))a=a.nextSibling;if(!a)return this.length;for(var
g=0,i=0;;g++){var
e=this.children[g];if(e.dom==a)return i;i+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(g,i){var
h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=-1,k=-1,f=-1,j=-1;for(var
b=0,a=h,l=h;b<this.children.length;b++){var
c=this.children[b],d=a+c.length;if(a<g&&d>i)return c.domBoundsAround(g,i,a);if(d>=g&&e==-1){e=b;k=a}if(a>i&&c.dom.parentNode==this.dom){f=b;j=l;break}l=d;a=d+c.breakAfter}return{from:k,to:j<0?h+this.length:j,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}},{key:"markDirty",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.dirty|=2;this.markParentsDirty(a)}},{key:"markParentsDirty",value:function(b){for(var
a=this.parent;a;a=a.parent){if(b)a.dirty|=2;if(a.dirty&1)return;a.dirty|=1;b=false}}},{key:"setParent",value:function(a){if(this.parent!=a){this.parent=a;if(this.dirty)this.markParentsDirty(true)}}},{key:"setDOM",value:function(a){if(this.dom)this.dom.cmView=null;this.dom=a;a.cmView=this}},{key:"rootView",get:function(){for(var
a=this;;){var
b=a.parent;if(!b)return a;a=b}}},{key:"replaceChildren",value:function(d,g){var
e,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:im;this.markDirty();for(var
a=d;a<g;a++){var
f=this.children[a];if(f.parent==this)f.destroy()}(e=this.children).splice.apply(e,[d,g-d].concat(P(c)));for(var
b=0;b<c.length;b++)c[b].setParent(this)}},{key:"ignoreMutation",value:function(a){return false}},{key:"ignoreEvent",value:function(a){return false}},{key:"childCursor",value:function(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new
jz(this.children,a,this.children.length)}},{key:"childPos",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(b,a)}},{key:"toString",value:function(){var
a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return true}},{key:"merge",value:function(a,f,e,b,d,c){return false}},{key:"become",value:function(a){return false}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(a){return a.cmView}}]);return f}();$.prototype.breakAfter=0;function
rv(a){var
b=a.nextSibling;a.parentNode.removeChild(a);return b}var
jz=function(){function
a(c,e,d){b(this,a);this.children=c;this.pos=e;this.i=d;this.off=0}c(a,[{key:"findPos",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(a>this.pos||a==this.pos&&(c>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=a-this.pos;return this}var
b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return a}();function
ro(n,c,i,d,h,a,l,k,j){var
f=n.children,b=f.length?f[c]:null,g=a.length?a[a.length-1]:null,m=g?g.breakAfter:l;if(c==d&&b&&!l&&!m&&a.length<2&&b.merge(i,h,a.length?g:null,i==0,k,j))return;if(d<f.length){var
e=f[d];if(e&&h<e.length){if(c==d){e=e.split(h);h=0}if(!m&&g&&e.merge(0,h,g,true,0,j))a[a.length-1]=e;else{if(h)e.merge(0,h,null,false,0,j);a.push(e)}}else
if(e===null||e===void
0?void
0:e.breakAfter)if(g)g.breakAfter=1;else
l=1;d++}if(b){b.breakAfter=l;if(i>0){if(!l&&a.length&&b.merge(i,b.length,a[0],false,k,0))b.breakAfter=a.shift().breakAfter;else
if(i<b.length||b.children.length&&b.children[b.children.length-1].length==0)b.merge(i,b.length,null,false,k,0);c++}}while(c<d&&a.length)if(f[d-1].become(a[a.length-1])){d--;a.pop();j=a.length?0:k}else
if(f[c].become(a[0])){c++;a.shift();k=a.length?0:j}else
break;if(!a.length&&c&&d<f.length&&!f[c-1].breakAfter&&f[d].merge(0,0,f[c-1],false,k,j))c--;if(c<d||a.length)n.replaceChildren(c,d,a)}function
qe(c,i,k,j,o,n){var
g=c.childCursor(),e=g.findPos(k,1),p=e.i,q=e.off,d=g.findPos(i,-1),l=d.i,m=d.off,h=i-k,b=a(j),f;try{for(b.s();!(f=b.n()).done;){var
r=f.value;h+=r.length}}catch(a){b.e(a)}finally{b.f()}c.length+=h;ro(c,l,m,p,q,j,0,o,n)}var
vT=typeof
navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],lD=bn(vT,2),aI=lD[0],hm=lD[1],h8=/Edge\/(\d+)/.exec(aI.userAgent),oW=/MSIE \d/.test(aI.userAgent),h3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(aI.userAgent),eN=!!(oW||h3||h8),oE=!eN&&/gecko\/(\d+)/i.test(aI.userAgent),gY=!eN&&/Chrome\/(\d+)/.exec(aI.userAgent),sN="webkitFontSmoothing"in
hm.documentElement.style,rD=!eN&&/Apple Computer/.test(aI.vendor),pm=rD&&(/Mobile\/\w+/.test(aI.userAgent)||aI.maxTouchPoints>2),o={mac:pm||/Mac/.test(aI.platform),windows:/Win/.test(aI.platform),linux:/Linux|X11/.test(aI.platform),ie:eN,ie_version:oW?hm.documentMode||6:h3?+h3[1]:h8?+h8[1]:0,gecko:oE,gecko_version:oE?+(/Firefox\/(\d+)/.exec(aI.userAgent)||[0,0])[1]:0,chrome:!!gY,chrome_version:gY?+gY[1]:0,ios:pm,android:/Android\b/.test(aI.userAgent),webkit:sN,safari:rD,webkit_version:sN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hm.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},uL=256,d3=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.text=d;return c}c(a,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(a&&a.node==this.dom)a.written=true;this.dom.nodeValue=this.text}}},{key:"reuseDOM",value:function(a){if(a.nodeType==3)this.createDOM(a)}},{key:"merge",value:function(c,d,b){if(b&&(!(b
instanceof
a)||this.length-(d-c)+b.length>uL))return false;this.text=this.text.slice(0,c)+(b?b.text:"")+this.text.slice(d);this.markDirty();return true}},{key:"split",value:function(b){var
c=new
a(this.text.slice(b));this.text=this.text.slice(0,b);this.markDirty();return c}},{key:"localPosFromDOM",value:function(b,a){return b==this.dom?a:a?this.text.length:0}},{key:"domAtPos",value:function(a){return new
az(this.dom,a)}},{key:"domBoundsAround",value:function(b,c,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return sf(this.dom,a,b)}}]);return a}($),dR=function(g){f(d,g);var
k=e(d);function
d(j){var
c,g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;b(this,d);c=k.call(this);c.mark=j;c.children=g;c.length=i;var
e=a(g),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;h.setParent(aQ(c))}}catch(a){e.e(a)}finally{e.f()}return c}c(d,[{key:"setAttrs",value:function(a){mo(a);if(this.mark["class"])a.className=this.mark["class"];if(this.mark.attrs)for(var
b
in
this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);return a}},{key:"reuseDOM",value:function(a){if(a.nodeName==this.mark.tagName.toUpperCase()){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(a){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else
if(this.dirty&4)this.setAttrs(this.dom);t(r(d.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(b,f,a,g,e,c){if(a&&(!(a
instanceof
d&&a.mark.eq(this.mark))||b&&e<=0||f<this.length&&c<=0))return false;qe(this,b,f,a?a.children:[],e-1,c-1);this.markDirty();return true}},{key:"split",value:function(b){var
k=[],c=0,f=-1,j=0,e=a(this.children),h;try{for(e.s();!(h=e.n()).done;){var
g=h.value,i=c+g.length;if(i>b)k.push(c<b?g.split(b-c):g);if(f<0&&c>=b)f=j;c=i;j++}}catch(a){e.e(a)}finally{e.f()}var
l=this.length-b;this.length=b;if(f>-1){this.children.length=f;this.markDirty()}return new
d(this.mark,k,l)}},{key:"domAtPos",value:function(a){return o4(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return mS(this,a,b)}}]);return d}($);function
sf(i,b,e){var
g=i.nodeValue.length;if(b>g)b=g;var
f=b,h=b,a=0;if(b==0&&e<0||b==g&&e>=0){if(!(o.chrome||o.gecko))if(b){f--;a=1}else{h++;a=-1}}else
if(e<0)f--;else
h++;var
d=du(i,f,h).getClientRects();if(!d.length)return kB;var
c=d[(a?a<0:e>=0)?0:d.length-1];if(o.safari&&!a&&c.width==0)c=Array.prototype.find.call(d,function(a){return a.width})||c;return a?ez(c,a<0):c||null}var
gc=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.side=e;return c}c(a,[{key:"split",value:function(b){var
c=a.create(this.widget,this.length-b,this.side);this.length-=b;return c}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"become",value:function(b){if(b.length==this.length&&b
instanceof
a&&b.side==this.side)if(this.widget.constructor==b.widget.constructor){if(!this.widget.eq(b.widget))this.markDirty(true);this.widget=b.widget;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"overrideDOMText",get:function(){if(this.length==0)return p.empty;var
a=this;while(a.parent)a=a.parent;var
d=a.editorView,c=d&&d.state.doc,b=this.posAtStart;return c?c.slice(b,b+this.length):p.empty}},{key:"domAtPos",value:function(a){return a==0?az.before(this.dom):az.after(this.dom,a==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,e){var
d=this.dom.getClientRects(),b=null;if(!d.length)return kB;for(var
c=a>0?d.length-1:0;;c+=a>0?-1:1){b=d[c];if(a>0?c==0:c==d.length-1||b.top<b.bottom)break}return a==0&&e>0||a==this.length&&e<=0?b:ez(b,a==0)}},{key:"isEditable",get:function(){return false}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}],[{key:"create",value:function(b,c,d){return new(b.customView||a)(b,c,d)}}]);return a}($),tt=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"domAtPos",value:function(a){return new
az(this.widget.text,a)}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(b,a){return!a?0:b.nodeType==3?Math.min(a,this.length):this.length}},{key:"ignoreMutation",value:function(){return false}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(a,b){return sf(this.widget.text,a,b)}},{key:"isEditable",get:function(){return true}}]);return a}(gc),gg=o.android?"\u200B\u200B":"\u200B",f_=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.side=d;return c}c(a,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return false}},{key:"become",value:function(b){return b
instanceof
a&&b.side==this.side}},{key:"split",value:function(){return new
a(this.side)}},{key:"sync",value:function(){if(!this.dom)this.setDOM(document.createTextNode(gg));else
if(this.dirty&&this.dom.nodeValue!=gg)this.dom.nodeValue=gg}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(a){return az.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(b){var
a=ch(this.dom);return a[a.length-1]||null}},{key:"overrideDOMText",get:function(){return p.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]);return a}($);d3.prototype.children=gc.prototype.children=f_.prototype.children=im;function
o4(f,e,d){var
a=0;for(var
b=0;a<e.length;a++){var
c=e[a],g=b+c.length;if(g==b&&c.getSide()<=0)continue;if(d>b&&d<g&&c.dom.parentNode==f)return c.domAtPos(d-b);if(d<=b)break;b=g}for(;a>0;a--){var
h=e[a-1].dom;if(h.parentNode==f)return az.after(h)}return new
az(f,0)}function
py(d,a,e){var
c,b=d.children;if(e>0&&a
instanceof
dR&&b.length&&(c=b[b.length-1])instanceof
dR&&c.mark.eq(a.mark))py(c,a.children[0],e-1);else{b.push(a);a.setParent(d)}d.length+=a.length}function
mS(a,f,g){for(var
e=0,c=0;c<a.children.length;c++){var
d=a.children[c],b=e+d.length,k=void
0;if((g<=0||b==a.length||d.getSide()>0?b>=f:b>f)&&(f<b||c+1==a.children.length||(k=a.children[c+1]).length||k.getSide()>0)){var
i=0;if(b==e){if(d.getSide()<=0)continue;i=g=-d.getSide()}var
h=d.coordsAt(f-e,g);return i&&h?ez(h,g<0):h}e=b}var
j=a.dom.lastChild;if(!j)return a.dom.getBoundingClientRect();var
l=ch(j);return l[l.length-1]||null}function
g5(c,a){for(var
b
in
c)if(b=="class"&&a["class"])a["class"]+=" "+c["class"];else
if(b=="style"&&a.style)a.style+=";"+c.style;else
a[b]=c[b];return a}function
gF(a,b){if(a==b)return true;if(!a||!b)return false;var
f=Object.keys(a),g=Object.keys(b);if(f.length!=g.length)return false;for(var
c=0,e=f;c<e.length;c++){var
d=e[c];if(g.indexOf(d)==-1||a[d]!==b[d])return false}return true}function
iW(d,c,a){if(c)for(var
e
in
c)if(!(a&&e
in
a))d.removeAttribute(e);if(a)for(var
b
in
a)if(!(c&&c[b]==a[b]))d.setAttribute(b,a[b])}var
eb=function(){function
a(){b(this,a)}c(a,[{key:"eq",value:function(a){return false}},{key:"updateDOM",value:function(a){return false}},{key:"compare",value:function(a){return this==a||this.constructor==a.constructor&&this.eq(a)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(a){return true}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(a){}}]);return a}(),W=function(a){a[a["Text"]=0]="Text";a[a["WidgetBefore"]=1]="WidgetBefore";a[a["WidgetAfter"]=2]="WidgetAfter";a[a["WidgetRange"]=3]="WidgetRange";return a}(W||(W={})),A=function(a){f(d,a);var
h=e(d);function
d(f,c,g,e){var
a;b(this,d);a=h.call(this);a.startSide=f;a.endSide=c;a.widget=g;a.spec=e;return a}c(d,[{key:"heightRelevant",get:function(){return false}},{key:"hasHeight",value:function(){return this.widget?this.widget.estimatedHeight>-1:false}}],[{key:"mark",value:function(a){return new
kd(a)}},{key:"widget",value:function(b){var
a=b.side||0,c=!!b.block;a+=c?a>0?3e8:-4e8:a>0?1e8:-1e8;return new
cF(b,a,a,c,b.widget||null,false)}},{key:"replace",value:function(b){var
a=!!b.block,c=oK(b,a),f=c.start,d=c.end,g=a?f?-3e8:-1:4e8,e=a?d?2e8:1:-5e8;return new
cF(b,g,e,a,b.widget||null,true)}},{key:"line",value:function(a){return new
fL(a)}},{key:"set",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return k.of(a,b)}}]);return d}(aX);A.none=k.empty;var
kd=function(d){f(a,d);var
h=e(a);function
a(d){var
c;b(this,a);var
e=oK(d),g=e.start,f=e.end;c=h.call(this,g?-1:4e8,f?1:-5e8,null,d);c.tagName=d.tagName||"span";c["class"]=d["class"]||"";c.attrs=d.attributes||null;return c}c(a,[{key:"eq",value:function(b){return this==b||b
instanceof
a&&this.tagName==b.tagName&&this["class"]==b["class"]&&gF(this.attrs,b.attrs)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(b>=c)throw new
RangeError("Mark decorations may not be empty");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(A);kd.prototype.point=false;var
fL=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,-2e8,-2e8,null,c)}c(a,[{key:"eq",value:function(b){return b
instanceof
a&&gF(this.spec.attributes,b.spec.attributes)}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(c!=b)throw new
RangeError("Line decoration ranges must be zero-length");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(A);fL.prototype.mapMode=z.TrackBefore;fL.prototype.point=true;var
cF=function(d){f(a,d);var
j=e(a);function
a(h,e,f,d,i,g){var
c;b(this,a);c=j.call(this,e,f,i,h);c.block=d;c.isReplace=g;c.mapMode=!d?z.TrackDel:e<=0?z.TrackBefore:z.TrackAfter;return c}c(a,[{key:"type",get:function(){return this.startSide<this.endSide?W.WidgetRange:this.startSide<=0?W.WidgetBefore:W.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(b){return b
instanceof
a&&C_(this.widget,b.widget)&&this.block==b.block&&this.startSide==b.startSide&&this.endSide==b.endSide}},{key:"range",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b;if(this.isReplace&&(b>c||b==c&&this.startSide>0&&this.endSide<=0))throw new
RangeError("Invalid range for replacement decoration");if(!this.isReplace&&c!=b)throw new
RangeError("Widget decorations can only have zero-length ranges");return t(r(a.prototype),"range",this).call(this,b,c)}}]);return a}(A);cF.prototype.point=true;function
oK(c){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false,b=c.inclusiveStart,a=c.inclusiveEnd;if(b==null)b=c.inclusive;if(a==null)a=c.inclusive;return{start:b!==null&&b!==void
0?b:d,end:a!==null&&a!==void
0?a:d}}function
C_(a,b){return a==b||!!(a&&b&&a.compare(b))}function
gz(c,d,a){var
e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,b=a.length-1;if(b>=0&&a[b]+e>=c)a[b]=Math.max(a[b],d);else
a.push(c,d)}var
aU=function(g){f(d,g);var
h=e(d);function
d(){var
a;b(this,d);a=h.apply(this,arguments);a.children=[];a.length=0;a.prevAttrs=void
0;a.attrs=null;a.breakAfter=0;return a}c(d,[{key:"merge",value:function(b,g,a,c,f,e){if(a){if(!(a
instanceof
d))return false;if(!this.dom)a.transferDOM(this)}if(c)this.setDeco(a?a.attrs:null);qe(this,b,g,a?a.children:[],f,e);return true}},{key:"split",value:function(g){var
b=new
d();b.breakAfter=this.breakAfter;if(this.length==0)return b;var
f=this.childPos(g),a=f.i,e=f.off;if(e){b.append(this.children[a].split(e),0);this.children[a].merge(e,this.children[a].length,null,false,0,0);a++}for(var
c=a;c<this.children.length;c++)b.append(this.children[c],0);while(a>0&&this.children[a-1].length==0)this.children[--a].destroy();this.children.length=a;this.markDirty();this.length=g;return b}},{key:"transferDOM",value:function(a){if(!this.dom)return;a.setDOM(this.dom);a.prevAttrs=this.prevAttrs===void
0?this.attrs:this.prevAttrs;this.prevAttrs=void
0;this.dom=null}},{key:"setDeco",value:function(a){if(!gF(this.attrs,a)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=a}}},{key:"append",value:function(a,b){py(this,a,b)}},{key:"addLineDeco",value:function(c){var
a=c.spec.attributes,b=c.spec["class"];if(a)this.attrs=g5(a,this.attrs||{});if(b)this.attrs=g5({"class":b},this.attrs||{})}},{key:"domAtPos",value:function(a){return o4(this.dom,this.children,a)}},{key:"reuseDOM",value:function(a){if(a.nodeName=="DIV"){this.setDOM(a);this.dirty|=4|2}}},{key:"sync",value:function(e){var
b;if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}else
if(this.dirty&4){mo(this.dom);this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void
0}if(this.prevAttrs!==void
0){iW(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void
0}t(r(d.prototype),"sync",this).call(this,e);var
a=this.dom.lastChild;while(a&&$.get(a)instanceof
dR)a=a.lastChild;if(!a||a.nodeName!="BR"&&((b=$.get(a))===null||b===void
0?void
0:b.isEditable)==false&&(!o.ios||!this.children.some(function(a){return a
instanceof
d3}))){var
c=document.createElement("BR");c.cmIgnore=true;this.dom.appendChild(c)}}},{key:"measureTextSize",value:function(){if(this.children.length==0||this.length>20)return null;var
f=0,b=a(this.children),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(!(d
instanceof
d3))return null;var
e=ch(d.dom);if(e.length!=1)return null;f+=e[0].width}}catch(a){b.e(a)}finally{b.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:f/this.length}}},{key:"coordsAt",value:function(a,b){return mS(this,a,b)}},{key:"become",value:function(a){return false}},{key:"type",get:function(){return W.Text}}],[{key:"find",value:function(e,g){for(var
b=0,f=0;b<e.children.length;b++){var
a=e.children[b],c=f+a.length;if(c>=g){if(a
instanceof
d)return a;if(c>g)break}f=c+a.breakAfter}return null}}]);return d}($),fp=function(d){f(a,d);var
g=e(a);function
a(f,d,e){var
c;b(this,a);c=g.call(this);c.widget=f;c.length=d;c.type=e;c.breakAfter=0;return c}c(a,[{key:"merge",value:function(c,d,b,g,f,e){if(b&&(!(b
instanceof
a)||!this.widget.compare(b.widget)||c>0&&f<=0||d<this.length&&e<=0))return false;this.length=c+(b?b.length:0)+(this.length-d);return true}},{key:"domAtPos",value:function(a){return a==0?az.before(this.dom):az.after(this.dom,a==this.length)}},{key:"split",value:function(b){var
d=this.length-b;this.length=b;var
c=new
a(this.widget,d,this.type);c.breakAfter=this.breakAfter;return c}},{key:"children",get:function(){return im}},{key:"sync",value:function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):p.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(b){if(b
instanceof
a&&b.type==this.type&&b.widget.constructor==this.widget.constructor){if(!b.widget.eq(this.widget))this.markDirty(true);this.widget=b.widget;this.length=b.length;this.breakAfter=b.breakAfter;return true}return false}},{key:"ignoreMutation",value:function(){return true}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"destroy",value:function(){t(r(a.prototype),"destroy",this).call(this);if(this.dom)this.widget.destroy(this.dom)}}]);return a}($),tD=function(){function
d(a,c,f,e){b(this,d);this.doc=a;this.pos=c;this.end=f;this.disallowBlockEffectsBelow=e;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=c}c(d,[{key:"posCovered",value:function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var
a=this.content[this.content.length-1];return!a.breakAfter&&!(a
instanceof
fp&&a.type==W.WidgetBefore)}},{key:"getLine",value:function(){if(!this.curLine){this.content.push(this.curLine=new
aU());this.atCursorPos=true}return this.curLine}},{key:"flushBuffer",value:function(a){if(this.pendingBuffer){this.curLine.append(fk(new
f_(-1),a),a.length);this.pendingBuffer=0}}},{key:"addBlockWidget",value:function(a){this.flushBuffer([]);this.curLine=null;this.content.push(a)}},{key:"finish",value:function(a){if(!a)this.flushBuffer([]);else
this.pendingBuffer=0;if(!this.posCovered())this.getLine()}},{key:"buildText",value:function(a,e,c){while(a>0){if(this.textOff==this.text.length){var
b=this.cursor.next(this.skip),h=b.value,g=b.lineBreak,f=b.done;this.skip=0;if(f)throw new
Error("Ran out of text content when drawing inline views");if(g){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else
this.breakAtStart=1;this.flushBuffer([]);this.curLine=null;a--;continue}else{this.text=h;this.textOff=0}}var
d=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(e.slice(0,c));this.getLine().append(fk(new
d3(this.text.slice(this.textOff,this.textOff+d)),e),c);this.atCursorPos=true;this.textOff+=d;a-=d;c=0}}},{key:"span",value:function(d,b,c,a){this.buildText(b-d,c,a);this.pos=b;if(this.openStart<0)this.openStart=a}},{key:"point",value:function(f,e,a,b,d){var
c=e-f;if(a
instanceof
cF)if(a.block){var
k=a.type;if(k==W.WidgetAfter&&!this.posCovered())this.getLine();this.addBlockWidget(new
fp(a.widget||new
kk("div"),c,k))}else{var
g=gc.create(a.widget||new
kk("span"),c,a.startSide),i=this.atCursorPos&&!g.isEditable&&d<=b.length&&(f<e||a.startSide>0),h=!g.isEditable&&(f<e||a.startSide<=0),j=this.getLine();if(this.pendingBuffer==2&&!i)this.pendingBuffer=0;this.flushBuffer(b);if(i){j.append(fk(new
f_(1),b),d);d=b.length+Math.max(0,d-b.length)}j.append(fk(g,b),d);this.atCursorPos=h;this.pendingBuffer=!h?0:f<e?1:2}else
if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(a);if(c){if(this.textOff+c<=this.text.length)this.textOff+=c;else{this.skip+=c-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=d}},{key:"filterPoint",value:function(d,c,a,b){if(b>=this.disallowBlockEffectsBelow||!(a
instanceof
cF))return true;if(a.block)throw new
RangeError("Block decorations may not be specified via plugins");return c<=this.doc.lineAt(this.pos).to}}],[{key:"build",value:function(g,b,c,e,f){var
a=new
d(g,b,c,f);a.openEnd=k.spans(e,b,c,a);if(a.openStart<0)a.openStart=a.openEnd;a.finish(a.openEnd);return a}}]);return d}();function
fk(c,e){var
b=a(e),d;try{for(b.s();!(d=b.n()).done;){var
f=d.value;c=new
dR(f,[c],c.length)}}catch(a){b.e(a)}finally{b.f()}return c}var
kk=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.tag=d;return c}c(a,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return a}(eb),Bn=[],mt=h.define(),nR=h.define(),qs=h.define(),ob=h.define(),i1=h.define(),o9=h.define(),iB=j.define({map:function(b,a){return b.map(a)}}),mg=j.define({map:function(b,a){return b.map(a)}}),dX=function(){function
a(c){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"nearest",d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"nearest",g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5,e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;b(this,a);this.range=c;this.y=f;this.x=d;this.yMargin=g;this.xMargin=e}c(a,[{key:"map",value:function(b){return b.empty?this:new
a(this.range.map(b),this.y,this.x,this.yMargin,this.xMargin)}}]);return a}(),rR=j.define({map:function(b,a){return b.map(a)}});function
bV(d,a,b){var
c=d.facet(ob);if(c.length)c[0](a);else
if(window.onerror)window.onerror(String(a),b,void
0,void
0,a);else
if(b)console.error(b+":",a);else
console.error(a)}var
c4=h.define({combine:function(a){return a.length?a[0]:true}}),va=c(function
a(c,d){b(this,a);this.field=c;this.get=d}),aW=function(){function
a(){b(this,a)}c(a,[{key:"from",value:function(a){return new
va(this,a)}}],[{key:"define",value:function(){return new
a()}}]);return a}();aW.decorations=aW.define();aW.atomicRanges=aW.define();aW.scrollMargins=aW.define();var
A7=0,dB=h.define(),f6=function(){function
d(e,a,c){b(this,d);this.id=e;this.create=a;this.fields=c;this.extension=dB.of(this)}c(d,null,[{key:"define",value:function(j,l){var
f=l||{},i=f.eventHandlers,e=f.provide,h=f.decorations,c=[];if(e){var
b=a(Array.isArray(e)?e:[e]),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;c.push(k)}}catch(a){b.e(a)}finally{b.f()}}if(i)c.push(nH.from(function(a){return{plugin:a,handlers:i}}));if(h)c.push(aW.decorations.from(h));return new
d(A7++,j,c)}},{key:"fromClass",value:function(b,a){return d.define(function(a){return new
b(a)},a)}}]);return d}(),nH=aW.define(),fY=function(){function
d(a){b(this,d);this.spec=a;this.mustUpdate=null;this.value=null}c(d,[{key:"takeField",value:function(h,g){if(this.spec){var
b=a(this.spec.fields),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,e=d.field,f=d.get;if(e==h)g.push(f(this.value))}}catch(a){b.e(a)}finally{b.f()}}}},{key:"update",value:function
a(b){if(!this.value){if(this.spec)try{this.value=this.spec.create(b)}catch(a){bV(b.state,a,"CodeMirror plugin crashed");this.deactivate()}}else
if(this.mustUpdate){var
a=this.mustUpdate;this.mustUpdate=null;if(this.value.update)try{this.value.update(a)}catch(b){bV(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(a){}this.deactivate()}}return this}},{key:"destroy",value:function(b){var
a;if((a=this.value)===null||a===void
0?void
0:a.destroy)try{this.value.destroy()}catch(a){bV(b.state,a,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]);return d}(),n1=h.define(),mN=h.define(),bN=h.define(),dp=h.define(),cy=function(){function
d(a,e,c,f){b(this,d);this.fromA=a;this.toA=e;this.fromB=c;this.toB=f}c(d,[{key:"join",value:function(a){return new
d(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(c){var
a=c.length,b=this;for(;a>0;a--){var
d=c[a-1];if(d.fromA>b.toA)continue;if(d.toA<b.fromA)break;b=b.join(d);c.splice(a-1,1)}c.splice(a,0,b);return c}}],[{key:"extendWithRanges",value:function(f,c){if(c.length==0)return f;var
j=[];for(var
e=0,b=0,m=0,i=0;;e++){var
a=e==f.length?null:f[e],l=m-i,g=a?a.fromB:1e9;while(b<c.length&&c[b]<g){var
o=c[b],n=c[b+1],h=Math.max(i,o),k=Math.min(g,n);if(h<=k)new
d(h+l,k+l,h,k).addToSet(j);if(n>g)break;else
b+=2}if(!a)return j;new
d(a.fromA,a.toA,a.fromB,a.toB).addToSet(j);m=a.toA;i=a.toB}}}]);return d}(),kS=function(){function
e(c,j){var
i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Bn;b(this,e);this.view=c;this.state=j;this.transactions=i;this.flags=0;this.startState=c.state;this.changes=X.empty(this.startState.doc.length);var
d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
k=f.value;this.changes=this.changes.compose(k.changes)}}catch(a){d.e(a)}finally{d.f()}var
g=[];this.changes.iterChangedRanges(function(a,c,b,d){return g.push(new
cy(a,c,b,d))});this.changedRanges=g;var
h=c.hasFocus;if(h!=c.inputState.notifiedFocused){c.inputState.notifiedFocused=h;this.flags|=1}}c(e,[{key:"viewportChanged",get:function(){return(this.flags&4)>0}},{key:"heightChanged",get:function(){return(this.flags&2)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(this.flags&(8|2))>0}},{key:"focusChanged",get:function(){return(this.flags&1)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return this.flags==0&&this.transactions.length==0}}]);return e}(),aB=function(a){a[a["LTR"]=0]="LTR";a[a["RTL"]=1]="RTL";return a}(aB||(aB={})),fF=aB.LTR,vh=aB.RTL;function
nk(c){var
b=[];for(var
a=0;a<c.length;a++)b.push(1<<+c[a]);return b}var
uA=nk("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),s2=nk("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fu=Object.create(null),a3=[];for(var
gn=0,k3=["()","[]","{}"];gn<k3.length;gn++){var
lq=k3[gn],lf=lq.charCodeAt(0),lx=lq.charCodeAt(1);fu[lf]=lx;fu[lx]=-lf}function
w7(a){return a<=247?uA[a]:1424<=a&&a<=1524?2:1536<=a&&a<=1785?s2[a-1536]:1774<=a&&a<=2220?4:8192<=a&&a<=8203?256:a==8204?256:1}var
ta=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b1=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.level=d}c(a,[{key:"dir",get:function(){return this.level%2?vh:fF}},{key:"side",value:function(b,a){return this.dir==a==b?this.to:this.from}}],[{key:"find",value:function(e,d,g,f){var
c=-1;for(var
b=0;b<e.length;b++){var
a=e[b];if(a.from<=d&&a.to>=d){if(a.level==g)return b;if(c<0||(f!=0?f<0?a.from<d:a.to>d:e[c].level>a.level))c=b}}if(c<0)throw new
RangeError("Index out of range");return c}}]);return a}(),O=[];function
xm(q,G){var
a=q.length,c=G==fF?1:2,R=G==fF?2:1;if(!q||c==1&&!ta.test(q))return sv(a);for(var
r=0,I=c,J=c;r<a;r++){var
d=w7(q.charCodeAt(r));if(d==512)d=I;else
if(d==8&&J==4)d=16;O[r]=d==4?2:d;if(d&7)J=d;I=d}for(var
b=0,o=c,u=c;b<a;b++){var
j=O[b];if(j==128)if(b<a-1&&o==O[b+1]&&o&24)j=O[b]=o;else
O[b]=256;else
if(j==64){var
k=b+1;while(k<a&&O[k]==64)k++;var
S=b&&o==8||k<a&&O[k]==8?u==1?1:8:256;for(var
y=b;y<k;y++)O[y]=S;b=k-1}else
if(j==8&&u==1)O[b]=1;o=j;if(j&7)u=j}for(var
l=0,m=0,E=0,D,w,v;l<a;l++)if(w=fu[D=q.charCodeAt(l)])if(w<0){for(var
n=m-3;n>=0;n-=3)if(a3[n+1]==-w){var
x=a3[n+2],L=x&2?c:!(x&4)?0:x&1?R:c;if(L)O[l]=O[a3[n]]=L;m=n;break}}else
if(a3.length==189)break;else{a3[m++]=l;a3[m++]=D;a3[m++]=E}else
if((v=O[l])==2||v==1){var
H=v==c;E=H?0:1;for(var
p=m-3;p>=0;p-=3){var
F=a3[p+2];if(F&2)break;if(H)a3[p+2]|=2;else{if(F&4)break;a3[p+2]|=4}}}for(var
e=0;e<a;e++)if(O[e]==256){var
g=e+1;while(g<a&&O[g]==256)g++;var
C=(e?O[e-1]:c)==1,Q=(g<a?O[g]:c)==1,N=C==Q?C?1:2:c;for(var
t=e;t<g;t++)O[t]=N;e=g-1}var
s=[];if(c==1)for(var
f=0;f<a;){var
z=f,K=O[f++]!=1;while(f<a&&K==(O[f]!=1))f++;if(K)for(var
i=f;i>z;){var
M=i,A=O[--i]!=2;while(i>z&&A==(O[i-1]!=2))i--;s.push(new
b1(i,M,A?2:1))}else
s.push(new
b1(z,f,0))}else
for(var
h=0;h<a;){var
P=h,B=O[h++]==2;while(h<a&&B==(O[h]==2))h++;s.push(new
b1(P,h,B?1:2))}return s}function
sv(a){return[new
b1(0,a,0)]}var
qE="";function
A0(c,e,b,l,a){var
k,f=l.head-c.from,h=-1;if(f==0){if(!a||!c.length)return null;if(e[0].level!=b){f=e[0].side(false,b);h=0}}else
if(f==c.length){if(a)return null;var
n=e[e.length-1];if(n.level!=b){f=n.side(true,b);h=e.length-1}}if(h<0)h=b1.find(e,f,(k=l.bidiLevel)!==null&&k!==void
0?k:-1,l.assoc);var
g=e[h];if(f==g.side(a,b)){g=e[h+=a?1:-1];f=g.side(!a,b)}var
m=a==(g.dir==b),i=x(c.text,f,m);qE=c.text.slice(Math.min(f,i),Math.max(f,i));if(i!=g.side(a,b))return d.cursor(i+c.from,m?-1:1,g.level);var
j=h==(a?e.length-1:0)?null:e[h+(a?1:-1)];if(!j&&g.level!=b)return d.cursor(a?c.to:c.from,a?-1:1,b);if(j&&j.level<g.level)return d.cursor(j.side(!a,b)+c.from,a?1:-1,j.level);return d.cursor(i+c.from,a?-1:1,g.level)}var
jL=function(){function
d(c,a){b(this,d);this.points=c;this.view=a;this.text="";this.lineBreak=a.state.lineBreak}c(d,[{key:"readRange",value:function(d,e){if(!d)return this;var
f=d.parentNode;for(var
a=d;;){this.findPointBefore(f,a);this.readNode(a);var
b=a.nextSibling;if(b==e)break;var
c=$.get(a),g=$.get(b);if(c&&g?c.breakAfter:(c?c.breakAfter:pr(a))||pr(b)&&(a.nodeName!="BR"||a.cmIgnore))this.text+=this.lineBreak;a=b}this.findPointBefore(f,e);return this}},{key:"readTextNode",value:function(d){var
b,c,a=d.nodeValue;if(/^\u200b/.test(a)&&((b=d.previousSibling)===null||b===void
0?void
0:b.contentEditable)=="false")a=a.slice(1);if(/\u200b$/.test(a)&&((c=d.nextSibling)===null||c===void
0?void
0:c.contentEditable)=="false")a=a.slice(0,a.length-1);return a}},{key:"readNode",value:function(a){if(a.cmIgnore)return;var
d=$.get(a),c=d&&d.overrideDOMText,b;if(c!=null)b=c.sliceString(0,void
0,this.lineBreak);else
if(a.nodeType==3)b=this.readTextNode(a);else
if(a.nodeName=="BR")b=a.nextSibling?this.lineBreak:"";else
if(a.nodeType==1)this.readRange(a.firstChild,null);if(b!=null){this.findPointIn(a,b.length);this.text+=b;if(o.chrome&&this.view.inputState.lastKeyCode==13&&!a.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}}},{key:"findPointBefore",value:function(e,f){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==e&&e.childNodes[c.offset]==f)c.pos=this.text.length}}catch(a){b.e(a)}finally{b.f()}}},{key:"findPointIn",value:function(f,e){var
b=a(this.points),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.node==f)c.pos=this.text.length+Math.min(c.offset,e)}}catch(a){b.e(a)}finally{b.f()}}}]);return d}();function
pr(a){return a.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}var
jH=c(function
a(c,d){b(this,a);this.node=c;this.offset=d;this.pos=-1}),jT=function(g){f(d,g);var
h=e(d);function
d(c){var
a;b(this,d);a=h.call(this);a.view=c;a.compositionDeco=A.none;a.decorations=[];a.pluginDecorationLength=0;a.minWidth=0;a.minWidthFrom=0;a.minWidthTo=0;a.impreciseAnchor=null;a.impreciseHead=null;a.forceSelection=false;a.lastUpdate=Date.now();a.setDOM(c.contentDOM);a.children=[new
aU()];a.children[0].setParent(aQ(a));a.updateDeco();a.updateInner([new
cy(0,0,0,c.state.doc.length)],0);return a}c(d,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(a){var
c=this,b=a.changedRanges;if(this.minWidth>0&&b.length)if(!b.every(function(a){var
b=a.fromA,d=a.toA;return d<c.minWidthFrom||b>c.minWidthTo}))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else{this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)}if(this.view.inputState.composing<0)this.compositionDeco=A.none;else
if(a.transactions.length||this.dirty)this.compositionDeco=xh(this.view,a.changes);if((o.ie||o.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines)this.forceSelection=true;var
f=this.decorations,d=this.updateDeco(),e=ys(f,d,a.changes);b=cy.extendWithRanges(b,e);if(this.dirty==0&&b.length==0)return false;else{this.updateInner(b,a.startState.doc.length);if(a.transactions.length)this.lastUpdate=Date.now();return true}}},{key:"updateInner",value:function(h,i){var
b=this;this.view.viewState.mustMeasureContent=true;this.updateChildren(h,i);var
d=this.view.observer;d.ignore(function(){b.dom.style.height=b.view.viewState.contentHeight+"px";b.dom.style.minWidth=b.minWidth?b.minWidth+"px":"";var
a=o.chrome||o.ios?{node:d.selectionRange.focusNode,written:false}:void
0;b.sync(a);b.dirty=0;if(a&&(a.written||d.selectionRange.focusNode!=a.node))b.forceSelection=true;b.dom.style.height=""});var
g=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var
c=a(this.children),f;try{for(c.s();!(f=c.n()).done;){var
e=f.value;if(e
instanceof
fp&&e.widget
instanceof
jm)g.push(e.dom)}}catch(a){c.e(a)}finally{c.f()}}d.updateGaps(g)}},{key:"updateChildren",value:function(f,n){var
g=this.childCursor(n);for(var
c=f.length-1;;c--){var
a=c>=0?f[c]:null;if(!a)break;var
j=a.fromA,q=a.toA,k=a.fromB,r=a.toB,b=tD.build(this.view.state.doc,k,r,this.decorations,this.pluginDecorationLength),i=b.content,h=b.breakAtStart,p=b.openStart,o=b.openEnd,e=g.findPos(q,1),s=e.i,t=e.off,d=g.findPos(j,-1),l=d.i,m=d.off;ro(this,l,m,s,t,i,h,p,o)}}},{key:"updateSelection",value:function(){var
f=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(i)this.view.observer.readSelectionRange();if(!(h||this.mayControlSelection())||o.ios&&this.view.inputState.rapidCompositionStart)return;var
g=this.forceSelection;this.forceSelection=false;var
d=this.view.state.selection.main,a=this.domAtPos(d.anchor),c=d.empty?a:this.domAtPos(d.head);if(o.gecko&&d.empty&&wB(a)){var
e=document.createTextNode("");this.view.observer.ignore(function(){return a.node.insertBefore(e,a.node.childNodes[a.offset]||null)});a=c=new
az(e,0);g=true}var
b=this.view.observer.selectionRange;if(g||!b.focusNode||!eU(a.node,a.offset,b.anchorNode,b.anchorOffset)||!eU(c.node,c.offset,b.focusNode,b.focusOffset)){this.view.observer.ignore(function(){if(o.android&&o.chrome&&f.dom.contains(b.focusNode)&&zJ(b.focusNode,f.dom)){f.dom.blur();f.dom.focus({preventScroll:true})}var
e=eH(f.root);if(d.empty){if(o.gecko){var
g=Bc(a.node,a.offset);if(g&&g!=(1|2)){var
h=qJ(a.node,a.offset,g==1?1:-1);if(h)a=new
az(h,g==1?0:h.nodeValue.length)}}e.collapse(a.node,a.offset);if(d.bidiLevel!=null&&b.cursorBidiLevel!=null)b.cursorBidiLevel=d.bidiLevel}else
if(e.extend){e.collapse(a.node,a.offset);e.extend(c.node,c.offset)}else{var
i=document.createRange();if(d.anchor>d.head){var
j=[c,a];a=j[0];c=j[1]}i.setEnd(c.node,c.offset);i.setStart(a.node,a.offset);e.removeAllRanges();e.addRange(i)}});this.view.observer.setSelectionRange(a,c)}this.impreciseAnchor=a.precise?null:new
az(b.anchorNode,b.anchorOffset);this.impreciseHead=c.precise?null:new
az(b.focusNode,b.focusOffset)}},{key:"enforceCursorAssoc",value:function(){if(this.compositionDeco.size)return;var
a=this.view.state.selection.main,c=eH(this.root);if(!a.empty||!a.assoc||!c.modify)return;var
b=aU.find(this,a.head);if(!b)return;var
g=b.posAtStart;if(a.head==g||a.head==g+b.length)return;var
e=this.coordsAt(a.head,-1),d=this.coordsAt(a.head,1);if(!e||!d||e.bottom>d.top)return;var
f=this.domAtPos(a.head+a.assoc);c.collapse(f.node,f.offset);c.modify("move",a.assoc<0?"forward":"backward","lineboundary")}},{key:"mayControlSelection",value:function(){return this.view.state.facet(c4)?this.root.activeElement==this.dom:hV(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(c){for(var
a=c;a;){var
b=$.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}},{key:"posFromDOM",value:function(b,c){var
a=this.nearest(b);if(!a)throw new
RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(b,c)+a.posAtStart}},{key:"domAtPos",value:function(e){var
c=this.childCursor().findPos(e,-1),a=c.i,b=c.off;for(;a<this.children.length-1;){var
d=this.children[a];if(b<d.length||d
instanceof
aU)break;a++;b=0}return this.children[a].domAtPos(b)}},{key:"coordsAt",value:function(d,e){for(var
f=this.length,a=this.children.length-1;;a--){var
b=this.children[a],c=f-b.breakAfter-b.length;if(d>c||d==c&&b.type!=W.WidgetBefore&&b.type!=W.WidgetAfter&&(!a||e==2||this.children[a-1].breakAfter||this.children[a-1].type==W.WidgetBefore&&e>-2))return b.coordsAt(d-c,e);f=c}}},{key:"measureVisibleLineHeights",value:function(){var
k=[],g=this.view.viewState.viewport,n=g.from,p=g.to,h=this.view.contentDOM.clientWidth,o=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1;for(var
b=0,c=0;c<this.children.length;c++){var
a=this.children[c],e=b+a.length;if(e>p)break;if(b>=n){var
d=a.dom.getBoundingClientRect();k.push(d.height);if(o){var
i=a.dom.lastChild,f=i?ch(i):[];if(f.length){var
j=f[f.length-1],m=this.view.textDirection==aB.LTR?j.right-d.left:d.right-j.left;if(m>l){l=m;this.minWidth=h;this.minWidthFrom=b;this.minWidthTo=e}}}}b=e+a.breakAfter}return k}},{key:"measureTextSize",value:function(){var
i=this,c=a(this.children),d;try{for(c.s();!(d=c.n()).done;){var
f=d.value;if(f
instanceof
aU){var
h=f.measureTextSize();if(h)return h}}}catch(a){c.e(a)}finally{c.f()}var
b=document.createElement("div"),g,e;b.className="cm-line";b.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){i.dom.appendChild(b);var
a=ch(b.firstChild)[0];g=b.getBoundingClientRect().height;e=a?a.width/27:7;b.remove()});return{lineHeight:g,charWidth:e}}},{key:"childCursor",value:function(){var
b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length,a=this.children.length;if(a)b-=this.children[--a].length;return new
jz(this.children,b,a)}},{key:"computeBlockGapDeco",value:function(){var
f=[],c=this.view.viewState;for(var
b=0,d=0;;d++){var
a=d==c.viewports.length?null:c.viewports[d],e=a?a.from-1:this.length;if(e>b){var
g=c.lineBlockAt(e).bottom-c.lineBlockAt(b).top;f.push(A.replace({widget:new
jm(g),block:true,inclusive:true}).range(b,e))}if(!a)break;b=a.to+1}return A.set(f)}},{key:"updateDeco",value:function(){var
a=this.view.pluginField(aW.decorations);this.pluginDecorationLength=a.length;return this.decorations=[].concat(P(a),P(this.view.state.facet(bN)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(f){var
b=f.range,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(!c)return;if(!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1)))c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)};var
i=0,j=0,k=0,h=0,g=a(this.view.pluginField(aW.scrollMargins)),l;try{for(g.s();!(l=g.n()).done;){var
d=l.value;if(d){var
n=d.left,o=d.right,p=d.top,m=d.bottom;if(n!=null)i=Math.max(i,n);if(o!=null)j=Math.max(j,o);if(p!=null)k=Math.max(k,p);if(m!=null)h=Math.max(h,m)}}}catch(a){g.e(a)}finally{g.f()}var
q={left:c.left-i,top:c.top-k,right:c.right+j,bottom:c.bottom+h};B8(this.view.scrollDOM,q,b.head<b.anchor?-1:1,f.x,f.y,f.xMargin,f.yMargin,this.view.textDirection==aB.LTR)}}]);return d}($);function
wB(a){return a.node.nodeType==1&&a.node.firstChild&&(a.offset==0||a.node.childNodes[a.offset-1].contentEditable=="false")&&(a.offset==a.node.childNodes.length||a.node.childNodes[a.offset].contentEditable=="false")}var
jm=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.height=d;return c}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("div");this.updateDOM(a);return a}},{key:"eq",value:function(a){return a.height==this.height}},{key:"updateDOM",value:function(a){a.style.height=this.height+"px";return true}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(eb);function
mG(i){var
f=i.observer.selectionRange,c=f.focusNode&&qJ(f.focusNode,f.focusOffset,0);if(!c)return null;var
a=i.docView.nearest(c);if(!a)return null;if(a
instanceof
aU){var
d=c;while(d.parentNode!=a.dom)d=d.parentNode;var
b=d.previousSibling;while(b&&!$.get(b))b=b.previousSibling;var
h=b?$.get(b).posAtEnd:a.posAtStart;return{from:h,to:h,node:d,text:c}}else{for(;;){var
j=a,e=j.parent;if(!e)return null;if(e
instanceof
aU)break;a=e}var
g=a.posAtStart;return{from:g,to:g+a.length,node:a.dom,text:c}}}function
xh(g,h){var
d=mG(g);if(!d)return A.none;var
i=d.from,k=d.to,e=d.node,j=d.text,a=h.mapPos(i,1),c=Math.max(a,h.mapPos(k,-1)),f=g.state,b=e.nodeType==3?e.nodeValue:new
jL([],g).readRange(e.firstChild,null).text;if(c-a<b.length)if(f.sliceDoc(a,Math.min(f.doc.length,a+b.length))==b)c=a+b.length;else
if(f.sliceDoc(Math.max(0,c-b.length),c)==b)a=c-b.length;else
return A.none;else
if(f.sliceDoc(a,c)!=b)return A.none;return A.set(A.replace({widget:new
ty(e,j)}).range(a,c))}var
ty=function(d){f(a,d);var
g=e(a);function
a(e,d){var
c;b(this,a);c=g.call(this);c.top=e;c.text=d;return c}c(a,[{key:"eq",value:function(a){return this.top==a.top&&this.text==a.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return false}},{key:"customView",get:function(){return tt}}]);return a}(eb);function
qJ(a,b,c){for(;;){if(a.nodeType==3)return a;if(a.nodeType==1&&b>0&&c<=0){a=a.childNodes[b-1];b=e2(a)}else
if(a.nodeType==1&&b<a.childNodes.length&&c>=0){a=a.childNodes[b];b=0}else
return null}}function
Bc(a,b){if(a.nodeType!=1)return 0;return(b&&a.childNodes[b-1].contentEditable=="false"?1:0)|(b<a.childNodes.length&&a.childNodes[b].contentEditable=="false"?2:0)}var
tU=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(a,b){gz(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){gz(a,b,this.changes)}}]);return a}();function
ys(b,c,d){var
a=new
tU();k.compare(b,c,d,a);return a.changes}function
zJ(c,b){for(var
a=c;a&&a!=b;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return true;return false}function
zb(l,f){var
g=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,h=l.charCategorizer(f),a=l.doc.lineAt(f),e=f-a.from;if(a.length==0)return d.cursor(f);if(e==0)g=1;else
if(e==a.length)g=-1;var
b=e,c=e;if(g<0)b=x(a.text,e,false);else
c=x(a.text,e);var
i=h(a.text.slice(b,c));while(b>0){var
k=x(a.text,b,false);if(h(a.text.slice(k,b))!=i)break;b=k}while(c<a.length){var
j=x(a.text,c);if(h(a.text.slice(c,j))!=i)break;c=j}return d.range(b+a.from,c+a.from)}function
y2(b,a){return a.left>b?a.left-b:Math.max(0,b-a.right)}function
y7(b,a){return a.top>b?a.top-b:Math.max(0,b-a.bottom)}function
jb(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function
sH(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function
sC(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function
hw(k,h,g){var
f,b,m,n,o,p,c,d;for(var
e=k.firstChild;e;e=e.nextSibling){var
r=ch(e);for(var
l=0;l<r.length;l++){var
a=r[l];if(b&&jb(b,a))a=sH(sC(a,b.bottom),b.top);var
i=y2(h,a),j=y7(g,a);if(i==0&&j==0)return e.nodeType==3?nM(e,h,g):hw(e,h,g);if(!f||n>j||n==j&&m>i){f=e;b=a;m=i;n=j}if(i==0){if(g>a.bottom&&(!c||c.bottom<a.bottom)){o=e;c=a}else
if(g<a.top&&(!d||d.top>a.top)){p=e;d=a}}else
if(c&&jb(c,a))c=sC(c,a.bottom);else
if(d&&jb(d,a))d=sH(d,a.top)}}if(c&&c.bottom>=g){f=o;b=c}else
if(d&&d.top<=g){f=p;b=d}if(!f)return{node:k,offset:0};var
q=Math.max(b.left,Math.min(b.right,h));if(f.nodeType==3)return nM(f,q,g);if(!m&&f.contentEditable=="true")return hw(f,q,g);var
s=Array.prototype.indexOf.call(k.childNodes,f)+(h>=(b.left+b.right)/2?1:0);return{node:k,offset:s}}function
nM(c,d,j){var
n=c.nodeValue.length,f=-1,k=1e9,h=0;for(var
b=0;b<n;b++){var
l=du(c,b,b+1).getClientRects();for(var
i=0;i<l.length;i++){var
a=l[i];if(a.top==a.bottom)continue;if(!h)h=d-a.left;var
g=(a.top>j?a.top-j:j-a.bottom)-1;if(a.left-1<=d&&a.right+1>=d&&g<k){var
m=d>=(a.left+a.right)/2,e=m;if(o.chrome||o.gecko){var
p=du(c,b).getBoundingClientRect();if(p.left==a.right)e=!m}if(g<=0)return{node:c,offset:b+(e?1:0)};f=b+(e?1:0);k=g}}}return{node:c,offset:f>-1?f:h>0?c.nodeValue.length:0}}function
qZ(a,s,p){var
d=s.x,e=s.y,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1,k,h=a.contentDOM.getBoundingClientRect(),v=h.top+a.viewState.paddingTop,b,u=a.viewState.docHeight,g=e-v;if(g<0)return 0;if(g>u)return a.state.doc.length;for(var
w=a.defaultLineHeight/2,t=false;;){b=a.elementAtHeight(g);if(b.type==W.Text)break;for(;;){g=l>0?b.bottom+w:b.top-w;if(g>=0&&g<=u)break;if(t)return p?null:0;t=true;l=-l}}e=v+g;var
m=b.from;if(m<a.viewport.from)return a.viewport.from==0?0:p?null:q4(a,h,b,d,e);if(m>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:p?null:q4(a,h,b,d,e);var
i=a.dom.ownerDocument,y=a.root.elementFromPoint?a.root:i,c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null;if(!c){d=Math.max(h.left+1,Math.min(h.right-1,d));c=y.elementFromPoint(d,e);if(c&&!a.contentDOM.contains(c))c=null}var
f,j=-1;if(c&&((k=a.docView.nearest(c))===null||k===void
0?void
0:k.isEditable)!=false)if(i.caretPositionFromPoint){var
n=i.caretPositionFromPoint(d,e);if(n){f=n.offsetNode;j=n.offset}}else
if(i.caretRangeFromPoint){var
q=i.caretRangeFromPoint(d,e);if(q){f=q.startContainer;j=q.startOffset;if(o.safari&&Aa(f,j,d))f=void
0}}if(!f||!a.docView.dom.contains(f)){var
x=aU.find(a.docView,m);if(!x)return g>b.top+b.height/2?b.to:b.from;var
r=hw(x.dom,d,e);f=r.node;j=r.offset}return a.docView.posFromDOM(f,j)}function
q4(a,e,b,g,h){var
c=Math.round((g-e.left)*a.defaultCharacterWidth);if(a.lineWrapping&&b.height>a.defaultLineHeight*1.5){var
f=Math.floor((h-b.top)/a.defaultLineHeight);c+=f*a.viewState.heightOracle.lineLength}var
d=a.state.sliceDoc(b.from,b.to);return b.from+bO(d,c,a.state.tabSize)}function
Aa(b,d,e){var
c;if(b.nodeType!=3||d!=(c=b.nodeValue.length))return false;for(var
a=b.nextSibling;a;a=a.nextSibling)if(a.nodeType!=1||a.nodeName!="BR")return false;return du(b,c-1,c).getBoundingClientRect().left>e}function
AR(a,b,c,k){var
f=a.state.doc.lineAt(b.head),e=!k||!a.lineWrapping?null:a.coordsAtPos(b.assoc<0&&b.head>f.from?b.head-1:b.head);if(e){var
h=a.dom.getBoundingClientRect(),i=a.posAtCoords({x:c==(a.textDirection==aB.LTR)?h.right-1:h.left+1,y:(e.top+e.bottom)/2});if(i!=null)return d.cursor(i,c?-1:1)}var
g=aU.find(a.docView,b.head),j=g?c?g.posAtEnd:g.posAtStart:c?f.to:f.from;return d.cursor(j,c?-1:1)}function
qw(b,k,e,i){var
a=b.state.doc.lineAt(k.head),j=b.bidiSpans(a);for(var
c=k,h=null;;){var
f=A0(a,j,b.textDirection,c,e),g=qE;if(!f){if(a.number==(e?b.state.doc.lines:1))return c;g="\n";a=b.state.doc.line(a.number+(e?1:-1));j=b.bidiSpans(a);f=d.cursor(e?a.from:a.to)}if(!h){if(!i)return f;h=i(g)}else
if(!h(g))return c;c=f}}function
wO(e,b,d){var
c=e.state.charCategorizer(b),a=c(d);return function(d){var
b=c(d);if(a==ak.Space)a=b;return a==b}}function
AV(a,g,p,j){var
b=g.head,f=p?1:-1;if(b==(p?a.state.doc.length:0))return d.cursor(b,g.assoc);var
c=g.goalColumn,m,e=a.contentDOM.getBoundingClientRect(),h=a.coordsAtPos(b),n=a.documentTop;if(h){if(c==null)c=h.left-e.left;m=f<0?h.top:h.bottom}else{var
k=a.viewState.lineBlockAt(b-n);if(c==null)c=Math.min(e.right-e.left,a.defaultCharacterWidth*(b-k.from));m=(f<0?k.top:k.bottom)+n}var
r=e.left+c,q=j!==null&&j!==void
0?j:a.defaultLineHeight>>1;for(var
o=0;;o+=10){var
i=m+(q+o)*f,l=qZ(a,{x:r,y:i},false,f);if(i<e.top||i>e.bottom||(f<0?l<b:l>b))return d.cursor(l,g.assoc,void
0,c)}}function
iI(j,h,b){var
g=j.pluginField(aW.atomicRanges);for(;;){var
f=false,c=a(g),e;try{for(c.s();!(e=c.n()).done;){var
i=e.value;i.between(b.from-1,b.from+1,function(a,c,e){if(b.from>a&&b.from<c){b=h.from>b.from?d.cursor(a,1):d.cursor(c,-1);f=true}})}}catch(a){c.e(a)}finally{c.f()}if(!f)return b}}var
uo=function(){function
e(a){var
d=this;b(this,e);this.lastKeyCode=0;this.lastKeyTime=0;this.pendingIOSKey=void
0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var
c=function(c){var
e=af[c];a.contentDOM.addEventListener(c,function(b){if(c=="keydown"&&d.keydown(a,b))return;if(!n8(a,b)||d.ignoreDuringComposition(b))return;if(d.mustFlushObserver(b))a.observer.forceFlush();if(d.runCustomHandlers(c,a,b))b.preventDefault();else
e(a,b)});d.registeredEvents.push(c)};for(var
f
in
af)c(f);this.notifiedFocused=a.hasFocus;this.ensureHandlers(a);if(o.safari)a.contentDOM.addEventListener("input",function(){return null})}c(e,[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var
d=this,g=this.customHandlers=c.pluginField(nH),b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,f=function(a){if(d.registeredEvents.indexOf(a)<0&&a!="scroll"){d.registeredEvents.push(a);c.contentDOM.addEventListener(a,function(b){if(!n8(c,b))return;if(d.runCustomHandlers(a,c,b))b.preventDefault()})}};for(var
i
in
h.handlers)f(i)}}catch(a){b.e(a)}finally{b.f()}}},{key:"runCustomHandlers",value:function(h,g,d){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value,e=f.handlers[h];if(e)try{if(e.call(f.plugin,d,g)||d.defaultPrevented)return true}catch(a){bV(g.state,a)}}}catch(a){b.e(a)}finally{b.f()}return false}},{key:"runScrollHandlers",value:function(f,g){var
b=a(this.customHandlers),c;try{for(b.s();!(c=b.n()).done;){var
e=c.value,d=e.handlers.scroll;if(d)try{d.call(e.plugin,g,f)}catch(a){bV(f.state,a)}}}catch(a){b.e(a)}finally{b.f()}}},{key:"keydown",value:function(b,a){var
d=this;this.lastKeyCode=a.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(b,a))return true;if(o.android&&o.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8)){b.observer.delayAndroidKey(a.key,a.keyCode);return true}var
c;if(o.ios&&(c=kt.find(function(b){return b.keyCode==a.keyCode}))&&!(a.ctrlKey||a.altKey||a.metaKey)&&!a.synthetic){this.pendingIOSKey=c;setTimeout(function(){return d.flushIOSKey(b)},250);return true}return false}},{key:"flushIOSKey",value:function(b){var
a=this.pendingIOSKey;if(!a)return false;this.pendingIOSKey=void
0;return cZ(b.contentDOM,a.key,a.keyCode)}},{key:"ignoreDuringComposition",value:function(a){if(!/^key/.test(a.type))return false;if(this.composing>0)return true;if(o.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false}},{key:"screenKeyEvent",value:function(c,a){var
b=a.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(a.keyCode==27)this.lastEscPress=Date.now();else
if(qn.indexOf(a.keyCode)<0)this.lastEscPress=0;return b}},{key:"mustFlushObserver",value:function(a){return a.type=="keydown"&&a.keyCode!=229||a.type=="compositionend"&&!o.ios}},{key:"startMouseSelection",value:function(a){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=a}},{key:"update",value:function(a){if(this.mouseSelection)this.mouseSelection.update(a);if(a.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){if(this.mouseSelection)this.mouseSelection.destroy()}}]);return e}(),kt=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qn=[16,17,18,20,91,92,224,225],uZ=function(){function
d(c,a,g,f){b(this,d);this.view=c;this.style=g;this.mustSelect=f;this.lastEvent=a;var
e=c.contentDOM.ownerDocument;e.addEventListener("mousemove",this.move=this.move.bind(this));e.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=a.shiftKey;this.multiple=c.state.facet(u.allowMultipleSelections)&&v8(c,a);this.dragMove=x5(c,a);this.dragging=z4(c,a)&&hL(a)==1?null:false;if(this.dragging===false){a.preventDefault();this.select(a)}}c(d,[{key:"move",value:function(a){if(a.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=a)}},{key:"up",value:function(a){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var
a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=null}},{key:"select",value:function(b){var
a=this.style.get(b,this.extend,this.multiple);if(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:true});this.mustSelect=false}},{key:"update",value:function(a){var
b=this;if(a.docChanged&&this.dragging)this.dragging=this.dragging.map(a.changes);if(this.style.update(a))setTimeout(function(){return b.select(b.lastEvent)},20)}}]);return d}();function
v8(c,a){var
b=c.state.facet(mt);return b.length?b[0](a):o.mac?a.metaKey:a.ctrlKey}function
x5(c,a){var
b=c.state.facet(nR);return b.length?b[0](a):o.mac?!a.altKey:!a.ctrlKey}function
z4(f,a){var
g=f.state.selection.main;if(g.empty)return false;var
e=eH(f.root);if(e.rangeCount==0)return true;var
d=e.getRangeAt(0).getClientRects();for(var
c=0;c<d.length;c++){var
b=d[c];if(b.left<=a.clientX&&b.right>=a.clientX&&b.top<=a.clientY&&b.bottom>=a.clientY)return true}return false}function
n8(d,b){if(!b.bubbles)return true;if(b.defaultPrevented)return false;for(var
a=b.target,c;a!=d.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(c=$.get(a))&&c.ignoreEvent(b))return false;return true}var
af=Object.create(null),mb=o.ie&&o.ie_version<15||o.ios&&o.webkit_version<604;function
wY(b){var
c=b.dom.parentNode;if(!c)return;var
a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){b.focus();a.remove();nC(b,a.value)},50)}function
nC(e,i){var
a=e.state,c,h=1,b=a.toText(i),g=b.lines==a.selection.ranges.length,f=ib!=null&&a.selection.ranges.every(function(a){return a.empty})&&ib==b.toString();if(f){var
j=-1;c=a.changeByRange(function(e){var
c=a.doc.lineAt(e.from);if(c.from==j)return{range:e};j=c.from;var
f=a.toText((g?b.line(h++).text:i)+a.lineBreak);return{changes:{from:c.from,insert:f},range:d.cursor(e.from+f.length)}})}else
if(g)c=a.changeByRange(function(a){var
c=b.line(h++);return{changes:{from:a.from,to:a.to,insert:c.text},range:d.cursor(a.from+c.length)}});else
c=a.replaceSelection(b);e.dispatch(c,{userEvent:"input.paste",scrollIntoView:true})}af.keydown=function(a,b){a.inputState.setSelectionOrigin("select")};var
pW=0;af.touchstart=function(a,b){pW=Date.now();a.inputState.setSelectionOrigin("select.pointer")};af.touchmove=function(a){a.inputState.setSelectionOrigin("select.pointer")};af.mousedown=function(b,d){b.observer.flush();if(pW>Date.now()-2e3&&hL(d)==1)return;var
c=null,e=a(b.state.facet(qs)),f;try{for(e.s();!(f=e.n()).done;){var
h=f.value;c=h(b,d);if(c)break}}catch(a){e.e(a)}finally{e.f()}if(!c&&d.button==0)c=wv(b,d);if(c){var
g=b.root.activeElement!=b.contentDOM;if(g)b.observer.ignore(function(){return ot(b.contentDOM)});b.inputState.startMouseSelection(new
uZ(b,d,c,g))}};function
rf(e,b,g,h){if(h==1)return d.cursor(b,g);else
if(h==2)return zb(e.state,b,g);else{var
a=aU.find(e.docView,b),f=e.state.doc.lineAt(a?a.posAtEnd:b),i=a?a.posAtStart:f.from,c=a?a.posAtEnd:f.to;if(c<e.state.doc.length&&c==f.to)c++;return d.range(i,c)}}var
ph=function(b,a){return b>=a.top&&b<=a.bottom},pc=function(b,c,a){return ph(c,a)&&b>=a.left&&b<=a.right};function
yD(h,f,g,d){var
a=aU.find(h.docView,f);if(!a)return 1;var
c=f-a.posAtStart;if(c==0)return 1;if(c==a.length)return-1;var
b=a.coordsAt(c,-1);if(b&&pc(g,d,b))return-1;var
e=a.coordsAt(c,1);if(e&&pc(g,d,e))return 1;return b&&ph(d,b)?-1:1}function
q_(c,a){var
b=c.posAtCoords({x:a.clientX,y:a.clientY},false);return{pos:b,bias:yD(c,b,a.clientX,a.clientY)}}var
s7=o.ie&&o.ie_version<=11,pH=null,pM=0,pR=0;function
hL(a){if(!s7)return a.detail;var
b=pH,c=pR;pH=a;pR=Date.now();return pM=!b||c>Date.now()-400&&Math.abs(b.clientX-a.clientX)<2&&Math.abs(b.clientY-a.clientY)<2?(pM+1)%3:1}function
wv(g,a){var
b=q_(g,a),n=hL(a),e=g.state.selection,m=b,f=a;return{update:function(a){if(a.docChanged){if(b)b.pos=a.changes.mapPos(b.pos);e=e.map(a.changes);f=null}},get:function(h,j,o){var
c;if(f&&h.clientX==f.clientX&&h.clientY==f.clientY)c=m;else{c=m=q_(g,h);f=h}if(!c||!b)return e;var
a=rf(g,c.pos,c.bias,n);if(b.pos!=c.pos&&!j){var
k=rf(g,b.pos,b.bias,n),i=Math.min(k.from,a.from),l=Math.max(k.to,a.to);a=i<a.from?d.range(i,l):d.range(l,i)}if(j)return e.replaceRange(e.main.extend(a.from,a.to));else
if(o)return e.addRange(a);else
return d.create([a])}}}af.dragstart=function(c,a){var
b=c.state.selection.main,d=c.inputState.mouseSelection;if(d)d.dragging=b;if(a.dataTransfer){a.dataTransfer.setData("Text",c.state.sliceDoc(b.from,b.to));a.dataTransfer.effectAllowed="copyMove"}};function
nW(b,f,h,i){if(!h)return;var
e=b.posAtCoords({x:f.clientX,y:f.clientY},false);f.preventDefault();var
a=b.inputState.mouseSelection,d=i&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,g={from:e,insert:h},c=b.state.changes(d?[d,g]:g);b.focus();b.dispatch({changes:c,selection:{anchor:c.mapPos(e,-1),head:c.mapPos(e,1)},userEvent:d?"move.drop":"input.drop"})}af.drop=function(c,a){if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();var
b=a.dataTransfer.files;if(b&&b.length)(function(){a.preventDefault();var
f=Array(b.length),h=0,e=function(){if(++h==b.length)nW(c,a,f.filter(function(a){return a!=null}).join(c.state.lineBreak),false)},g=function(c){var
a=new
FileReader();a.onerror=e;a.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(a.result))f[c]=a.result;e()};a.readAsText(b[c])};for(var
d=0;d<b.length;d++)g(d)}());else
nW(c,a,a.dataTransfer.getData("Text"),true)};af.paste=function(a,b){if(a.state.readOnly)return b.preventDefault();a.observer.flush();var
c=mb?null:b.clipboardData;if(c){nC(a,c.getData("text/plain"));b.preventDefault()}else
wY(a)};function
wT(d,c){var
b=d.dom.parentNode;if(!b)return;var
a=b.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.value=c;a.focus();a.selectionEnd=c.length;a.selectionStart=0;setTimeout(function(){a.remove();d.focus()},50)}function
xr(b){var
f=[],h=[],k=false,d=a(b.selection.ranges),i;try{for(d.s();!(i=d.n()).done;){var
g=i.value;if(!g.empty){f.push(b.sliceDoc(g.from,g.to));h.push(g)}}}catch(a){d.e(a)}finally{d.f()}if(!f.length){var
l=-1,e=a(b.selection.ranges),j;try{for(e.s();!(j=e.n()).done;){var
m=j.value.from,c=b.doc.lineAt(m);if(c.number>l){f.push(c.text);h.push({from:c.from,to:Math.min(b.doc.length,c.to+1)})}l=c.number}}catch(a){e.e(a)}finally{e.f()}k=true}return{text:f.join(b.lineBreak),ranges:h,linewise:k}}var
ib=null;af.copy=af.cut=function(b,e){var
c=xr(b.state),a=c.text,g=c.ranges,f=c.linewise;if(!a&&!f)return;ib=f?a:null;var
d=mb?null:e.clipboardData;if(d){e.preventDefault();d.clearData();d.setData("text/plain",a)}else
wT(b,a);if(e.type=="cut"&&!b.state.readOnly)b.dispatch({changes:g,scrollIntoView:true,userEvent:"delete.cut"})};af.focus=af.blur=function(a){setTimeout(function(){if(a.hasFocus!=a.inputState.notifiedFocused)a.update([])},10)};af.beforeprint=function(a){a.viewState.printing=true;a.requestMeasure();setTimeout(function(){a.viewState.printing=false;a.requestMeasure()},2e3)};function
oz(a,b){if(a.docView.compositionDeco.size){a.inputState.rapidCompositionStart=b;try{a.update([])}finally{a.inputState.rapidCompositionStart=false}}}af.compositionstart=af.compositionupdate=function(a){if(a.inputState.compositionFirstChange==null)a.inputState.compositionFirstChange=true;if(a.inputState.composing<0){a.inputState.composing=0;if(a.docView.compositionDeco.size){a.observer.flush();oz(a,true)}}};af.compositionend=function(a){a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionFirstChange=null;setTimeout(function(){if(a.inputState.composing<0)oz(a,false)},50)};af.contextmenu=function(a){a.inputState.lastContextMenu=Date.now()};af.beforeinput=function(b,d){var
c,a;if(o.chrome&&o.android&&(a=kt.find(function(a){return a.inputType==d.inputType}))){b.observer.delayAndroidKey(a.key,a.keyCode);if(a.key=="Backspace"||a.key=="Delete"){var
e=((c=window.visualViewport)===null||c===void
0?void
0:c.height)||0;setTimeout(function(){var
a;if((((a=window.visualViewport)===null||a===void
0?void
0:a.height)||0)>e+10&&b.hasFocus){b.contentDOM.blur();b.focus()}},100)}}};var
sV=["pre-wrap","normal","pre-line","break-spaces"],ug=function(){function
a(){b(this,a);this.doc=p.empty;this.lineWrapping=false;this.direction=aB.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}c(a,[{key:"heightForGap",value:function(b,c){var
a=this.doc.lineAt(c).number-this.doc.lineAt(b).number+1;if(this.lineWrapping)a+=Math.ceil((c-b-a*this.lineLength*0.5)/this.lineLength);return this.lineHeight*a}},{key:"heightForLine",value:function(a){if(!this.lineWrapping)return this.lineHeight;var
b=1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5)));return b*this.lineHeight}},{key:"setDoc",value:function(a){this.doc=a;return this}},{key:"mustRefreshForStyle",value:function(b,a){return sV.indexOf(b)>-1!=this.lineWrapping||this.direction!=a}},{key:"mustRefreshForHeights",value:function(c){var
d=false;for(var
a=0;a<c.length;a++){var
b=c[a];if(b<0)a++;else
if(!this.heightSamples[Math.floor(b*10)]){d=true;this.heightSamples[Math.floor(b*10)]=true}}return d}},{key:"refresh",value:function(j,c,f,h,i,e){var
g=sV.indexOf(j)>-1,b=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=g||this.direction!=c;this.lineWrapping=g;this.direction=c;this.lineHeight=f;this.charWidth=h;this.lineLength=i;if(b){this.heightSamples={};for(var
a=0;a<e.length;a++){var
d=e[a];if(d<0)a++;else
this.heightSamples[Math.floor(d*10)]=true}}return b}}]);return a}(),uT=function(){function
a(c,d){b(this,a);this.from=c;this.heights=d;this.index=0}c(a,[{key:"more",get:function(){return this.index<this.heights.length}}]);return a}(),b6=function(){function
d(a,e,f,c,g){b(this,d);this.from=a;this.length=e;this.top=f;this.height=c;this.type=g}c(d,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(a){var
b=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new
d(this.from,this.length+a.length,this.top,this.height+a.height,b)}},{key:"moveY",value:function(a){return!a?this:new
d(this.from,this.length,this.top+a,this.height,Array.isArray(this.type)?this.type.map(function(b){return b.moveY(a)}):this.type)}}]);return d}(),G=function(a){a[a["ByPos"]=0]="ByPos";a[a["ByHeight"]=1]="ByHeight";a[a["ByPosNoHeight"]=2]="ByPosNoHeight";return a}(G||(G={})),dJ=1e-3,a9=function(){function
f(d,c){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;b(this,f);this.length=d;this.height=c;this.flags=a}c(f,[{key:"outdated",get:function(){return(this.flags&2)>0},set:function(a){this.flags=(a?2:0)|this.flags&~2}},{key:"setHeight",value:function(b,a){if(this.height!=a){if(Math.abs(this.height-a)>dJ)b.heightChanged=true;this.height=a}}},{key:"replace",value:function(b,c,a){return f.of(a)}},{key:"decomposeLeft",value:function(b,a){a.push(this)}},{key:"decomposeRight",value:function(b,a){a.push(this)}},{key:"applyChanges",value:function(m,i,k,e){var
d=this;for(var
a=e.length-1;a>=0;a--){var
g=e[a],b=g.fromA,f=g.toA,h=g.fromB,l=g.toB,c=d.lineAt(b,G.ByPosNoHeight,i,0,0),j=c.to>=f?c:d.lineAt(f,G.ByPosNoHeight,i,0,0);l+=j.to-f;f=j.to;while(a>0&&c.from<=e[a-1].toA){b=e[a-1].fromA;h=e[a-1].fromB;a--;if(b<c.from)c=d.lineAt(b,G.ByPosNoHeight,i,0,0)}h+=c.from-b;b=c.from;var
n=u5.build(k,m,h,l);d=d.replace(b,f,n)}return d.updateHeight(k,0)}}],[{key:"empty",value:function(){return new
bc(0,0)}},{key:"of",value:function(a){if(a.length==1)return a[0];var
b=0,c=a.length,h=0,g=0;for(;;)if(b==c)if(h>g*2){var
e=a[b-1];if(e["break"])a.splice(--b,1,e.left,null,e.right);else
a.splice(--b,1,e.left,e.right);c+=1+e["break"];h-=e.size}else
if(g>h*2){var
d=a[c];if(d["break"])a.splice(c,1,d.left,null,d.right);else
a.splice(c,1,d.left,d.right);c+=2+d["break"];g-=d.size}else
break;else
if(h<g){var
k=a[b++];if(k)h+=k.size}else{var
j=a[--c];if(j)g+=j.size}var
i=0;if(a[b-1]==null){i=1;b--}else
if(a[b]==null){i=1;c++}return new
ub(f.of(a.slice(0,b)),i,f.of(a.slice(c)))}}]);return f}();a9.prototype.size=1;var
j0=function(d){f(a,d);var
g=e(a);function
a(e,d,f){var
c;b(this,a);c=g.call(this,e,d);c.type=f;return c}c(a,[{key:"blockAt",value:function(d,c,b,a){return new
b6(a,this.length,b,this.height,this.type)}},{key:"lineAt",value:function(e,d,a,c,b){return this.blockAt(0,a,c,b)}},{key:"forEachLine",value:function(e,f,a,d,c,b){b(this.blockAt(0,a,d,c))}},{key:"updateHeight",value:function(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=b&&a.more)this.setHeight(c,a.heights[a.index++]);this.outdated=false;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return a}(a9),bc=function(a){f(d,a);var
g=e(d);function
d(e,c){var
a;b(this,d);a=g.call(this,e,c,W.Text);a.collapsed=0;a.widgetHeight=0;return a}c(d,[{key:"replace",value:function(c,e,b){var
a=b[0];if(b.length==1&&(a
instanceof
d||a
instanceof
ca&&a.flags&4)&&Math.abs(this.length-a.length)<10){if(a
instanceof
ca)a=new
d(a.length,this.height);else
a.height=this.height;if(!this.outdated)a.outdated=false;return a}else
return a9.of(b)}},{key:"updateHeight",value:function(b){var
d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined;if(a&&a.from<=d&&a.more)this.setHeight(b,a.heights[a.index++]);else
if(c||this.outdated)this.setHeight(b,Math.max(this.widgetHeight,b.heightForLine(this.length-this.collapsed)));this.outdated=false;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return d}(j0),ca=function(d){f(a,d);var
g=e(a);function
a(c){b(this,a);return g.call(this,c,0)}c(a,[{key:"lines",value:function(a,d){var
b=a.lineAt(d).number,c=a.lineAt(d+this.length).number;return{firstLine:b,lastLine:c,lineHeight:this.height/(c-b+1)}}},{key:"blockAt",value:function(i,d,g,l){var
a=this.lines(d,l),e=a.firstLine,j=a.lastLine,b=a.lineHeight,f=Math.max(0,Math.min(j-e,Math.floor((i-g)/b))),c=d.line(e+f),h=c.from,k=c.length;return new
b6(h,k,g+b*f,b,W.Text)}},{key:"lineAt",value:function(c,j,a,i,h){if(j==G.ByHeight)return this.blockAt(c,a,i,h);if(j==G.ByPosNoHeight){var
d=a.lineAt(c),f=d.from,o=d.to;return new
b6(f,o-f,0,0,W.Text)}var
e=this.lines(a,h),k=e.firstLine,g=e.lineHeight,b=a.lineAt(c),l=b.from,m=b.length,n=b.number;return new
b6(l,m,i+g*(n-k),g,W.Text)}},{key:"forEachLine",value:function(h,l,g,e,d,j){var
f=this.lines(g,d),k=f.firstLine,c=f.lineHeight;for(var
b=Math.max(h,d),i=Math.min(d+this.length,l);b<=i;){var
a=g.lineAt(b);if(b==h)e+=c*(a.number-k);j(new
b6(a.from,a.length,e,c,W.Text));e+=c;b=a.to+1}}},{key:"replace",value:function(d,g,b){var
c=this.length-g;if(c>0){var
f=b[b.length-1];if(f
instanceof
a)b[b.length-1]=new
a(f.length+c);else
b.push(null,new
a(c-1))}if(d>0){var
e=b[0];if(e
instanceof
a)b[0]=new
a(d+e.length);else
b.unshift(new
a(d-1),null)}return a9.of(b)}},{key:"decomposeLeft",value:function(c,b){b.push(new
a(c-1),null)}},{key:"decomposeRight",value:function(b,c){c.push(null,new
a(this.length-b-1))}},{key:"updateHeight",value:function(d){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,m=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,b=arguments.length>3?arguments[3]:undefined,h=c+this.length;if(b&&b.from<=c+this.length&&b.more){var
e=[],f=Math.max(c,b.from),g=-1,n=d.heightChanged;if(b.from>c)e.push(new
a(b.from-c-1).updateHeight(d,c));while(f<=h&&b.more){var
j=d.doc.lineAt(f).length;if(e.length)e.push(null);var
i=b.heights[b.index++];if(g==-1)g=i;else
if(Math.abs(i-g)>=dJ)g=-2;var
k=new
bc(j,i);k.outdated=false;e.push(k);f+=j+1}if(f<=h)e.push(null,new
a(h-f).updateHeight(d,f));var
l=a9.of(e);d.heightChanged=n||g<0||Math.abs(l.height-this.height)>=dJ||Math.abs(g-this.lines(d.doc,c).lineHeight)>=dJ;return l}else
if(m||this.outdated){this.setHeight(d,d.heightForGap(c,c+this.length));this.outdated=false}return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return a}(a9),ub=function(d){f(g,d);var
h=e(g);function
g(c,e,d){var
a;b(this,g);a=h.call(this,c.length+e+d.length,c.height+d.height,e|(c.outdated||d.outdated?2:0));a.left=c;a.right=d;a.size=c.size+d.size;return a}c(g,[{key:"break",get:function(){return this.flags&1}},{key:"blockAt",value:function(a,b,e,d){var
c=e+this.left.height;return a<c?this.left.blockAt(a,b,e,d):this.right.blockAt(a,b,c,d+this.left.length+this["break"])}},{key:"lineAt",value:function(e,d,c,i,g){var
h=i+this.left.height,a=g+this.left.length+this["break"],f=d==G.ByHeight?e<h:e<a,b=f?this.left.lineAt(e,d,c,i,g):this.right.lineAt(e,d,c,h,a);if(this["break"]||(f?b.to<a:b.from>a))return b;var
j=d==G.ByPosNoHeight?G.ByPosNoHeight:G.ByPos;return f?b.join(this.right.lineAt(a,j,c,h,a)):this.left.lineAt(a,j,c,i,g).join(b)}},{key:"forEachLine",value:function(b,c,d,h,g,e){var
i=h+this.left.height,f=g+this.left.length+this["break"];if(this["break"]){if(b<f)this.left.forEachLine(b,c,d,h,g,e);if(c>=f)this.right.forEachLine(b,c,d,i,f,e)}else{var
a=this.lineAt(f,G.ByPos,d,h,g);if(b<a.from)this.left.forEachLine(b,a.from-1,d,h,g,e);if(a.to>=b&&a.from<=c)e(a);if(c>a.to)this.right.forEachLine(a.to+1,c,d,i,f,e)}}},{key:"replace",value:function(c,d,f){var
g=this.left.length+this["break"];if(d<g)return this.balanced(this.left.replace(c,d,f),this.right);if(c>this.left.length)return this.balanced(this.left,this.right.replace(c-g,d-g,f));var
b=[];if(c>0)this.decomposeLeft(c,b);var
i=b.length,e=a(f),h;try{for(e.s();!(h=e.n()).done;){var
j=h.value;b.push(j)}}catch(a){e.e(a)}finally{e.f()}if(c>0)qj(b,i-1);if(d<this.length){var
k=b.length;this.decomposeRight(d,b);qj(b,k)}return a9.of(b)}},{key:"decomposeLeft",value:function(b,c){var
a=this.left.length;if(b<=a)return this.left.decomposeLeft(b,c);c.push(this.left);if(this["break"]){a++;if(b>=a)c.push(null)}if(b>a)this.right.decomposeLeft(b-a,c)}},{key:"decomposeRight",value:function(a,b){var
d=this.left.length,c=d+this["break"];if(a>=c)return this.right.decomposeRight(a-c,b);if(a<d)this.left.decomposeRight(a,b);if(this["break"]&&a<c)b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return a9.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(f){var
e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false,a=arguments.length>3?arguments[3]:undefined,b=this.left,c=this.right,h=e+b.length+this["break"],g=null;if(a&&a.from<=e+b.length&&a.more)g=b=b.updateHeight(f,e,d,a);else
b.updateHeight(f,e,d);if(a&&a.from<=h+c.length&&a.more)g=c=c.updateHeight(f,h,d,a);else
c.updateHeight(f,h,d);if(g)return this.balanced(b,c);this.height=this.left.height+this.right.height;this.outdated=false;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}}]);return g}(a9);function
qj(b,a){var
d,c;if(b[a]==null&&(d=b[a-1])instanceof
ca&&(c=b[a+1])instanceof
ca)b.splice(a-1,3,new
ca(d.length+1+c.length))}var
BO=5,u5=function(){function
d(a,c){b(this,d);this.pos=a;this.oracle=c;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=a}c(d,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(d,b){if(this.lineStart>-1){var
a=Math.min(b,this.lineEnd),c=this.nodes[this.nodes.length-1];if(c
instanceof
bc)c.length+=a-this.pos;else
if(a>this.pos||!this.isCovered)this.nodes.push(new
bc(a-this.pos,-1));this.writtenTo=a;if(b>a){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=b}},{key:"point",value:function(c,d,a){if(c<d||a.heightRelevant){var
b=a.widget?a.widget.estimatedHeight:0;if(b<0)b=this.oracle.lineHeight;var
e=d-c;if(a.block)this.addBlock(new
j0(e,b,a.type));else
if(e||b>=BO)this.addLineDeco(b,e)}else
if(d>c)this.span(c,d);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}},{key:"enterLine",value:function(){if(this.lineStart>-1)return;var
b=this.oracle.doc.lineAt(this.pos),a=b.from,c=b.to;this.lineStart=a;this.lineEnd=c;if(this.writtenTo<a){if(this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,a-1));this.nodes.push(null)}if(this.pos>a)this.nodes.push(new
bc(this.pos-a,-1));this.writtenTo=this.pos}},{key:"blankContent",value:function(a,c){var
b=new
ca(c-a);if(this.oracle.doc.lineAt(a).to==c)b.flags|=4;return b}},{key:"ensureLine",value:function(){this.enterLine();var
a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a
instanceof
bc)return a;var
b=new
bc(0,-1);this.nodes.push(b);return b}},{key:"addBlock",value:function(a){this.enterLine();if(a.type==W.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos=this.pos+a.length;if(a.type!=W.WidgetBefore)this.covering=a}},{key:"addLineDeco",value:function(c,b){var
a=this.ensureLine();a.length+=b;a.collapsed+=b;a.widgetHeight=Math.max(a.widgetHeight,c);this.writtenTo=this.pos=this.pos+b}},{key:"finish",value:function(g){var
e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e
instanceof
bc)&&!this.isCovered)this.nodes.push(new
bc(0,-1));else
if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var
f=g,b=a(this.nodes),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c
instanceof
bc)c.updateHeight(this.oracle,f);f+=c?c.length:1}}catch(a){b.e(a)}finally{b.f()}return this.nodes}}],[{key:"build",value:function(e,c,a,f){var
b=new
d(a,e);k.spans(c,a,f,b,0);return b.finish(a)}}]);return d}();function
zu(b,c,d){var
a=new
tY();k.compare(b,c,d,a,0);return a.changes}var
tY=function(){function
a(){b(this,a);this.changes=[]}c(a,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,d,a,b){if(c<d||a&&a.heightRelevant||b&&b.heightRelevant)gz(c,d,this.changes,5)}}]);return a}();function
C5(h,k){var
c=h.getBoundingClientRect(),d=Math.max(0,c.left),i=Math.min(innerWidth,c.right),f=Math.max(0,c.top),g=Math.min(innerHeight,c.bottom),l=h.ownerDocument.body;for(var
b=h.parentNode;b&&b!=l;)if(b.nodeType==1){var
a=b,j=window.getComputedStyle(a);if((a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)&&j.overflow!="visible"){var
e=a.getBoundingClientRect();d=Math.max(d,e.left);i=Math.min(i,e.right);f=Math.max(f,e.top);g=Math.min(g,e.bottom)}b=j.position=="absolute"||j.position=="fixed"?a.offsetParent:a.parentNode}else
if(b.nodeType==11)b=b.host;else
break;return{left:d-c.left,right:Math.max(d,i)-c.left,top:f-(c.top+k),bottom:Math.max(f,g)-(c.top+k)}}var
fQ=function(){function
a(c,e,d){b(this,a);this.from=c;this.to=e;this.size=d}c(a,[{key:"draw",value:function(a){return A.replace({widget:new
uu(this.size,a)}).range(this.from,this.to)}}],[{key:"same",value:function(b,e){if(b.length!=e.length)return false;for(var
a=0;a<b.length;a++){var
c=b[a],d=e[a];if(c.from!=d.from||c.to!=d.to||c.size!=d.size)return false}return true}}]);return a}(),uu=function(d){f(a,d);var
g=e(a);function
a(d,e){var
c;b(this,a);c=g.call(this);c.size=d;c.vertical=e;return c}c(a,[{key:"eq",value:function(a){return a.size==this.size&&a.vertical==this.vertical}},{key:"toDOM",value:function(){var
a=document.createElement("div");if(this.vertical)a.style.height=this.size+"px";else{a.style.width=this.size+"px";a.style.height="2px";a.style.display="inline-block"}return a}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(eb),kN=function(){function
d(a){b(this,d);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentDOMWidth=0;this.contentDOMHeight=0;this.editorHeight=0;this.editorWidth=0;this.heightOracle=new
ug();this.scaler=j5;this.scrollTarget=null;this.printing=false;this.mustMeasureContent=true;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=a9.empty().applyChanges(a.facet(bN),p.empty,this.heightOracle.setDoc(a.doc),[new
cy(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateViewportLines();this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=A.set(this.lineGaps.map(function(a){return a.draw(false)}));this.computeVisibleRanges()}c(d,[{key:"updateForViewport",value:function(){var
h=this,b=[this.viewport],d=this.state.selection.main,c=function(e){var
a=e?d.head:d.anchor;if(!b.some(function(b){var
c=b.from,d=b.to;return a>=c&&a<=d})){var
c=h.lineBlockAt(a),f=c.from,g=c.to;b.push(new
d_(f,g))}};for(var
a=0;a<=1;a++)c(a);this.viewports=b.sort(function(a,b){return a.from-b.from});this.scaler=this.heightMap.height<=7e6?j5:new
tf(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var
a=this;this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(b){a.viewportLines.push(a.scaler.scale==1?b:dc(b,a.scaler))})}},{key:"update",value:function(a){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,g=this.state;this.state=a.state;var
e=this.state.facet(bN),f=a.changedRanges,d=cy.extendWithRanges(f,zu(a.startState.facet(bN),e,a?a.changes:X.empty(this.state.doc.length))),h=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,g.doc,this.heightOracle.setDoc(this.state.doc),d);if(this.heightMap.height!=h)a.flags|=2;var
b=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(c&&(c.range.head<b.from||c.range.head>b.to)||!this.viewportIsAppropriate(b))b=this.getViewport(0,c);var
i=!a.changes.empty||a.flags&2||b.from!=this.viewport.from||b.to!=this.viewport.to;this.viewport=b;this.updateForViewport();if(i)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();if(c)this.scrollTarget=c;if(!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc)this.mustEnforceCursorAssoc=true}},{key:"measure",value:function(a){var
e=a.contentDOM,j=window.getComputedStyle(e),b=this.heightOracle,u=j.whiteSpace,q=j.direction=="rtl"?aB.RTL:aB.LTR,c=this.heightOracle.mustRefreshForStyle(u,q),m=c||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,d=0,f=0;if(m){this.mustMeasureContent=false;this.contentDOMHeight=e.clientHeight;var
s=parseInt(j.paddingTop)||0,r=parseInt(j.paddingBottom)||0;if(this.paddingTop!=s||this.paddingBottom!=r){d|=8;this.paddingTop=s;this.paddingBottom=r}}var
n=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:C5(e,this.paddingTop),i=n.top-this.pixelViewport.top,h=n.bottom-this.pixelViewport.bottom;this.pixelViewport=n;var
k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView){this.inView=k;if(k)m=true}if(!this.inView)return 0;var
g=e.clientWidth;if(this.contentDOMWidth!=g||this.editorHeight!=a.scrollDOM.clientHeight||this.editorWidth!=a.scrollDOM.clientWidth){this.contentDOMWidth=g;this.editorHeight=a.scrollDOM.clientHeight;this.editorWidth=a.scrollDOM.clientWidth;d|=8}if(m){var
l=a.docView.measureVisibleLineHeights();if(b.mustRefreshForHeights(l))c=true;if(c||b.lineWrapping&&Math.abs(g-this.contentDOMWidth)>b.charWidth){var
o=a.docView.measureTextSize(),v=o.lineHeight,p=o.charWidth;c=b.refresh(u,q,v,p,g/p,l);if(c){a.docView.minWidth=0;d|=8}}if(i>0&&h>0)f=Math.max(i,h);else
if(i<0&&h<0)f=Math.min(i,h);b.heightChanged=false;this.heightMap=this.heightMap.updateHeight(b,0,c,new
uT(this.viewport.from,l));if(b.heightChanged)d|=2}var
t=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(t)this.viewport=this.getViewport(f,this.scrollTarget);this.updateForViewport();if(d&2||t)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps));d|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;a.docView.enforceCursorAssoc()}return d}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(j,c){var
i=0.5-Math.max(-0.5,Math.min(0.5,j/1e3/2)),b=this.heightMap,a=this.state.doc,l=this.visibleTop,k=this.visibleBottom,e=new
d_(b.lineAt(l-i*1e3,G.ByHeight,a,0,0).from,b.lineAt(k+(1-i)*1e3,G.ByHeight,a,0,0).to);if(c){var
g=c.range.head,h=this.editorHeight;if(g<e.from||g>e.to){var
f=b.lineAt(g,G.ByPos,a,0,0),d;if(c.y=="center")d=(f.top+f.bottom)/2-h/2;else
if(c.y=="start"||c.y=="nearest"&&g<e.from)d=f.top;else
d=f.bottom-h;e=new
d_(b.lineAt(d-1e3/2,G.ByHeight,a,0,0).from,b.lineAt(d+h+1e3/2,G.ByHeight,a,0,0).to)}}return e}},{key:"mapViewport",value:function(b,a){var
c=a.mapPos(b.from,-1),d=a.mapPos(b.to,1);return new
d_(this.heightMap.lineAt(c,G.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,G.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var
d=a.from,e=a.to,b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!this.inView)return true;var
j=this.heightMap.lineAt(d,G.ByPos,this.state.doc,0,0),f=j.top,i=this.heightMap.lineAt(e,G.ByPos,this.state.doc,0,0),c=i.bottom,h=this.visibleTop,g=this.visibleBottom;return(d==0||f<=h-Math.max(10,Math.min(-b,250)))&&(e==this.state.doc.length||c>=g+Math.max(10,Math.min(b,250)))&&f>h-2*1e3&&c<g+2*1e3}},{key:"mapLineGaps",value:function(e,d){if(!e.length||d.empty)return e;var
g=[],c=a(e),f;try{for(c.s();!(f=c.n()).done;){var
b=f.value;if(!d.touchesRange(b.from,b.to))g.push(new
fQ(d.mapPos(b.from),d.mapPos(b.to),b.size))}}catch(a){c.e(a)}finally{c.f()}return g}},{key:"ensureLineGaps",value:function(p){var
b=this,i=[];if(this.heightOracle.direction!=aB.LTR)return i;var
c=a(this.viewportLines),n;try{var
d=function(){var
a=n.value;if(a.length<4e3)return"continue";var
d=Aq(a.from,a.to,b.state);if(d.total<4e3)return"continue";var
f=void
0,g=void
0;if(b.heightOracle.lineWrapping){var
k=2e3/b.heightOracle.lineLength*b.heightOracle.lineHeight;f=et(d,(b.visibleTop-a.top-k)/a.height);g=et(d,(b.visibleBottom-a.top+k)/a.height)}else{var
m=d.total*b.heightOracle.charWidth,l=2e3*b.heightOracle.charWidth;f=et(d,(b.pixelViewport.left-l)/m);g=et(d,(b.pixelViewport.right+l)/m)}var
e=[];if(f>a.from)e.push({from:a.from,to:f});if(g<a.to)e.push({from:g,to:a.to});var
c=b.state.selection.main;if(c.from>=a.from&&c.from<=a.to)nd(e,c.from-10,c.from+10);if(!c.empty&&c.to>=a.from&&c.to<=a.to)nd(e,c.to-10,c.to+10);var
o=function(){var
f=j[h],c=f.from,e=f.to;if(e-c>1e3)i.push(ym(p,function(b){return b.from>=a.from&&b.to<=a.to&&Math.abs(b.from-c)<1e3&&Math.abs(b.to-e)<1e3})||new
fQ(c,e,b.gapSize(a,c,e,d)))};for(var
h=0,j=e;h<j.length;h++)o()};for(c.s();!(n=c.n()).done;){var
e=d();if(e==="continue")continue}}catch(a){c.e(a)}finally{c.f()}return i}},{key:"gapSize",value:function(d,c,e,a){var
b=om(a,e)-om(a,c);return this.heightOracle.lineWrapping?d.height*b:a.total*this.heightOracle.charWidth*b}},{key:"updateLineGaps",value:function(a){var
b=this;if(!fQ.same(a,this.lineGaps)){this.lineGaps=a;this.lineGapDeco=A.set(a.map(function(a){return a.draw(b.heightOracle.lineWrapping)}))}}},{key:"computeVisibleRanges",value:function(){var
b=this.state.facet(bN);if(this.lineGaps.length)b=b.concat(this.lineGapDeco);var
a=[];k.spans(b,this.viewport.from,this.viewport.to,{span:function(b,c){a.push({from:b,to:c})},point:function(){}},20);var
c=a.length!=this.visibleRanges.length||this.visibleRanges.some(function(c,b){return c.from!=a[b].from||c.to!=a[b].to});this.visibleRanges=a;return c?4:0}},{key:"lineBlockAt",value:function(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(function(b){return b.from<=a&&b.to>=a})||dc(this.heightMap.lineAt(a,G.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(a){return dc(this.heightMap.lineAt(this.scaler.fromDOM(a),G.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(a){return dc(this.heightMap.blockAt(this.scaler.fromDOM(a),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]);return d}(),d_=c(function
a(c,d){b(this,a);this.from=c;this.to=d});function
Aq(e,b,f){var
c=[],a=e,d=0;k.spans(f.facet(bN),e,b,{span:function(){},point:function(b,e){if(b>a){c.push({from:a,to:b});d+=b-a}a=e}},20);if(a<b){c.push({from:a,to:b});d+=b-a}return{total:d,ranges:c}}function
et(f,c){var
j=f.total,a=f.ranges;if(c<=0)return a[0].from;if(c>=1)return a[a.length-1].to;var
b=Math.floor(j*c);for(var
d=0;;d++){var
e=a[d],g=e.from,i=e.to,h=i-g;if(b<=h)return g+b;b-=h}}function
om(h,g){var
c=0,b=a(h.ranges),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value,f=e.from,i=e.to;if(g<=i){c+=g-f;break}c+=i-f}}catch(a){b.e(a)}finally{b.f()}return c/h.total}function
nd(d,e,f){for(var
b=0;b<d.length;b++){var
a=d[b];if(a.from<f&&a.to>e){var
c=[];if(a.from<e)c.push({from:a.from,to:e});if(a.to>f)c.push({from:f,to:a.to});d.splice.apply(d,[b,1].concat(c));b+=c.length-1}}}function
ym(e,f){var
b=a(e),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(f(d))return d}}catch(a){b.e(a)}finally{b.f()}return void
0}var
j5={toDOM:function(a){return a},fromDOM:function(a){return a},scale:1},tf=function(){function
g(j,e,l){b(this,g);var
f=0,i=0,k=0;this.viewports=l.map(function(a){var
c=a.from,d=a.to,g=e.lineAt(c,G.ByPos,j,0,0).top,b=e.lineAt(d,G.ByPos,j,0,0).bottom;f+=b-g;return{from:c,to:d,top:g,bottom:b,domTop:0,domBottom:0}});this.scale=(7e6-f)/(e.height-f);var
d=a(this.viewports),h;try{for(d.s();!(h=d.n()).done;){var
c=h.value;c.domTop=k+(c.top-i)*this.scale;k=c.domBottom=c.domTop+(c.bottom-c.top);i=c.bottom}}catch(a){d.e(a)}finally{d.f()}}c(g,[{key:"toDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.top)return e+(b-d)*this.scale;if(b<=a.bottom)return a.domTop+(b-a.top);d=a.bottom;e=a.domBottom}}},{key:"fromDOM",value:function(b){for(var
c=0,d=0,e=0;;c++){var
a=c<this.viewports.length?this.viewports[c]:null;if(!a||b<a.domTop)return d+(b-e)/this.scale;if(b<=a.domBottom)return a.top+(b-a.domTop);d=a.bottom;e=a.domBottom}}}]);return g}();function
dc(a,b){if(b.scale==1)return a;var
c=b.toDOM(a.top),d=b.toDOM(a.bottom);return new
b6(a.from,a.length,c,d-c,Array.isArray(a.type)?a.type.map(function(a){return dc(a,b)}):a.type)}var
sj=h.define({combine:function(a){return a.join(" ")}}),he=h.define({combine:function(a){return a.indexOf(true)>-1}}),gM=y.newName(),l4=y.newName(),lZ=y.newName(),p1={"&light":"."+l4,"&dark":"."+lZ};function
gS(c,a,b){return new
y(a,{finish:function(a){return/&/.test(a)?a.replace(/&\w*/,function(a){if(a=="&")return c;if(!b||!b[a])throw new
RangeError("Unsupported selector: ".concat(a));return b[a]}):c+" "+a}})}var
wp=gS("."+gM,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},p1),By={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true},i6=o.ie&&o.ie_version<=11,tI=function(){function
e(d,f,g){var
c=this;b(this,e);this.view=d;this.onChange=f;this.onScrollChanged=g;this.active=false;this.selectionRange=new
tO();this.selectionChanged=false;this.delayedFlush=-1;this.resizeTimeout=-1;this.queue=[];this.delayedAndroidKey=null;this.scrollTargets=[];this.intersection=null;this.resize=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this.parentCheck=-1;this.dom=d.contentDOM;this.observer=new
MutationObserver(function(f){var
b=a(f),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;c.queue.push(g)}}catch(a){b.e(a)}finally{b.f()}if((o.ie&&o.ie_version<=11||o.ios&&d.composing)&&f.some(function(a){return a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length}))c.flushSoon();else
c.flush()});if(i6)this.onCharData=function(a){c.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue});c.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);if(typeof
ResizeObserver=="function"){this.resize=new
ResizeObserver(function(){if(c.view.docView.lastUpdate<Date.now()-75&&c.resizeTimeout<0)c.resizeTimeout=setTimeout(function(){c.resizeTimeout=-1;c.view.requestMeasure()},50)});this.resize.observe(d.scrollDOM)}this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof
IntersectionObserver=="function"){this.intersection=new
IntersectionObserver(function(a){if(c.parentCheck<0)c.parentCheck=setTimeout(c.listenForScroll.bind(c),1e3);if(a.length>0&&a[a.length-1].intersectionRatio>0!=c.intersecting){c.intersecting=!c.intersecting;if(c.intersecting!=c.view.inView)c.onScrollChanged(document.createEvent("Event"))}},{});this.intersection.observe(this.dom);this.gapIntersection=new
IntersectionObserver(function(a){if(a.length>0&&a[a.length-1].intersectionRatio>0)c.onScrollChanged(document.createEvent("Event"))},{})}this.listenForScroll();this.readSelectionRange();this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}c(e,[{key:"onScroll",value:function(a){if(this.intersecting)this.flush(false);this.onScrollChanged(a)}},{key:"updateGaps",value:function(c){if(this.gapIntersection&&(c.length!=this.gaps.length||this.gaps.some(function(a,b){return a!=c[b]}))){this.gapIntersection.disconnect();var
b=a(c),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;this.gapIntersection.observe(e)}}catch(a){b.e(a)}finally{b.f()}this.gaps=c}}},{key:"onSelectionChange",value:function(d){if(!this.readSelectionRange()||this.delayedAndroidKey)return;var
b=this.view,a=this.selectionRange;if(b.state.facet(c4)?b.root.activeElement!=this.dom:!hV(b.dom,a))return;var
c=a.anchorNode&&b.docView.nearest(a.anchorNode);if(c&&c.ignoreEvent(d))return;if((o.ie&&o.ie_version<=11||o.android&&o.chrome)&&!b.state.selection.main.empty&&a.focusNode&&eU(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))this.flushSoon();else
this.flush(false)}},{key:"readSelectionRange",value:function(){var
b=this.view.root,c=eH(b),a=o.safari&&b.nodeType==11&&xL()==this.view.contentDOM&&BX(this.view)||c;if(this.selectionRange.eq(a))return false;this.selectionRange.setRange(a);return this.selectionChanged=true}},{key:"setSelectionRange",value:function(a,b){this.selectionRange.set(a.node,a.offset,b.node,b.offset);this.selectionChanged=false}},{key:"listenForScroll",value:function(){this.parentCheck=-1;var
d=0,c=null;for(var
b=this.dom;b;)if(b.nodeType==1){if(!c&&d<this.scrollTargets.length&&this.scrollTargets[d]==b)d++;else
if(!c)c=this.scrollTargets.slice(0,d);if(c)c.push(b);b=b.assignedSlot||b.parentNode}else
if(b.nodeType==11)b=b.host;else
break;if(d<this.scrollTargets.length&&!c)c=this.scrollTargets.slice(0,d);if(c){var
e=a(this.scrollTargets),g;try{for(e.s();!(g=e.n()).done;){var
i=g.value;i.removeEventListener("scroll",this.onScroll)}}catch(a){e.e(a)}finally{e.f()}var
f=a(this.scrollTargets=c),h;try{for(f.s();!(h=f.n()).done;){var
j=h.value;j.addEventListener("scroll",this.onScroll)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{this.stop();return a()}finally{this.start();this.clear()}}},{key:"start",value:function(){if(this.active)return;this.observer.observe(this.dom,By);if(i6)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true}},{key:"stop",value:function(){if(!this.active)return;this.active=false;this.observer.disconnect();if(i6)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.selectionChanged=false}},{key:"delayAndroidKey",value:function(b,c){var
a=this;if(!this.delayedAndroidKey)requestAnimationFrame(function(){var
b=a.delayedAndroidKey;a.delayedAndroidKey=null;var
c=a.view.state;if(cZ(a.view.contentDOM,b.key,b.keyCode))a.processRecords();else
a.flush();if(a.view.state==c)a.view.update([])});if(!this.delayedAndroidKey||b=="Enter")this.delayedAndroidKey={key:b,keyCode:c}}},{key:"flushSoon",value:function(){var
a=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20)}},{key:"forceFlush",value:function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}}},{key:"processRecords",value:function(){var
g=this.queue,d=a(this.observer.takeRecords()),h;try{for(d.s();!(h=d.n()).done;){var
k=h.value;g.push(k)}}catch(a){d.e(a)}finally{d.f()}if(g.length)this.queue=[];var
c=-1,f=-1,j=false,e=a(g),i;try{for(e.s();!(i=e.n()).done;){var
l=i.value,b=this.readMutation(l);if(!b)continue;if(b.typeOver)j=true;if(c==-1){c=b.from;f=b.to}else{c=Math.min(b.from,c);f=Math.max(b.to,f)}}}catch(a){e.e(a)}finally{e.f()}return{from:c,to:f,typeOver:j}}},{key:"flush",value:function(){var
d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.delayedFlush>=0||this.delayedAndroidKey)return;if(d)this.readSelectionRange();var
a=this.processRecords(),b=a.from,f=a.to,g=a.typeOver,c=this.selectionChanged&&hV(this.dom,this.selectionRange);if(b<0&&!c)return;this.selectionChanged=false;var
e=this.view.state;this.onChange(b,f,g);if(this.view.state==e)this.view.update([])}},{key:"readMutation",value:function(b){var
a=this.view.docView.nearest(b.target);if(!a||a.ignoreMutation(b))return null;a.markDirty(b.type=="attributes");if(b.type=="attributes")a.dirty|=4;if(b.type=="childList"){var
d=oh(a,b.previousSibling||b.target.previousSibling,-1),c=oh(a,b.nextSibling||b.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:false}}else
if(b.type=="characterData")return{from:a.posAtStart,to:a.posAtEnd,typeOver:b.target.nodeValue==b.oldValue};else
return null}},{key:"destroy",value:function(){var
c,d,e;this.stop();(c=this.intersection)===null||c===void
0?void
0:c.disconnect();(d=this.gapIntersection)===null||d===void
0?void
0:d.disconnect();(e=this.resize)===null||e===void
0?void
0:e.disconnect();var
b=a(this.scrollTargets),f;try{for(b.s();!(f=b.n()).done;){var
g=f.value;g.removeEventListener("scroll",this.onScroll)}}catch(a){b.e(a)}finally{b.f()}window.removeEventListener("scroll",this.onScroll);this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout)}}]);return e}();function
oh(c,a,e){while(a){var
b=$.get(a);if(b&&b.parent==c)return b;var
d=a.parentNode;a=d!=c.dom?d:e>0?a.nextSibling:a.previousSibling}return null}function
BX(e){var
a=null;function
i(b){b.preventDefault();b.stopImmediatePropagation();a=b.getTargetRanges()[0]}e.contentDOM.addEventListener("beforeinput",i,true);document.execCommand("indent");e.contentDOM.removeEventListener("beforeinput",i,true);if(!a)return null;var
f=a.startContainer,g=a.startOffset,c=a.endContainer,d=a.endOffset,h=e.docView.domAtPos(e.state.selection.main.anchor);if(eU(h.node,h.offset,c,d)){var
b=[c,d,f,g];f=b[0];g=b[1];c=b[2];d=b[3]}return{anchorNode:f,anchorOffset:g,focusNode:c,focusOffset:d}}function
wb(a,C,H,K){var
b,e,c=a.state.selection.main;if(C>-1){var
j=a.docView.domBoundsAround(C,H,0);if(!j||a.state.readOnly)return;var
h=j.from,D=j.to,B=a.docView.impreciseHead||a.docView.impreciseAnchor?[]:Cy(a),m=new
jL(B,a);m.readRange(j.startDOM,j.endDOM);e=Ct(B,h);var
x=c.from,y=null;if(a.inputState.lastKeyCode===8&&a.inputState.lastKeyTime>Date.now()-100||o.android&&m.text.length<D-h){x=c.to;y="end"}var
k=yx(a.state.sliceDoc(h,D),m.text,x-h,y);if(k)b={from:h+k.from,to:h+k.toA,insert:a.state.toText(m.text.slice(k.from,k.toB))}}else
if(a.hasFocus||!a.state.facet(c4)){var
f=a.observer.selectionRange,u=a.docView,r=u.impreciseHead,q=u.impreciseAnchor,w=r&&r.node==f.focusNode&&r.offset==f.focusOffset||!g_(a.contentDOM,f.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(f.focusNode,f.focusOffset),v=q&&q.node==f.anchorNode&&q.offset==f.anchorOffset||!g_(a.contentDOM,f.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(f.anchorNode,f.anchorOffset);if(w!=c.head||v!=c.anchor)e=d.single(v,w)}if(!b&&!e)return;if(!b&&K&&!c.empty&&e&&e.main.empty)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,c.to)};else
if(b&&b.from>=c.from&&b.to<=c.to&&(b.from!=c.from||b.to!=c.to)&&c.to-c.from-(b.to-b.from)<=4)b={from:c.from,to:c.to,insert:a.state.doc.slice(c.from,b.from).append(b.insert).append(a.state.doc.slice(b.to,c.to))};if(b){var
g=a.state;if(o.ios&&a.inputState.flushIOSKey(a))return;if(o.android&&(b.from==c.from&&b.to==c.to&&b.insert.length==1&&b.insert.lines==2&&cZ(a.contentDOM,"Enter",13)||b.from==c.from-1&&b.to==c.to&&b.insert.length==0&&cZ(a.contentDOM,"Backspace",8)||b.from==c.from&&b.to==c.to+1&&b.insert.length==0&&cZ(a.contentDOM,"Delete",46)))return;var
E=b.insert.toString();if(a.state.facet(o9).some(function(c){return c(a,b.from,b.to,E)}))return;if(a.inputState.composing>=0)a.inputState.composing++;var
n;if(b.from>=c.from&&b.to<=c.to&&b.to-b.from>=(c.to-c.from)/3&&(!e||e.main.empty&&e.main.from==b.from+b.insert.length)&&a.inputState.composing<0){var
G=c.from<b.from?g.sliceDoc(c.from,b.from):"",F=c.to>b.to?g.sliceDoc(b.to,c.to):"";n=g.replaceSelection(a.state.toText(G+b.insert.sliceString(0,void
0,a.state.lineBreak)+F))}else{var
l=g.changes(b),i=e&&!g.selection.main.eq(e.main)&&e.main.to<=l.newLength?e.main:void
0;if(g.selection.ranges.length>1&&a.inputState.composing>=0&&b.to<=c.to&&b.to>=c.to-10){var
z=a.state.sliceDoc(b.from,b.to),p=mG(a)||a.state.doc.lineAt(c.head),I=c.to-b.to,J=c.to-c.from;n=g.changeByRange(function(e){if(e.from==c.from&&e.to==c.to)return{changes:l,range:i||e.map(l)};var
f=e.to-I,h=f-z.length;if(e.to-e.from!=J||a.state.sliceDoc(h,f)!=z||p&&e.to>=p.from&&e.from<=p.to)return{range:e};var
j=g.changes({from:h,to:f,insert:b.insert}),k=e.to-c.to;return{changes:j,range:!i?e.map(j):d.range(Math.max(0,i.anchor+k),Math.max(0,i.head+k))}})}else
n={changes:l,selection:i&&g.selection.replaceRange(i)}}var
s="input.type";if(a.composing){s+=".compose";if(a.inputState.compositionFirstChange){s+=".start";a.inputState.compositionFirstChange=false}}a.dispatch(n,{scrollIntoView:true,userEvent:s})}else
if(e&&!e.main.eq(c)){var
A=false,t="select";if(a.inputState.lastSelectionTime>Date.now()-50){if(a.inputState.lastSelectionOrigin=="select")A=true;t=a.inputState.lastSelectionOrigin}a.dispatch({selection:e,scrollIntoView:A,userEvent:t})}}function
yx(e,f,d,k){var
g=Math.min(e.length,f.length),a=0;while(a<g&&e.charCodeAt(a)==f.charCodeAt(a))a++;if(a==g&&e.length==f.length)return null;var
b=e.length,c=f.length;while(b>0&&c>0&&e.charCodeAt(b-1)==f.charCodeAt(c-1)){b--;c--}if(k=="end"){var
i=Math.max(0,a-Math.min(b,c));d-=b+i-a}if(b<a&&e.length<f.length){var
j=d<=a&&d>=b?a-d:0;a-=j;c=a+(c-b);b=a}else
if(c<a){var
h=d<=a&&d>=c?a-d:0;a-=h;b=a+(b-c);c=a}return{from:a,toA:b,toB:c}}function
Cy(d){var
b=[];if(d.root.activeElement!=d.contentDOM)return b;var
a=d.observer.selectionRange,c=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(c){b.push(new
jH(c,e));if(f!=c||g!=e)b.push(new
jH(f,g))}return b}function
Ct(a,c){if(a.length==0)return null;var
b=a[0].pos,e=a.length==2?a[1].pos:b;return b>-1&&e>-1?d.single(b+c,e+c):null}var
J=function(){function
f(){var
c=this,d=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};b(this,f);this.plugins=[];this.pluginMap=new
Map();this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(a){return c.update([a])};this.dispatch=this.dispatch.bind(this);this.root=d.root||yX(d.parent)||document;this.viewState=new
kN(d.state||u.create());this.plugins=this.state.facet(dB).map(function(a){return new
fY(a)});var
e=a(this.plugins),g;try{for(e.s();!(g=e.n()).done;){var
h=g.value;h.update(this)}}catch(a){e.e(a)}finally{e.f()}this.observer=new
tI(this,function(a,b,d){wb(c,a,b,d)},function(a){c.inputState.runScrollHandlers(c,a);if(c.observer.intersecting)c.measure()});this.inputState=new
uo(this);this.docView=new
jT(this);this.mountStyles();this.updateAttrs();this.updateState=0;yc();this.requestMeasure();if(d.parent)d.parent.appendChild(this.dom)}c(f,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var
a;this._dispatch(arguments.length==1&&(arguments.length<=0?undefined:arguments[0])instanceof
aj?arguments.length<=0?undefined:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function
b(h){if(this.updateState!=0)throw new
Error("Calls to EditorView.update are not allowed while an update is in progress");var
n=false,b,f=this.state,i=a(h),o;try{for(i.s();!(o=i.n()).done;){var
s=o.value;if(s.startState!=f)throw new
RangeError("Trying to update state with a transaction that doesn't start from the previous state.");f=s.state}}catch(a){i.e(a)}finally{i.f()}if(this.destroyed){this.viewState.state=f;return}if(f.facet(u.phrases)!=this.state.facet(u.phrases))return this.setState(f);b=new
kS(this,f,h);var
c=this.viewState.scrollTarget;try{this.updateState=2;var
j=a(h),p;try{for(j.s();!(p=j.n()).done;){var
m=p.value;if(c)c=c.map(m.changes);if(m.scrollIntoView){var
g=m.state.selection.main;c=new
dX(g.empty?g:d.cursor(g.head,g.head>g.anchor?-1:1))}var
k=a(m.effects),q;try{for(k.s();!(q=k.n()).done;){var
e=q.value;if(e.is(iB))c=new
dX(e.value);else
if(e.is(mg))c=new
dX(e.value,"center");else
if(e.is(rR))c=e.value}}catch(a){k.e(a)}finally{k.f()}}}catch(a){j.e(a)}finally{j.f()}this.viewState.update(b,c);this.bidiCache=jt.update(this.bidiCache,b.changes);if(!b.empty){this.updatePlugins(b);this.inputState.update(b)}n=this.docView.update(b);if(this.state.facet(dp)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(h);this.docView.updateSelection(n,h.some(function(a){return a.isUserEvent("select.pointer")}))}finally{this.updateState=0}if(n||c||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!b.empty){var
l=a(this.state.facet(i1)),r;try{for(l.s();!(r=l.n()).done;){var
t=r.value;t(b)}}catch(a){l.e(a)}finally{l.f()}}}},{key:"setState",value:function(d){if(this.updateState!=0)throw new
Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=d;return}this.updateState=2;var
h=this.hasFocus;try{var
b=a(this.plugins),e;try{for(b.s();!(e=b.n()).done;){var
i=e.value;i.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.viewState=new
kN(d);this.plugins=d.facet(dB).map(function(a){return new
fY(a)});this.pluginMap.clear();var
c=a(this.plugins),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;g.update(this)}}catch(a){c.e(a)}finally{c.f()}this.docView=new
jT(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}if(h)this.focus();this.requestMeasure()}},{key:"updatePlugins",value:function(b){var
n=b.startState.facet(dB),p=b.state.facet(dB);if(n!=p){var
g=[],c=a(p),i;try{for(c.s();!(i=c.n()).done;){var
o=i.value,l=n.indexOf(o);if(l<0)g.push(new
fY(o));else{var
m=this.plugins[l];m.mustUpdate=b;g.push(m)}}}catch(a){c.e(a)}finally{c.f()}var
d=a(this.plugins),j;try{for(d.s();!(j=d.n()).done;){var
h=j.value;if(h.mustUpdate!=b)h.destroy(this)}}catch(a){d.e(a)}finally{d.f()}this.plugins=g;this.pluginMap.clear();this.inputState.ensureHandlers(this)}else{var
e=a(this.plugins),k;try{for(e.s();!(k=e.n()).done;){var
q=k.value;q.mustUpdate=b}}catch(a){e.e(a)}finally{e.f()}}for(var
f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}},{key:"measure",value:function(){var
k=this,q=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=0;if(q)this.observer.flush();var
c=null;try{for(var
h=0;;h++){this.updateState=1;var
n=this.viewport,g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var
e=[];if(!(g&4)){var
i=[e,this.measureRequests];this.measureRequests=i[0];e=i[1]}var
m=e.map(function(a){try{return a.read(k)}catch(a){bV(k.state,a);return jh}}),b=new
kS(this,this.state),o=false,p=false;b.flags|=g;if(!c)c=b;else
c.flags|=g;this.updateState=2;if(!b.empty){this.updatePlugins(b);this.inputState.update(b);this.updateAttrs();o=this.docView.update(b)}for(var
d=0;d<e.length;d++)if(m[d]!=jh)try{var
l=e[d];if(l.write)l.write(m[d],this)}catch(a){bV(this.state,a)}if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null;p=true}if(o)this.docView.updateSelection(true);if(this.viewport.from==n.from&&this.viewport.to==n.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0;this.measureScheduled=-1}if(c&&!c.empty){var
f=a(this.state.facet(i1)),j;try{for(f.s();!(j=f.n()).done;){var
r=j.value;r(c)}}catch(a){f.e(a)}finally{f.f()}}}},{key:"themeClasses",get:function(){return gM+" "+(this.state.facet(he)?lZ:l4)+" "+this.state.facet(sj)}},{key:"updateAttrs",value:function(){var
a=this,c=lT(this,n1,{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),b={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:!this.state.facet(c4)?"false":"true","class":"cm-content",style:"".concat(o.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)b["aria-readonly"]="true";lT(this,mN,b);this.observer.ignore(function(){iW(a.contentDOM,a.contentAttrs,b);iW(a.dom,a.editorAttrs,c)});this.editorAttrs=c;this.contentAttrs=b}},{key:"showAnnouncements",value:function(k){var
h=true,b=a(k),d;try{for(b.s();!(d=b.n()).done;){var
j=d.value,c=a(j.effects),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;if(g.is(f.announce)){if(h)this.announceDOM.textContent="";h=false;var
i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=g.value}}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(dp);y.mount(this.root,this.styleModules.concat(wp).reverse())}},{key:"readMeasured",value:function(){if(this.updateState==2)throw new
Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false)}},{key:"requestMeasure",value:function(a){var
c=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame(function(){return c.measure()});if(a){if(a.key!=null)for(var
b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(e){var
d=[],b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;f.update(this).takeField(e,d)}}catch(a){b.e(a)}finally{b.f()}return d}},{key:"plugin",value:function(b){var
a=this.pluginMap.get(b);if(a===void
0||a&&a.spec!=b)this.pluginMap.set(b,a=this.plugins.find(function(a){return a.spec==b})||null);return a&&a.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"blockAtHeight",value:function(c,b){var
a=hB(b,this);return this.elementAtHeight(c-a).moveY(a)}},{key:"elementAtHeight",value:function(a){this.readMeasured();return this.viewState.elementAtHeight(a)}},{key:"visualLineAtHeight",value:function(c,b){var
a=hB(b,this);return this.lineBlockAtHeight(c-a).moveY(a)}},{key:"lineBlockAtHeight",value:function(a){this.readMeasured();return this.viewState.lineBlockAtHeight(a)}},{key:"viewportLines",value:function(e,d){var
g=hB(d,this),b=a(this.viewportLineBlocks),c;try{for(b.s();!(c=b.n()).done;){var
f=c.value;e(f.moveY(g))}}catch(a){b.e(a)}finally{b.f()}}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"visualLineAt",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.lineBlockAt(b).moveY(a+this.viewState.paddingTop)}},{key:"lineBlockAt",value:function(a){return this.viewState.lineBlockAt(a)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(a,c,b){return iI(this,a,qw(this,a,c,b))}},{key:"moveByGroup",value:function(a,b){var
c=this;return iI(this,a,qw(this,a,b,function(b){return wO(c,a.head,b)}))}},{key:"moveToLineBoundary",value:function(c,a){var
b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return AR(this,c,a,b)}},{key:"moveVertically",value:function(a,c,b){return iI(this,a,AV(this,a,c,b))}},{key:"scrollPosIntoView",value:function(a){this.dispatch({effects:iB.of(d.cursor(a))})}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(a,b)}},{key:"posAtCoords",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return qZ(this,a,b)}},{key:"coordsAtPos",value:function(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var
a=this.docView.coordsAt(b,c);if(!a||a.left==a.right)return a;var
d=this.state.doc.lineAt(b),e=this.bidiSpans(d),f=e[b1.find(e,b-d.from,-1,c)];return ez(a,f.dir==aB.LTR==c>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(b){if(b.length>uG)return sv(b.length);var
f=this.textDirection,c=a(this.bidiCache),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.from==b.from&&d.dir==f)return d.order}}catch(a){c.e(a)}finally{c.f()}var
g=xm(b.text,this.textDirection);this.bidiCache.push(new
jt(b.from,b.to,f,g));return g}},{key:"hasFocus",get:function(){var
a;return(document.hasFocus()||o.safari&&((a=this.inputState)===null||a===void
0?void
0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var
a=this;this.observer.ignore(function(){ot(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var
b=a(this.plugins),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.destroy(this)}}catch(a){b.e(a)}finally{b.f()}this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.destroyed=true}}],[{key:"scrollIntoView",value:function(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return rR.of(new
dX(typeof
b=="number"?d.cursor(b):b,a.y,a.x,a.yMargin,a.xMargin))}},{key:"domEventHandlers",value:function(a){return f6.define(function(){return{}},{eventHandlers:a})}},{key:"theme",value:function(d,a){var
b=y.newName(),c=[sj.of(b),dp.of(gS(".".concat(b),d))];if(a&&a.dark)c.push(he.of(true));return c}},{key:"baseTheme",value:function(a){return bf.lowest(dp.of(gS("."+gM,a,p1)))}}]);return f}();J.scrollTo=iB;J.centerOn=mg;J.styleModule=dp;J.inputHandler=o9;J.exceptionSink=ob;J.updateListener=i1;J.editable=c4;J.mouseSelectionStyle=qs;J.dragMovesSelection=nR;J.clickAddsSelectionRange=mt;J.decorations=bN;J.darkTheme=he;J.contentAttributes=mN;J.editorAttributes=n1;J.lineWrapping=J.contentAttributes.of({"class":"cm-lineWrapping"});J.announce=j.define();var
uG=4096;function
hB(a,b){return(a==null?b.contentDOM.getBoundingClientRect().top:a)+b.viewState.paddingTop}var
iu=-1;function
yc(){window.addEventListener("resize",function(){if(iu==-1)iu=setTimeout(zn,50)})}function
zn(){iu=-1;var
c=document.querySelectorAll(".cm-content");for(var
a=0;a<c.length;a++){var
b=$.get(c[a]);if(b)b.editorView.requestMeasure()}}var
jh={},jt=function(){function
d(c,f,a,e){b(this,d);this.from=c;this.to=f;this.dir=a;this.order=e}c(d,null,[{key:"update",value:function(a,c){if(c.empty)return a;var
f=[],g=a.length?a[a.length-1].dir:aB.LTR;for(var
e=Math.max(0,a.length-10);e<a.length;e++){var
b=a[e];if(b.dir==g&&!c.touchesRange(b.from,b.to))f.push(new
d(c.mapPos(b.from,1),c.mapPos(b.to,-1),b.dir,b.order))}return f}}]);return d}();function
lT(f,g,c){for(var
d=f.state.facet(g),a=d.length-1;a>=0;a--){var
b=d[a],e=typeof
b=="function"?b(f):b;if(e)g5(e,c)}return c}var
xx=o.mac?"mac":o.windows?"win":o.linux?"linux":"key";function
Br(i,j){var
c=i.split(/-(?!$)/),a=c[c.length-1];if(a=="Space")a=" ";var
g,e,h,f;for(var
d=0;d<c.length-1;++d){var
b=c[d];if(/^(cmd|meta|m)$/i.test(b))f=true;else
if(/^a(lt)?$/i.test(b))g=true;else
if(/^(c|ctrl|control)$/i.test(b))e=true;else
if(/^s(hift)?$/i.test(b))h=true;else
if(/^mod$/i.test(b))if(j=="mac")f=true;else
e=true;else
throw new
Error("Unrecognized modifier name: "+b)}if(g)a="Alt-"+a;if(e)a="Ctrl-"+a;if(f)a="Meta-"+a;if(h)a="Shift-"+a;return a}function
ih(a,b,c){if(b.altKey)a="Alt-"+a;if(b.ctrlKey)a="Ctrl-"+a;if(b.metaKey)a="Meta-"+a;if(c!==false&&b.shiftKey)a="Shift-"+a;return a}var
zh=J.domEventHandlers({keydown:function(b,a){return ry(oL(a.state),b,a,"editor")}}),Af=h.define({enables:zh}),j7=new
WeakMap();function
oL(c){var
a=c.facet(Af),b=j7.get(a);if(!b)j7.set(a,b=wI(a.reduce(function(a,b){return a.concat(b)},[])));return b}function
BR(a,b,c){return ry(oL(a.state),b,a,c)}var
bD=null,vc=4e3;function
wI(n){var
l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:xx,f=Object.create(null),k=Object.create(null),j=function(a,c){var
b=k[a];if(b==null)k[a]=c;else
if(b!=c)throw new
Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},i=function(e,k,i,m){var
b=f[e]||(f[e]=Object.create(null)),d=k.split(/ (?!$)/).map(function(a){return Br(a,l)}),h=function(c){var
a=d.slice(0,c).join(" ");j(a,true);if(!b[a])b[a]={preventDefault:true,commands:[function(c){var
b=bD={view:c,prefix:a,scope:e};setTimeout(function(){if(bD==b)bD=null},vc);return true}]}};for(var
a=1;a<d.length;a++)h(a);var
c=d.join(" ");j(c,false);var
g=b[c]||(b[c]={preventDefault:false,commands:[]});g.commands.push(i);if(m)g.preventDefault=true},c=a(n),g;try{for(c.s();!(g=c.n()).done;){var
b=g.value,e=b[l]||b.key;if(!e)continue;var
d=a(b.scope?b.scope.split(" "):["editor"]),h;try{for(d.s();!(h=d.n()).done;){var
m=h.value;i(m,e,b.run,b.preventDefault);if(b.shift)i(m,"Shift-"+e,b.shift,b.preventDefault)}}catch(a){d.e(a)}finally{d.f()}}}catch(a){c.e(a)}finally{c.f()}return f}function
ry(l,b,k,j){var
c=pz(b),h=c.length==1&&c!=" ",d="",g=false;if(bD&&bD.view==k&&bD.scope==j){d=bD.prefix+" ";if(g=qn.indexOf(b.keyCode)<0)bD=null}var
i=function(c){if(c){var
b=a(c.commands),d;try{for(b.s();!(d=b.n()).done;){var
e=d.value;if(e(k))return true}}catch(a){b.e(a)}finally{b.f()}if(c.preventDefault)g=true}return false},e=l[j],f;if(e){if(i(e[d+ih(c,b,!h)]))return true;if(h&&(b.shiftKey||b.altKey||b.metaKey)&&(f=bq[b.keyCode])&&f!=c){if(i(e[d+ih(f,b,true)]))return true}else
if(h&&b.shiftKey)if(i(e[d+ih(c,b,true)]))return true}return g}var
tk=!o.ios,CO={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(tk)CO[".cm-line"].caretColor="transparent !important";var
Dl=/x/.unicode!=null?"gu":"g",qT=h.define({combine:function(g){var
d,c,b=a(g),e;try{for(b.s();!(e=b.n()).done;){var
f=e.value;d=d||f.topContainer;c=c||f.bottomContainer}}catch(a){b.e(a)}finally{b.f()}return{topContainer:d,bottomContainer:c}}});function
c7(d,c){var
a=d.plugin(qU),b=a?a.specs.indexOf(c):-1;return b>-1?a.panels[b]:null}var
qU=aM.fromClass(function(){function
f(c){b(this,f);this.input=c.state.facet(di);this.specs=this.input.filter(function(a){return a});this.panels=this.specs.map(function(a){return a(c)});var
h=c.state.facet(qT);this.top=new
dS(c,true,h.topContainer);this.bottom=new
dS(c,false,h.bottomContainer);this.top.sync(this.panels.filter(function(a){return a.top}));this.bottom.sync(this.panels.filter(function(a){return!a.top}));var
d=a(this.panels),g;try{for(d.s();!(g=d.n()).done;){var
e=g.value;e.dom.classList.add("cm-panel");if(e.mount)e.mount()}}catch(a){d.e(a)}finally{d.f()}}c(f,[{key:"update",value:function(c){var
f=c.state.facet(qT);if(this.top.container!=f.topContainer){this.top.sync([]);this.top=new
dS(c.view,true,f.topContainer)}if(this.bottom.container!=f.bottomContainer){this.bottom.sync([]);this.bottom=new
dS(c.view,false,f.bottomContainer)}this.top.syncClasses();this.bottom.syncClasses();var
n=c.state.facet(di);if(n!=this.input){var
s=n.filter(function(a){return a}),q=[],t=[],m=[],p=[],d=a(s),k;try{for(d.s();!(k=d.n()).done;){var
r=k.value,o=this.specs.indexOf(r),b=void
0;if(o<0){b=r(c.view);p.push(b)}else{b=this.panels[o];if(b.update)b.update(c)}q.push(b);(b.top?t:m).push(b)}}catch(a){d.e(a)}finally{d.f()}this.specs=s;this.panels=q;this.top.sync(t);this.bottom.sync(m);for(var
g=0,i=p;g<i.length;g++){var
h=i[g];h.dom.classList.add("cm-panel");if(h.mount)h.mount()}}else{var
e=a(this.panels),l;try{for(e.s();!(l=e.n()).done;){var
j=l.value;if(j.update)j.update(c)}}catch(a){e.e(a)}finally{e.f()}}}},{key:"destroy",value:function(){this.top.sync([]);this.bottom.sync([])}}]);return f}(),{provide:aJ.scrollMargins.from(function(a){return{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})}),dS=function(){function
d(e,c,a){b(this,d);this.view=e;this.top=c;this.container=a;this.dom=void
0;this.classes="";this.panels=[];this.syncClasses()}c(d,[{key:"sync",value:function(e){var
b=a(this.panels),d;try{for(b.s();!(d=b.n()).done;){var
c=d.value;if(c.destroy&&e.indexOf(c)<0)c.destroy()}}catch(a){b.e(a)}finally{b.f()}this.panels=e;this.syncDOM()}},{key:"syncDOM",value:function(){if(this.panels.length==0){if(this.dom){this.dom.remove();this.dom=void
0}return}if(!this.dom){this.dom=document.createElement("div");this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom";this.dom.style[this.top?"top":"bottom"]="0";var
f=this.container||this.view.dom;f.insertBefore(this.dom,this.top?f.firstChild:null)}var
b=this.dom.firstChild,c=a(this.panels),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.dom.parentNode==this.dom){while(b!=d.dom)b=rw(b);b=b.nextSibling}else
this.dom.insertBefore(d.dom,b)}}catch(a){c.e(a)}finally{c.f()}while(b)b=rw(b)}},{key:"scrollMargin",value:function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}},{key:"syncClasses",value:function(){if(!this.container||this.classes==this.view.themeClasses)return;var
b=a(this.classes.split(" ")),e;try{for(b.s();!(e=b.n()).done;){var
g=e.value;if(g)this.container.classList.remove(g)}}catch(a){b.e(a)}finally{b.f()}var
c=a((this.classes=this.view.themeClasses).split(" ")),f;try{for(c.s();!(f=c.n()).done;){var
d=f.value;if(d)this.container.classList.add(d)}}catch(a){c.e(a)}finally{c.f()}}}]);return d}();function
rw(a){var
b=a.nextSibling;a.remove();return b}var
wq=v.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),di=h.define({enables:[qU,wq]});function
I(){var
a=arguments[0];if(typeof
a=="string")a=document.createElement(a);var
c=1,b=arguments[1];if(b&&bW(b)=="object"&&b.nodeType==null&&!Array.isArray(b)){for(var
d
in
b)if(Object.prototype.hasOwnProperty.call(b,d)){var
e=b[d];if(typeof
e=="string")a.setAttribute(d,e);else
if(e!=null)a[d]=e}c++}for(;c<arguments.length;c++)lJ(a,arguments[c]);return a}function
lJ(b,a){if(typeof
a=="string")b.appendChild(document.createTextNode(a));else
if(a==null);else
if(a.nodeType!=null)b.appendChild(a);else
if(Array.isArray(a))for(var
c=0;c<a.length;c++)lJ(b,a[c]);else
throw new
RangeError("Unsupported child node: "+a)}var
l6=typeof
String.prototype.normalize=="function"?function(a){return a.normalize("NFKD")}:function(a){return a},cc=function(){function
a(e,f){var
c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:e.length,d=arguments.length>4?arguments[4]:undefined;b(this,a);this.value={from:0,to:0};this.done=false;this.matches=[];this.buffer="";this.bufferPos=0;this.iter=e.iterRange(c,g);this.bufferStart=c;this.normalize=d?function(a){return d(l6(a))}:l6;this.query=this.normalize(f)}c(a,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){this.bufferStart+=this.buffer.length;this.iter.next();if(this.iter.done)return-1;this.bufferPos=0;this.buffer=this.iter.value}return ap(this.buffer,this.bufferPos)}},{key:"next",value:function(){while(this.matches.length)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var
b=this.peek();if(b<0){this.done=true;return this}var
d=hG(b),h=this.bufferStart+this.bufferPos;this.bufferPos+=aN(b);var
g=this.normalize(d);for(var
a=0,c=h;;a++){var
e=g.charCodeAt(a),f=this.match(e,c);if(f){this.value=f;return this}if(a==g.length-1)break;if(c==h&&a<d.length&&d.charCodeAt(a)==e)c++}}}},{key:"match",value:function
b(d,c){var
b=null;for(var
a=0;a<this.matches.length;a+=2){var
e=this.matches[a],f=false;if(this.query.charCodeAt(e)==d)if(e==this.query.length-1)b={from:this.matches[a+1],to:c+1};else{this.matches[a]++;f=true}if(!f){this.matches.splice(a,2);a-=2}}if(this.query.charCodeAt(0)==d)if(this.query.length==1)b={from:c,to:c+1};else
this.matches.push(1,c);return b}}]);return a}();if(typeof
Symbol!="undefined")cc.prototype[Symbol.iterator]=function(){return this};var
n2={from:-1,to:-1,match:/.*/.exec("")},gH="gm"+(/x/.unicode==null?"":"u"),kC=function(){function
f(c,e,a){var
d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,g=arguments.length>4&&arguments[4]!==undefined?arguments[4]:c.length;b(this,f);this.to=g;this.curLine="";this.done=false;this.value=n2;if(/\\[sWDnr]|\n|\r|\[\^/.test(e))return new
kf(c,e,a,d,g);this.re=new
RegExp(e,gH+((a===null||a===void
0?void
0:a.ignoreCase)?"i":""));this.iter=c.iter();var
h=c.lineAt(d);this.curLineStart=h.from;this.matchPos=d;this.getLine(this.curLineStart)}c(f,[{key:"getLine",value:function(a){this.iter.next(a);if(this.iter.lineBreak)this.curLine="";else{this.curLine=this.iter.value;if(this.curLineStart+this.curLine.length>this.to)this.curLine=this.curLine.slice(0,this.to-this.curLineStart);this.iter.next()}}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1;if(this.curLineStart>this.to)this.curLine="";else
this.getLine(0)}},{key:"next",value:function(){for(var
d=this.matchPos-this.curLineStart;;){this.re.lastIndex=d;var
b=this.matchPos<=this.to&&this.re.exec(this.curLine);if(b){var
a=this.curLineStart+b.index,c=a+b[0].length;this.matchPos=c+(a==c?1:0);if(a==this.curLine.length)this.nextLine();if(a<c||a>this.value.to){this.value={from:a,to:c,match:b};return this}d=this.matchPos-this.curLineStart}else
if(this.curLineStart+this.curLine.length<this.to){this.nextLine();d=0}else{this.done=true;return this}}}}]);return f}(),hE=new
WeakMap(),jU=function(){function
f(a,c){b(this,f);this.from=a;this.text=c}c(f,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(d,b,e){var
a=hE.get(d);if(!a||a.from>=e||a.to<=b){var
h=new
f(b,d.sliceString(b,e));hE.set(d,h);return h}if(a.from==b&&a.to==e)return a;var
g=a.text,c=a.from;if(c>b){g=d.sliceString(b,c)+g;c=b}if(a.to<e)g+=d.sliceString(a.to,e);hE.set(d,new
f(c,g));return new
f(b,g.slice(b-c,e-c))}}]);return f}(),kf=function(){function
d(e,f,c,a,g){b(this,d);this.text=e;this.to=g;this.done=false;this.value=n2;this.matchPos=a;this.re=new
RegExp(f,gH+((c===null||c===void
0?void
0:c.ignoreCase)?"i":""));this.flat=jU.get(e,a,this.chunkEnd(a+5e3))}c(d,[{key:"chunkEnd",value:function(a){return a>=this.to?this.to:this.text.lineAt(a).to}},{key:"next",value:function(){for(;;){var
d=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==d){this.re.lastIndex=d+1;a=this.re.exec(this.flat.text)}if(a&&this.flat.to<this.to&&a.index+a[0].length>this.flat.text.length-10)a=null;if(a){var
b=this.flat.from+a.index,c=b+a[0].length;this.value={from:b,to:c,match:a};this.matchPos=c+(b==c?1:0);return this}else{if(this.flat.to==this.to){this.done=true;return this}this.flat=jU.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}]);return d}();if(typeof
Symbol!="undefined")kC.prototype[Symbol.iterator]=kf.prototype[Symbol.iterator]=function(){return this};function
CZ(a){try{new
RegExp(a,gH);return true}catch(a){return false}}function
g$(a){var
m=I("input",{"class":"cm-textfield",name:"line"}),b=I("form",{"class":"cm-gotoLine",onkeydown:function(b){if(b.keyCode==27){b.preventDefault();a.dispatch({effects:en.of(false)});a.focus()}else
if(b.keyCode==13){b.preventDefault();c()}},onsubmit:function(a){a.preventDefault();c()}},I("label",a.state.phrase("Go to line"),": ",m)," ",I("button",{"class":"cm-button",type:"submit"},a.state.phrase("go")));function
c(){var
l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(m.value);if(!l)return;var
b=a.state,i=b.doc.lineAt(b.selection.main.head),e=bn(l,5),g=e[1],f=e[2],j=e[3],o=e[4],n=j?+j.slice(1):0,c=f?+f:i.number;if(f&&o){var
h=c/100;if(g)h=h*(g=="-"?-1:1)+i.number/b.doc.lines;c=Math.round(b.doc.lines*h)}else
if(f&&g)c=c*(g=="-"?-1:1)+i.number;var
k=b.doc.line(Math.max(1,Math.min(b.doc.lines,c)));a.dispatch({effects:en.of(false),selection:d.cursor(k.from+Math.max(0,Math.min(n,k.length))),scrollIntoView:true});a.focus()}return{dom:b,pos:-10}}var
en=j.define(),nr=ao.define({create:function(){return true},update:function(e,f){var
b=a(f.effects),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(d.is(en))e=d.value}}catch(a){b.e(a)}finally{b.f()}return e},provide:function(a){return di.from(a,function(a){return a?g$:null})}}),y8=function(b){var
a=c7(b,g$);if(!a){var
c=[en.of(true)];if(b.state.field(nr,false)==null)c.push(j.appendConfig.of([nr,wf]));b.dispatch({effects:c});a=c7(b,g$)}if(a)a.dom.querySelector("input").focus();return true},wf=J.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),xO={highlightWordAroundCursor:false,minSelectionLength:1,maxMatches:100},oP=h.define({combine:function(a){return bw(a,xO,{highlightWordAroundCursor:function(a,b){return a||b},minSelectionLength:Math.min,maxMatches:Math.min})}});function
zy(b){var
a=[xS,AB];if(b)a.push(oP.of(b));return a}var
AA=A.mark({"class":"cm-selectionMatch"}),Au=A.mark({"class":"cm-selectionMatch cm-selectionMatch-main"}),AB=f6.fromClass(function(){function
d(a){b(this,d);this.decorations=this.getDeco(a)}c(d,[{key:"update",value:function(a){if(a.selectionSet||a.docChanged||a.viewportChanged)this.decorations=this.getDeco(a.view)}},{key:"getDeco",value:function(k){var
j=k.state.facet(oP),c=k.state,r=c.selection;if(r.ranges.length>1)return A.none;var
b=r.main,i,f=null;if(b.empty){if(!j.highlightWordAroundCursor)return A.none;var
l=c.wordAt(b.head);if(!l)return A.none;f=c.charCategorizer(b.head);i=c.sliceDoc(l.from,l.to)}else{var
p=b.to-b.from;if(p<j.minSelectionLength||p>200)return A.none;i=c.sliceDoc(b.from,b.to).trim();if(!i)return A.none}var
h=[],g=a(k.visibleRanges),n;try{for(g.s();!(n=g.n()).done;){var
q=n.value,o=new
cc(c.doc,i,q.from,q.to);while(!o.next().done){var
m=o.value,d=m.from,e=m.to;if(!f||(d==0||f(c.sliceDoc(d-1,d))!=ak.Word)&&(e==c.doc.length||f(c.sliceDoc(e,e+1))!=ak.Word)){if(f&&d<=b.from&&e>=b.to)h.push(Au.range(d,e));else
if(d>=b.to||e<=b.from)h.push(AA.range(d,e));if(h.length>j.maxMatches)return A.none}}}}catch(a){g.e(a)}finally{g.f()}return A.set(h)}}]);return d}(),{decorations:function(a){return a.decorations}}),xS=J.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Cm=function(c){var
b=c.state,f=c.dispatch,a=b.selection,e=d.create(a.ranges.map(function(a){return b.wordAt(a.head)||d.cursor(a.head)}),a.mainIndex);if(e.eq(a))return false;f(b.update({selection:e}));return true};function
yy(f,i){var
h=f.selection,b=h.main,e=h.ranges,g=f.wordAt(b.head),k=g&&g.from==b.from&&g.to==b.to,j=function(b,a){a.next();if(a.done){if(b){c=a;d=b;return{v:null}}a=new
cc(f.doc,i,0,Math.max(0,e[e.length-1].from-1));b=true}else{if(b&&e.some(function(b){return b.from==a.value.from})){c=a;d=b;return"continue"}if(k){var
g=f.wordAt(a.value.from);if(!g||g.from!=a.value.from||g.to!=a.value.to){c=a;d=b;return"continue"}}d=b;c=a;return{v:a.value}}d=b;c=a};for(var
d=false,c=new
cc(f.doc,i,e[e.length-1].to);;){var
a=j(d,c);if(a==="continue")continue;if(bW(a)==="object")return a.v}}var
Ch=function(e){var
a=e.state,f=e.dispatch,c=a.selection.ranges;if(c.some(function(a){return a.from===a.to}))return Cm({state:a,dispatch:f});var
g=a.sliceDoc(c[0].from,c[0].to);if(a.selection.ranges.some(function(b){return a.sliceDoc(b.from,b.to)!=g}))return false;var
b=yy(a,g);if(!b)return false;f(a.update({selection:a.selection.addRange(d.range(b.from,b.to),false),effects:J.scrollIntoView(b.to)}));return true},iC=h.define({combine:function(b){var
a;return{top:b.reduce(function(a,b){return a!==null&&a!==void
0?a:b.top},void
0)||false,caseSensitive:b.reduce(function(a,b){return a!==null&&a!==void
0?a:b.caseSensitive||b.matchCase},void
0)||false,createPanel:((a=b.find(function(a){return a.createPanel}))===null||a===void
0?void
0:a.createPanel)||function(a){return new
vl(a)}}}}),kD=function(){function
d(a){b(this,d);this.search=a.search;this.caseSensitive=!!a.caseSensitive;this.regexp=!!a.regexp;this.replace=a.replace||"";this.valid=!!this.search&&(!this.regexp||CZ(this.search))}c(d,[{key:"eq",value:function(a){return this.search==a.search&&this.replace==a.replace&&this.caseSensitive==a.caseSensitive&&this.regexp==a.regexp}},{key:"create",value:function(){return this.regexp?new
vi(this):new
vs(this)}}]);return d}(),kw=c(function
a(c){b(this,a);this.spec=c}),vs=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this,d);c.unquoted=d.search.replace(/\\([nrt\\])/g,function(b,a){return a=="n"?"\n":a=="r"?"\r":a=="t"?"\t":"\\"});return c}c(a,[{key:"cursor",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a.length;return new
cc(a,this.unquoted,b,c,this.spec.caseSensitive?void
0:function(a){return a.toLowerCase()})}},{key:"nextMatch",value:function(b,c,d){var
a=this.cursor(b,d).nextOverlapping();if(a.done)a=this.cursor(b,0,c).nextOverlapping();return a.done?null:a.value}},{key:"prevMatchInRange",value:function(f,d,g){for(var
a=g;;){var
e=Math.max(d,a-1e4-this.unquoted.length),c=this.cursor(f,e,a),b=null;while(!c.nextOverlapping().done)b=c.value;if(b)return b;if(e==d)return null;a-=1e4}}},{key:"prevMatch",value:function(a,b,c){return this.prevMatchInRange(a,0,b)||this.prevMatchInRange(a,c,a.length)}},{key:"getReplacement",value:function(a){return this.spec.replace}},{key:"matchAll",value:function(c,d){var
b=this.cursor(c),a=[];while(!b.next().done){if(a.length>=d)return null;a.push(b.value)}return a}},{key:"highlight",value:function(b,d,e,c){var
a=this.cursor(b,Math.max(0,d-this.unquoted.length),Math.min(e+this.unquoted.length,b.length));while(!a.next().done)c(a.value.from,a.value.to)}}]);return a}(kw),vi=function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"cursor",value:function(a){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a.length;return new
kC(a,this.spec.search,this.spec.caseSensitive?void
0:{ignoreCase:true},b,c)}},{key:"nextMatch",value:function(b,c,d){var
a=this.cursor(b,d).next();if(a.done)a=this.cursor(b,0,c).next();return a.done?null:a.value}},{key:"prevMatchInRange",value:function(g,c,f){for(var
e=1;;e++){var
b=Math.max(c,f-e*1e4),d=this.cursor(g,b,f),a=null;while(!d.next().done)a=d.value;if(a&&(b==c||a.from>b+10))return a;if(b==c)return null}}},{key:"prevMatch",value:function(a,b,c){return this.prevMatchInRange(a,0,b)||this.prevMatchInRange(a,c,a.length)}},{key:"getReplacement",value:function(b){return this.spec.replace.replace(/\$([$&\d+])/g,function(c,a){return a=="$"?"$":a=="&"?b.match[0]:a!="0"&&+a<b.match.length?b.match[a]:c})}},{key:"matchAll",value:function(c,d){var
b=this.cursor(c),a=[];while(!b.next().done){if(a.length>=d)return null;a.push(b.value)}return a}},{key:"highlight",value:function(b,d,e,c){var
a=this.cursor(b,Math.max(0,d-250),Math.min(e+250,b.length));while(!a.next().done)c(a.value.from,a.value.to)}}]);return a}(kw),dg=j.define(),iM=j.define(),bB=ao.define({create:function(a){return new
f3(hf(a).create(),ek)},update:function(b,f){var
c=a(f.effects),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.is(dg))b=new
f3(d.value.create(),b.panel);else
if(d.is(iM))b=new
f3(b.query,d.value?ek:null)}}catch(a){c.e(a)}finally{c.f()}return b},provide:function(a){return di.from(a,function(a){return a.panel})}}),f3=c(function
a(d,c){b(this,a);this.query=d;this.panel=c}),AC=A.mark({"class":"cm-searchMatch"}),Cn=A.mark({"class":"cm-searchMatch cm-searchMatch-selected"}),B_=f6.fromClass(function(){function
a(c){b(this,a);this.view=c;this.decorations=this.highlight(c.state.field(bB))}c(a,[{key:"update",value:function(a){var
b=a.state.field(bB);if(b!=a.startState.field(bB)||a.docChanged||a.selectionSet)this.decorations=this.highlight(b)}},{key:"highlight",value:function(g){var
i=g.query,k=g.panel;if(!k||!i.spec.valid)return A.none;var
d=this.view,h=new
cb();for(var
a=0,b=d.visibleRanges,e=b.length;a<e;a++){var
f=b[a],j=f.from,c=f.to;while(a<e-1&&c>b[a+1].from-2*250)c=b[++a].to;i.highlight(d.state.doc,j,c,function(b,c){var
a=d.state.selection.ranges.some(function(a){return a.from==b&&a.to==c});h.add(b,c,a?Cn:AC)})}return h.finish()}}]);return a}(),{decorations:function(a){return a.decorations}});function
dd(c){return function(b){var
a=b.state.field(bB,false);return a&&a.query.spec.valid?c(b,a):qR(b)}}var
eo=dd(function(b,f){var
g=f.query,c=b.state.selection.main,d=c.from,e=c.to,a=g.nextMatch(b.state.doc,d,e);if(!a||a.from==d&&a.to==e)return false;b.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:true,effects:gA(b,a),userEvent:"select.search"});return true}),eu=dd(function(b,e){var
g=e.query,d=b.state,c=d.selection.main,f=c.from,h=c.to,a=g.prevMatch(d.doc,f,h);if(!a)return false;b.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:true,effects:gA(b,a),userEvent:"select.search"});return true}),Cg=dd(function(b,c){var
e=c.query,a=e.matchAll(b.state.doc,1e3);if(!a||!a.length)return false;b.dispatch({selection:d.create(a.map(function(a){return d.range(a.from,a.to)})),userEvent:"select.search.matches"});return true}),Cj=function(f){var
c=f.state,j=f.dispatch,e=c.selection;if(e.ranges.length>1||e.main.empty)return false;var
g=e.main,h=g.from,k=g.to,b=[],i=0;for(var
a=new
cc(c.doc,c.sliceDoc(h,k));!a.next().done;){if(b.length>1e3)return false;if(a.value.from==h)i=b.length;b.push(d.range(a.value.from,a.value.to))}j(c.update({selection:d.create(b,i),userEvent:"select.search.matches"}));return true},rk=dd(function(h,k){var
e=k.query,b=h.state,i=b.selection.main,d=i.from,l=i.to;if(b.readOnly)return false;var
a=e.nextMatch(b.doc,d,d);if(!a)return false;var
c=[],g,f;if(a.from==d&&a.to==l){f=b.toText(e.getReplacement(a));c.push({from:a.from,to:a.to,insert:f});a=e.nextMatch(b.doc,a.from,a.to)}if(a){var
j=c.length==0||c[0].from>=a.to?0:a.to-a.from-f.length;g={anchor:a.from-j,head:a.to-j}}h.dispatch({changes:c,selection:g,scrollIntoView:!!g,effects:a?gA(h,a):void
0,userEvent:"input.replace"});return true}),BP=dd(function(a,d){var
c=d.query;if(a.state.readOnly)return false;var
b=c.matchAll(a.state.doc,1e9).map(function(a){var
b=a.from,d=a.to;return{from:b,to:d,insert:c.getReplacement(a)}});if(!b.length)return false;a.dispatch({changes:b,userEvent:"input.replace.all"});return true});function
ek(a){return a.state.facet(iC).createPanel(a)}function
hf(d,a){var
c,b=d.selection.main,e=b.empty||b.to>b.from+100?"":d.sliceDoc(b.from,b.to),f=(c=a===null||a===void
0?void
0:a.caseSensitive)!==null&&c!==void
0?c:d.facet(iC).caseSensitive;return a&&!e?a:new
kD({search:e.replace(/\n/g,"\\n"),caseSensitive:f})}var
qR=function(a){var
b=a.state.field(bB,false);if(b&&b.panel){var
d=c7(a,ek);if(!d)return false;var
c=d.dom.querySelector("[name=search]");if(c!=a.root.activeElement){var
e=hf(a.state,b.query.spec);if(e.valid)a.dispatch({effects:dg.of(e)});c.focus();c.select()}}else
a.dispatch({effects:[iM.of(true),b?dg.of(hf(a.state,b.query.spec)):j.appendConfig.of(B9)]});return true},mv=function(a){var
c=a.state.field(bB,false);if(!c||!c.panel)return false;var
b=c7(a,ek);if(b&&b.dom.contains(a.root.activeElement))a.focus();a.dispatch({effects:iM.of(false)});return true},B$=[{key:"Mod-f",run:qR,scope:"editor search-panel"},{key:"F3",run:eo,shift:eu,scope:"editor search-panel",preventDefault:true},{key:"Mod-g",run:eo,shift:eu,scope:"editor search-panel",preventDefault:true},{key:"Escape",run:mv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Cj},{key:"Alt-g",run:y8},{key:"Mod-d",run:Ch,preventDefault:true}],vl=function(){function
e(a){var
f=this;b(this,e);this.view=a;var
d=this.query=a.state.field(bB).query.spec;this.commit=this.commit.bind(this);this.searchField=I("input",{value:d.search,placeholder:aP(a,"Find"),"aria-label":aP(a,"Find"),"class":"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit});this.replaceField=I("input",{value:d.replace,placeholder:aP(a,"Replace"),"aria-label":aP(a,"Replace"),"class":"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit});this.caseField=I("input",{type:"checkbox",name:"case",checked:d.caseSensitive,onchange:this.commit});this.reField=I("input",{type:"checkbox",name:"re",checked:d.regexp,onchange:this.commit});function
c(b,c,a){return I("button",{"class":"cm-button",name:b,onclick:c,type:"button"},a)}this.dom=I("div",{onkeydown:function(a){return f.keydown(a)},"class":"cm-search"},[this.searchField,c("next",function(){return eo(a)},[aP(a,"next")]),c("prev",function(){return eu(a)},[aP(a,"previous")]),c("select",function(){return Cg(a)},[aP(a,"all")]),I("label",null,[this.caseField,aP(a,"match case")]),I("label",null,[this.reField,aP(a,"regexp")])].concat(P(a.state.readOnly?[]:[I("br"),this.replaceField,c("replace",function(){return rk(a)},[aP(a,"replace")]),c("replaceAll",function(){return BP(a)},[aP(a,"replace all")]),I("button",{name:"close",onclick:function(){return mv(a)},"aria-label":aP(a,"close"),type:"button"},["\xD7"])])))}c(e,[{key:"commit",value:function(){var
a=new
kD({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});if(!a.eq(this.query)){this.query=a;this.view.dispatch({effects:dg.of(a)})}}},{key:"keydown",value:function(a){if(BR(this.view,a,"search-panel"))a.preventDefault();else
if(a.keyCode==13&&a.target==this.searchField){a.preventDefault();(a.shiftKey?eu:eo)(this.view)}else
if(a.keyCode==13&&a.target==this.replaceField){a.preventDefault();rk(this.view)}}},{key:"update",value:function(g){var
b=a(g.transactions),e;try{for(b.s();!(e=b.n()).done;){var
h=e.value,c=a(h.effects),f;try{for(c.s();!(f=c.n()).done;){var
d=f.value;if(d.is(dg)&&!d.value.eq(this.query))this.setQuery(d.value)}}catch(a){c.e(a)}finally{c.f()}}}catch(a){b.e(a)}finally{b.f()}}},{key:"setQuery",value:function(a){this.query=a;this.searchField.value=a.search;this.replaceField.value=a.replace;this.caseField.checked=a.caseSensitive;this.reField.checked=a.regexp}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet(iC).top}}]);return e}();function
aP(b,a){return b.state.phrase(a)}var
dD=30,dE=/[\s\.,:;?!]/;function
gA(b,f){var
e=f.from,k=f.to,i=b.state.doc.lineAt(e).from,h=b.state.doc.lineAt(k).to,j=Math.max(i,e-dD),g=Math.min(h,k+dD),a=b.state.sliceDoc(j,g);if(j!=i)for(var
c=0;c<dD;c++)if(!dE.test(a[c+1])&&dE.test(a[c])){a=a.slice(c);break}if(g!=h)for(var
d=a.length-1;d>a.length-dD;d--)if(!dE.test(a[d-1])&&dE.test(a[d])){a=a.slice(0,d);break}return J.announce.of("".concat(b.state.phrase("current match"),". ").concat(a," ").concat(b.state.phrase("on line")," ").concat(b.state.doc.lineAt(e).number))}var
wg=J.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),B9=[bB,bf.lowest(B_),wg],nu={};cO(nu,{CompletionContext:function(){return kW},acceptCompletion:function(){return kX},autocompletion:function(){return k6},clearSnippet:function(){return k7},closeCompletion:function(){return k8},completeAnyWord:function(){return vC},completeFromList:function(){return k_},completionKeymap:function(){return gj},completionStatus:function(){return vD},currentCompletions:function(){return vE},ifIn:function(){return vI},ifNotIn:function(){return vJ},moveCompletionSelection:function(){return cQ},nextSnippetField:function(){return lj},pickedCompletion:function(){return lr},prevSnippetField:function(){return lu},selectedCompletion:function(){return vV},snippet:function(){return lG},snippetCompletion:function(){return vW},snippetKeymap:function(){return gr},startCompletion:function(){return lH}});var
nt={};cO(nt,{closeHoverTooltips:function(){return vB},getTooltip:function(){return la},hasHoverTooltips:function(){return vH},hoverTooltip:function(){return lb},repositionTooltips:function(){return vU},showTooltip:function(){return cR},tooltips:function(){return vX}});var
zW=typeof
navigator!="undefined"&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),fT="-10000px",kG=function(){function
d(e,c,a){b(this,d);this.facet=c;this.createTooltipView=a;this.input=e.state.facet(c);this.tooltips=this.input.filter(function(a){return a});this.tooltipViews=this.tooltips.map(a)}c(d,[{key:"update",value:function(g){var
h=g.state.facet(this.facet),k=h.filter(function(a){return a});if(h===this.input){var
c=a(this.tooltipViews),l;try{for(c.s();!(l=c.n()).done;){var
p=l.value;if(p.update)p.update(g)}}catch(a){c.e(a)}finally{c.f()}return false}var
f=[];for(var
b=0;b<k.length;b++){var
j=k[b],i=-1;if(!j)continue;for(var
e=0;e<this.tooltips.length;e++){var
o=this.tooltips[e];if(o&&o.create==j.create)i=e}if(i<0)f[b]=this.createTooltipView(j);else{var
q=f[b]=this.tooltipViews[i];if(q.update)q.update(g)}}var
d=a(this.tooltipViews),m;try{for(d.s();!(m=d.n()).done;){var
n=m.value;if(f.indexOf(n)<0)n.dom.remove()}}catch(a){d.e(a)}finally{d.f()}this.input=h;this.tooltips=k;this.tooltipViews=f;return true}}]);return d}();function
vX(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return fe.of(a)}function
De(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}var
fe=h.define({combine:function(d){var
a,b,c;return{position:zW?"absolute":((a=d.find(function(a){return a.position}))===null||a===void
0?void
0:a.position)||"fixed",parent:((b=d.find(function(a){return a.parent}))===null||b===void
0?void
0:b.parent)||null,tooltipSpace:((c=d.find(function(a){return a.tooltipSpace}))===null||c===void
0?void
0:c.tooltipSpace)||De}}}),iQ=aM.fromClass(function(){function
e(a){var
d=this;b(this,e);var
c;this.view=a;this.inView=true;this.lastTransaction=0;this.measureTimeout=-1;var
f=a.state.facet(fe);this.position=f.position;this.parent=f.parent;this.classes=a.themeClasses;this.createContainer();this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this};this.manager=new
kG(a,cR,function(a){return d.createTooltip(a)});this.intersectionObserver=typeof
IntersectionObserver=="function"?new
IntersectionObserver(function(a){if(Date.now()>d.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1)d.measureSoon()},{threshold:[1]}):null;this.observeIntersection();(c=a.dom.ownerDocument.defaultView)===null||c===void
0?void
0:c.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this));this.maybeMeasure()}c(e,[{key:"createContainer",value:function(){if(this.parent){this.container=document.createElement("div");this.container.style.position="relative";this.container.className=this.view.themeClasses;this.parent.appendChild(this.container)}else
this.container=this.view.dom}},{key:"observeIntersection",value:function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();var
b=a(this.manager.tooltipViews),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;this.intersectionObserver.observe(d.dom)}}catch(a){b.e(a)}finally{b.f()}}}},{key:"measureSoon",value:function(){var
a=this;if(this.measureTimeout<0)this.measureTimeout=setTimeout(function(){a.measureTimeout=-1;a.maybeMeasure()},50)}},{key:"update",value:function(d){if(d.transactions.length)this.lastTransaction=Date.now();var
i=this.manager.update(d);if(i)this.observeIntersection();var
f=i||d.geometryChanged,e=d.state.facet(fe);if(e.position!=this.position){this.position=e.position;var
b=a(this.manager.tooltipViews),g;try{for(b.s();!(g=b.n()).done;){var
k=g.value;k.dom.style.position=this.position}}catch(a){b.e(a)}finally{b.f()}f=true}if(e.parent!=this.parent){if(this.parent)this.container.remove();this.parent=e.parent;this.createContainer();var
c=a(this.manager.tooltipViews),h;try{for(c.s();!(h=c.n()).done;){var
j=h.value;this.container.appendChild(j.dom)}}catch(a){c.e(a)}finally{c.f()}f=true}else
if(this.parent&&this.view.themeClasses!=this.classes)this.classes=this.container.className=this.view.themeClasses;if(f)this.maybeMeasure()}},{key:"createTooltip",value:function(c){var
a=c.create(this.view);a.dom.classList.add("cm-tooltip");if(c.arrow&&!a.dom.querySelector("cm-tooltip > cm-tooltip-arrow")){var
b=document.createElement("div");b.className="cm-tooltip-arrow";a.dom.appendChild(b)}a.dom.style.position=this.position;a.dom.style.top=fT;this.container.appendChild(a.dom);if(a.mount)a.mount(this.view);return a}},{key:"destroy",value:function(){var
c,d;(c=this.view.dom.ownerDocument.defaultView)===null||c===void
0?void
0:c.removeEventListener("resize",this.measureSoon);var
b=a(this.manager.tooltipViews),e;try{for(b.s();!(e=b.n()).done;){var
f=e.value.dom;f.remove()}}catch(a){b.e(a)}finally{b.f()}(d=this.intersectionObserver)===null||d===void
0?void
0:d.disconnect();clearTimeout(this.measureTimeout)}},{key:"readMeasure",value:function(){var
b=this,a=this.view.dom.getBoundingClientRect();return{editor:a,parent:this.parent?this.container.getBoundingClientRect():a,pos:this.manager.tooltips.map(function(a){return b.view.coordsAtPos(a.pos)}),size:this.manager.tooltipViews.map(function(a){var
b=a.dom;return b.getBoundingClientRect()}),space:this.view.state.facet(fe).tooltipSpace(this.view)}}},{key:"writeMeasure",value:function(m){var
q=m.editor,c=m.space,w=[];for(var
j=0;j<this.manager.tooltips.length;j++){var
t=this.manager.tooltips[j],h=this.manager.tooltipViews[j],g=h.dom,b=m.pos[j],d=m.size[j];if(!b||b.bottom<=Math.max(q.top,c.top)||b.top>=Math.min(q.bottom,c.bottom)||b.right<=Math.max(q.left,c.left)||b.left>=Math.min(q.right,c.right)){g.style.top=fT;continue}var
n=t.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=n?7:0,u=d.right-d.left,r=d.bottom-d.top,f=h.offset||Bd,s=this.view.textDirection==ah.LTR,l=d.width>c.right-c.left?s?c.left:c.right-d.width:s?Math.min(b.left-(n?14:0)+f.x,c.right-u):Math.max(c.left,b.left-u+(n?14:0)-f.x),e=!!t.above;if(!t.strictSide&&(e?b.top-(d.bottom-d.top)-f.y<c.top:b.bottom+(d.bottom-d.top)+f.y>c.bottom)&&e==c.bottom-b.bottom>b.top-c.top)e=!e;var
i=e?b.top-r-p-f.y:b.bottom+p+f.y,x=l+u;if(h.overlap!==true){var
o=a(w),v;try{for(o.s();!(v=o.n()).done;){var
k=v.value;if(k.left<x&&k.right>l&&k.top<i+r&&k.bottom>i)i=e?k.top-r-2-p:k.bottom+p+2}}catch(a){o.e(a)}finally{o.f()}}if(this.position=="absolute"){g.style.top=i-m.parent.top+"px";g.style.left=l-m.parent.left+"px"}else{g.style.top=i+"px";g.style.left=l+"px"}if(n)n.style.left="".concat(b.left+(s?f.x:-f.x)-(l+14-7),"px");if(h.overlap!==true)w.push({left:l,top:i,right:x,bottom:i+r});g.classList.toggle("cm-tooltip-above",e);g.classList.toggle("cm-tooltip-below",!e);if(h.positioned)h.positioned()}}},{key:"maybeMeasure",value:function(){if(this.manager.tooltips.length){if(this.view.inView)this.view.requestMeasure(this.measureReq);if(this.inView!=this.view.inView){this.inView=this.view.inView;if(!this.inView){var
b=a(this.manager.tooltipViews),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;d.dom.style.top=fT}}catch(a){b.e(a)}finally{b.f()}}}}}}]);return e}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),wh=v.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(7*2,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Bd={x:0,y:0},cR=h.define({enables:[iQ,wh]}),dh=h.define(),uj=function(){function
d(a){var
c=this;b(this,d);this.view=a;this.mounted=false;this.dom=document.createElement("div");this.dom.classList.add("cm-tooltip-hover");this.manager=new
kG(a,dh,function(a){return c.createHostedView(a)})}c(d,[{key:"createHostedView",value:function(b){var
a=b.create(this.view);a.dom.classList.add("cm-tooltip-section");this.dom.appendChild(a.dom);if(this.mounted&&a.mount)a.mount(this.view);return a}},{key:"mount",value:function(e){var
b=a(this.manager.tooltipViews),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(d.mount)d.mount(e)}}catch(a){b.e(a)}finally{b.f()}this.mounted=true}},{key:"positioned",value:function(){var
b=a(this.manager.tooltipViews),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value;if(d.positioned)d.positioned()}}catch(a){b.e(a)}finally{b.f()}}},{key:"update",value:function(a){this.manager.update(a)}}],[{key:"create",value:function(a){return new
d(a)}}]);return d}(),Cz=cR.compute([dh],function(b){var
a=b.facet(dh).filter(function(a){return a});if(a.length===0)return null;return{pos:Math.min.apply(Math,P(a.map(function(a){return a.pos}))),end:Math.max.apply(Math,P(a.filter(function(a){return a.end!=null}).map(function(a){return a.end}))),create:uj.create,above:a[0].above,arrow:a.some(function(a){return a.arrow})}}),ui=function(){function
d(a,g,c,f,e){b(this,d);this.view=a;this.source=g;this.field=c;this.setHover=f;this.hoverTime=e;this.hoverTimeout=-1;this.restartTimeout=-1;this.pending=null;this.lastMove={x:0,y:0,target:a.dom,time:0};this.checkHover=this.checkHover.bind(this);a.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this));a.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}c(d,[{key:"update",value:function(){var
a=this;if(this.pending){this.pending=null;clearTimeout(this.restartTimeout);this.restartTimeout=setTimeout(function(){return a.startHover()},20)}}},{key:"active",get:function(){return this.view.state.field(this.field)}},{key:"checkHover",value:function(){this.hoverTimeout=-1;if(this.active)return;var
a=Date.now()-this.lastMove.time;if(a<this.hoverTime)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-a);else
this.startHover()}},{key:"startHover",value:function(){var
d=this,f;clearTimeout(this.restartTimeout);var
a=this.lastMove,b=this.view.contentDOM.contains(a.target)?this.view.posAtCoords(a):null;if(b==null)return;var
c=this.view.coordsAtPos(b);if(c==null||a.y<c.top||a.y>c.bottom||a.x<c.left-this.view.defaultCharacterWidth||a.x>c.right+this.view.defaultCharacterWidth)return;var
g=this.view.bidiSpans(this.view.state.doc.lineAt(b)).find(function(a){return a.from<=b&&a.to>=b}),h=g&&g.dir==ah.RTL?-1:1,e=this.source(this.view,b,a.x<c.left?-h:h);if((f=e)===null||f===void
0?void
0:f.then){var
i=this.pending={pos:b};e.then(function(a){if(d.pending==i){d.pending=null;if(a)d.view.dispatch({effects:d.setHover.of(a)})}},function(a){return aD(d.view.state,a,"hover tooltip")})}else
if(e)this.view.dispatch({effects:this.setHover.of(e)})}},{key:"mousemove",value:function(a){var
d;this.lastMove={x:a.clientX,y:a.clientY,target:a.target,time:Date.now()};if(this.hoverTimeout<0)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime);var
b=this.active;if(b&&!z5(this.lastMove.target)||this.pending){var
f=b||this.pending,c=f.pos,e=(d=b===null||b===void
0?void
0:b.end)!==null&&d!==void
0?d:c;if(c==e?this.view.posAtCoords(this.lastMove)!=c:!z6(this.view,c,e,a.clientX,a.clientY,6)){this.view.dispatch({effects:this.setHover.of(null)});this.pending=null}}}},{key:"mouseleave",value:function(){clearTimeout(this.hoverTimeout);this.hoverTimeout=-1;if(this.active)this.view.dispatch({effects:this.setHover.of(null)})}},{key:"destroy",value:function(){clearTimeout(this.hoverTimeout);this.view.dom.removeEventListener("mouseleave",this.mouseleave);this.view.dom.removeEventListener("mousemove",this.mousemove)}}]);return d}();function
z5(b){for(var
a=b;a;a=a.parentNode)if(a.nodeType==1&&a.classList.contains("cm-tooltip"))return true;return false}function
z6(g,k,m,h,i,l){var
a=document.createRange(),d=g.domAtPos(k),f=g.domAtPos(m);a.setEnd(f.node,f.offset);a.setStart(d.node,d.offset);var
e=a.getClientRects();a.detach();for(var
c=0;c<e.length;c++){var
b=e[c],j=Math.max(b.top-i,i-b.bottom,b.left-h,h-b.right);if(j<=l)return true}return false}function
lb(d){var
i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},k=j.define(),b=ao.define({create:function(){return null},update:function(b,c){if(b&&i.hideOnChange&&(c.docChanged||c.selection))return null;var
d=a(c.effects),g;try{for(d.s();!(g=d.n()).done;){var
f=g.value;if(f.is(k))return f.value;if(f.is(mu))return null}}catch(a){d.e(a)}finally{d.f()}if(b&&c.docChanged){var
h=c.changes.mapPos(b.pos,-1,z.TrackDel);if(h==null)return null;var
e=Object.assign(Object.create(null),b);e.pos=h;if(b.end!=null)e.end=c.changes.mapPos(b.end);return e}return b},provide:function(a){return dh.from(a)}}),c=i.hoverTime||600;return[b,aM.define(function(a){return new
ui(a,d,b,k,c)}),Cz]}function
la(d,c){var
a=d.plugin(iQ);if(!a)return null;var
b=a.manager.tooltips.indexOf(c);return b<0?null:a.manager.tooltipViews[b]}function
vH(a){return a.facet(dh).some(function(a){return a})}var
mu=j.define(),vB=mu.of(null);function
vU(b){var
a;(a=b.plugin(iQ))===null||a===void
0?void
0:a.maybeMeasure()}var
kW=function(){function
a(e,d,c){b(this,a);this.state=e;this.pos=d;this.explicit=c;this.abortListeners=[]}c(a,[{key:"tokenBefore",value:function(b){var
a=aq(this.state).resolveInner(this.pos,-1);while(a&&b.indexOf(a.name)<0)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}},{key:"matchBefore",value:function(e){var
a=this.state.doc.lineAt(this.pos),c=Math.max(a.from,this.pos-250),d=a.text.slice(c-a.from,this.pos-a.from),b=d.search(n3(e,false));return b<0?null:{from:c+b,to:this.pos,text:d.slice(b)}}},{key:"aborted",get:function(){return this.abortListeners==null}},{key:"addEventListener",value:function(b,a){if(b=="abort"&&this.abortListeners)this.abortListeners.push(a)}}]);return a}();function
sl(c){var
a=Object.keys(c).join(""),b=/\w/.test(a);if(b)a=a.replace(/\w/g,"");return"[".concat(b?"\\w":"").concat(a.replace(/[^\w\s]/g,"\\$&"),"]")}function
BD(i){var
f=Object.create(null),g=Object.create(null),b=a(i),e;try{for(b.s();!(e=b.n()).done;){var
d=e.value.label;f[d[0]]=true;for(var
c=1;c<d.length;c++)g[d[c]]=true}}catch(a){b.e(a)}finally{b.f()}var
h=sl(f)+sl(g)+"*$";return[new
RegExp("^"+h),new
RegExp(h)]}function
k_(d){var
c=d.map(function(a){return typeof
a=="string"?{label:a}:a}),b=c.every(function(a){return/^\w+$/.test(a.label)})?[/\w*$/,/\w+$/]:BD(c),a=bn(b,2),f=a[0],e=a[1];return function(a){var
b=a.matchBefore(e);return b||a.explicit?{from:b?b.from:a.pos,options:c,span:f}:null}}function
vI(c,d){return function(b){for(var
a=aq(b.state).resolveInner(b.pos,-1);a;a=a.parent)if(c.indexOf(a.name)>-1)return d(b);return null}}function
vJ(c,d){return function(b){for(var
a=aq(b.state).resolveInner(b.pos,-1);a;a=a.parent)if(c.indexOf(a.name)>-1)return null;return d(b)}}var
kl=c(function
a(c,e,d){b(this,a);this.completion=c;this.source=e;this.match=d});function
cj(a){return a.selection.main.head}function
n3(a,f){var
c,b=a.source,e=f&&b[0]!="^",d=b[b.length-1]!="$";if(!e&&!d)return a;return new
RegExp("".concat(e?"^":"","(?:").concat(b,")").concat(d?"$":""),(c=a.flags)!==null&&c!==void
0?c:a.ignoreCase?"i":"")}var
lr=bt.define();function
lN(d,a){var
c=a.completion.apply||a.completion.label,b=a.source;if(typeof
c=="string")d.dispatch({changes:{from:b.from,to:b.to,insert:c},selection:{anchor:b.from+c.length},userEvent:"input.complete",annotations:lr.of(a.completion)});else
c(d,a.completion,b.from,b.to)}var
kF=new
WeakMap();function
wc(a){if(!Array.isArray(a))return a;var
b=kF.get(a);if(!b)kF.set(a,b=k_(a));return b}var
t8=function(){function
e(c){b(this,e);this.pattern=c;this.chars=[];this.folded=[];this.any=[];this.precise=[];this.byWord=[];for(var
a=0;a<c.length;){var
f=ap(c,a),g=aN(f);this.chars.push(f);var
d=c.slice(a,a+g),h=d.toUpperCase();this.folded.push(ap(h==d?d.toLowerCase():h,0));a+=g}this.astral=c.length!=this.chars.length}c(e,[{key:"match",value:function(b){if(this.pattern.length==0)return[0];if(b.length<this.pattern.length)return null;var
f=this.chars,n=this.folded,q=this.any,A=this.precise,j=this.byWord;if(f.length==1){var
m=ap(b,0);return m==f[0]?[0,0,aN(m)]:m==n[0]?[-200,0,aN(m)]:null}var
h=b.indexOf(this.pattern);if(h==0)return[0,0,this.pattern.length];var
c=f.length,i=0;if(h<0){for(var
k=0,y=Math.min(b.length,200);k<y&&i<c;){var
s=ap(b,k);if(s==f[i]||s==n[i])q[i++]=k;k+=aN(s)}if(i<c)return null}var
t=0,g=0,r=false,e=0,p=-1,o=-1,z=/[a-z]/.test(b),v=true;for(var
d=0,x=Math.min(b.length,200),w=0;d<x&&g<c;){var
a=ap(b,d);if(h<0){if(t<c&&a==f[t])A[t++]=d;if(e<c)if(a==f[e]||a==n[e]){if(e==0)p=d;o=d+1;e++}else
e=0}var
l=void
0,u=a<255?a>=48&&a<=57||a>=97&&a<=122?2:a>=65&&a<=90?1:0:(l=hG(a))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;if(!d||u==1&&z||w==0&&u!=0)if(f[g]==a||n[g]==a&&(r=true))j[g++]=d;else
if(j.length)v=false;w=u;d+=aN(a)}if(g==c&&j[0]==0&&v)return this.result(-100+(r?-200:0),j,b);if(e==c&&p==0)return[-200-b.length,0,o];if(h>-1)return[-700-b.length,h,h+this.pattern.length];if(e==c)return[-200+-700-b.length,p,o];if(g==c)return this.result(-100+(r?-200:0)+-700+(v?0:-1100),j,b);return f.length==2?null:this.result((q[0]?-700:0)+-200+-1100,q,b)}},{key:"result",value:function
b(j,i,h){var
b=[j-h.length],c=1,d=a(i),f;try{for(d.s();!(f=d.n()).done;){var
e=f.value,g=e+(this.astral?aN(ap(h,e)):1);if(c>1&&b[c-1]==e)b[c-1]=g;else{b[c++]=e;b[c++]=g}}}catch(a){d.e(a)}finally{d.f()}return b}}]);return e}(),bI=h.define({combine:function(a){return bw(a,{activateOnTyping:true,override:null,maxRenderedOptions:100,defaultKeymap:true,optionClass:function(){return""},aboveCursor:false,icons:true,addToOptions:[]},{defaultKeymap:function(a,b){return a&&b},icons:function(a,b){return a&&b},optionClass:function(b,c){return function(a){return Ac(b(a),c(a))}},addToOptions:function(a,b){return a.concat(b)}})}});function
Ac(a,b){return a?b?a+" "+b:a:b}function
Bz(b){var
a=b.addToOptions.slice();if(b.icons)a.push({render:function(c){var
b,a=document.createElement("div");a.classList.add("cm-completionIcon");if(c.type)(b=a.classList).add.apply(b,P(c.type.split(/\s+/g).map(function(a){return"cm-completionIcon-"+a})));a.setAttribute("aria-hidden","true");return a},position:20});a.push({render:function(i,j,f){var
a=document.createElement("span");a.className="cm-completionLabel";var
c=i.label,b=0;for(var
e=1;e<f.length;){var
d=f[e++],h=f[e++];if(d>b)a.appendChild(document.createTextNode(c.slice(b,d)));var
g=a.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(c.slice(d,h)));g.className="cm-completionMatchedText";b=h}if(b<c.length)a.appendChild(document.createTextNode(c.slice(b)));return a},position:50},{render:function(b){if(!b.detail)return null;var
a=document.createElement("span");a.className="cm-completionDetail";a.textContent=b.detail;return a},position:80});return a.sort(function(a,b){return a.position-b.position}).map(function(a){return a.render})}function
xu(d,e){var
a=document.createElement("div");a.className="cm-tooltip cm-completionInfo";var
c=d.completion.info;if(typeof
c=="string")a.textContent=c;else{var
b=c(d.completion);if(b.then)b.then(function(b){return a.appendChild(b)},function(a){return aD(e.state,a,"completion info")});else
a.appendChild(b)}return a}function
ra(b,c,a){if(b<=a)return{from:0,to:b};if(c<=b>>1){var
e=Math.floor(c/a);return{from:e*a,to:(e+1)*a}}var
d=Math.floor((b-c)/a);return{from:b-(d+1)*a,to:b-d*a}}var
to=function(){function
f(e,i){var
c=this;b(this,f);this.view=e;this.stateField=i;this.info=null;this.placeInfo={read:function(){return c.measureInfo()},write:function(a){return c.positionInfo(a)},key:this};var
h=e.state.field(i),g=h.open,d=g.options,j=g.selected,a=e.state.facet(bI);this.optionContent=Bz(a);this.optionClass=a.optionClass;this.range=ra(d.length,j,a.maxRenderedOptions);this.dom=document.createElement("div");this.dom.className="cm-tooltip-autocomplete";this.dom.addEventListener("mousedown",function(f){for(var
a=f.target,b;a&&a!=c.dom;a=a.parentNode)if(a.nodeName=="LI"&&(b=/-(\d+)$/.exec(a.id))&&+b[1]<d.length){lN(e,d[+b[1]]);f.preventDefault();return}});this.list=this.dom.appendChild(this.createListBox(d,h.id,this.range));this.list.addEventListener("scroll",function(){if(c.info)c.view.requestMeasure(c.placeInfo)})}c(f,[{key:"mount",value:function(){this.updateSel()}},{key:"update",value:function(a){if(a.state.field(this.stateField)!=a.startState.field(this.stateField))this.updateSel()}},{key:"positioned",value:function(){if(this.info)this.view.requestMeasure(this.placeInfo)}},{key:"updateSel",value:function(){var
b=this,c=this.view.state.field(this.stateField),a=c.open;if(a.selected<this.range.from||a.selected>=this.range.to){this.range=ra(a.options.length,a.selected,this.view.state.facet(bI).maxRenderedOptions);this.list.remove();this.list=this.dom.appendChild(this.createListBox(a.options,c.id,this.range));this.list.addEventListener("scroll",function(){if(b.info)b.view.requestMeasure(b.placeInfo)})}if(this.updateSelectedOption(a.selected)){if(this.info){this.info.remove();this.info=null}var
d=a.options[a.selected];if(d.completion.info){this.info=this.dom.appendChild(xu(d,this.view));this.view.requestMeasure(this.placeInfo)}}}},{key:"updateSelectedOption",value:function(d){var
b=null;for(var
a=this.list.firstChild,c=this.range.from;a;a=a.nextSibling,c++)if(c==d){if(!a.hasAttribute("aria-selected")){a.setAttribute("aria-selected","true");b=a}}else
if(a.hasAttribute("aria-selected"))a.removeAttribute("aria-selected");if(b)B3(this.list,b);return b}},{key:"measureInfo",value:function(){var
e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var
b=this.dom.getBoundingClientRect(),c=this.info.getBoundingClientRect(),d=e.getBoundingClientRect();if(d.top>Math.min(innerHeight,b.bottom)-10||d.bottom<Math.max(0,b.top)+10)return null;var
h=Math.max(0,Math.min(d.top,innerHeight-c.height))-b.top,a=this.view.textDirection==ah.RTL,f=b.left,g=innerWidth-b.right;if(a&&f<Math.min(c.width,g))a=false;else
if(!a&&g<Math.min(c.width,f))a=true;return{top:h,left:a}}},{key:"positionInfo",value:function(a){if(this.info){this.info.style.top=(a?a.top:-1e6)+"px";if(a){this.info.classList.toggle("cm-completionInfo-left",a.left);this.info.classList.toggle("cm-completionInfo-right",!a.left)}}}},{key:"createListBox",value:function(m,k,f){var
b=document.createElement("ul");b.id=k;b.setAttribute("role","listbox");for(var
c=f.from;c<f.to;c++){var
g=m[c],j=g.completion,n=g.match,e=b.appendChild(document.createElement("li"));e.id=k+"-"+c;e.setAttribute("role","option");var
i=this.optionClass(j);if(i)e.className=i;var
d=a(this.optionContent),h;try{for(d.s();!(h=d.n()).done;){var
o=h.value,l=o(j,this.view.state,n);if(l)e.appendChild(l)}}catch(a){d.e(a)}finally{d.f()}}if(f.from)b.classList.add("cm-completionListIncompleteTop");if(f.to<m.length)b.classList.add("cm-completionListIncompleteBottom");return b}}]);return f}();function
xc(b){return function(a){return new
to(a,b)}}function
B3(c,d){var
a=c.getBoundingClientRect(),b=d.getBoundingClientRect();if(b.top<a.top)c.scrollTop-=a.top-b.top;else
if(b.bottom>a.bottom)c.scrollTop+=b.bottom-a.bottom}var
uM=300;function
rJ(a){return(a.boost||0)*100+(a.apply?10:0)+(a.info?5:0)+(a.type?1:0)}function
CC(q,u){var
k=[],r=0,f=a(q),m;try{for(f.s();!(m=f.n()).done;){var
b=m.value;if(b.hasResult())if(b.result.filter===false){var
h=a(b.result.options),o;try{for(h.s();!(o=h.n()).done;){var
t=o.value;k.push(new
kl(t,b,[1e9-r++]))}}catch(a){h.e(a)}finally{h.f()}}else{var
s=new
t8(u.sliceDoc(b.from,b.to)),l=void
0,i=a(b.result.options),p;try{for(i.s();!(p=i.n()).done;){var
j=p.value;if(l=s.match(j.label)){if(j.boost!=null)l[0]+=j.boost;k.push(new
kl(j,b,l))}}}catch(a){i.e(a)}finally{i.f()}}}}catch(a){f.e(a)}finally{f.f()}k.sort(my);var
e=[],d=null,g=a(k.sort(my)),n;try{for(g.s();!(n=g.n()).done;){var
c=n.value;if(e.length==uM)break;if(!d||d.label!=c.completion.label||d.detail!=c.completion.detail||d.type!=c.completion.type||d.apply!=c.completion.apply)e.push(c);else
if(rJ(c.completion)>rJ(d))e[e.length-1]=c;d=c.completion}}catch(a){g.e(a)}finally{g.f()}return e}var
tm=function(){function
d(c,a,g,f,e){b(this,d);this.options=c;this.attrs=a;this.tooltip=g;this.timestamp=f;this.selected=e}c(d,[{key:"setSelected",value:function(a,b){return a==this.selected||a>=this.options.length?this:new
d(this.options,p7(b,a),this.tooltip,this.timestamp,a)}},{key:"map",value:function(a){return new
d(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:a.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}],[{key:"build",value:function(f,j,h,a,g){var
c=CC(f,j);if(!c.length)return null;var
e=0;if(a&&a.selected){var
i=a.options[a.selected].completion;for(var
b=0;b<c.length&&!e;b++)if(c[b].completion==i)e=b}return new
d(c,p7(h,e),{pos:f.reduce(function(a,b){return b.hasResult()?Math.min(a,b.from):a},1e8),create:xc(au),above:g.aboveCursor},a?a.timestamp:Date.now(),e)}}]);return d}(),tn=function(){function
e(a,c,d){b(this,e);this.active=a;this.id=c;this.open=d}c(e,[{key:"update",value:function(c){var
h=this,g=c.state,i=g.facet(bI),l=i.override||g.languageDataAt("autocomplete",cj(g)).map(wc),b=l.map(function(a){var
b=h.active.find(function(b){return b.source==a})||new
bE(a,h.active.some(function(a){return a.state!=0})?1:0);return b.update(c,i)});if(b.length==this.active.length&&b.every(function(a,b){return a==h.active[b]}))b=this.active;var
d=c.selection||b.some(function(a){return a.hasResult()&&c.changes.touchesRange(a.from,a.to)})||!B2(b,this.active)?tm.build(b,g,this.id,this.open,i):this.open&&c.docChanged?this.open.map(c.changes):this.open;if(!d&&b.every(function(a){return a.state!=1})&&b.some(function(a){return a.hasResult()}))b=b.map(function(a){return a.hasResult()?new
bE(a.source,0):a});var
f=a(c.effects),j;try{for(f.s();!(j=f.n()).done;){var
k=j.value;if(k.is(r8))d=d&&d.setSelected(k.value,this.id)}}catch(a){f.e(a)}finally{f.f()}return b==this.active&&d==this.open?this:new
e(b,this.id,d)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:wd}}],[{key:"start",value:function(){return new
e(Bo,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}}]);return e}();function
B2(a,b){if(a==b)return true;for(var
c=0,d=0;;){while(c<a.length&&!a[c].hasResult)c++;while(d<b.length&&!b[d].hasResult)d++;var
e=c==a.length,f=d==b.length;if(e||f)return e==f;if(a[c++].result!=b[d++].result)return false}}var
wd={"aria-autocomplete":"list","aria-expanded":"false"};function
p7(a,b){return{"aria-autocomplete":"list","aria-expanded":"true","aria-activedescendant":a+"-"+b,"aria-controls":a}}var
Bo=[];function
my(a,b){var
c=b.match[0]-a.match[0];if(c)return c;return a.completion.label.localeCompare(b.completion.label)}function
hP(a){return a.isUserEvent("input.type")?"input":a.isUserEvent("delete.backward")?"delete":null}var
bE=function(){function
d(c,e){var
a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;b(this,d);this.source=c;this.state=e;this.explicitPos=a}c(d,[{key:"hasResult",value:function(){return false}},{key:"update",value:function(c,l){var
k=hP(c),b=this;if(k)b=b.handleUserEvent(c,k,l);else
if(c.docChanged)b=b.handleChange(c);else
if(c.selection&&b.state!=0)b=new
d(b.source,0);var
f=a(c.effects),h;try{for(f.s();!(h=f.n()).done;){var
e=h.value;if(e.is(iK))b=new
d(b.source,1,e.value?cj(c.state):-1);else
if(e.is(gZ))b=new
d(b.source,0);else
if(e.is(r7)){var
g=a(e.value),i;try{for(g.s();!(i=g.n()).done;){var
j=i.value;if(j.source==b.source)b=j}}catch(a){g.e(a)}finally{g.f()}}}}catch(a){f.e(a)}finally{f.f()}return b}},{key:"handleUserEvent",value:function(b,c,a){return c=="delete"||!a.activateOnTyping?this.map(b.changes):new
d(this.source,1)}},{key:"handleChange",value:function(a){return a.changes.touchesRange(cj(a.startState))?new
d(this.source,0):this.map(a.changes)}},{key:"map",value:function(a){return a.empty||this.explicitPos<0?this:new
d(this.source,this.state,a.mapPos(this.explicitPos))}}]);return d}(),sW=function(d){f(a,d);var
j=e(a);function
a(g,d,f,e,i,h){var
c;b(this,a);c=j.call(this,g,2,d);c.result=f;c.from=e;c.to=i;c.span=h;return c}c(a,[{key:"hasResult",value:function(){return true}},{key:"handleUserEvent",value:function(c,h,g){var
b=c.changes.mapPos(this.from),d=c.changes.mapPos(this.to,1),e=cj(c.state);if((this.explicitPos>-1?e<b:e<=b)||e>d)return new
bE(this.source,h=="input"&&g.activateOnTyping?1:0);var
f=this.explicitPos<0?-1:c.changes.mapPos(this.explicitPos);if(this.span&&(b==d||this.span.test(c.state.sliceDoc(b,d))))return new
a(this.source,f,this.result,b,d,this.span);return new
bE(this.source,1,f)}},{key:"handleChange",value:function(a){return a.changes.touchesRange(this.from,this.to)?new
bE(this.source,0):this.map(a.changes)}},{key:"map",value:function(b){return b.empty?this:new
a(this.source,this.explicitPos<0?-1:b.mapPos(this.explicitPos),this.result,b.mapPos(this.from),b.mapPos(this.to,1),this.span)}}]);return a}(bE),iK=j.define(),gZ=j.define(),r7=j.define({map:function(a,b){return a.map(function(a){return a.map(b)})}}),r8=j.define(),au=ao.define({create:function(){return tn.start()},update:function(b,a){return b.update(a)},provide:function(a){return[cR.from(a,function(a){return a.tooltip}),v.contentAttributes.from(a,function(a){return a.attrs})]}}),jB=75;function
cQ(h){var
f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"option";return function(e){var
a=e.state.field(au,false);if(!a||!a.open||Date.now()-a.open.timestamp<jB)return false;var
g=1,d;if(f=="page"&&(d=la(e,a.open.tooltip)))g=Math.max(2,Math.floor(d.dom.offsetHeight/d.dom.querySelector("li").offsetHeight)-1);var
b=a.open.selected+g*(h?1:-1),c=a.open.options.length;if(b<0)b=f=="page"?0:c-1;else
if(b>=c)b=f=="page"?c-1:0;e.dispatch({effects:r8.of(b)});return true}}var
kX=function(b){var
a=b.state.field(au,false);if(b.state.readOnly||!a||!a.open||Date.now()-a.open.timestamp<jB)return false;lN(b,a.open.options[a.open.selected]);return true},lH=function(a){var
b=a.state.field(au,false);if(!b)return false;a.dispatch({effects:iK.of(true)});return true},k8=function(b){var
a=b.state.field(au,false);if(!a||!a.active.some(function(a){return a.state!=0}))return false;b.dispatch({effects:gZ.of(null)});return true},vk=c(function
a(c,d){b(this,a);this.active=c;this.context=d;this.time=Date.now();this.updates=[];this.done=void
0}),jM=50,uO=50,uU=1e3,xb=aM.fromClass(function(){function
d(g){b(this,d);this.view=g;this.debounceUpdate=-1;this.running=[];this.debounceAccept=-1;this.composing=0;var
c=a(g.state.field(au).active),e;try{for(c.s();!(e=c.n()).done;){var
f=e.value;if(f.state==1)this.startQuery(f)}}catch(a){c.e(a)}finally{c.f()}}c(d,[{key:"update",value:function(b){var
j=this,k=b.state.field(au);if(!b.selectionSet&&!b.docChanged&&b.startState.field(au)==k)return;var
m=b.transactions.some(function(a){return(a.selection||a.docChanged)&&!hP(a)});for(var
d=0;d<this.running.length;d++){var
c=this.running[d];if(m||c.updates.length+b.transactions.length>uO&&c.time-Date.now()>uU){var
e=a(c.context.abortListeners),h;try{for(e.s();!(h=e.n()).done;){var
n=h.value;try{n()}catch(a){aD(this.view.state,a)}}}catch(a){e.e(a)}finally{e.f()}c.context.abortListeners=null;this.running.splice(d--,1)}else{var
g;(g=c.updates).push.apply(g,P(b.transactions))}}if(this.debounceUpdate>-1)clearTimeout(this.debounceUpdate);this.debounceUpdate=k.active.some(function(a){return a.state==1&&!j.running.some(function(b){return b.active.source==a.source})})?setTimeout(function(){return j.startUpdate()},jM):-1;if(this.composing!=0){var
f=a(b.transactions),i;try{for(f.s();!(i=f.n()).done;){var
l=i.value;if(hP(l)=="input")this.composing=2;else
if(this.composing==2&&l.selection)this.composing=3}}catch(a){f.e(a)}finally{f.f()}}}},{key:"startUpdate",value:function(){var
d=this;this.debounceUpdate=-1;var
g=this.view.state,f=g.field(au),b=a(f.active),c;try{var
e=function(){var
a=c.value;if(a.state==1&&!d.running.some(function(b){return b.active.source==a.source}))d.startQuery(a)};for(b.s();!(c=b.n()).done;)e()}catch(a){b.e(a)}finally{b.f()}}},{key:"startQuery",value:function(b){var
a=this,f=this.view.state,e=cj(f),d=new
kW(f,e,b.explicitPos==e),c=new
vk(b,d);this.running.push(c);Promise.resolve(b.source(d)).then(function(b){if(!c.context.aborted){c.done=b||null;a.scheduleAccept()}},function(b){a.view.dispatch({effects:gZ.of(null)});aD(a.view.state,b)})}},{key:"scheduleAccept",value:function(){var
a=this;if(this.running.every(function(a){return a.done!==void
0}))this.accept();else
if(this.debounceAccept<0)this.debounceAccept=setTimeout(function(){return a.accept()},jM)}},{key:"accept",value:function(){var
e=this,l;if(this.debounceAccept>-1)clearTimeout(this.debounceAccept);this.debounceAccept=-1;var
j=[],o=this.view.state.facet(bI),b=function(d){var
b=e.running[d];if(b.done===void
0){c=d;return"continue"}e.running.splice(d--,1);if(b.done){var
i=new
sW(b.active.source,b.active.explicitPos,b.done,b.done.from,(l=b.done.to)!==null&&l!==void
0?l:cj(b.updates.length?b.updates[0].startState:e.view.state),b.done.span&&b.done.filter!==false?n3(b.done.span,true):null),g=a(b.updates),m;try{for(g.s();!(m=g.n()).done;){var
q=m.value;i=i.update(q,o)}}catch(a){g.e(a)}finally{g.f()}if(i.hasResult()){j.push(i);c=d;return"continue"}}var
k=e.view.state.field(au).active.find(function(a){return a.source==b.active.source});if(k&&k.state==1)if(b.done==null){var
f=new
bE(b.active.source,0),h=a(b.updates),n;try{for(h.s();!(n=h.n()).done;){var
p=n.value;f=f.update(p,o)}}catch(a){h.e(a)}finally{h.f()}if(f.state!=1)j.push(f)}else
e.startQuery(k);c=d};for(var
c=0;c<this.running.length;c++){var
d=b(c);if(d==="continue")continue}if(j.length)this.view.dispatch({effects:r7.of(j)})}}]);return d}(),{eventHandlers:{compositionstart:function(){this.composing=1},compositionend:function(){var
a=this;if(this.composing==3)setTimeout(function(){return a.view.dispatch({effects:iK.of(false)})},20);this.composing=0}}}),l5=v.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:0.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),t5=c(function
a(c,e,d,f){b(this,a);this.field=c;this.line=e;this.from=d;this.to=f}),t6=function(){function
a(c,d,e){b(this,a);this.field=c;this.from=d;this.to=e}c(a,[{key:"map",value:function(b){return new
a(this.field,b.mapPos(this.from,-1),b.mapPos(this.to,1))}}]);return a}(),vn=function(){function
l(c,a){b(this,l);this.lines=c;this.fieldPositions=a}c(l,[{key:"instantiate",value:function(k,d){var
h=[],f=[d],m=k.doc.lineAt(d),l=/^\s*/.exec(m.text)[0],c=a(this.lines),j;try{for(c.s();!(j=c.n()).done;){var
b=j.value;if(h.length){var
e=l,g=/^\t*/.exec(b)[0].length;for(var
i=0;i<g;i++)e+=k.facet(eO);f.push(d+e.length-g);b=e+b.slice(g)}h.push(b);d+=b.length+1}}catch(a){c.e(a)}finally{c.f()}var
n=this.fieldPositions.map(function(a){return new
t6(a.field,f[a.line]+a.from,f[a.line]+a.to)});return{text:h,ranges:n}}}],[{key:"parse",value:function(r){var
c=[],m=[],n=[],b,j=a(r.split(/\r\n?|\n/)),o;try{for(j.s();!(o=j.n()).done;){var
g=o.value;while(b=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(g)){var
i=b[1]?+b[1]:null,h=b[2]||b[3]||"",f=-1;for(var
e=0;e<c.length;e++)if(i!=null?c[e].seq==i:h?c[e].name==h:false)f=e;if(f<0){var
d=0;while(d<c.length&&(i==null||c[d].seq!=null&&c[d].seq<i))d++;c.splice(d,0,{seq:i,name:h});f=d;var
k=a(n),p;try{for(k.s();!(p=k.n()).done;){var
q=p.value;if(q.field>=f)q.field++}}catch(a){k.e(a)}finally{k.f()}}n.push(new
t5(f,m.length,b.index,b.index+h.length));g=g.slice(0,b.index)+h+g.slice(b.index+b[0].length)}m.push(g)}}catch(a){j.e(a)}finally{j.f()}return new
l(m,n)}}]);return l}(),yf=s.widget({widget:new(function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"toDOM",value:function(){var
a=document.createElement("span");a.className="cm-snippetFieldPosition";return a}},{key:"ignoreEvent",value:function(){return false}}]);return a}(bv))()}),yg=s.mark({"class":"cm-snippetField"}),dC=function(){function
a(c,d){b(this,a);this.ranges=c;this.active=d;this.deco=s.set(c.map(function(a){return(a.from==a.to?yf:yg).range(a.from,a.to)}))}c(a,[{key:"map",value:function(b){return new
a(this.ranges.map(function(a){return a.map(b)}),this.active)}},{key:"selectionInsideField",value:function(a){var
c=this;return a.ranges.every(function(b){return c.ranges.some(function(a){return a.field==c.active&&a.from<=b.from&&a.to>=b.to})})}}]);return a}(),df=j.define({map:function(a,b){return a&&a.map(b)}}),AN=j.define(),dj=ao.define({create:function(){return null},update:function(b,c){var
d=a(c.effects),f;try{for(d.s();!(f=d.n()).done;){var
e=f.value;if(e.is(df))return e.value;if(e.is(AN)&&b)return new
dC(b.ranges,e.value)}}catch(a){d.e(a)}finally{d.f()}if(b&&c.docChanged)b=b.map(c.changes);if(b&&c.selection&&!b.selectionInsideField(c.selection))b=null;return b},provide:function(a){return v.decorations.from(a,function(a){return a?a.deco:s.none})}});function
hC(a,b){return d.create(a.filter(function(a){return a.field==b}).map(function(a){return d.range(a.from,a.to)}))}function
lG(a){var
k=vn.parse(a);return function(a,l,e,i){var
d=k.instantiate(a.state,e),h=d.text,b=d.ranges,c={changes:{from:e,to:i,insert:p.of(h)}};if(b.length)c.selection=hC(b,0);if(b.length>1){var
f=new
dC(b,0),g=c.effects=[df.of(f)];if(a.state.field(dj,false)===void
0)g.push(j.appendConfig.of([dj,v3,CB,l5]))}a.dispatch(a.state.update(c))}}function
qx(b){return function(d){var
e=d.state,f=d.dispatch,a=e.field(dj,false);if(!a||b<0&&a.active==0)return false;var
c=a.active+b,g=b>0&&!a.ranges.some(function(a){return a.field==c+b});f(e.update({selection:hC(a.ranges,c),effects:df.of(g?null:new
dC(a.ranges,c))}));return true}}var
k7=function(a){var
b=a.state,d=a.dispatch,c=b.field(dj,false);if(!c)return false;d(b.update({effects:df.of(null)}));return true},lj=qx(1),lu=qx(-1),xR=[{key:"Tab",run:lj,shift:lu},{key:"Escape",run:k7}],gr=h.define({combine:function(a){return a.length?a[0]:xR}}),v3=bf.highest(eW.compute([gr],function(a){return a.facet(gr)}));function
vW(b,a){return Object.assign(Object.assign({},a),{apply:lG(b)})}var
CB=v.domEventHandlers({mousedown:function(e,d){var
a=d.state.field(dj,false),c;if(!a||(c=d.posAtCoords({x:e.clientX,y:e.clientY}))==null)return false;var
b=a.ranges.find(function(a){return a.from<=c&&a.to>=c});if(!b||b.field==a.active)return false;d.dispatch({selection:hC(a.ranges,b.field),effects:df.of(a.ranges.some(function(a){return a.field>b.field})?new
dC(a.ranges,b.field):null)});return true}});function
Dg(b){var
a=b.replace(/[\\[.+*?(){|^$]/g,"\\$&");try{return new
RegExp("[\\p{Alphabetic}\\p{Number}_".concat(a,"]+"),"ug")}catch(b){return new
RegExp("[w".concat(a,"]"),"g")}}function
p8(a,b){return new
RegExp(b(a.source),a.unicode?"u":"")}var
sP=Object.create(null);function
Df(a){return sP[a]||(sP[a]=new
WeakMap())}function
r_(h,g,d,e,i){for(var
b=h.iterLines(),c=0;!b.next().done;){var
f=b.value,a=void
0;g.lastIndex=0;while(a=g.exec(f))if(!e[a[0]]&&c+a.index!=i){d.push({type:"text",label:a[0]});e[a[0]]=true;if(d.length>=2e3)return}c+=f.length+1}}function
mA(b,j,l,q,k){var
o=b.length>=1e3,p=o&&j.get(b);if(p)return p;var
c=[],h=Object.create(null);if(b.children){var
g=0,d=a(b.children),m;try{for(d.s();!(m=d.n()).done;){var
f=m.value;if(f.length>=1e3){var
e=a(mA(f,j,l,q-g,k-g)),n;try{for(e.s();!(n=e.n()).done;){var
i=n.value;if(!h[i.label]){h[i.label]=true;c.push(i)}}}catch(a){e.e(a)}finally{e.f()}}else
r_(f,l,c,h,k-g);g+=f.length+1}}catch(a){d.e(a)}finally{d.f()}}else
r_(b,l,c,h,k);if(o&&c.length<2e3)j.set(b,c);return c}var
vC=function(a){var
e=a.state.languageDataAt("wordChars",a.pos).join(""),b=Dg(e),c=a.matchBefore(p8(b,function(a){return a+"$"}));if(!c&&!a.explicit)return null;var
d=c?c.from:a.pos,f=mA(a.state.doc,Df(e),b,5e4,d);return{from:d,options:f,span:p8(b,function(a){return"^"+a})}};function
k6(){var
a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[au,bI.of(a),xb,xa,l5]}var
gj=[{key:"Ctrl-Space",run:lH},{key:"Escape",run:k8},{key:"ArrowDown",run:cQ(true)},{key:"ArrowUp",run:cQ(false)},{key:"PageDown",run:cQ(true,"page")},{key:"PageUp",run:cQ(false,"page")},{key:"Enter",run:kX}],xa=bf.highest(eW.computeN([bI],function(a){return a.facet(bI).defaultKeymap?[gj]:[]}));function
vD(b){var
a=b.field(au,false);return a&&a.active.some(function(a){return a.state==1})?"pending":a&&a.active.some(function(a){return a.state!=0})?"active":null}function
vE(c){var
a,b=(a=c.field(au,false))===null||a===void
0?void
0:a.open;return b?b.options.map(function(a){return a.completion}):[]}function
vV(c){var
a,b=(a=c.field(au,false))===null||a===void
0?void
0:a.open;return b?b.options[b.selected].completion:null}var
CQ=function(a){var
b=hM(a.state);return b.line?CR(a):b.block?sm(a):false};function
mB(e,f){return function(b){var
a=b.state,d=b.dispatch,c=e(f,a.selection.ranges,a);if(!c)return false;d(a.update(c));return true}}var
CR=mB(w2,0),sm=mB(w0,0),w_=[{key:"Mod-/",run:CQ},{key:"Alt-A",run:sm}];function
hM(b){var
c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b.selection.main.head,a=b.languageDataAt("commentTokens",c);return a.length?a[0]:{}}var
cH=50;function
yn(g,m,a,b){var
e=m.open,c=m.close,l=g.sliceDoc(a-cH,a),p=g.sliceDoc(b,b+cH),k=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(p)[0].length,n=l.length-k;if(l.slice(n-e.length,n)==e&&p.slice(h,h+c.length)==c)return{open:{pos:a-k,margin:k&&1},close:{pos:b+h,margin:h&&1}};var
f,d;if(b-a<=2*cH)f=d=g.sliceDoc(a,b);else{f=g.sliceDoc(a,a+cH);d=g.sliceDoc(b-cH,b)}var
i=/^\s*/.exec(f)[0].length,o=/\s*$/.exec(d)[0].length,j=d.length-o-c.length;if(f.slice(i,i+e.length)==e&&d.slice(j,j+c.length)==c)return{open:{pos:a+i+e.length,margin:/\s/.test(f.charAt(i+e.length))?1:0},close:{pos:b-o-c.length,margin:/\s/.test(d.charAt(j-1))?1:0}};return null}function
w0(l,m,g){var
c=m.map(function(a){return hM(g,a.from).block});if(!c.every(function(a){return a}))return null;var
b=m.map(function(a,b){return yn(g,c[b],a.from,a.to)});if(l!=2&&!b.every(function(a){return a})){var
k=0;return g.changeByRange(function(a){var
e=c[k++],f=e.open,h=e.close;if(b[k])return{range:a};var
g=f.length+1;return{changes:[{from:a.from,insert:f+" "},{from:a.to,insert:" "+h}],range:d.range(a.anchor+g,a.head+g)}})}else
if(l!=1&&b.some(function(a){return a})){var
i=[];for(var
a=0,j;a<b.length;a++)if(j=b[a]){var
n=c[a],h=j,f=h.open,e=h.close;i.push({from:f.pos-n.open.length,to:f.pos+f.margin},{from:e.pos-e.margin,to:e.pos+n.close.length})}return{changes:i}}return null}function
w2(C,K,m){var
b=[],D=-1,g=a(K),u;try{for(g.s();!(u=g.n()).done;){var
v=u.value,t=v.from,p=v.to,q=b.length,k=1e9;for(var
l=t;l<=p;){var
c=m.doc.lineAt(l);if(c.from>D&&(t==p||p>c.from)){D=c.from;var
j=hM(m,l).line;if(!j)continue;var
d=/^\s*/.exec(c.text)[0].length,F=d==c.length,E=c.text.slice(d,d+j.length)==j?d:-1;if(d<c.text.length&&d<k)k=d;b.push({line:c,comment:E,token:j,indent:d,empty:F,single:false})}l=c.to+1}if(k<1e9)for(var
e=q;e<b.length;e++)if(b[e].indent<b[e].line.text.length)b[e].indent=k;if(b.length==q+1)b[q].single=true}}catch(a){g.e(a)}finally{g.f()}if(C!=2&&b.some(function(a){return a.comment<0&&(!a.empty||a.single)})){var
z=[],h=a(b),w;try{for(h.s();!(w=h.n()).done;){var
f=w.value,J=f.line,M=f.token,I=f.indent,H=f.empty,L=f.single;if(L||!H)z.push({from:J.from+I,insert:M+" "})}}catch(a){h.e(a)}finally{h.f()}var
y=m.changes(z);return{changes:y,selection:m.selection.map(y,1)}}else
if(C!=1&&b.some(function(a){return a.comment>=0})){var
s=[],i=a(b),x;try{for(i.s();!(x=i.n()).done;){var
o=x.value,n=o.line,A=o.comment,G=o.token;if(A>=0){var
B=n.from+A,r=B+G.length;if(n.text[r-n.from]==" ")r++;s.push({from:B,to:r})}}}catch(a){i.e(a)}finally{i.f()}return{changes:s}}return null}var
fR=2e3;function
BG(e,a,b){var
m=Math.min(a.line,b.line),j=Math.max(a.line,b.line),i=[];if(a.off>fR||b.off>fR||a.col<0||b.col<0){var
q=Math.min(a.off,b.off),k=Math.max(a.off,b.off);for(var
f=m;f<=j;f++){var
h=e.doc.line(f);if(h.length<=k)i.push(d.range(h.from+q,h.to+k))}}else{var
p=Math.min(a.col,b.col),o=Math.max(a.col,b.col);for(var
g=m;g<=j;g++){var
c=e.doc.line(g),l=bO(c.text,p,e.tabSize,true);if(l>-1){var
n=bO(c.text,o,e.tabSize);i.push(d.range(c.from+l,c.from+n))}}}return i}function
vY(a,c){var
b=a.coordsAtPos(a.viewport.from);return b?Math.round(Math.abs((b.left-c)/a.defaultCharacterWidth)):-1}function
oM(b,c){var
e=b.posAtCoords({x:c.clientX,y:c.clientY},false),a=b.state.doc.lineAt(e),d=e-a.from,f=d>fR?-1:d==a.length?vY(b,c.clientX):cP(a.text,b.state.tabSize,e-a.from);return{line:a.number,col:f,off:d}}function
BH(b,e){var
a=oM(b,e),c=b.state.selection;if(!a)return null;return{update:function(b){if(b.docChanged){var
e=b.changes.mapPos(b.startState.doc.line(a.line).from),d=b.state.doc.lineAt(e);a={line:d.number,col:a.col,off:Math.min(a.off,d.length)};c=c.map(b.changes)}},get:function(g,i,h){var
f=oM(b,g);if(!f)return c;var
e=BG(b.state,a,f);if(!e.length)return c;return h?d.create(e.concat(c.ranges)):d.create(e)}}}function
BI(a){var
c=(a===null||a===void
0?void
0:a.eventFilter)||function(a){return a.altKey&&a.button==0};return v.mouseSelectionStyle.of(function(b,a){return c(a)?BH(b,a):null})}var
A9=0,bu=function(){function
e(d,a,c){b(this,e);this.set=d;this.base=a;this.modified=c;this.id=A9++}c(e,null,[{key:"define",value:function(b){if(b===null||b===void
0?void
0:b.base)throw new
Error("Can not derive from a modified tag");var
d=new
e([],null,[]);d.set.push(d);if(b){var
c=a(b.set),f;try{for(c.s();!(f=c.n()).done;){var
g=f.value;d.set.push(g)}}catch(a){c.e(a)}finally{c.f()}}return d}},{key:"defineModifier",value:function(){var
b=new
ke();return function(a){if(a.modified.indexOf(b)>-1)return a;return ke.get(a.base||a,a.modified.concat(b).sort(function(a,b){return a.id-b.id}))}}}]);return e}(),A2=0,ke=function(){function
g(){b(this,g);this.instances=[];this.id=A2++}c(g,null,[{key:"get",value:function(f,b){if(!b.length)return f;var
k=b[0].instances.find(function(a){return a.base==f&&B0(b,a.modified)});if(k)return k;var
l=[],m=new
bu(l,f,b),c=a(b),h;try{for(c.s();!(h=c.n()).done;){var
p=h.value;p.instances.push(m)}}catch(a){c.e(a)}finally{c.f()}var
o=qV(b),d=a(f.set),i;try{for(d.s();!(i=d.n()).done;){var
q=i.value,e=a(o),j;try{for(e.s();!(j=e.n()).done;){var
n=j.value;l.push(g.get(q,n))}}catch(a){e.e(a)}finally{e.f()}}}catch(a){d.e(a)}finally{d.f()}return m}}]);return g}();function
B0(a,b){return a.length==b.length&&a.every(function(c,a){return c==b[a]})}function
qV(d){var
f=[d];for(var
b=0;b<d.length;b++){var
c=a(qV(d.slice(0,b).concat(d.slice(b+1)))),e;try{for(c.s();!(e=c.n()).done;){var
g=e.value;f.push(g)}}catch(a){c.e(a)}finally{c.f()}}return f}function
CG(p){var
h=Object.create(null);for(var
o
in
p){var
g=p[o];if(!Array.isArray(g))g=[g];var
e=a(o.split(" ")),m;try{for(e.s();!(m=e.n()).done;){var
b=m.value;if(b){var
f=[],k=2,l=b;for(var
c=0;;){if(l=="..."&&c>0&&c+3==b.length){k=1;break}var
d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new
RangeError("Invalid path: "+b);f.push(d[0]=="*"?null:d[0][0]=='"'?JSON.parse(d[0]):d[0]);c+=d[0].length;if(c==b.length)break;var
n=b[c++];if(c==b.length&&n=="!"){k=0;break}if(n!="/")throw new
RangeError("Invalid path: "+b);l=b.slice(c)}var
j=f.length-1,i=f[j];if(!i)throw new
RangeError("Invalid path: "+b);var
q=new
vj(g,k,j>0?f.slice(0,j):null);h[i]=q.sort(h[i])}}}catch(a){e.e(a)}finally{e.f()}}return rx.add(h)}var
rx=new
w(),hY=h.define({combine:function(a){return a.length?dL.combinedMatch(a):null}}),oc=h.define({combine:function(a){return a.length?a[0].match:null}});function
hN(a){return a.facet(hY)||a.facet(oc)}var
vj=function(){function
a(f,d,c,e){b(this,a);this.tags=f;this.mode=d;this.context=c;this.next=e}c(a,[{key:"sort",value:function(a){if(!a||a.depth<this.depth){this.next=a;return this}a.next=this.sort(a.next);return a}},{key:"depth",get:function(){return this.context?this.context.length:0}}]);return a}(),dL=function(){function
g(o,c){b(this,g);this.map=Object.create(null);var
f;function
n(b){var
a=y.newName();(f||(f=Object.create(null)))["."+a]=b;return a}this.all=typeof
c.all=="string"?c.all:c.all?n(c.all):null;var
d=a(o),k;try{for(d.s();!(k=d.n()).done;){var
i=k.value,m=(i["class"]||n(Object.assign({},i,{tag:null})))+(this.all?" "+this.all:""),j=i.tag;if(!Array.isArray(j))this.map[j.id]=m;else{var
e=a(j),l;try{for(e.s();!(l=e.n()).done;){var
p=l.value;this.map[p.id]=m}}catch(a){e.e(a)}finally{e.f()}}}}catch(a){d.e(a)}finally{d.f()}this.module=f?new
y(f):null;this.scope=c.scope||null;this.match=this.match.bind(this);var
h=[CV];if(this.module)h.push(v.styleModule.of(this.module));this.extension=h.concat(hY.of(this));this.fallback=h.concat(oc.of(this))}c(g,[{key:"match",value:function
c(d,g){if(this.scope&&g!=this.scope)return null;var
b=a(d.set),e;try{for(b.s();!(e=b.n()).done;){var
f=e.value,c=this.map[f.id];if(c!==void
0){if(f!=d)this.map[d.id]=c;return c}}}catch(a){b.e(a)}finally{b.f()}return this.map[d.id]=this.all}}],[{key:"combinedMatch",value:function(e){if(e.length==1)return e[0].match;var
d=e.some(function(a){return a.scope})?void
0:Object.create(null);return function(f,j){var
i=d&&d[f.id];if(i!==void
0)return i;var
b=null,c=a(e),h;try{for(c.s();!(h=c.n()).done;){var
k=h.value,g=k.match(f,j);if(g)b=b?b+" "+g:g}}catch(a){c.e(a)}finally{c.f()}if(d)d[f.id]=b;return b}}},{key:"define",value:function(b,a){return new
g(b,a||{})}},{key:"get",value:function(c,d,b){var
a=hN(c);return a&&a(d,b||aC.none)}}]);return g}(),vv=function(){function
d(a){b(this,d);this.markCache=Object.create(null);this.tree=aq(a.state);this.decorations=this.buildDeco(a,hN(a.state))}c(d,[{key:"update",value:function(a){var
b=aq(a.state),c=hN(a.state),d=c!=a.startState.facet(hY);if(b.length<a.view.viewport.to&&!d&&b.type==this.tree.type)this.decorations=this.decorations.map(a.changes);else
if(b!=this.tree||a.viewportChanged||d){this.tree=b;this.decorations=this.buildDeco(a.view,c)}}},{key:"buildDeco",value:function(j,g){var
e=this;if(!g||!this.tree.length)return s.none;var
f=new
cb(),b=a(j.visibleRanges),c;try{for(b.s();!(c=b.n()).done;){var
d=c.value,h=d.from,i=d.to;zA(this.tree,h,i,g,function(b,c,a){f.add(b,c,e.markCache[a]||(e.markCache[a]=s.mark({"class":a})))})}}catch(a){b.e(a)}finally{b.f()}return f.finish()}}]);return d}(),CV=bf.high(aM.fromClass(vv,{decorations:function(a){return a.decorations}})),qN=[""],uh=function(){function
d(a,e,c){b(this,d);this.at=a;this.style=e;this.span=c;this["class"]=""}c(d,[{key:"startSpan",value:function(a,b){if(b!=this["class"]){this.flush(a);if(a>this.at)this.at=a;this["class"]=b}}},{key:"flush",value:function(a){if(a>this.at&&this["class"])this.span(this.at,a,this["class"])}},{key:"highlightRange",value:function(b,f,d,g,j,n){var
o=b.type,i=b.from,u=b.to;if(i>=d||u<=f)return;qN[j]=o.name;if(o.isTop)n=o;var
e=g,c=o.prop(rx),x=false;while(c){if(!c.context||Az(c.context,qN,j)){var
m=a(c.tags),t;try{for(m.s();!(t=m.n()).done;){var
A=t.value,s=this.style(A,n);if(s){if(e)e+=" ";e+=s;if(c.mode==1)g+=(g?" ":"")+s;else
if(c.mode==0)x=true}}}catch(a){m.e(a)}finally{m.f()}break}c=c.next}this.startSpan(b.from,e);if(x)return;var
h=b.tree&&b.tree.prop(w.mounted);if(h&&h.overlay){var
z=b.node.enter(h.overlay[0].from+i,1),v=b.firstChild();for(var
p=0,l=i;;p++){var
k=p<h.overlay.length?h.overlay[p]:null,q=k?k.from+i:u,y=Math.max(f,l),r=Math.min(d,q);if(y<r&&v)while(b.from<r){this.highlightRange(b,y,r,g,j+1,n);this.startSpan(Math.min(d,b.to),e);if(b.to>=q||!b.nextSibling())break}if(!k||q>d)break;l=k.to+i;if(l>f){this.highlightRange(z.cursor,Math.max(f,k.from+i),Math.min(d,l),g,j,h.tree.type);this.startSpan(l,e)}}if(v)b.parent()}else
if(b.firstChild()){do{if(b.to<=f)continue;if(b.from>=d)break;this.highlightRange(b,f,d,g,j+1,n);this.startSpan(Math.min(d,b.to),e)}while(b.nextSibling());b.parent()}}}]);return d}();function
zA(d,b,c,f,e){var
a=new
uh(b,f,e);a.highlightRange(d.cursor(),b,c,"",0,d.type);a.flush(c)}function
Az(b,f,e){if(b.length>e-1)return false;for(var
d=e-1,a=b.length-1;a>=0;a--,d--){var
c=b[a];if(c&&c!=f[d])return false}return true}var
i=bu.define,ej=i(),bz=i(),sw=i(bz),q5=i(bz),by=i(),fc=i(by),io=i(by),bh=i(),bR=i(bh),bj=i(),bl=i(),ip=i(),cT=i(ip),e3=i(),g={comment:ej,lineComment:i(ej),blockComment:i(ej),docComment:i(ej),name:bz,variableName:i(bz),typeName:sw,tagName:i(sw),propertyName:q5,attributeName:i(q5),className:i(bz),labelName:i(bz),namespace:i(bz),macroName:i(bz),literal:by,string:fc,docString:i(fc),character:i(fc),attributeValue:i(fc),number:io,integer:i(io),"float":i(io),bool:i(by),regexp:i(by),escape:i(by),color:i(by),url:i(by),keyword:bj,self:i(bj),"null":i(bj),atom:i(bj),unit:i(bj),modifier:i(bj),operatorKeyword:i(bj),controlKeyword:i(bj),definitionKeyword:i(bj),moduleKeyword:i(bj),operator:bl,derefOperator:i(bl),arithmeticOperator:i(bl),logicOperator:i(bl),bitwiseOperator:i(bl),compareOperator:i(bl),updateOperator:i(bl),definitionOperator:i(bl),typeOperator:i(bl),controlOperator:i(bl),punctuation:ip,separator:i(ip),bracket:cT,angleBracket:i(cT),squareBracket:i(cT),paren:i(cT),brace:i(cT),content:bh,heading:bR,heading1:i(bR),heading2:i(bR),heading3:i(bR),heading4:i(bR),heading5:i(bR),heading6:i(bR),contentSeparator:i(bh),list:i(bh),quote:i(bh),emphasis:i(bh),strong:i(bh),link:i(bh),monospace:i(bh),strikethrough:i(bh),inserted:i(),deleted:i(),changed:i(),invalid:i(),meta:e3,documentMeta:i(e3),annotation:i(e3),processingInstruction:i(e3),definition:bu.defineModifier(),constant:bu.defineModifier(),"function":bu.defineModifier(),standard:bu.defineModifier(),local:bu.defineModifier(),special:bu.defineModifier()},xP=dL.define([{tag:g.link,textDecoration:"underline"},{tag:g.heading,textDecoration:"underline",fontWeight:"bold"},{tag:g.emphasis,fontStyle:"italic"},{tag:g.strong,fontWeight:"bold"},{tag:g.strikethrough,textDecoration:"line-through"},{tag:g.keyword,color:"#708"},{tag:[g.atom,g.bool,g.url,g.contentSeparator,g.labelName],color:"#219"},{tag:[g.literal,g.inserted],color:"#164"},{tag:[g.string,g.deleted],color:"#a11"},{tag:[g.regexp,g.escape,g.special(g.string)],color:"#e40"},{tag:g.definition(g.variableName),color:"#00f"},{tag:g.local(g.variableName),color:"#30a"},{tag:[g.typeName,g.namespace],color:"#085"},{tag:g.className,color:"#167"},{tag:[g.special(g.variableName),g.macroName],color:"#256"},{tag:g.definition(g.propertyName),color:"#00c"},{tag:g.comment,color:"#940"},{tag:g.meta,color:"#7a757a"},{tag:g.invalid,color:"#f00"}]),Dm=dL.define([{tag:g.link,"class":"cmt-link"},{tag:g.heading,"class":"cmt-heading"},{tag:g.emphasis,"class":"cmt-emphasis"},{tag:g.strong,"class":"cmt-strong"},{tag:g.keyword,"class":"cmt-keyword"},{tag:g.atom,"class":"cmt-atom"},{tag:g.bool,"class":"cmt-bool"},{tag:g.url,"class":"cmt-url"},{tag:g.labelName,"class":"cmt-labelName"},{tag:g.inserted,"class":"cmt-inserted"},{tag:g.deleted,"class":"cmt-deleted"},{tag:g.literal,"class":"cmt-literal"},{tag:g.string,"class":"cmt-string"},{tag:g.number,"class":"cmt-number"},{tag:[g.regexp,g.escape,g.special(g.string)],"class":"cmt-string2"},{tag:g.variableName,"class":"cmt-variableName"},{tag:g.local(g.variableName),"class":"cmt-variableName cmt-local"},{tag:g.definition(g.variableName),"class":"cmt-variableName cmt-definition"},{tag:g.special(g.variableName),"class":"cmt-variableName2"},{tag:g.definition(g.propertyName),"class":"cmt-propertyName cmt-definition"},{tag:g.typeName,"class":"cmt-typeName"},{tag:g.namespace,"class":"cmt-namespace"},{tag:g.className,"class":"cmt-className"},{tag:g.macroName,"class":"cmt-macroName"},{tag:g.propertyName,"class":"cmt-propertyName"},{tag:g.operator,"class":"cmt-operator"},{tag:g.comment,"class":"cmt-comment"},{tag:g.meta,"class":"cmt-meta"},{tag:g.invalid,"class":"cmt-invalid"},{tag:g.punctuation,"class":"cmt-punctuation"}]),nv={};cO(nv,{closeLintPanel:function(){return gi},diagnosticCount:function(){return vF},forceLinting:function(){return vG},lintGutter:function(){return vK},lintKeymap:function(){return lg},linter:function(){return vL},nextDiagnostic:function(){return li},openLintPanel:function(){return lm},setDiagnostics:function(){return lF},setDiagnosticsEffect:function(){return ee}});var
vm=c(function
a(d,e,c){b(this,a);this.from=d;this.to=e;this.diagnostic=c}),cA=function(){function
a(c,d,e){b(this,a);this.diagnostics=c;this.panel=d;this.selected=e}c(a,null,[{key:"init",value:function(c,d,e){var
b=s.set(c.map(function(a){return a.from==a.to||a.from==a.to-1&&e.doc.lineAt(a.from).to==a.from?s.widget({widget:new
t1(a),diagnostic:a}).range(a.from):s.mark({attributes:{"class":"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)}),true);return new
a(b,d,cl(b))}}]);return a}();function
cl(d){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,c=null;d.between(a,1e9,function(e,f,d){var
a=d.spec;if(b&&a.diagnostic!=b)return;c=new
vm(e,f,a.diagnostic);return false});return c}function
qa(b,a){return b.field(as,false)?a:a.concat(j.appendConfig.of([as,v.decorations.compute([as],function(d){var
b=d.field(as),a=b.selected,c=b.panel;return!a||!c||a.from==a.to?s.none:s.set([v2.range(a.from,a.to)])}),lb(At),wi]))}function
lF(b,a){return{effects:qa(b,[ee.of(a)])}}var
ee=j.define(),iN=j.define(),qz=j.define(),as=ao.define({create:function(){return new
cA(s.none,null,null)},update:function(b,d){if(d.docChanged){var
f=b.diagnostics.map(d.changes),i=null;if(b.selected){var
h=d.changes.mapPos(b.selected.from,1);i=cl(f,b.selected.diagnostic,h)||cl(f,null,h)}b=new
cA(f,b.panel,i)}var
e=a(d.effects),g;try{for(e.s();!(g=e.n()).done;){var
c=g.value;if(c.is(ee))b=cA.init(c.value,b.panel,d.state);else
if(c.is(iN))b=new
cA(b.diagnostics,c.value?j_.open:null,b.selected);else
if(c.is(qz))b=new
cA(b.diagnostics,b.panel,c.value)}}catch(a){e.e(a)}finally{e.f()}return b},provide:function(a){return[di.from(a,function(a){return a.panel}),v.decorations.from(a,function(a){return a.diagnostics})]}});function
vF(b){var
a=b.field(as,false);return a?a.diagnostics.size:0}var
v2=s.mark({"class":"cm-lintRange cm-lintRange-active"});function
At(b,a,d){var
c=b.state.field(as),h=c.diagnostics,g=[],f=2e8,e=0;h.between(a-(d<0?1:0),a+(d>0?1:0),function(b,c,h){var
i=h.spec;if(a>=b&&a<=c&&(b==c||(a>b||d>0)&&(a<c||d<0))){g.push(i.diagnostic);f=Math.min(b,f);e=Math.max(c,e)}});if(!g.length)return null;return{pos:f,end:e,above:b.state.doc.lineAt(f).to<e,create:function(){return{dom:nq(b,g)}}}}function
nq(b,a){return I("ul",{"class":"cm-tooltip-lint"},a.map(function(a){return rj(b,a,false)}))}var
lm=function(a){var
b=a.state.field(as,false);if(!b||!b.panel)a.dispatch({effects:qa(a.state,[iN.of(true)])});var
c=c7(a,j_.open);if(c)c.dom.querySelector(".cm-panel-lint ul").focus();return true},gi=function(b){var
a=b.state.field(as,false);if(!a||!a.panel)return false;b.dispatch({effects:iN.of(false)});return true},li=function(d){var
b=d.state.field(as,false);if(!b)return false;var
c=d.state.selection.main,a=b.diagnostics.iter(c.to+1);if(!a.value){a=b.diagnostics.iter(0);if(!a.value||a.from==c.from&&a.to==c.to)return false}d.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:true});return true},lg=[{key:"Mod-Shift-m",run:lm},{key:"F8",run:li}],p5=aM.fromClass(function(){function
a(d){b(this,a);this.view=d;this.timeout=-1;this.set=true;var
e=d.state.facet(c9),c=e.delay;this.lintTime=Date.now()+c;this.run=this.run.bind(this);this.timeout=setTimeout(this.run,c)}c(a,[{key:"run",value:function(){var
a=this,b=Date.now();if(b<this.lintTime-10)setTimeout(this.run,this.lintTime-b);else{this.set=false;var
e=this.view.state,c=e.facet(c9),d=c.sources;Promise.all(d.map(function(b){return Promise.resolve(b(a.view))})).then(function(f){var
b,c,d=f.reduce(function(a,b){return a.concat(b)});if(a.view.state.doc==e.doc&&(d.length||((c=(b=a.view.state.field(as,false))===null||b===void
0?void
0:b.diagnostics)===null||c===void
0?void
0:c.size)))a.view.dispatch(lF(a.view.state,d))},function(b){aD(a.view.state,b)})}}},{key:"update",value:function(a){var
b=a.state.facet(c9);if(a.docChanged||b!=a.startState.facet(c9)){this.lintTime=Date.now()+b.delay;if(!this.set){this.set=true;this.timeout=setTimeout(this.run,b.delay)}}}},{key:"force",value:function(){if(this.set){this.lintTime=Date.now();this.run()}}},{key:"destroy",value:function(){clearTimeout(this.timeout)}}]);return a}()),c9=h.define({combine:function(a){return{sources:a.map(function(a){return a.source}),delay:a.length?Math.max.apply(Math,P(a.map(function(a){return a.delay}))):750}},enables:p5});function
vL(c){var
b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},a;return c9.of({source:c,delay:(a=b.delay)!==null&&a!==void
0?a:750})}function
vG(b){var
a=b.plugin(p5);if(a)a.force()}function
lP(f){var
c=[];if(f){var
b=a(f),e;try{actions:for(b.s();!(e=b.n()).done;){var
g=e.value.name,h=function(b){var
a=g[b];if(/[a-zA-Z]/.test(a)&&!c.some(function(b){return b.toLowerCase()==a.toLowerCase()})){c.push(a);return"continue|actions"}};for(var
d=0;d<g.length;d++){var
i=h(d);if(i==="continue|actions")continue actions}c.push("")}}catch(a){b.e(a)}finally{b.f()}}return c}function
rj(h,a,c){var
b,e=c?lP(a.actions):[];return I("li",{"class":"cm-diagnostic cm-diagnostic-"+a.severity},I("span",{"class":"cm-diagnosticText"},a.message),(b=a.actions)===null||b===void
0?void
0:b.map(function(f,d){var
g=function(c){c.preventDefault();var
b=cl(h.state.field(as).diagnostics,a);if(b)f.apply(h,b.from,b.to)},c=f.name,b=e[d]?c.indexOf(e[d]):-1,i=b<0?c:[c.slice(0,b),I("u",c.slice(b,b+1)),c.slice(b+1)];return I("button",{type:"button","class":"cm-diagnosticAction",onclick:g,onmousedown:g,"aria-label":" Action: ".concat(c).concat(b<0?"":' (access key "'.concat(e[d],')"'),".")},i)}),a.source&&I("div",{"class":"cm-diagnosticSource"},a.source))}var
t1=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.diagnostic=d;return c}c(a,[{key:"eq",value:function(a){return a.diagnostic==this.diagnostic}},{key:"toDOM",value:function(){return I("span",{"class":"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}]);return a}(bv),km=c(function
c(d,a){b(this,c);this.diagnostic=a;this.id="item_"+Math.floor(Math.random()*4294967295).toString(16);this.dom=rj(d,a,true);this.dom.id=this.id;this.dom.setAttribute("role","option")}),j_=function(){function
d(g){var
a=this;b(this,d);this.view=g;this.items=[];var
e=function(b){if(b.keyCode==27){gi(a.view);a.view.focus()}else
if(b.keyCode==38||b.keyCode==33)a.moveSelection((a.selectedIndex-1+a.items.length)%a.items.length);else
if(b.keyCode==40||b.keyCode==34)a.moveSelection((a.selectedIndex+1)%a.items.length);else
if(b.keyCode==36)a.moveSelection(0);else
if(b.keyCode==35)a.moveSelection(a.items.length-1);else
if(b.keyCode==13)a.view.focus();else
if(b.keyCode>=65&&b.keyCode<=90&&a.selectedIndex>=0){var
d=a.items[a.selectedIndex].diagnostic,f=lP(d.actions);for(var
c=0;c<f.length;c++)if(f[c].toUpperCase().charCodeAt(0)==b.keyCode){var
e=cl(a.view.state.field(as).diagnostics,d);if(e)d.actions[c].apply(g,e.from,e.to)}}else
return;b.preventDefault()},c=function(c){for(var
b=0;b<a.items.length;b++)if(a.items[b].dom.contains(c.target))a.moveSelection(b)};this.list=I("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:c});this.dom=I("div",{"class":"cm-panel-lint"},this.list,I("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function(){return gi(a.view)}},"\xD7"));this.update()}c(d,[{key:"selectedIndex",get:function(){var
b=this.view.state.field(as).selected;if(!b)return-1;for(var
a=0;a<this.items.length;a++)if(this.items[a].diagnostic==b.diagnostic)return a;return-1}},{key:"update",value:function(){var
b=this,a=this.view.state.field(as),d=a.diagnostics,i=a.selected,c=0,e=false,g=null;d.between(0,this.view.state.doc.length,function(l,k,j){var
h=j.spec,d=-1,a;for(var
f=c;f<b.items.length;f++)if(b.items[f].diagnostic==h.diagnostic){d=f;break}if(d<0){a=new
km(b.view,h.diagnostic);b.items.splice(c,0,a);e=true}else{a=b.items[d];if(d>c){b.items.splice(c,d-c);e=true}}if(i&&a.diagnostic==i.diagnostic){if(!a.dom.hasAttribute("aria-selected")){a.dom.setAttribute("aria-selected","true");g=a}}else
if(a.dom.hasAttribute("aria-selected"))a.dom.removeAttribute("aria-selected");c++});while(c<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0)){e=true;this.items.pop()}if(this.items.length==0){this.items.push(new
km(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")}));e=true}if(g){this.list.setAttribute("aria-activedescendant",g.id);this.view.requestMeasure({key:this,read:function(){return{sel:g.dom.getBoundingClientRect(),panel:b.list.getBoundingClientRect()}},write:function(d){var
c=d.sel,a=d.panel;if(c.top<a.top)b.list.scrollTop-=a.top-c.top;else
if(c.bottom>a.bottom)b.list.scrollTop+=c.bottom-a.bottom}})}else
if(this.selectedIndex<0)this.list.removeAttribute("aria-activedescendant");if(e)this.sync()}},{key:"sync",value:function(){var
b=this.list.firstChild;function
f(){var
a=b;b=a.nextSibling;a.remove()}var
c=a(this.items),e;try{for(c.s();!(e=c.n()).done;){var
d=e.value;if(d.dom.parentNode==this.list){while(b!=d.dom)f();b=d.dom.nextSibling}else
this.list.insertBefore(d.dom,b)}}catch(a){c.e(a)}finally{c.f()}while(b)f()}},{key:"moveSelection",value:function(c){if(this.selectedIndex<0)return;var
b=this.view.state.field(as),a=cl(b.diagnostics,this.items[c].diagnostic);if(!a)return;this.view.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:true,effects:qz.of(a)})}}],[{key:"open",value:function(a){return new
d(a)}}]);return d}();function
fd(b){var
a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'viewBox="0 0 40 40"';return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(a,">").concat(encodeURIComponent(b),"<\/svg>')")}function
iR(a){return fd('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(a,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}var
wi=v.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:0.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:iR("#d11")},".cm-lintRange-warning":{backgroundImage:iR("orange")},".cm-lintRange-info":{backgroundImage:iR("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),uv=function(d){f(a,d);var
g=e(a);function
a(d){var
c;b(this,a);c=g.call(this);c.diagnostics=d;c.severity=d.reduce(function(b,c){var
a=c.severity;return a=="error"||a=="warning"&&b=="info"?a:b},"info");return c}c(a,[{key:"toDOM",value:function(c){var
b=this,a=document.createElement("div");a.className="cm-lint-marker cm-lint-marker-"+this.severity;a.onmouseover=function(){return zc(c,a,b.diagnostics)};return a}}]);return a}(a4);function
CT(d,f){var
a=function
e(a){var
c=f.getBoundingClientRect();if(a.clientX>c.left-10&&a.clientX<c.right+10&&a.clientY>c.top-10&&a.clientY<c.bottom+10)return;for(var
b=a.target;b;b=b.parentNode)if(b.nodeType==1&&b.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",e);if(d.state.field(p4))d.dispatch({effects:iD.of(null)})};window.addEventListener("mousemove",a)}function
zc(b,a,f){function
d(){var
c=b.visualLineAtHeight(a.getBoundingClientRect().top+5),d=b.coordsAtPos(c.from),e=a.getBoundingClientRect();if(d)b.dispatch({effects:iD.of({pos:c.from,above:false,create:function(){return{dom:nq(b,f),offset:{x:e.left-d.left,y:0}}}})});a.onmouseout=a.onmousemove=null;CT(b,a)}var
c=setTimeout(d,600);a.onmouseout=function(){clearTimeout(c);a.onmouseout=a.onmousemove=null};a.onmousemove=function(){clearTimeout(c);c=setTimeout(d,600)}}function
Ay(j,i){var
c=Object.create(null),b=a(i),e;try{for(b.s();!(e=b.n()).done;){var
f=e.value,d=j.lineAt(f.from);(c[d.from]||(c[d.from]=[])).push(f)}}catch(a){b.e(a)}finally{b.f()}var
h=[];for(var
g
in
c)h.push(new
uv(c[g]).range(+g));return k.of(h,true)}var
Ar=oN({"class":"cm-gutter-lint",markers:function(a){return a.state.field(p3)}}),p3=ao.define({create:function(){return k.empty},update:function(c,d){c=c.map(d.changes);var
b=a(d.effects),e;try{for(b.s();!(e=b.n()).done;){var
f=e.value;if(f.is(ee))c=Ay(d.state.doc,f.value)}}catch(a){b.e(a)}finally{b.f()}return c}}),iD=j.define(),p4=ao.define({create:function(){return null},update:function(a,b){if(a&&b.docChanged)a=Object.assign(Object.assign({},a),{pos:b.changes.mapPos(a.pos)});return b.effects.reduce(function(b,a){return a.is(iD)?a.value:b},a)},provide:function(a){return cR.from(a)}}),As=v.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:"0 .2em",display:"flex",flexDirection:"column",justifyContent:"center"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:fd('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:fd('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:fd('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}});function
vK(){return[p3,Ar,As,p4]}var
ww=[Al(),zx(),zz(),zB(),yJ(),x6(),u.allowMultipleSelections.of(true),zN(),xP.fallback,wC(),w8(),k6(),BI(),zw(),zy(),eW.of([].concat(w9,P(xQ),B$,zC,yL,w_,gj,lg))],nw={};cO(nw,{oneDark:function(){return vO},oneDarkHighlightStyle:function(){return lk},oneDarkTheme:function(){return ll}});var
wZ="#e5c07b",mU="#e06c75",xF="#56b6c2",zU="#ffffff",eV="#abb2bf",iL="#7d8799",Aw="#61afef",BY="#98c379",sO="#d19a66",C0="#c678dd",xG="#21252b",hX="#2c313a",lU="#282c34",iP="#353a42",Co="#3E4451",mW="#528bff",ll=v.theme({"&":{color:eV,backgroundColor:lU},".cm-content":{caretColor:mW},"&.cm-focused .cm-cursor":{borderLeftColor:mW},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Co},".cm-panels":{backgroundColor:xG,color:eV},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:hX},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:lU,color:iL,border:"none"},".cm-activeLineGutter":{backgroundColor:hX},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:iP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:iP,borderBottomColor:iP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hX,color:eV}}},{dark:true}),lk=dL.define([{tag:g.keyword,color:C0},{tag:[g.name,g.deleted,g.character,g.propertyName,g.macroName],color:mU},{tag:[g["function"](g.variableName),g.labelName],color:Aw},{tag:[g.color,g.constant(g.name),g.standard(g.name)],color:sO},{tag:[g.definition(g.name),g.separator],color:eV},{tag:[g.typeName,g.className,g.number,g.changed,g.annotation,g.modifier,g.self,g.namespace],color:wZ},{tag:[g.operator,g.operatorKeyword,g.url,g.escape,g.regexp,g.link,g.special(g.string)],color:xF},{tag:[g.meta,g.comment],color:iL},{tag:g.strong,fontWeight:"bold"},{tag:g.emphasis,fontStyle:"italic"},{tag:g.strikethrough,textDecoration:"line-through"},{tag:g.link,color:iL,textDecoration:"underline"},{tag:g.heading,fontWeight:"bold",color:mU},{tag:[g.atom,g.bool,g.special(g.variableName)],color:sO},{tag:[g.processingInstruction,g.string,g.inserted],color:BY},{tag:g.invalid,color:zU}]),vO=[ll,lk],nx={};cO(nx,{StreamLanguage:function(){return vz},StringStream:function(){return gh}});function
mV(d,a,e){var
f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,g=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(a==null){a=d.search(/[^\s\u00a0]/);if(a==-1)a=d.length}var
b=g;for(var
c=f;c<a;c++)if(d.charCodeAt(c)==9)b+=e-b%e;else
b++;return b}var
gh=function(){function
a(d,e,c){b(this,a);this.string=d;this.tabSize=e;this.indentUnit=c;this.pos=0;this.start=0;this.lastColumnPos=0;this.lastColumnValue=0}c(a,[{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return this.pos==0}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void
0}},{key:"next",value:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(b){var
a=this.string.charAt(this.pos),c;if(typeof
b=="string")c=a==b;else
c=a&&(b
instanceof
RegExp?b.test(a):b(a));if(c){++this.pos;return a}}},{key:"eatWhile",value:function(a){var
b=this.pos;while(this.eat(a));return this.pos>b}},{key:"eatSpace",value:function(){var
a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},{key:"skipTo",value:function(b){var
a=this.string.indexOf(b,this.pos);if(a>-1){this.pos=a;return true}}},{key:"backUp",value:function(a){this.pos-=a}},{key:"column",value:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=mV(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue}},{key:"indentation",value:function(){return mV(this.string,null,this.tabSize)}},{key:"match",value:function
a(b,d,e){if(typeof
b=="string"){var
c=function(a){return e?a.toLowerCase():a},f=this.string.substr(this.pos,b.length);if(c(f)==c(b)){if(d!==false)this.pos+=b.length;return true}else
return null}else{var
a=this.string.slice(this.pos).match(b);if(a&&a.index>0)return null;if(a&&d!==false)this.pos+=a[0].length;return a}}},{key:"current",value:function(){return this.string.slice(this.start,this.pos)}}]);return a}();function
yP(a){return{token:a.token,blankLine:a.blankLine||function(){},startState:a.startState||function(){return true},copyState:a.copyState||xN,indent:a.indent||function(){return null},languageData:a.languageData||{}}}function
xN(a){if(bW(a)!="object")return a;var
c={};for(var
d
in
a){var
b=a[d];c[d]=b
instanceof
Array?b.slice():b}return c}var
vz=function(a){f(d,a);var
l=e(d);function
d(h){var
a;b(this,d);var
g=xU(h.languageData),k=yP(h),i,j=new(function(d){f(a,d);var
g=e(a);function
a(){b(this,a);return g.apply(this,arguments)}c(a,[{key:"createParse",value:function(b,a,c){return new
u7(i,b,a,c)}}]);return a}(kn))();a=l.call(this,g,j,x0(g),[oY.of(function(b,c){return a.getIndent(b,c)})]);i=aQ(a);a.streamParser=k;a.stateAfter=new
w({perNode:true});return a}c(d,[{key:"getIndent",value:function(a,b){var
j=aq(a.state),c=j.resolve(b);while(c&&c.type!=this.topNode)c=c.parent;if(!c)return null;var
g=hD(this,j,0,c.from,b),d,f;if(g){f=g.state;d=g.pos+1}else{f=this.streamParser.startState(a.unit);d=0}if(b-d>1e4)return null;while(d<b){var
e=a.state.doc.lineAt(d),h=Math.min(b,e.to);if(e.length){var
i=new
gh(e.text,a.state.tabSize,a.unit);while(i.pos<h-e.from)rh(this.streamParser.token,i,f)}else
this.streamParser.blankLine(f,a.unit);if(h==b)break;d=e.to+1}var
k=a.state.doc.lineAt(b),l=k.text;return this.streamParser.indent(f,/^\s*(.*)/.exec(l)[1],a)}},{key:"allowsNesting",get:function(){return false}}],[{key:"define",value:function(a){return new
d(a)}}]);return d}(bd);function
hD(e,a,c,i,d){var
j=c>=i&&c+a.length<=d&&a.prop(e.stateAfter);if(j)return{state:e.streamParser.copyState(j),pos:c+a.length};for(var
b=a.children.length-1;b>=0;b--){var
f=a.children[b],h=c+a.positions[b],g=f
instanceof
S&&h<d&&hD(e,f,h,i,d);if(g)return g}return null}function
ne(i,a,f,g,c){if(c&&f<=0&&g>=a.length)return a;if(!c&&a.type==i.topNode)c=true;for(var
b=a.children.length-1;b>=0;b--){var
e=a.positions[b]+f,h=a.children[b],d=void
0;if(e<g&&h
instanceof
S){if(!(d=ne(i,h,f-e,g-e,c)))break;return!c?d:new
S(a.type,a.children.slice(0,b).concat(d),a.positions.slice(0,b+1),e+d.length)}}return null}function
yE(f,k,d,h){var
c=a(k),g;try{for(c.s();!(g=c.n()).done;){var
b=g.value,l=b.from+(b.openStart?25:0),i=b.to-(b.openEnd?25:0),e=l<=d&&i>d&&hD(f,b.tree,0-b.offset,d,i),j=void
0;if(e&&(j=ne(f,b.tree,d+b.offset,e.pos+b.offset,false)))return{state:e.state,tree:j}}}catch(a){c.e(a)}finally{c.f()}return{state:f.streamParser.startState(h?bQ(h):4),tree:S.empty}}var
u7=function(){function
e(i,j,g,c){b(this,e);this.lang=i;this.input=j;this.fragments=g;this.ranges=c;this.stoppedAt=null;this.chunks=[];this.chunkPos=[];this.chunk=[];this.chunkReused=void
0;this.rangeIndex=0;this.to=c[c.length-1].to;var
a=fU.get(),h=c[0].from,f=yE(i,g,h,a===null||a===void
0?void
0:a.state),k=f.state,d=f.tree;this.state=k;this.parsedPos=this.chunkStart=h+d.length;if(d.length){this.chunks.push(d);this.chunkPos.push(0)}if(a&&this.parsedPos<a.viewport.from-1e5){this.state=this.lang.streamParser.startState(bQ(a.state));a.skipUntilInView(this.parsedPos,a.viewport.from);this.parsedPos=a.viewport.from}}c(e,[{key:"advance",value:function(){var
a=fU.get(),c=this.stoppedAt==null?this.to:this.stoppedAt,b=Math.min(c,this.chunkStart+2048);if(a)b=Math.min(b,a.viewport.to);while(this.parsedPos<b)this.parseLine(a);if(this.chunkStart<this.parsedPos)this.finishChunk();if(this.parsedPos>=c)return this.finish();if(a&&this.parsedPos>a.viewport.to){a.skipUntilInView(this.parsedPos,c);return this.finish()}return null}},{key:"stopAt",value:function(a){this.stoppedAt=a}},{key:"lineAfter",value:function(b){var
a=this.input.chunk(b);if(!this.input.lineChunks){var
c=a.indexOf("\n");if(c>-1)a=a.slice(0,c)}else
if(a=="\n")a="";return b+a.length<=this.to?a:a.slice(0,this.to-b)}},{key:"nextLine",value:function(){var
e=this.parsedPos,a=this.lineAfter(e),b=e+a.length;for(var
c=this.rangeIndex;;){var
f=this.ranges[c].to;if(f>=b)break;a=a.slice(0,f-(b-a.length));c++;if(c==this.ranges.length)break;var
g=this.ranges[c].from,d=this.lineAfter(g);a+=d;b=g+d.length}return{line:a,end:b}}},{key:"skipGapsTo",value:function(d,b,e){for(;;){var
a=this.ranges[this.rangeIndex].to,c=d+b;if(e>0?a>c:a>=c)break;var
f=this.ranges[++this.rangeIndex].from;b+=f-a}return b}},{key:"emitToken",value:function(e,b,c,d,a){if(this.ranges.length>1){a=this.skipGapsTo(b,a,1);b+=a;var
f=this.chunk.length;a=this.skipGapsTo(c,a,-1);c+=a;d+=this.chunk.length-f}this.chunk.push(e,b,c,d);return a}},{key:"parseLine",value:function(b){var
c=this.nextLine(),h=c.line,g=c.end,d=0,e=this.lang.streamParser,a=new
gh(h,b?b.state.tabSize:4,b?bQ(b.state):2);if(a.eol())e.blankLine(this.state,a.indentUnit);else
while(!a.eol()){var
f=rh(e.token,a,this.state);if(f)d=this.emitToken(sn(f),this.parsedPos+a.start,this.parsedPos+a.pos,4,d)}this.parsedPos=g;if(this.parsedPos<this.to)this.parsedPos++}},{key:"finishChunk",value:function(){var
a=S.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Bf,topID:0,maxBufferLength:2048,reused:this.chunkReused});a=new
S(a.type,a.children,a.positions,a.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]);this.chunks.push(a);this.chunkPos.push(this.chunkStart-this.ranges[0].from);this.chunk=[];this.chunkReused=void
0;this.chunkStart=this.parsedPos}},{key:"finish",value:function(){return new
S(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}]);return e}();function
rh(e,a,d){a.start=a.pos;for(var
b=0;b<10;b++){var
c=e(a,d);if(a.pos>a.start)return c}throw new
Error("Stream parser failed to advance stream.")}var
iO=Object.create(null),dv=[aC.none],Bf=new
u6(dv),sI=[];function
sn(a){return!a?0:iO[a]||(iO[a]=xv(a))}for(var
go=0,k4=[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]];go<k4.length;go++){var
k5=bn(k4[go],2),Ah=k5[0],A1=k5[1];iO[Ah]=sn(A1)}function
i7(a,b){if(sI.indexOf(a)>-1)return;sI.push(a);console.warn(b)}function
xv(i){var
c=null,d=a(i.split(".")),f;try{for(d.s();!(f=d.n()).done;){var
b=f.value,e=g[b];if(!e)i7(b,"Unknown highlighting tag ".concat(b));else
if(typeof
e=="function")if(!c)i7(b,"Modifier ".concat(b," used at start of tag"));else
c=e(c);else
if(c)i7(b,"Tag ".concat(b," used as modifier"));else
c=e}}catch(a){d.e(a)}finally{d.f()}if(!c)return 0;var
h=i.replace(/ /g,"_"),j=aC.define({id:dv.length,name:h,props:[CG(Dh({},h,c))]});dv.push(j);return j.id}function
x0(b){var
a=aC.define({id:dv.length,name:"Document",props:[eX.add(function(){return b})]});dv.push(a);return a}function
ie(d){var
e={"as":"keyword","do":"keyword","else":"keyword","end":"keyword","exception":"keyword","fun":"keyword","functor":"keyword","if":"keyword","in":"keyword","include":"keyword","let":"keyword","of":"keyword","open":"keyword","rec":"keyword","struct":"keyword","then":"keyword","type":"keyword","val":"keyword","while":"keyword","with":"keyword"},b=d.extraWords||{};for(var
a
in
b)if(b.hasOwnProperty(a))e[a]=d.extraWords[a];var
f=[];for(var
g
in
e)f.push(g);function
c(a,c){var
b=a.next();if(b==='"'){c.tokenize=j;return c.tokenize(a,c)}if(b==="{")if(a.eat("|")){c.longString=true;c.tokenize=i;return c.tokenize(a,c)}if(b==="(")if(a.eat("*")){c.commentLevel++;c.tokenize=h;return c.tokenize(a,c)}if(b==="~"||b==="?"){a.eatWhile(/\w/);return"variableName.special"}if(b==="`"){a.eatWhile(/\w/);return"quote"}if(b==="/"&&d.slashComments&&a.eat("/")){a.skipToEnd();return"comment"}if(/\d/.test(b)){if(b==="0"&&a.eat(/[bB]/))a.eatWhile(/[01]/);if(b==="0"&&a.eat(/[xX]/))a.eatWhile(/[0-9a-fA-F]/);if(b==="0"&&a.eat(/[oO]/))a.eatWhile(/[0-7]/);else{a.eatWhile(/[\d_]/);if(a.eat("."))a.eatWhile(/[\d]/);if(a.eat(/[eE]/))a.eatWhile(/[\d\-+]/)}return"number"}if(/[+\-*&%=<>!?|@\.~:]/.test(b))return"operator";if(/[\w\xa1-\uffff]/.test(b)){a.eatWhile(/[\w\xa1-\uffff]/);var
f=a.current();return e.hasOwnProperty(f)?e[f]:"variable"}return null}function
j(f,e){var
b,d=false,a=false;while((b=f.next())!=null){if(b==='"'&&!a){d=true;break}a=!a&&b==="\\"}if(d&&!a)e.tokenize=c;return"string"}function
h(e,a){var
d,b;while(a.commentLevel>0&&(b=e.next())!=null){if(d==="("&&b==="*")a.commentLevel++;if(d==="*"&&b===")")a.commentLevel--;d=b}if(a.commentLevel<=0)a.tokenize=c;return"comment"}function
i(e,a){var
d,b;while(a.longString&&(b=e.next())!=null){if(d==="|"&&b==="}")a.longString=false;d=b}if(!a.longString)a.tokenize=c;return"string"}return{startState:function(){return{tokenize:c,commentLevel:0,longString:false}},token:function(b,a){if(b.eatSpace())return null;return a.tokenize(b,a)},languageData:{autocomplete:f,commentTokens:{line:d.slashComments?"//":void
0,block:{open:"(*",close:"*)"}}}}}var
Bt=ie({extraWords:{"and":"keyword","assert":"keyword","begin":"keyword","class":"keyword","constraint":"keyword","done":"keyword","downto":"keyword","external":"keyword","function":"keyword","initializer":"keyword","lazy":"keyword","match":"keyword","method":"keyword","module":"keyword","mutable":"keyword","new":"keyword","nonrec":"keyword","object":"keyword","private":"keyword","sig":"keyword","to":"keyword","try":"keyword","value":"keyword","virtual":"keyword","when":"keyword","raise":"builtin","failwith":"builtin","true":"builtin","false":"builtin","asr":"builtin","land":"builtin","lor":"builtin","lsl":"builtin","lsr":"builtin","lxor":"builtin","mod":"builtin","or":"builtin","raise_notrace":"builtin","trace":"builtin","exit":"builtin","print_string":"builtin","print_endline":"builtin","int":"type","float":"type","bool":"type","char":"type","string":"type","unit":"type","List":"builtin"}}),Dq=ie({extraWords:{"abstract":"keyword","assert":"keyword","base":"keyword","begin":"keyword","class":"keyword","default":"keyword","delegate":"keyword","do!":"keyword","done":"keyword","downcast":"keyword","downto":"keyword","elif":"keyword","extern":"keyword","finally":"keyword","for":"keyword","function":"keyword","global":"keyword","inherit":"keyword","inline":"keyword","interface":"keyword","internal":"keyword","lazy":"keyword","let!":"keyword","match":"keyword","member":"keyword","module":"keyword","mutable":"keyword","namespace":"keyword","new":"keyword","null":"keyword","override":"keyword","private":"keyword","public":"keyword","return!":"keyword","return":"keyword","select":"keyword","static":"keyword","to":"keyword","try":"keyword","upcast":"keyword","use!":"keyword","use":"keyword","void":"keyword","when":"keyword","yield!":"keyword","yield":"keyword","atomic":"keyword","break":"keyword","checked":"keyword","component":"keyword","const":"keyword","constraint":"keyword","constructor":"keyword","continue":"keyword","eager":"keyword","event":"keyword","external":"keyword","fixed":"keyword","method":"keyword","mixin":"keyword","object":"keyword","parallel":"keyword","process":"keyword","protected":"keyword","pure":"keyword","sealed":"keyword","tailcall":"keyword","trait":"keyword","virtual":"keyword","volatile":"keyword","List":"builtin","Seq":"builtin","Map":"builtin","Set":"builtin","Option":"builtin","int":"builtin","string":"builtin","not":"builtin","true":"builtin","false":"builtin","raise":"builtin","failwith":"builtin"},slashComments:true}),Dr=ie({extraWords:{"abstype":"keyword","and":"keyword","andalso":"keyword","case":"keyword","datatype":"keyword","fn":"keyword","handle":"keyword","infix":"keyword","infixr":"keyword","local":"keyword","nonfix":"keyword","op":"keyword","orelse":"keyword","raise":"keyword","withtype":"keyword","eqtype":"keyword","sharing":"keyword","sig":"keyword","signature":"keyword","structure":"keyword","where":"keyword","true":"keyword","false":"keyword","int":"builtin","real":"builtin","string":"builtin","char":"builtin","bool":"builtin"},slashComments:true});bs.__CM__view=v;bs.__CM__state=u;bs.__CM__lint=nv;bs.__CM__autocomplete=nu;bs.__CM__tooltip=nt;bs.__CM__basic_setup=ww;bs.__CM__dark=nw;bs.__CM__stream_parser=nx;bs.__CM__mllike=Bt}())}(globalThis));(function(c){"use strict";var
eO="ENOTCONN",dD="ECONNREFUSED",ef="Invalid_argument",dC="EWOULDBLOCK",br='"',ee="@[",dB="function",b9=1255,eN="Fatal error: exception %s\n",aG=255,eM=0x800,cl="state",eL="EPERM",b8="jsError",V=0x8000,ed="%ni",ec=0x0A,cg=256,fg="EMFILE",dA="End_of_file",b7="Failure",eb="ENOMEM",eK="ENOSPC",am=0xff,dz="\n",bq="ENOENT",ff="message",ea="EPROTONOSUPPORT",N="0",eJ="([^/]+)",dy="ENETDOWN",d$="ENETRESET",fe="EACCES",d_="EINVAL",eI="EOVERFLOW",cf=0xf,fd=0x8495A6BE,d9="EDOM",a4=128,dw=-48,dx=0xdc00,d7="Sys_blocked_io",d8="EFBIG",fc="fd ",ce="ENOTEMPTY",dv="EBADF",q=248,u="camlinternalFormat.ml",b$="src/client/merlin_client.ml",d6="EXDEV",eH="Division_by_zero",fb=1027,du="EMLINK",fa="EINPROGRESS",dt="Sys_error",a1=0xFF,d5=246,ds="warning",d4="%u",b6="EEXIST",cd="%d",dr="Printexc.handle_uncaught_exception",d3="EHOSTUNREACH",e$="error",eF="buffer.ml",eG="EADDRNOTAVAIL",bp=127,a0=1024,d2="@{",eE="from",ck="e",dp=120,dq=103,d1=" : flags Open_rdonly and Open_wronly are not compatible",eD="ENOBUFS",dn=512,aw="-",dm=0x7ff0,e_="EAGAIN",cj=": Not a directory",d0=" : file already exists",eC=0x09,al=0xffffff,dl="0x",dY=0x40,dZ="EISCONN",e8="EDESTADDRREQ",e9="EROFS",e7="Out_of_memory",ar=254,e6="EPIPE",ci="index out of bounds",eB=100,dj="end",dk="ENODEV",dX="ENOEXEC",ez="ECONNABORTED",eA="EFAULT",e5="info",bt="_bigarr02",di="%Li",ey=" : flags Open_text and Open_binary are not compatible",dh=0x100,ew="EIO",ex="EDEADLK",e4="type",dW=", characters ",dV="EPFNOSUPPORT",X=0xffff,e3="EBUSY",e1="ENETUNREACH",e2="ENOLCK",dS="ESHUTDOWN",dT="ENOTTY",dU=12520,dR="ENXIO",e0="ERANGE",a2="Unix.Unix_error",ev="EHOSTDOWN",eZ="infinity",b5="mkdir",aZ=1000,eu="ENOTSOCK",d="",et="Stack_overflow",dQ="^",bm=": No such file or directory",dg=0x3F,es="/static/",aI=0x3f,er=-97,eq="Not_found",dP="Match_failure",bl=", ",ep="EOPNOTSUPP",bs=252,eY="EPROTOTYPE",df="ENOPROTOOPT",ax=".",aH="+",eo=349440947,eW="Marshal.from_bytes",eX="EINTR",dO="ESRCH",cc="rmdir",eV=0xf0,em="ELOOP",en="ECONNRESET",eU="ESOCKTNOSUPPORT",de="class",el="ESPIPE",dd="EADDRINUSE",dN="%li",ek=1026,eT="EALREADY",dc="ENOSYS",ej="E2BIG",eS=-32,da="Pervasives.do_at_exit",db="utf8",ak=" ",cb="Fatal error: exception ",O=0x80,c$="Undefined_recursive_module",dM=")",eR="EAFNOSUPPORT",ei="doc",b_="nan",eQ="ENFILE",c_="EISDIR",dL=0xe0,dJ="ECHILD",dK=0xdfff,eg="pos",eh="_",ch="to",dI="ETOOMANYREFS",W="/",ca="compare: functional value",eP="Assert_failure",dH="ENAMETOOLONG",c9="%i",a3=0x20,bo="ENOTDIR",dF=1073741823,dG="ETIMEDOUT",dE="EMSGSIZE",bn=250;function
lW(a){var
c=[0];while(a!==0){var
d=a[1];for(var
b=1;b<d.length;b++)c.push(d[b]);a=a[2]}return c}function
bD(c,b,a){var
e=String.fromCharCode;if(b==0&&a<=4096&&a==c.length)return e.apply(null,c);var
f=d;for(;0<a;b+=a0,a-=a0)f+=e.apply(null,c.slice(b,b+Math.min(a,a0)));return f}function
bu(b){if(c.Uint8Array)var
d=new(c.Uint8Array)(b.l);else
var
d=new
Array(b.l);var
f=b.c,e=f.length,a=0;for(;a<e;a++)d[a]=f.charCodeAt(a);for(e=b.l;a<e;a++)d[a]=0;b.c=d;b.t=4;return d}function
at(d,e,b,f,c){if(c==0)return 0;if(f==0&&(c>=b.l||b.t==2&&c>=b.c.length)){b.c=d.t==4?bD(d.c,e,c):e==0&&d.c.length==c?d.c:d.c.substr(e,c);b.t=b.c.length==b.l?0:2}else
if(b.t==2&&f==b.c.length){b.c+=d.t==4?bD(d.c,e,c):e==0&&d.c.length==c?d.c:d.c.substr(e,c);b.t=b.c.length==b.l?0:2}else{if(b.t!=4)bu(b);var
g=d.c,h=b.c;if(d.t==4)if(f<=e)for(var
a=0;a<c;a++)h[f+a]=g[e+a];else
for(var
a=c-1;a>=0;a--)h[f+a]=g[e+a];else{var
i=Math.min(c,g.length-e);for(var
a=0;a<i;a++)h[f+a]=g.charCodeAt(e+a);for(;a<c;a++)h[f+a]=0}}return 0}function
au(a){return a}function
_(a,b,c,d,e){at(au(a),b,c,d,e);return 0}function
mK(b,a){throw[0,b,a]}function
aP(b,a){if(b==0)return d;if(a.repeat)return a.repeat(b);var
e=d,c=0;for(;;){if(b&1)e+=a;b>>=1;if(b==0)return e;a+=a;c++;if(c==9)a.slice(0,1)}}function
a7(a){if(a.t==2)a.c+=aP(a.l-a.c.length,"\0");else
a.c=bD(a.c,0,a.c.length);a.t=0}function
fN(a){if(a.length<24){for(var
b=0;b<a.length;b++)if(a.charCodeAt(b)>bp)return false;return true}else
return!/[^\x00-\x7f]/.test(a)}function
cB(f){for(var
k=d,c=d,h,g,i,a,b=0,j=f.length;b<j;b++){g=f.charCodeAt(b);if(g<O){for(var
e=b+1;e<j&&(g=f.charCodeAt(e))<O;e++);if(e-b>dn){c.substr(0,1);k+=c;c=d;k+=f.slice(b,e)}else
c+=f.slice(b,e);if(e==j)break;b=e}a=1;if(++b<j&&((i=f.charCodeAt(b))&-64)==a4){h=i+(g<<6);if(g<dL){a=h-0x3080;if(a<O)a=1}else{a=2;if(++b<j&&((i=f.charCodeAt(b))&-64)==a4){h=i+(h<<6);if(g<eV){a=h-0xe2080;if(a<eM||a>=0xd7ff&&a<0xe000)a=2}else{a=3;if(++b<j&&((i=f.charCodeAt(b))&-64)==a4&&g<0xf5){a=i-0x3c82080+(h<<6);if(a<0x10000||a>0x10ffff)a=3}}}}}if(a<4){b-=a;c+="\ufffd"}else
if(a>X)c+=String.fromCharCode(0xd7c0+(a>>10),dx+(a&0x3FF));else
c+=String.fromCharCode(a);if(c.length>a0){c.substr(0,1);k+=c;c=d}}return k+c}function
Y(c,a,b){this.t=c;this.c=a;this.l=b}Y.prototype.toString=function(){switch(this.t){case
9:return this.c;default:a7(this);case
0:if(fN(this.c)){this.t=9;return this.c}this.t=8;case
8:return this.c}};Y.prototype.toUtf16=function(){var
a=this.toString();if(this.t==9)return a;return cB(a)};Y.prototype.slice=function(){var
a=this.t==4?this.c.slice():this.c;return new
Y(this.t,a,this.l)};function
fs(a){return new
Y(0,a,a.length)}function
a(a){return fs(a)}function
cx(c,b){mK(c,a(b))}var
m=[0];function
s(a){cx(m.Invalid_argument,a)}function
fp(){s(ci)}function
aa(a,b){switch(a.t&6){default:if(b>=a.c.length)return 0;case
0:return a.c.charCodeAt(b);case
4:return a.c[b]}}function
cn(b,a){if(a>>>0>=b.l)fp();return aa(b,a)}function
o(a,c,b){b&=am;if(a.t!=4){if(c==a.c.length){a.c+=String.fromCharCode(b);if(c+1==a.l)a.t=0;return 0}bu(a)}a.c[c]=b;return 0}function
$(b,a,c){if(a>>>0>=b.l)fp();return o(b,a,c)}function
av(c,a){if(c.fun)return av(c.fun,a);if(typeof
c!=="function")return c;var
b=c.length|0;if(b===0)return c.apply(null,a);var
e=a.length|0,d=b-e|0;if(d==0)return c.apply(null,a);else
if(d<0)return av(c.apply(null,a.slice(0,b)),a.slice(b));else
return function(){var
e=arguments.length==0?1:arguments.length,d=new
Array(a.length+e);for(var
b=0;b<a.length;b++)d[b]=a[b];for(var
b=0;b<arguments.length;b++)d[a.length+b]=arguments[b];return av(c,d)}}function
a6(){s(ci)}function
ab(a,b){if(b>>>0>=a.length-1)a6();return a}function
l2(a){if(isFinite(a)){if(Math.abs(a)>=2.2250738585072014e-308)return 0;if(a!=0)return 1;return 2}return isNaN(a)?4:3}function
l3(){return[0]}function
p(a){if(a<0)s("Bytes.create");return new
Y(a?2:9,d,a)}function
ao(a){a.t&6&&a7(a);return a.c}var
mU=Math.log2&&Math.log2(1.1235582092889474E+307)==1020;function
mT(a){if(mU)return Math.floor(Math.log2(a));var
b=0;if(a==0)return-Infinity;if(a>=1)while(a>=2){a/=2;b++}else
while(a<1){a*=2;b--}return b}function
cr(d){var
a=new(c.Float32Array)(1);a[0]=d;var
b=new(c.Int32Array)(a.buffer);return b[0]|0}var
fA=Math.pow(2,-24);function
fH(a){throw a}function
cy(){fH(m.Division_by_zero)}function
e(b,c,a){this.lo=b&al;this.mi=c&al;this.hi=a&X}e.prototype.caml_custom="_j";e.prototype.copy=function(){return new
e(this.lo,this.mi,this.hi)};e.prototype.ucompare=function(a){if(this.hi>a.hi)return 1;if(this.hi<a.hi)return-1;if(this.mi>a.mi)return 1;if(this.mi<a.mi)return-1;if(this.lo>a.lo)return 1;if(this.lo<a.lo)return-1;return 0};e.prototype.compare=function(a){var
b=this.hi<<16,c=a.hi<<16;if(b>c)return 1;if(b<c)return-1;if(this.mi>a.mi)return 1;if(this.mi<a.mi)return-1;if(this.lo>a.lo)return 1;if(this.lo<a.lo)return-1;return 0};e.prototype.neg=function(){var
a=-this.lo,b=-this.mi+(a>>24),c=-this.hi+(b>>24);return new
e(a,b,c)};e.prototype.add=function(a){var
b=this.lo+a.lo,c=this.mi+a.mi+(b>>24),d=this.hi+a.hi+(c>>24);return new
e(b,c,d)};e.prototype.sub=function(a){var
b=this.lo-a.lo,c=this.mi-a.mi+(b>>24),d=this.hi-a.hi+(c>>24);return new
e(b,c,d)};e.prototype.mul=function(a){var
b=this.lo*a.lo,c=(b*fA|0)+this.mi*a.lo+this.lo*a.mi,d=(c*fA|0)+this.hi*a.lo+this.mi*a.mi+this.lo*a.hi;return new
e(b,c,d)};e.prototype.isZero=function(){return(this.lo|this.mi|this.hi)==0};e.prototype.isNeg=function(){return this.hi<<16<0};e.prototype.and=function(a){return new
e(this.lo&a.lo,this.mi&a.mi,this.hi&a.hi)};e.prototype.or=function(a){return new
e(this.lo|a.lo,this.mi|a.mi,this.hi|a.hi)};e.prototype.xor=function(a){return new
e(this.lo^a.lo,this.mi^a.mi,this.hi^a.hi)};e.prototype.shift_left=function(a){a=a&63;if(a==0)return this;if(a<24)return new
e(this.lo<<a,this.mi<<a|this.lo>>24-a,this.hi<<a|this.mi>>24-a);if(a<48)return new
e(0,this.lo<<a-24,this.mi<<a-24|this.lo>>48-a);return new
e(0,0,this.lo<<a-48)};e.prototype.shift_right_unsigned=function(a){a=a&63;if(a==0)return this;if(a<24)return new
e(this.lo>>a|this.mi<<24-a,this.mi>>a|this.hi<<24-a,this.hi>>a);if(a<48)return new
e(this.mi>>a-24|this.hi<<48-a,this.hi>>a-24,0);return new
e(this.hi>>a-48,0,0)};e.prototype.shift_right=function(a){a=a&63;if(a==0)return this;var
c=this.hi<<16>>16;if(a<24)return new
e(this.lo>>a|this.mi<<24-a,this.mi>>a|c<<24-a,this.hi<<16>>a>>>16);var
b=this.hi<<16>>31;if(a<48)return new
e(this.mi>>a-24|this.hi<<48-a,this.hi<<16>>a-24>>16,b&X);return new
e(this.hi<<16>>a-32,b,b)};e.prototype.lsl1=function(){this.hi=this.hi<<1|this.mi>>23;this.mi=(this.mi<<1|this.lo>>23)&al;this.lo=this.lo<<1&al};e.prototype.lsr1=function(){this.lo=(this.lo>>>1|this.mi<<23)&al;this.mi=(this.mi>>>1|this.hi<<23)&al;this.hi=this.hi>>>1};e.prototype.udivmod=function(f){var
c=0,b=this.copy(),a=f.copy(),d=new
e(0,0,0);while(b.ucompare(a)>0){c++;a.lsl1()}while(c>=0){c--;d.lsl1();if(b.ucompare(a)>=0){d.lo++;b=b.sub(a)}a.lsr1()}return{quotient:d,modulus:b}};e.prototype.div=function(a){var
b=this;if(a.isZero())cy();var
d=b.hi^a.hi;if(b.hi&V)b=b.neg();if(a.hi&V)a=a.neg();var
c=b.udivmod(a).quotient;if(d&V)c=c.neg();return c};e.prototype.mod=function(b){var
a=this;if(b.isZero())cy();var
d=a.hi;if(a.hi&V)a=a.neg();if(b.hi&V)b=b.neg();var
c=a.udivmod(b).modulus;if(d&V)c=c.neg();return c};e.prototype.toInt=function(){return this.lo|this.mi<<24};e.prototype.toFloat=function(){return(this.hi<<16)*Math.pow(2,32)+this.mi*Math.pow(2,24)+this.lo};e.prototype.toArray=function(){return[this.hi>>8,this.hi&am,this.mi>>16,this.mi>>8&am,this.mi&am,this.lo>>16,this.lo>>8&am,this.lo&am]};e.prototype.lo32=function(){return this.lo|(this.mi&am)<<24};e.prototype.hi32=function(){return this.mi>>>8&X|this.hi<<16};function
by(b,c,a){return new
e(b,c,a)}function
bx(a){if(!isFinite(a)){if(isNaN(a))return by(1,0,dm);return a>0?by(0,0,dm):by(0,0,0xfff0)}var
f=a==0&&1/a==-Infinity?V:a>=0?0:V;if(f)a=-a;var
b=mT(a)+1023;if(b<=0){b=0;a/=Math.pow(2,-ek)}else{a/=Math.pow(2,b-fb);if(a<16){a*=2;b-=1}if(b==0)a/=2}var
d=Math.pow(2,24),c=a|0;a=(a-c)*d;var
e=a|0;a=(a-e)*d;var
g=a|0;c=c&cf|f|b<<4;return by(g,e,c)}function
a9(a){return a.toArray()}function
fo(c,b,g){c.write(32,b.dims.length);c.write(32,b.kind|b.layout<<8);if(b.caml_custom==bt)for(var
a=0;a<b.dims.length;a++)if(b.dims[a]<X)c.write(16,b.dims[a]);else{c.write(16,X);c.write(32,0);c.write(32,b.dims[a])}else
for(var
a=0;a<b.dims.length;a++)c.write(32,b.dims[a]);switch(b.kind){case
2:case
3:case
12:for(var
a=0;a<b.data.length;a++)c.write(8,b.data[a]);break;case
4:case
5:for(var
a=0;a<b.data.length;a++)c.write(16,b.data[a]);break;case
6:for(var
a=0;a<b.data.length;a++)c.write(32,b.data[a]);break;case
8:case
9:c.write(8,0);for(var
a=0;a<b.data.length;a++)c.write(32,b.data[a]);break;case
7:for(var
a=0;a<b.data.length/2;a++){var
e=a9(b.get(a));for(var
d=0;d<8;d++)c.write(8,e[d])}break;case
1:for(var
a=0;a<b.data.length;a++){var
e=a9(bx(b.get(a)));for(var
d=0;d<8;d++)c.write(8,e[d])}break;case
0:for(var
a=0;a<b.data.length;a++){var
e=cr(b.get(a));c.write(32,e)}break;case
10:for(var
a=0;a<b.data.length/2;a++){var
d=b.get(a);c.write(32,cr(d[1]));c.write(32,cr(d[2]))}break;case
11:for(var
a=0;a<b.data.length/2;a++){var
f=b.get(a),e=a9(bx(f[1]));for(var
d=0;d<8;d++)c.write(8,e[d]);var
e=a9(bx(f[2]));for(var
d=0;d<8;d++)c.write(8,e[d])}break}g[0]=(4+b.dims.length)*4;g[1]=(4+b.dims.length)*8}function
fm(a){switch(a){case
7:case
10:case
11:return 2;default:return 1}}function
lZ(d,f){var
b=c,a;switch(d){case
0:a=b.Float32Array;break;case
1:a=b.Float64Array;break;case
2:a=b.Int8Array;break;case
3:a=b.Uint8Array;break;case
4:a=b.Int16Array;break;case
5:a=b.Uint16Array;break;case
6:a=b.Int32Array;break;case
7:a=b.Int32Array;break;case
8:a=b.Int32Array;break;case
9:a=b.Int32Array;break;case
10:a=b.Float32Array;break;case
11:a=b.Float64Array;break;case
12:a=b.Uint8Array;break}if(!a)s("Bigarray.create: unsupported kind");var
e=new
a(f*fm(d));return e}function
cs(d){var
a=new(c.Int32Array)(1);a[0]=d;var
b=new(c.Float32Array)(a.buffer);return b[0]}function
aM(a){return new
e(a[7]<<0|a[6]<<8|a[5]<<16,a[4]<<0|a[3]<<8|a[2]<<16,a[1]<<0|a[0]<<8)}function
bz(d){var
f=d.lo,g=d.mi,b=d.hi,c=(b&0x7fff)>>4;if(c==2047)return(f|g|b&cf)==0?b&V?-Infinity:Infinity:NaN;var
e=Math.pow(2,-24),a=(f*e+g)*e+(b&cf);if(c>0){a+=16;a*=Math.pow(2,c-fb)}else
a*=Math.pow(2,-ek);if(b&V)a=-a;return a}function
cm(b){var
d=b.length,c=1;for(var
a=0;a<d;a++){if(b[a]<0)s("Bigarray.create: negative dimension");c=c*b[a]}return c}function
md(b,a){return new
e(b&al,b>>>24&am|(a&X)<<8,a>>>16&X)}function
ct(a){return a.hi32()}function
cu(a){return a.lo32()}var
l0=bt;function
as(c,d,b,a){this.kind=c;this.layout=d;this.dims=b;this.data=a}as.prototype.caml_custom=l0;as.prototype.offset=function(b){var
c=0;if(typeof
b==="number")b=[b];if(!(b
instanceof
Array))s("bigarray.js: invalid offset");if(this.dims.length!=b.length)s("Bigarray.get/set: bad number of dimensions");if(this.layout==0)for(var
a=0;a<this.dims.length;a++){if(b[a]<0||b[a]>=this.dims[a])a6();c=c*this.dims[a]+b[a]}else
for(var
a=this.dims.length-1;a>=0;a--){if(b[a]<1||b[a]>this.dims[a])a6();c=c*this.dims[a]+(b[a]-1)}return c};as.prototype.get=function(a){switch(this.kind){case
7:var
d=this.data[a*2+0],b=this.data[a*2+1];return md(d,b);case
10:case
11:var
e=this.data[a*2+0],c=this.data[a*2+1];return[ar,e,c];default:return this.data[a]}};as.prototype.set=function(a,b){switch(this.kind){case
7:this.data[a*2+0]=cu(b);this.data[a*2+1]=ct(b);break;case
10:case
11:this.data[a*2+0]=b[1];this.data[a*2+1]=b[2];break;default:this.data[a]=b;break}return 0};as.prototype.fill=function(b){switch(this.kind){case
7:var
c=cu(b),e=ct(b);if(c==e)this.data.fill(c);else
for(var
a=0;a<this.data.length;a++)this.data[a]=a%2==0?c:e;break;case
10:case
11:var
d=b[1],f=b[2];if(d==f)this.data.fill(d);else
for(var
a=0;a<this.data.length;a++)this.data[a]=a%2==0?d:f;break;default:this.data.fill(b);break}};as.prototype.compare=function(b,g){if(this.layout!=b.layout||this.kind!=b.kind){var
e=this.kind|this.layout<<8,f=b.kind|b.layout<<8;return f-e}if(this.dims.length!=b.dims.length)return b.dims.length-this.dims.length;for(var
a=0;a<this.dims.length;a++)if(this.dims[a]!=b.dims[a])return this.dims[a]<b.dims[a]?-1:1;switch(this.kind){case
0:case
1:case
10:case
11:var
c,d;for(var
a=0;a<this.data.length;a++){c=this.data[a];d=b.data[a];if(c<d)return-1;if(c>d)return 1;if(c!=d){if(!g)return NaN;if(c==c)return 1;if(d==d)return-1}}break;case
7:for(var
a=0;a<this.data.length;a+=2){if(this.data[a+1]<b.data[a+1])return-1;if(this.data[a+1]>b.data[a+1])return 1;if(this.data[a]>>>0<b.data[a]>>>0)return-1;if(this.data[a]>>>0>b.data[a]>>>0)return 1}break;case
2:case
3:case
4:case
5:case
6:case
8:case
9:case
12:for(var
a=0;a<this.data.length;a++){if(this.data[a]<b.data[a])return-1;if(this.data[a]>b.data[a])return 1}break}return 0};function
aJ(c,d,b,a){this.kind=c;this.layout=d;this.dims=b;this.data=a}aJ.prototype=new
as();aJ.prototype.offset=function(a){if(typeof
a!=="number")if(a
instanceof
Array&&a.length==1)a=a[0];else
s("Ml_Bigarray_c_1_1.offset");if(a<0||a>=this.dims[0])a6();return a};aJ.prototype.get=function(a){return this.data[a]};aJ.prototype.set=function(a,b){this.data[a]=b;return 0};aJ.prototype.fill=function(a){this.data.fill(a);return 0};function
fk(c,d,a,b){var
e=fm(c);if(cm(a)*e!=b.length)s("length doesn't match dims");if(d==0&&a.length==1&&e==1)return new
aJ(c,d,a,b);return new
as(c,d,a,b)}function
y(b){if(!m.Failure)m.Failure=[q,a(b7),-3];cx(m.Failure,b)}function
fl(b,v,r){var
i=b.read32s();if(i<0||i>16)y("input_value: wrong number of bigarray dimensions");var
p=b.read32s(),j=p&am,o=p>>8&1,h=[];if(r==bt)for(var
a=0;a<i;a++){var
n=b.read16u();if(n==X){var
t=b.read32u(),u=b.read32u();if(t!=0)y("input_value: bigarray dimension overflow in 32bit");n=u}h.push(n)}else
for(var
a=0;a<i;a++)h.push(b.read32u());var
d=cm(h),f=lZ(j,d),g=fk(j,o,h,f);switch(j){case
2:for(var
a=0;a<d;a++)f[a]=b.read8s();break;case
3:case
12:for(var
a=0;a<d;a++)f[a]=b.read8u();break;case
4:for(var
a=0;a<d;a++)f[a]=b.read16s();break;case
5:for(var
a=0;a<d;a++)f[a]=b.read16u();break;case
6:for(var
a=0;a<d;a++)f[a]=b.read32s();break;case
8:case
9:var
s=b.read8u();if(s)y("input_value: cannot read bigarray with 64-bit OCaml ints");for(var
a=0;a<d;a++)f[a]=b.read32s();break;case
7:var
e=new
Array(8);for(var
a=0;a<d;a++){for(var
c=0;c<8;c++)e[c]=b.read8u();var
q=aM(e);g.set(a,q)}break;case
1:var
e=new
Array(8);for(var
a=0;a<d;a++){for(var
c=0;c<8;c++)e[c]=b.read8u();var
k=bz(aM(e));g.set(a,k)}break;case
0:for(var
a=0;a<d;a++){var
k=cs(b.read32s());g.set(a,k)}break;case
10:for(var
a=0;a<d;a++){var
m=cs(b.read32s()),l=cs(b.read32s());g.set(a,[ar,m,l])}break;case
11:var
e=new
Array(8);for(var
a=0;a<d;a++){for(var
c=0;c<8;c++)e[c]=b.read8u();var
m=bz(aM(e));for(var
c=0;c<8;c++)e[c]=b.read8u();var
l=bz(aM(e));g.set(a,[ar,m,l])}break}v[0]=(4+i)*4;return fk(j,o,h,f)}function
fj(a,b,c){return a.compare(b,c)}function
fF(a,b){return Math.imul(a,b)}function
an(b,a){a=fF(a,0xcc9e2d51|0);a=a<<15|a>>>32-15;a=fF(a,0x1b873593);b^=a;b=b<<13|b>>>32-13;return(b+(b<<2)|0)+(0xe6546b64|0)|0}function
l9(a,b){a=an(a,cu(b));a=an(a,ct(b));return a}function
fz(a,b){return l9(a,bx(b))}function
fn(c){var
b=cm(c.dims),d=0;switch(c.kind){case
2:case
3:case
12:if(b>cg)b=cg;var
e=0,a=0;for(a=0;a+4<=c.data.length;a+=4){e=c.data[a+0]|c.data[a+1]<<8|c.data[a+2]<<16|c.data[a+3]<<24;d=an(d,e)}e=0;switch(b&3){case
3:e=c.data[a+2]<<16;case
2:e|=c.data[a+1]<<8;case
1:e|=c.data[a+0];d=an(d,e)}break;case
4:case
5:if(b>a4)b=a4;var
e=0,a=0;for(a=0;a+2<=c.data.length;a+=2){e=c.data[a+0]|c.data[a+1]<<16;d=an(d,e)}if((b&1)!=0)d=an(d,c.data[a]);break;case
6:if(b>64)b=64;for(var
a=0;a<b;a++)d=an(d,c.data[a]);break;case
8:case
9:if(b>64)b=64;for(var
a=0;a<b;a++)d=an(d,c.data[a]);break;case
7:if(b>32)b=32;b*=2;for(var
a=0;a<b;a++)d=an(d,c.data[a]);break;case
10:b*=2;case
0:if(b>64)b=64;for(var
a=0;a<b;a++)d=fz(d,c.data[a]);break;case
11:b*=2;case
1:if(b>32)b=32;for(var
a=0;a<b;a++)d=fz(d,c.data[a]);break}return d}function
mb(a,b){b[0]=4;return a.read32s()}function
mD(a,b){switch(a.read8u()){case
1:b[0]=4;return a.read32s();case
2:y("input_value: native integer value too large");default:y("input_value: ill-formed native integer")}}function
mm(c,d){var
b=new
Array(8);for(var
a=0;a<8;a++)b[a]=c.read8u();d[0]=8;return aM(b)}function
mi(e,d,b){var
c=a9(d);for(var
a=0;a<8;a++)e.write(8,c[a]);b[0]=8;b[1]=8}function
mc(a,b,c){return a.compare(b)}function
mf(a){return a.lo32()^a.hi32()}var
bv={"_j":{deserialize:mm,serialize:mi,fixed_length:8,compare:mc,hash:mf},"_i":{deserialize:mb,fixed_length:4},"_n":{deserialize:mD,fixed_length:4},"_bigarray":{deserialize:function(a,b){return fl(a,b,"_bigarray")},serialize:fo,compare:fj,hash:fn},"_bigarr02":{deserialize:function(a,b){return fl(a,b,bt)},serialize:fo,compare:fj,hash:fn}};function
co(a){return bv[a.caml_custom]&&bv[a.caml_custom].compare}function
fu(f,c,d,e){var
b=co(c);if(b){var
a=d>0?b(c,f,e):b(f,c,e);if(e&&a!=a)return d;if(+a!=+a)return+a;if((a|0)!=0)return a|0}return d}function
aN(a){return a
instanceof
Y}function
bA(a){return aN(a)}function
fv(a){if(typeof
a==="number")return aZ;else
if(aN(a))return bs;else
if(bA(a))return 1252;else
if(a
instanceof
Array&&a[0]===a[0]>>>0&&a[0]<=aG){var
b=a[0]|0;return b==ar?0:b}else
if(a
instanceof
String)return dU;else
if(typeof
a=="string")return dU;else
if(a
instanceof
Number)return aZ;else
if(a&&a.caml_custom)return b9;else
if(a&&a.compare)return 1256;else
if(typeof
a=="function")return 1247;else
if(typeof
a=="symbol")return 1251;return 1001}function
mn(a,b){if(a<b)return-1;if(a==b)return 0;return 1}function
fq(a,b){a.t&6&&a7(a);b.t&6&&a7(b);return a.c<b.c?-1:a.c>b.c?1:0}function
mX(a,b){return fq(a,b)}function
ft(a,b,d){var
e=[];for(;;){if(!(d&&a===b)){var
f=fv(a);if(f==bn){a=a[1];continue}var
g=fv(b);if(g==bn){b=b[1];continue}if(f!==g){if(f==aZ){if(g==b9)return fu(a,b,-1,d);return-1}if(g==aZ){if(f==b9)return fu(b,a,1,d);return 1}return f<g?-1:1}switch(f){case
247:s(ca);break;case
248:var
c=mn(a[2],b[2]);if(c!=0)return c|0;break;case
249:s(ca);break;case
250:s("equal: got Forward_tag, should not happen");break;case
251:s("equal: abstract value");break;case
252:if(a!==b){var
c=fq(a,b);if(c!=0)return c|0}break;case
253:s("equal: got Double_tag, should not happen");break;case
254:s("equal: got Double_array_tag, should not happen");break;case
255:s("equal: got Custom_tag, should not happen");break;case
1247:s(ca);break;case
1255:var
i=co(a);if(i!=co(b))return a.caml_custom<b.caml_custom?-1:1;if(!i)s("compare: abstract value");var
c=i(a,b,d);if(c!=c)return d?-1:c;if(c!==(c|0))return-1;if(c!=0)return c|0;break;case
1256:var
c=a.compare(b,d);if(c!=c)return d?-1:c;if(c!==(c|0))return-1;if(c!=0)return c|0;break;case
1000:a=+a;b=+b;if(a<b)return-1;if(a>b)return 1;if(a!=b){if(!d)return NaN;if(a==a)return 1;if(b==b)return-1}break;case
1001:if(a<b)return-1;if(a>b)return 1;if(a!=b){if(!d)return NaN;if(a==a)return 1;if(b==b)return-1}break;case
1251:if(a!==b){if(!d)return NaN;return 1}break;case
1252:var
a=ao(a),b=ao(b);if(a!==b){if(a<b)return-1;if(a>b)return 1}break;case
12520:var
a=a.toString(),b=b.toString();if(a!==b){if(a<b)return-1;if(a>b)return 1}break;case
246:case
254:default:if(a.length!=b.length)return a.length<b.length?-1:1;if(a.length>1)e.push(a,b,1);break}}if(e.length==0)return 0;var
h=e.pop();b=e.pop();a=e.pop();if(h+1<a.length)e.push(a,b,h+1);a=a[h];b=b[h]}}function
l5(a,b){return+(ft(a,b,false)==0)}function
l6(a,c,b,e){if(b>0)if(c==0&&(b>=a.l||a.t==2&&b>=a.c.length))if(e==0){a.c=d;a.t=2}else{a.c=aP(b,String.fromCharCode(e));a.t=b==a.l?0:2}else{if(a.t!=4)bu(a);for(b+=c;c<b;c++)a.c[c]=e}return 0}function
cw(d){d=ao(d);var
e=d.length;if(e>31)s("format_int: format too long");var
a={justify:aH,signstyle:aw,filler:ak,alternate:false,base:0,signedconv:false,width:0,uppercase:false,sign:1,prec:-1,conv:"f"};for(var
c=0;c<e;c++){var
b=d.charAt(c);switch(b){case"-":a.justify=aw;break;case"+":case" ":a.signstyle=b;break;case"0":a.filler=N;break;case"#":a.alternate=true;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a.width=0;while(b=d.charCodeAt(c)-48,b>=0&&b<=9){a.width=a.width*10+b;c++}c--;break;case".":a.prec=0;c++;while(b=d.charCodeAt(c)-48,b>=0&&b<=9){a.prec=a.prec*10+b;c++}c--;case"d":case"i":a.signedconv=true;case"u":a.base=10;break;case"x":a.base=16;break;case"X":a.base=16;a.uppercase=true;break;case"o":a.base=8;break;case"e":case"f":case"g":a.signedconv=true;a.conv=b;break;case"E":case"F":case"G":a.signedconv=true;a.uppercase=true;a.conv=b.toLowerCase();break}}return a}function
cp(b,g){if(b.uppercase)g=g.toUpperCase();var
f=g.length;if(b.signedconv&&(b.sign<0||b.signstyle!=aw))f++;if(b.alternate){if(b.base==8)f+=1;if(b.base==16)f+=2}var
c=d;if(b.justify==aH&&b.filler==ak)for(var
e=f;e<b.width;e++)c+=ak;if(b.signedconv)if(b.sign<0)c+=aw;else
if(b.signstyle!=aw)c+=b.signstyle;if(b.alternate&&b.base==8)c+=N;if(b.alternate&&b.base==16)c+=dl;if(b.justify==aH&&b.filler==N)for(var
e=f;e<b.width;e++)c+=N;c+=g;if(b.justify==aw)for(var
e=f;e<b.width;e++)c+=ak;return a(c)}function
cq(i,c){function
j(a,b){if(Math.abs(a)<1.0)return a.toFixed(b);else{var
c=parseInt(a.toString().split(aH)[1]);if(c>20){c-=20;a/=Math.pow(10,c);a+=new
Array(c+1).join(N);if(b>0)a=a+ax+new
Array(b+1).join(N);return a}else
return a.toFixed(b)}}var
a,e=cw(i),d=e.prec<0?6:e.prec;if(c<0||c==0&&1/c==-Infinity){e.sign=-1;c=-c}if(isNaN(c)){a=b_;e.filler=ak}else
if(!isFinite(c)){a="inf";e.filler=ak}else
switch(e.conv){case"e":var
a=c.toExponential(d),b=a.length;if(a.charAt(b-3)==ck)a=a.slice(0,b-1)+N+a.slice(b-1);break;case"f":a=j(c,d);break;case"g":d=d?d:1;a=c.toExponential(d-1);var
h=a.indexOf(ck),g=+a.slice(h+1);if(g<-4||c>=1e21||c.toFixed(0).length>d){var
b=h-1;while(a.charAt(b)==N)b--;if(a.charAt(b)==ax)b--;a=a.slice(0,b+1)+a.slice(h);b=a.length;if(a.charAt(b-3)==ck)a=a.slice(0,b-1)+N+a.slice(b-1);break}else{var
f=d;if(g<0){f-=g+1;a=c.toFixed(f)}else
while(a=c.toFixed(f),a.length>d+1)f--;if(f){var
b=a.length-1;while(a.charAt(b)==N)b--;if(a.charAt(b)==ax)b--;a=a.slice(0,b+1)}}break}return cp(e,a)}function
bw(f,c){if(ao(f)==cd)return a(d+c);var
b=cw(f);if(c<0)if(b.signedconv){b.sign=-1;c=-c}else
c>>>=0;var
e=c.toString(b.base);if(b.prec>=0){b.filler=ak;var
g=b.prec-e.length;if(g>0)e=aP(g,N)+e}return cp(b,e)}var
mF=0;function
aL(){return mF++}function
ac(a){return a.toUtf16()}function
ba(){return typeof
c.process!=="undefined"&&typeof
c.process.versions!=="undefined"&&typeof
c.process.versions.node!=="undefined"}function
mV(){function
a(a){if(a.charAt(0)===W)return[d,a.substring(1)];return}function
b(c){var
h=/^([a-zA-Z]:|[\\/]{2}[^\\/]+[\\/]+[^\\/]+)?([\\/])?([\s\S]*?)$/,a=h.exec(c),b=a[1]||d,f=Boolean(b&&b.charAt(1)!==":");if(Boolean(a[2]||f)){var
e=a[1]||d,g=a[2]||d;return[e,c.substring(e.length+g.length)]}return}return ba()&&c.process&&c.process.platform?c.process.platform==="win32"?b:a:a}var
cC=mV();function
fL(a){return a.slice(-1)!==W?a+W:a}if(ba()&&c.process&&c.process.cwd)var
a8=c.process.cwd().replace(/\\/g,W);else
var
a8="/static";a8=fL(a8);function
mt(a){a=ac(a);if(!cC(a))a=a8+a;var
e=cC(a),d=e[1].split(W),b=[];for(var
c=0;c<d.length;c++)switch(d[c]){case"..":if(b.length>1)b.pop();break;case".":break;default:b.push(d[c]);break}b.unshift(e[0]);b.orig=a;return b}function
mQ(f){for(var
g=d,b=g,a,i,c=0,h=f.length;c<h;c++){a=f.charCodeAt(c);if(a<O){for(var
e=c+1;e<h&&(a=f.charCodeAt(e))<O;e++);if(e-c>dn){b.substr(0,1);g+=b;b=d;g+=f.slice(c,e)}else
b+=f.slice(c,e);if(e==h)break;c=e}if(a<eM){b+=String.fromCharCode(0xc0|a>>6);b+=String.fromCharCode(O|a&aI)}else
if(a<0xd800||a>=dK)b+=String.fromCharCode(dL|a>>12,O|a>>6&aI,O|a&aI);else
if(a>=0xdbff||c+1==h||(i=f.charCodeAt(c+1))<dx||i>dK)b+="\xef\xbf\xbd";else{c++;a=(a<<10)+i-0x35fdc00;b+=String.fromCharCode(eV|a>>18,O|a>>12&aI,O|a>>6&aI,O|a&aI)}if(b.length>a0){b.substr(0,1);g+=b;b=d}}return g+b}function
l1(a){var
b=9;if(!fN(a))b=8,a=mQ(a);return new
Y(b,a,a.length)}function
Q(a){return l1(a)}var
mW=[ej,fe,e_,dv,e3,dJ,ex,d9,b6,eA,d8,eX,d_,ew,c_,fg,du,dH,eQ,dk,bq,dX,e2,eb,eK,dc,bo,ce,dT,dR,eL,e6,e0,e9,el,dO,d6,dC,fa,eT,eu,e8,dE,eY,df,ea,eU,ep,dV,eR,dd,eG,dy,e1,d$,ez,en,eD,dZ,eO,dS,dI,dG,dD,ev,d3,em,eI];function
aB(e,g,f,a){var
b=mW.indexOf(e);if(b<0){if(a==null)a=-9999;b=[0,a]}var
c=[b,Q(g||d),Q(f||d)];return c}var
fG={};function
ay(a){return fG[a]}function
az(b,a){throw[0,b].concat(a)}function
fr(a){return new
Y(4,a,a.length)}function
g(a){cx(m.Sys_error,a)}function
mI(a){g(a+bm)}function
H(a){return a.l}function
fh(){}function
w(a){this.data=a}w.prototype=new
fh();w.prototype.truncate=function(a){var
b=this.data;this.data=p(a|0);at(b,0,this.data,0,a)};w.prototype.length=function(){return H(this.data)};w.prototype.write=function(b,d,g,a){var
c=this.length();if(b+a>=c){var
e=p(b+a),f=this.data;this.data=e;at(f,0,this.data,0,c)}_(d,g,this.data,b,a);return 0};w.prototype.read=function(c,a,d,b){var
e=this.length();at(this.data,c,a,d,b);return 0};w.prototype.read_one=function(a){return cn(this.data,a)};w.prototype.close=function(){};w.prototype.constructor=w;function
G(b,a){this.content={};this.root=b;this.lookupFun=a}G.prototype.nm=function(a){return this.root+a};G.prototype.create_dir_if_needed=function(e){var
c=e.split(W),b=d;for(var
a=0;a<c.length-1;a++){b+=c[a]+W;if(this.content[b])continue;this.content[b]=Symbol("directory")}};G.prototype.slash=function(a){return/\/$/.test(a)?a:a+W};G.prototype.lookup=function(b){if(!this.content[b]&&this.lookupFun){var
c=this.lookupFun(a(this.root),a(b));if(c!==0){this.create_dir_if_needed(b);this.content[b]=new
w(au(c[1]))}}};G.prototype.exists=function(a){if(a==d)return 1;var
b=this.slash(a);if(this.content[b])return 1;this.lookup(a);return this.content[a]?1:0};G.prototype.mkdir=function(c,f,e){var
b=e&&ay(a2);if(this.exists(c))if(b)az(b,aB(b6,b5,this.nm(c)));else
g(c+": File exists");var
a=/^(.*)\/[^/]+/.exec(c);a=a&&a[1]||d;if(!this.exists(a))if(b)az(b,aB(bq,b5,this.nm(a)));else
g(a+bm);if(!this.is_dir(a))if(b)az(b,aB(bo,b5,this.nm(a)));else
g(a+cj);this.create_dir_if_needed(this.slash(c))};G.prototype.rmdir=function(a,h){var
b=h&&ay(a2),c=a==d?d:this.slash(a),f=new
RegExp(dQ+c+eJ);if(!this.exists(a))if(b)az(b,aB(bq,cc,this.nm(a)));else
g(a+bm);if(!this.is_dir(a))if(b)az(b,aB(bo,cc,this.nm(a)));else
g(a+cj);for(var
e
in
this.content)if(e.match(f))if(b)az(b,aB(ce,cc,this.nm(a)));else
g(this.nm(a)+": Directory not empty");delete
this.content[c]};G.prototype.readdir=function(a){var
h=a==d?d:this.slash(a);if(!this.exists(a))g(a+bm);if(!this.is_dir(a))g(a+cj);var
i=new
RegExp(dQ+h+eJ),e={},c=[];for(var
f
in
this.content){var
b=f.match(i);if(b&&!e[b[1]]){e[b[1]]=true;c.push(b[1])}}return c};G.prototype.is_dir=function(a){if(a==d)return true;var
b=this.slash(a);return this.content[b]?1:0};G.prototype.unlink=function(a){var
b=this.content[a]?true:false;delete
this.content[a];return b};G.prototype.open=function(a,b){if(b.rdonly&&b.wronly)g(this.nm(a)+d1);if(b.text&&b.binary)g(this.nm(a)+ey);this.lookup(a);if(this.content[a]){if(this.is_dir(a))g(this.nm(a)+" : is a directory");if(b.create&&b.excl)g(this.nm(a)+d0);var
c=this.content[a];if(b.truncate)c.truncate();return c}else
if(b.create){this.create_dir_if_needed(a);this.content[a]=new
w(p(0));return this.content[a]}else
mI(this.nm(a))};G.prototype.register=function(c,a){var
b;if(this.content[c])g(this.nm(c)+d0);if(aN(a))b=new
w(a);if(bA(a))b=new
w(au(a));else
if(a
instanceof
Array)b=new
w(fr(a));else
if(typeof
a==="string")b=new
w(fs(a));else
if(a.toString){var
d=au(Q(a.toString()));b=new
w(d)}if(b){this.create_dir_if_needed(c);this.content[c]=b}else
g(this.nm(c)+" : registering file with invalid content type")};G.prototype.constructor=G;function
k(a){return H(a)}function
aA(b,a){return aa(b,a)}function
lY(d){var
c=k(d),b=new
Array(c),a=0;for(;a<c;a++)b[a]=aA(d,a);return b}function
lX(a){if(a.t!=4)bu(a);return a.c}function
Z(a){this.fs=require("fs");this.fd=a}Z.prototype=new
fh();Z.prototype.truncate=function(a){try{this.fs.ftruncateSync(this.fd,a|0)}catch(a){g(a.toString())}};Z.prototype.length=function(){try{return this.fs.fstatSync(this.fd).size}catch(a){g(a.toString())}};Z.prototype.write=function(h,b,d,f){var
a=lY(b);if(!(a
instanceof
c.Uint8Array))a=new(c.Uint8Array)(a);var
e=c.Buffer.from(a);try{this.fs.writeSync(this.fd,e,d,f,h)}catch(a){g(a.toString())}return 0};Z.prototype.read=function(i,e,d,h){var
a=lX(e);if(!(a
instanceof
c.Uint8Array))a=new(c.Uint8Array)(a);var
f=c.Buffer.from(a);try{this.fs.readSync(this.fd,f,d,h,i)}catch(a){g(a.toString())}for(var
b=0;b<h;b++)$(e,d+b,f[d+b]);return 0};Z.prototype.read_one=function(d){var
b=new(c.Uint8Array)(1),a=c.Buffer.from(b);try{this.fs.readSync(this.fd,a,0,1,d)}catch(a){g(a.toString())}return a[0]};Z.prototype.close=function(){try{this.fs.closeSync(this.fd)}catch(a){g(a.toString())}};Z.prototype.constructor=Z;function
x(a){this.fs=require("fs");this.root=a}x.prototype.nm=function(a){return this.root+a};x.prototype.exists=function(a){try{return this.fs.existsSync(this.nm(a))?1:0}catch(a){return 0}};x.prototype.mkdir=function(b,a,c){try{this.fs.mkdirSync(this.nm(b),{mode:a});return 0}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.rmdir=function(a,b){try{this.fs.rmdirSync(this.nm(a));return 0}catch(a){this.raise_nodejs_error(a,b)}};x.prototype.readdir=function(a,b){try{return this.fs.readdirSync(this.nm(a))}catch(a){this.raise_nodejs_error(a,b)}};x.prototype.is_dir=function(a){try{return this.fs.statSync(this.nm(a)).isDirectory()?1:0}catch(a){g(a.toString())}};x.prototype.unlink=function(a,c){try{var
b=this.fs.existsSync(this.nm(a))?1:0;this.fs.unlinkSync(this.nm(a));return b}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.open=function(f,c,g){var
a=require("constants"),b=0;for(var
e
in
c)switch(e){case"rdonly":b|=a.O_RDONLY;break;case"wronly":b|=a.O_WRONLY;break;case"append":b|=a.O_WRONLY|a.O_APPEND;break;case"create":b|=a.O_CREAT;break;case"truncate":b|=a.O_TRUNC;break;case"excl":b|=a.O_EXCL;break;case"binary":b|=a.O_BINARY;break;case"text":b|=a.O_TEXT;break;case"nonblock":b|=a.O_NONBLOCK;break}try{var
d=this.fs.openSync(this.nm(f),b);return new
Z(d)}catch(a){this.raise_nodejs_error(a,g)}};x.prototype.rename=function(b,a,c){try{this.fs.renameSync(this.nm(b),this.nm(a))}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.stat=function(b,c){try{var
a=this.fs.statSync(this.nm(b));return this.stats_from_js(a)}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.lstat=function(b,c){try{var
a=this.fs.lstatSync(this.nm(b));return this.stats_from_js(a)}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.symlink=function(d,c,a,b){try{this.fs.symlinkSync(this.nm(c),this.nm(a),d?"dir":"file");return 0}catch(a){this.raise_nodejs_error(a,b)}};x.prototype.readlink=function(b,c){try{var
a=this.fs.readlinkSync(this.nm(b),db);return Q(a)}catch(a){this.raise_nodejs_error(a,c)}};x.prototype.raise_nodejs_error=function(a,d){var
b=ay(a2);if(d&&b){var
c=aB(a.code,a.syscall,a.path,a.errno);az(b,c)}else
g(a.toString())};x.prototype.stats_from_js=function(a){var
b;if(a.isFile())b=0;else
if(a.isDirectory())b=1;else
if(a.isCharacterDevice())b=2;else
if(a.isBlockDevice())b=3;else
if(a.isSymbolicLink())b=4;else
if(a.isFIFO())b=5;else
if(a.isSocket())b=6;return[0,a.dev,a.ino,b,a.mode,a.nlink,a.uid,a.gid,a.rdev,a.size,a.atimeMs,a.mtimeMs,a.ctimeMs]};x.prototype.constructor=x;function
fy(b){var
a=cC(b);if(!a)return;return a[0]+W}var
bC=fy(a8)||y("unable to compute caml_root"),aQ=[];if(ba())aQ.push({path:bC,device:new
x(bC)});else
aQ.push({path:bC,device:new
G(bC)});aQ.push({path:es,device:new
G(es)});function
fO(b){var
h=mt(b),b=h.join(W),f=fL(b),c;for(var
e=0;e<aQ.length;e++){var
a=aQ[e];if(f.search(a.path)==0&&(!c||c.path.length<a.path.length))c={path:a.path,device:a.device,rest:b.substring(a.path.length,b.length)}}if(!c&&ba()){var
d=fy(b);if(d&&d.match(/^[a-zA-Z]:\/$/)){var
a={path:d,device:new
x(d)};aQ.push(a);c={path:a.path,device:a.device,rest:b.substring(a.path.length,b.length)}}}if(c)return c;g("no device found for "+f)}function
l4(c,b){var
a=fO(c);if(!a.device.register)y("cannot register file");a.device.register(a.rest,b);return 0}function
fM(c,b){var
c=a(c),b=a(b);return l4(c,b)}function
l8(){var
b=c.caml_fs_tmp;if(b)for(var
a=0;a<b.length;a++)fM(b[a].name,b[a].content);c.jsoo_create_file=fM;c.caml_fs_tmp=[];return 0}function
fx(){return[0]}function
l_(a,c,l){if(!isFinite(a)){if(isNaN(a))return Q(b_);return Q(a>0?eZ:"-infinity")}var
j=a==0&&1/a==-Infinity?1:a>=0?0:1;if(j)a=-a;var
e=0;if(a==0);else
if(a<1)while(a<1&&e>-1022){a*=2;e--}else
while(a>=2){a/=2;e++}var
k=e<0?d:aH,f=d;if(j)f=aw;else
switch(l){case
43:f=aH;break;case
32:f=ak;break;default:break}if(c>=0&&c<13){var
h=Math.pow(2,c*4);a=Math.round(a*h)/h}var
b=a.toString(16);if(c>=0){var
i=b.indexOf(ax);if(i<0)b+=ax+aP(c,N);else{var
g=i+1+c;if(b.length<g)b+=aP(g-b.length,N);else
b=b.substr(0,g)}}return Q(f+dl+b+"p"+k+e.toString(10))}function
fi(b,a){this.s=ao(b);this.i=a}fi.prototype={read8u:function(){return this.s.charCodeAt(this.i++)},read8s:function(){return this.s.charCodeAt(this.i++)<<24>>24},read16u:function(){var
b=this.s,a=this.i;this.i=a+2;return b.charCodeAt(a)<<8|b.charCodeAt(a+1)},read16s:function(){var
b=this.s,a=this.i;this.i=a+2;return b.charCodeAt(a)<<24>>16|b.charCodeAt(a+1)},read32u:function(){var
b=this.s,a=this.i;this.i=a+4;return(b.charCodeAt(a)<<24|b.charCodeAt(a+1)<<16|b.charCodeAt(a+2)<<8|b.charCodeAt(a+3))>>>0},read32s:function(){var
b=this.s,a=this.i;this.i=a+4;return b.charCodeAt(a)<<24|b.charCodeAt(a+1)<<16|b.charCodeAt(a+2)<<8|b.charCodeAt(a+3)},readstr:function(c){var
b=this.i;this.i=b+c;return a(this.s.substring(b,b+c))}};function
aK(a){return bz(aM(a))}function
ma(b,g){var
n=b.read32u(),m=b.read32u(),j=b.read32u(),o=b.read32u(),p=b.read32u(),l=[],c=j>0?[]:null,i=0;function
f(){var
j=b.read8u();if(j>=dY)if(j>=O){var
p=j&0xF,k=j>>4&0x7,a=[p];if(k==0)return a;if(c)c[i++]=a;l.push(a,k);return a}else
return j&dg;else
if(j>=a3){var
f=j&0x1F,a=b.readstr(f);if(c)c[i++]=a;return a}else
switch(j){case
0x00:return b.read8s();case
0x01:return b.read16s();case
0x02:return b.read32s();case
0x03:y("input_value: integer too large");break;case
0x04:var
m=b.read8u();return c[i-m];case
0x05:var
m=b.read16u();return c[i-m];case
0x06:var
m=b.read32u();return c[i-m];case
0x08:var
r=b.read32u(),p=r&a1,k=r>>10,a=[p];if(k==0)return a;if(c)c[i++]=a;l.push(a,k);return a;case
0x13:y("input_value: data block too large");break;case
0x09:var
f=b.read8u(),a=b.readstr(f);if(c)c[i++]=a;return a;case
0x0A:var
f=b.read32u(),a=b.readstr(f);if(c)c[i++]=a;return a;case
0x0C:var
g=new
Array(8);for(var
e=0;e<8;e++)g[7-e]=b.read8u();var
a=aK(g);if(c)c[i++]=a;return a;case
0x0B:var
g=new
Array(8);for(var
e=0;e<8;e++)g[e]=b.read8u();var
a=aK(g);if(c)c[i++]=a;return a;case
0x0E:var
f=b.read8u(),a=new
Array(f+1);a[0]=ar;var
g=new
Array(8);if(c)c[i++]=a;for(var
e=1;e<=f;e++){for(var
h=0;h<8;h++)g[7-h]=b.read8u();a[e]=aK(g)}return a;case
0x0D:var
f=b.read8u(),a=new
Array(f+1);a[0]=ar;var
g=new
Array(8);if(c)c[i++]=a;for(var
e=1;e<=f;e++){for(var
h=0;h<8;h++)g[h]=b.read8u();a[e]=aK(g)}return a;case
0x07:var
f=b.read32u(),a=new
Array(f+1);a[0]=ar;if(c)c[i++]=a;var
g=new
Array(8);for(var
e=1;e<=f;e++){for(var
h=0;h<8;h++)g[7-h]=b.read8u();a[e]=aK(g)}return a;case
0x0F:var
f=b.read32u(),a=new
Array(f+1);a[0]=ar;var
g=new
Array(8);for(var
e=1;e<=f;e++){for(var
h=0;h<8;h++)g[h]=b.read8u();a[e]=aK(g)}return a;case
0x10:case
0x11:y("input_value: code pointer");break;case
0x12:case
0x18:case
0x19:var
q,s=d;while((q=b.read8u())!=0)s+=String.fromCharCode(q);var
o=bv[s],n;if(!o)y("input_value: unknown custom block identifier");switch(j){case
0x12:break;case
0x19:if(!o.fixed_length)y("input_value: expected a fixed-size custom block");n=o.fixed_length;break;case
0x18:n=b.read32u();b.read32s();b.read32s();break}var
t=b.i,k=[0],a=o.deserialize(b,k);if(n!=undefined)if(n!=k[0])y("input_value: incorrect length of serialized custom block");if(c)c[i++]=a;return a;default:y("input_value: ill-formed message")}}var
k=f();while(l.length>0){var
h=l.pop(),a=l.pop(),e=a.length;if(e<h)l.push(a,h);a[e]=f()}if(typeof
g!="number")g[0]=b.i;return k}function
D(a){return a}function
l$(c,a){var
b=new
fi(D(c),typeof
a=="number"?a:a[0]);return ma(b,a)}function
mh(a){return+a.isZero()}function
mk(a){return new
e(a&al,a>>24&al,a>>31&X)}function
ml(a){return a.toInt()}function
mg(a){return+a.isNeg()}function
mj(a){return a.neg()}function
me(h,c){var
a=cw(h);if(a.signedconv&&mg(c)){a.sign=-1;c=mj(c)}var
b=d,i=mk(a.base),g="0123456789abcdef";do{var
f=c.udivmod(i);c=f.quotient;b=g.charAt(ml(f.modulus))+b}while(!mh(c));if(a.prec>=0){a.filler=ak;var
e=a.prec-b.length;if(e>0)b=aP(e,N)+b}return cp(a,b)}function
mp(a){return a.slice(1)}function
mq(a,c,b){return a[ac(c)].apply(a,mp(b))}function
fB(c){var
d=c.length,b=new
Array(d+1);b[0]=0;for(var
a=0;a<d;a++)b[a+1]=c[a];return b}function
ms(c){var
b=0;for(var
a=c.length-1;a>=0;a--){var
d=c[a];b=[0,d,b]}return b}function
cv(a){var
b=[];for(;a!==0;a=a[2])b.push(a[1]);return b}function
bB(a,d){if(a<0)a6();var
a=a+1|0,b=new
Array(a);b[0]=0;for(var
c=1;c<a;c++)b[c]=d;return b}function
mu(c,b){function
a(b,a){return aa(b,a)<<24|aa(b,a+1)<<16|aa(b,a+2)<<8|aa(b,a+3)}if(a(c,b)!=(fd|0))y("Marshal.data_size: bad object");return a(c,b+4)}function
mN(b){return a(bD(b,0,b.length))}function
mx(a){switch(a.t&6){default:a7(a);case
0:return a.c;case
4:return a.c}}var
mv=function(){function
l(a,b){return a+b|0}function
a(d,a,c,f,b,e){a=l(l(a,d),l(f,e));return l(a<<b|a>>>32-b,c)}function
g(c,b,d,e,h,f,g){return a(b&d|~b&e,c,b,h,f,g)}function
h(d,b,e,c,h,f,g){return a(b&c|e&~c,d,b,h,f,g)}function
i(c,b,d,e,h,f,g){return a(b^d^e,c,b,h,f,g)}function
j(c,b,d,e,h,f,g){return a(d^(b|~e),c,b,h,f,g)}function
k(f,n){var
e=n;f[e>>2]|=O<<8*(e&3);for(e=(e&~0x3)+8;(e&dg)<60;e+=4)f[(e>>2)-1]=0;f[(e>>2)-1]=n<<3;f[e>>2]=n>>29&0x1FFFFFFF;var
k=[0x67452301,0xEFCDAB89,0x98BADCFE,0x10325476];for(e=0;e<f.length;e+=16){var
a=k[0],b=k[1],c=k[2],d=k[3];a=g(a,b,c,d,f[e+0],7,0xD76AA478);d=g(d,a,b,c,f[e+1],12,0xE8C7B756);c=g(c,d,a,b,f[e+2],17,0x242070DB);b=g(b,c,d,a,f[e+3],22,0xC1BDCEEE);a=g(a,b,c,d,f[e+4],7,0xF57C0FAF);d=g(d,a,b,c,f[e+5],12,0x4787C62A);c=g(c,d,a,b,f[e+6],17,0xA8304613);b=g(b,c,d,a,f[e+7],22,0xFD469501);a=g(a,b,c,d,f[e+8],7,0x698098D8);d=g(d,a,b,c,f[e+9],12,0x8B44F7AF);c=g(c,d,a,b,f[e+10],17,0xFFFF5BB1);b=g(b,c,d,a,f[e+11],22,0x895CD7BE);a=g(a,b,c,d,f[e+12],7,0x6B901122);d=g(d,a,b,c,f[e+13],12,0xFD987193);c=g(c,d,a,b,f[e+14],17,0xA679438E);b=g(b,c,d,a,f[e+15],22,0x49B40821);a=h(a,b,c,d,f[e+1],5,0xF61E2562);d=h(d,a,b,c,f[e+6],9,0xC040B340);c=h(c,d,a,b,f[e+11],14,0x265E5A51);b=h(b,c,d,a,f[e+0],20,0xE9B6C7AA);a=h(a,b,c,d,f[e+5],5,0xD62F105D);d=h(d,a,b,c,f[e+10],9,0x02441453);c=h(c,d,a,b,f[e+15],14,0xD8A1E681);b=h(b,c,d,a,f[e+4],20,0xE7D3FBC8);a=h(a,b,c,d,f[e+9],5,0x21E1CDE6);d=h(d,a,b,c,f[e+14],9,0xC33707D6);c=h(c,d,a,b,f[e+3],14,0xF4D50D87);b=h(b,c,d,a,f[e+8],20,0x455A14ED);a=h(a,b,c,d,f[e+13],5,0xA9E3E905);d=h(d,a,b,c,f[e+2],9,0xFCEFA3F8);c=h(c,d,a,b,f[e+7],14,0x676F02D9);b=h(b,c,d,a,f[e+12],20,0x8D2A4C8A);a=i(a,b,c,d,f[e+5],4,0xFFFA3942);d=i(d,a,b,c,f[e+8],11,0x8771F681);c=i(c,d,a,b,f[e+11],16,0x6D9D6122);b=i(b,c,d,a,f[e+14],23,0xFDE5380C);a=i(a,b,c,d,f[e+1],4,0xA4BEEA44);d=i(d,a,b,c,f[e+4],11,0x4BDECFA9);c=i(c,d,a,b,f[e+7],16,0xF6BB4B60);b=i(b,c,d,a,f[e+10],23,0xBEBFBC70);a=i(a,b,c,d,f[e+13],4,0x289B7EC6);d=i(d,a,b,c,f[e+0],11,0xEAA127FA);c=i(c,d,a,b,f[e+3],16,0xD4EF3085);b=i(b,c,d,a,f[e+6],23,0x04881D05);a=i(a,b,c,d,f[e+9],4,0xD9D4D039);d=i(d,a,b,c,f[e+12],11,0xE6DB99E5);c=i(c,d,a,b,f[e+15],16,0x1FA27CF8);b=i(b,c,d,a,f[e+2],23,0xC4AC5665);a=j(a,b,c,d,f[e+0],6,0xF4292244);d=j(d,a,b,c,f[e+7],10,0x432AFF97);c=j(c,d,a,b,f[e+14],15,0xAB9423A7);b=j(b,c,d,a,f[e+5],21,0xFC93A039);a=j(a,b,c,d,f[e+12],6,0x655B59C3);d=j(d,a,b,c,f[e+3],10,0x8F0CCC92);c=j(c,d,a,b,f[e+10],15,0xFFEFF47D);b=j(b,c,d,a,f[e+1],21,0x85845DD1);a=j(a,b,c,d,f[e+8],6,0x6FA87E4F);d=j(d,a,b,c,f[e+15],10,0xFE2CE6E0);c=j(c,d,a,b,f[e+6],15,0xA3014314);b=j(b,c,d,a,f[e+13],21,0x4E0811A1);a=j(a,b,c,d,f[e+4],6,0xF7537E82);d=j(d,a,b,c,f[e+11],10,0xBD3AF235);c=j(c,d,a,b,f[e+2],15,0x2AD7D2BB);b=j(b,c,d,a,f[e+9],21,0xEB86D391);k[0]=l(a,k[0]);k[1]=l(b,k[1]);k[2]=l(c,k[2]);k[3]=l(d,k[3])}var
o=new
Array(16);for(var
e=0;e<4;e++)for(var
m=0;m<4;m++)o[e*4+m]=k[e]>>8*m&a1;return o}return function(i,g,f){var
e=[],h=mx(i);if(typeof
h==="string"){var
d=h;for(var
a=0;a<f;a+=4){var
b=a+g;e[a>>2]=d.charCodeAt(b)|d.charCodeAt(b+1)<<8|d.charCodeAt(b+2)<<16|d.charCodeAt(b+3)<<24}for(;a<f;a++)e[a>>2]|=d.charCodeAt(a+g)<<8*(a&3)}else{var
c=h;for(var
a=0;a<f;a+=4){var
b=a+g;e[a>>2]=c[b]|c[b+1]<<8|c[b+2]<<16|c[b+3]<<24}for(;a<f;a++)e[a>>2]|=c[a+g]<<8*(a&3)}return mN(k(e,f))}}();function
mw(c,b,a){return mv(au(c),b,a)}function
my(){return 0}var
ad=new
Array();function
aO(c){var
a=ad[c];if(!a.opened)g("Cannot flush a closed channel");if(!a.buffer||a.buffer==d)return 0;if(a.fd&&m.fds[a.fd]&&m.fds[a.fd].output){var
b=m.fds[a.fd].output;switch(b.length){case
2:b(c,a.buffer);break;default:b(a.buffer)}}a.buffer=d;return 0}function
fJ(e,f){var
b=ad[e],d=a(f),c=k(d);b.file.write(b.offset,d,0,c);b.offset+=c;return 0}function
mR(a){var
a=cB(a),b=c;if(b.process&&b.process.stdout&&b.process.stdout.write)b.process.stderr.write(a);else{if(a.charCodeAt(a.length-1)==10)a=a.substr(0,a.length-1);var
d=b.console;d&&d.error&&d.error(a)}}function
mS(a){var
a=cB(a),b=c;if(b.process&&b.process.stdout&&b.process.stdout.write)b.process.stdout.write(a);else{if(a.charCodeAt(a.length-1)==10)a=a.substr(0,a.length-1);var
d=b.console;d&&d.log&&d.log(a)}}function
bE(c,e,d,a){if(m.fds===undefined)m.fds=new
Array();a=a?a:{};var
b={};b.file=d;b.offset=a.append?d.length():0;b.flags=a;b.output=e;m.fds[c]=b;if(!m.fd_last_idx||c>m.fd_last_idx)m.fd_last_idx=c;return c}function
mY(c,b,h){var
a={};while(b){switch(b[1]){case
0:a.rdonly=1;break;case
1:a.wronly=1;break;case
2:a.append=1;break;case
3:a.create=1;break;case
4:a.truncate=1;break;case
5:a.excl=1;break;case
6:a.binary=1;break;case
7:a.text=1;break;case
8:a.nonblock=1;break}b=b[2]}if(a.rdonly&&a.wronly)g(ao(c)+d1);if(a.text&&a.binary)g(ao(c)+ey);var
d=fO(c),e=d.device.open(d.rest,a),f=m.fd_last_idx?m.fd_last_idx:0;return bE(f+1,fJ,e,a)}bE(0,fJ,new
w(p(0)));bE(1,mS,new
w(p(0)));bE(2,mR,new
w(p(0)));function
mz(a){var
c=m.fds[a];if(c.flags.wronly)g(fc+a+" is writeonly");var
d=null;if(a==0&&ba()){var
e=require("fs");d=function(){return Q(e.readFileSync(0,db))}}var
b={file:c.file,offset:c.offset,fd:a,opened:true,out:false,refill:d};ad[b.fd]=b;return b.fd}function
fC(c){var
b=m.fds[c];if(b.flags.rdonly)g(fc+c+" is readonly");var
a={file:b.file,offset:b.offset,fd:c,opened:true,out:true,buffer:d};ad[a.fd]=a;return a.fd}function
mA(){var
b=0;for(var
a=0;a<ad.length;a++)if(ad[a]&&ad[a].opened&&ad[a].out)b=[0,ad[a].fd,b];return b}function
mB(h,d,i,f){var
b=ad[h];if(!b.opened)g("Cannot output to a closed channel");var
a;if(i==0&&H(d)==f)a=d;else{a=p(f);at(d,i,a,0,f)}var
j=D(a),c=ao(j),e=c.lastIndexOf(dz);if(e<0)b.buffer+=c;else{b.buffer+=c.substr(0,e+1);aO(h);b.buffer+=c.substr(e+1)}return 0}function
fD(b,a,d,c){return mB(b,au(a),d,c)}function
fE(c,b){var
d=a(String.fromCharCode(b));fD(c,d,0,1);return 0}function
mC(b,a){if(a==0)cy();return b%a}function
a_(a,b){return+(ft(a,b,false)!=0)}function
mE(a,b){a[0]=bn;a[1]=b;return 0}function
a$(a){if(a
instanceof
Array&&a[0]==a[0]>>>0)return a[0];else
if(aN(a))return bs;else
if(bA(a))return bs;else
if(a
instanceof
Function||typeof
a=="function")return 247;else
if(a&&a.caml_custom)return aG;else
return aZ}var
a5;if(typeof
c.WeakMap==="undefined")a5=function(){function
a(a){this.objs=a}a.prototype.get=function(b){for(var
a=0;a<this.objs.length;a++)if(this.objs[a]===b)return a};a.prototype.set=function(){};return function(){this.objs=[];this.lookup=new
a(this.objs)}}();else
a5=function(){this.objs=[];this.lookup=new(c.WeakMap)()};a5.prototype.store=function(a){this.lookup.set(a,this.objs.length);this.objs.push(a)};a5.prototype.recall=function(b){var
a=this.lookup.get(b);return a===undefined?undefined:this.objs.length-a};var
mr=false,mG=function(){function
n(){this.chunk=[]}n.prototype={chunk_idx:20,block_len:0,obj_counter:0,size_32:0,size_64:0,write:function(b,c){for(var
a=b-8;a>=0;a-=8)this.chunk[this.chunk_idx++]=c>>a&a1},write_at:function(b,c,d){var
b=b;for(var
a=c-8;a>=0;a-=8)this.chunk[b++]=d>>a&a1},write_code:function(c,b,d){this.chunk[this.chunk_idx++]=b;for(var
a=c-8;a>=0;a-=8)this.chunk[this.chunk_idx++]=d>>a&a1},write_shared:function(a){if(a<1<<8)this.write_code(8,0x04,a);else
if(a<1<<16)this.write_code(16,0x05,a);else
this.write_code(32,0x06,a)},pos:function(){return this.chunk_idx},finalize:function(){this.block_len=this.chunk_idx-20;this.chunk_idx=0;this.write(32,fd);this.write(32,this.block_len);this.write(32,this.obj_counter);this.write(32,this.size_32);this.write(32,this.size_64);return this.chunk}};return function(e,f){f=cv(f);var
l=f.indexOf(0)!==-1,o=f.indexOf(1)!==-1;if(o)c.console.warn("in caml_output_val: flag Marshal.Closures is not supported.");var
b=new
n(),j=[],g=l?null:new
a5();function
m(c){if(l)return false;var
a=g.recall(c);if(a){b.write_shared(a);return true}else{g.store(c);return false}}function
i(c){if(c.caml_custom){if(m(c))return;var
g=c.caml_custom,i=bv[g],h=[0,0];if(!i.serialize)s("output_value: abstract value (Custom)");if(mr){b.write(8,0x12);for(var
e=0;e<g.length;e++)b.write(8,g.charCodeAt(e));b.write(8,0);i.serialize(b,c,h)}else
if(i.fixed_length==undefined){b.write(8,0x18);for(var
e=0;e<g.length;e++)b.write(8,g.charCodeAt(e));b.write(8,0);var
l=b.pos();for(var
e=0;e<12;e++)b.write(8,0);i.serialize(b,c,h);b.write_at(l,32,h[0]);b.write_at(l+4,32,0);b.write_at(l+8,32,h[1])}else{b.write(8,0x19);for(var
e=0;e<g.length;e++)b.write(8,g.charCodeAt(e));b.write(8,0);var
n=b.pos();i.serialize(b,c,h);if(i.fixed_length!=b.pos()-n)y("output_value: incorrect fixed sizes specified by "+g)}b.size_32+=2+(h[0]+3>>2);b.size_64+=2+(h[1]+7>>3)}else
if(c
instanceof
Array&&c[0]===(c[0]|0)){if(c[0]==251)y("output_value: abstract value (Abstract)");if(c.length>1&&m(c))return;if(c[0]<16&&c.length-1<8)b.write(8,O+c[0]+(c.length-1<<4));else
b.write_code(32,0x08,c.length-1<<10|c[0]);b.size_32+=c.length;b.size_64+=c.length;if(c.length>1)j.push(c,1)}else
if(aN(c)){if(!aN(a(d)))y("output_value: [Bytes.t] cannot safely be marshaled with [--enable use-js-string]");if(m(c))return;var
f=H(c);if(f<a3)b.write(8,a3+f);else
if(f<dh)b.write_code(8,eC,f);else
b.write_code(32,ec,f);for(var
e=0;e<f;e++)b.write(8,aa(c,e));b.size_32+=1+((f+4)/4|0);b.size_64+=1+((f+8)/8|0)}else
if(bA(c)){var
f=k(c);if(f<a3)b.write(8,a3+f);else
if(f<dh)b.write_code(8,eC,f);else
b.write_code(32,ec,f);for(var
e=0;e<f;e++)b.write(8,aA(c,e));b.size_32+=1+((f+4)/4|0);b.size_64+=1+((f+8)/8|0)}else
if(c!=(c|0)){var
o=typeof
c;y("output_value: abstract value ("+o+dM)}else
if(c>=0&&c<dY)b.write(8,0X40+c);else
if(c>=-(1<<7)&&c<1<<7)b.write_code(8,0x00,c);else
if(c>=-(1<<15)&&c<1<<15)b.write_code(16,0x01,c);else
b.write_code(32,0x02,c)}i(e);while(j.length>0){var
h=j.pop(),e=j.pop();if(h+1<e.length)j.push(e,h+1);i(e[h])}if(g)b.obj_counter=g.objs.length;b.finalize();return b.chunk}}();function
mH(b,a){return fr(mG(b,a))}function
T(b,d,a){if(a&&c.toplevelReloc)b=c.toplevelReloc(a);m[b+1]=d;if(a)m[a]=d}function
cz(a,b){fG[ao(a)]=b;return 0}function
mM(){s(ci)}function
C(b,a){if(a>>>0>=k(b))mM();return aA(b,a)}function
mO(){return 0x7FFFFFFF/4|0}function
mJ(){fH(m.Not_found)}function
fK(d){var
a=c,b=ac(d);if(a.process&&a.process.env&&a.process.env[b]!=undefined)return Q(a.process.env[b]);if(c.jsoo_static_env&&c.jsoo_static_env[b])return Q(c.jsoo_static_env[b]);mJ()}function
mP(){if(c.crypto)if(typeof
c.crypto.getRandomValues==="function"){var
a=new(c.Uint32Array)(1);c.crypto.getRandomValues(a);return[0,a[0]]}else
if(c.crypto.randomBytes===dB){var
b=c.crypto.randomBytes(4),a=new(c.Uint32Array)(b);return[0,a[0]]}var
d=new
Date().getTime(),e=d^0xffffffff*Math.random();return[0,e]}function
cA(a){var
b=1;while(a&&a.joo_tramp){a=a.joo_tramp.apply(null,a.joo_args);b++}return a}function
z(b,a){return{joo_tramp:b,joo_args:a}}function
fI(a){return a}function
ap(a){if(a
instanceof
Array)return a;if(c.RangeError&&a
instanceof
c.RangeError&&a.message&&a.message.match(/maximum call stack/i))return fI(m.Stack_overflow);if(c.InternalError&&a
instanceof
c.InternalError&&a.message&&a.message.match(/too much recursion/i))return fI(m.Stack_overflow);if(a
instanceof
c.Error&&ay(b8))return[0,ay(b8),a];return[0,m.Failure,Q(String(a))]}function
bF(){return 0}function
mo(a){switch(a[2]){case-8:case-11:case-12:return 1;default:return 0}}function
l7(b){var
a=d;if(b[0]==0){a+=b[1][1];if(b.length==3&&b[2][0]==0&&mo(b[1]))var
f=b[2],g=1;else
var
g=2,f=b;a+="(";for(var
e=g;e<f.length;e++){if(e>g)a+=bl;var
c=f[e];if(typeof
c=="number")a+=c.toString();else
if(c
instanceof
Y)a+=br+c.toString()+br;else
if(typeof
c=="string")a+=br+c.toString()+br;else
a+=eh}a+=dM}else
if(b[0]==q)a+=b[1];return a}function
fw(a){if(a
instanceof
Array&&(a[0]==0||a[0]==q)){var
d=ay(dr);if(d)d(a,false);else{var
e=l7(a),b=ay(da);if(b)b(0);c.console.error(cb+e+dz)}}else
throw a}function
mL(){var
a=c;if(a.process&&a.process.on)a.process.on("uncaughtException",function(b,c){fw(b);a.process.exit(2)});else
if(a.addEventListener)a.addEventListener(e$,function(a){if(a.error)fw(a.error)})}mL();function
b(a,b){return a.length==1?a(b):av(a,[b])}function
S(a,b,c){return a.length==2?a(b,c):av(a,[b,c])}function
lV(a,b,c,d){return a.length==3?a(b,c,d):av(a,[b,c,d])}function
b4(a,b,c,d,e,f){return a.length==5?a(b,c,d,e,f):av(a,[b,c,d,e,f])}function
lU(a,b,c,d,e,f,g,h){return a.length==7?a(b,c,d,e,f,g,h):av(a,[b,c,d,e,f,g,h])}l8();var
bG=[q,a(e7),-1],cG=[q,a(dt),-2],bb=[q,a(b7),-3],cD=[q,a(ef),-4],aR=[q,a(eq),-7],cE=[q,a(dP),-8],cF=[q,a(et),-9],j=[q,a(eP),-11],cH=[q,a(c$),-12],lT=[4,0,0,0,[12,45,[4,0,0,0,0]]],bN=[0,[11,a('File "'),[2,0,[11,a('", line '),[4,0,0,0,[11,a(dW),[4,0,0,0,[12,45,[4,0,0,0,[11,a(": "),[2,0,0]]]]]]]]]],a('File "%s", line %d, characters %d-%d: %s')];T(11,cH,c$);T(10,j,eP);T(9,[q,a(d7),-10],d7);T(8,cF,et);T(7,cE,dP);T(6,aR,eq);T(5,[q,a(eH),-6],eH);T(4,[q,a(dA),-5],dA);T(3,cD,ef);T(2,bb,b7);T(1,cG,dt);T(0,bG,e7);var
fT=a("%.12g"),fS=a(ax),fQ=a("true"),fR=a("false"),fU=a("CamlinternalLazy.Undefined"),fY=a("option is None"),f1=a("\\\\"),f2=a("\\'"),f3=a("\\b"),f4=a("\\t"),f5=a("\\n"),f6=a("\\r"),f0=a("Char.chr"),f$=a("String.blit / Bytes.blit_string"),f_=a("Bytes.blit"),f9=a("String.sub / Bytes.sub"),ge=a("String.contains_from / Bytes.contains_from"),gb=a(d),ga=a("String.concat"),gg=a(eW),gh=a(eW),gi=a("Stdlib.Queue.Empty"),gm=a("Buffer.add: cannot grow buffer"),gl=[0,a(eF),93,2],gk=[0,a(eF),94,2],gv=a("%c"),gw=a("%s"),gx=a(c9),gy=a(dN),gz=a(ed),gA=a(di),gB=a("%f"),gC=a("%B"),gD=a("%{"),gE=a("%}"),gF=a("%("),gG=a("%)"),gH=a("%a"),gI=a("%t"),gJ=a("%?"),gK=a("%r"),gL=a("%_r"),gM=[0,a(u),850,23],gX=[0,a(u),814,21],gP=[0,a(u),815,21],gY=[0,a(u),818,21],gQ=[0,a(u),819,21],gZ=[0,a(u),822,19],gR=[0,a(u),823,19],g0=[0,a(u),826,22],gS=[0,a(u),827,22],g1=[0,a(u),831,30],gT=[0,a(u),832,30],gV=[0,a(u),836,26],gN=[0,a(u),837,26],gW=[0,a(u),846,28],gO=[0,a(u),847,28],gU=[0,a(u),851,23],h4=a(d4),h2=[0,a(u),1558,4],h3=a("Printf: bad conversion %["),h5=[0,a(u),1626,39],h6=[0,a(u),1649,31],h7=[0,a(u),1650,31],h8=a("Printf: bad conversion %_"),h9=a(d2),h_=a(ee),h$=a(d2),ia=a(ee),h0=a(b_),hY=a("neg_infinity"),hZ=a(eZ),hX=a(ax),hS=[0,dq],hG=a("%+nd"),hH=a("% nd"),hJ=a("%+ni"),hK=a("% ni"),hL=a("%nx"),hM=a("%#nx"),hN=a("%nX"),hO=a("%#nX"),hP=a("%no"),hQ=a("%#no"),hF=a("%nd"),hI=a(ed),hR=a("%nu"),ht=a("%+ld"),hu=a("% ld"),hw=a("%+li"),hx=a("% li"),hy=a("%lx"),hz=a("%#lx"),hA=a("%lX"),hB=a("%#lX"),hC=a("%lo"),hD=a("%#lo"),hs=a("%ld"),hv=a(dN),hE=a("%lu"),hg=a("%+Ld"),hh=a("% Ld"),hj=a("%+Li"),hk=a("% Li"),hl=a("%Lx"),hm=a("%#Lx"),hn=a("%LX"),ho=a("%#LX"),hp=a("%Lo"),hq=a("%#Lo"),hf=a("%Ld"),hi=a(di),hr=a("%Lu"),g5=a("%+d"),g6=a("% d"),g8=a("%+i"),g9=a("% i"),g_=a("%x"),g$=a("%#x"),ha=a("%X"),hb=a("%#X"),hc=a("%o"),hd=a("%#o"),g4=a(cd),g7=a(c9),he=a(d4),gn=a("@]"),go=a("@}"),gp=a("@?"),gq=a("@\n"),gr=a("@."),gs=a("@@"),gt=a("@%"),gu=a("@"),g2=a("CamlinternalFormat.Type_mismatch"),ie=a(d),ig=[0,[11,a(bl),[2,0,[2,0,0]]],a(", %s%s")],iG=[0,[11,a(cb),[2,0,[12,10,0]]],a(eN)],iH=[0,[11,a("Fatal error in uncaught exception handler: exception "),[2,0,[12,10,0]]],a("Fatal error in uncaught exception handler: exception %s\n")],iF=a("Fatal error: out of memory in uncaught exception handler"),iD=[0,[11,a(cb),[2,0,[12,10,0]]],a(eN)],iz=[0,[2,0,[12,10,0]],a("%s\n")],ir=a("Raised at"),is=a("Re-raised at"),it=a("Raised by primitive operation at"),iu=a("Called from"),iv=a(" (inlined)"),ix=a(d),iw=[0,[2,0,[12,32,[2,0,[11,a(' in file "'),[2,0,[12,34,[2,0,[11,a(", line "),[4,0,0,0,[11,a(dW),lT]]]]]]]]]],a('%s %s in file "%s"%s, line %d, characters %d-%d')],iy=[0,[2,0,[11,a(" unknown location"),0]],a("%s unknown location")],il=a("Out of memory"),im=a("Stack overflow"),io=a("Pattern matching failed"),ip=a("Assertion failed"),iq=a("Undefined recursive module"),ih=[0,[12,40,[2,0,[2,0,[12,41,0]]]],a("(%s%s)")],ii=a(d),ij=a(d),ik=[0,[12,40,[2,0,[12,41,0]]],a("(%s)")],id=[0,[4,0,0,0,0],a(cd)],ib=[0,[3,0,0],a("%S")],ic=a(eh),iA=[0,a(d),a("(Cannot print locations:\n bytecode executable program file not found)"),a("(Cannot print locations:\n bytecode executable program file appears to be corrupt)"),a("(Cannot print locations:\n bytecode executable program file has wrong magic number)"),a("(Cannot print locations:\n bytecode executable program file cannot be opened;\n -- too many open files. Try running with OCAMLRUNPARAM=b=2)")],iK=a("Fun.Finally_raised: "),iI=a("Stdlib.Fun.Finally_raised"),iL=a("x"),lR=a("OCAMLRUNPARAM"),lP=a("CAMLRUNPARAM"),iM=a(d),iV=a(ej),iX=a(fe),iY=a(e_),iZ=a(dv),i0=a(e3),i1=a(dJ),i2=a(ex),i3=a(d9),i4=a(b6),i5=a(eA),i6=a(d8),i7=a(eX),i8=a(d_),i9=a(ew),i_=a(c_),i$=a(fg),ja=a(du),jb=a(dH),jc=a(eQ),jd=a(dk),je=a(bq),jf=a(dX),jg=a(e2),jh=a(eb),ji=a(eK),jj=a(dc),jk=a(bo),jl=a(ce),jm=a(dT),jn=a(dR),jo=a(eL),jp=a(e6),jq=a(e0),jr=a(e9),js=a(el),jt=a(dO),ju=a(d6),jv=a(dC),jw=a(fa),jx=a(eT),jy=a(eu),jz=a(e8),jA=a(dE),jB=a(eY),jC=a(df),jD=a(ea),jE=a(eU),jF=a(ep),jG=a(dV),jH=a(eR),jI=a(dd),jJ=a(eG),jK=a(dy),jL=a(e1),jM=a(d$),jN=a(ez),jO=a(en),jP=a(eD),jQ=a(dZ),jR=a(eO),jS=a(dS),jT=a(dI),jU=a(dG),jV=a(dD),jW=a(ev),jX=a(d3),jY=a(em),jZ=a(eI),j0=[0,[11,a("EUNKNOWNERR "),[4,0,0,0,0]],a("EUNKNOWNERR %d")],iW=[0,[11,a("Unix.Unix_error(Unix."),[2,0,[11,a(bl),[3,0,[11,a(bl),[3,0,[12,41,0]]]]]]],a("Unix.Unix_error(Unix.%s, %S, %S)")],iR=a(a2),iS=a(d),iT=a(d),iU=a(a2),j1=a("0.0.0.0"),j2=a("127.0.0.1"),lN=a("::"),lM=a("::1"),j3=a("lexer"),j4=a("parser"),j5=a("typer"),j6=a(ds),j7=a("unknown"),j8=a("env"),j9=a("config"),j_=a("Jsoo_runtime.Error.Exn"),j$=a(b8),ka=a("length"),kc=a("Error"),kb=a("Array"),kd=a("Promise"),kf=[0,a("src/fut.ml"),34,25],ke=a("fut"),kl=a("log"),ki=a("classList"),kh=a("document"),kj=a("console"),km=a("data"),kn=a("Worker"),ku=a("Received typed enclosings:"),kv=[0,a(b$),66,9],ks=a("Received completions:"),kt=[0,a(b$),57,9],kq=a("Received errors:"),kr=[0,a(b$),48,9],kH=a(cl),kB=a(cl),kC=a("root"),kD=a("dispatch"),kE=a("parent"),kA=a(ei),kz=a("__CM__state"),kw=a(ei),kx=a("selection"),ky=a("extensions"),kF=a("__CM__view"),kN=a(eE),kO=a(ch),kP=a("severity"),kQ=a(ff),kR=a("source"),kS=a("actions"),kK=a(e5),kL=a(ds),kM=a(e$),kI=a("__CM__lint"),k7=a("activateOnTyping"),k8=a("override"),k9=a("maxRenderedOptions"),k_=a("defaultKeyMap"),k$=a("aboveCursor"),la=a("optionClass"),lb=a("icons"),lc=a("addToOptions"),k2=a(eE),k3=a(ch),k4=a("options"),k5=a("span"),k6=a("filter"),k1=a(eg),k0=a(cl),kU=a("label"),kV=a("detail"),kW=a(e5),kX=a("apply"),kY=a(e4),kZ=a("boost"),kT=a("__CM__autocomplete"),lp=a(eg),lq=a(dj),lr=a("create"),ls=a("above"),lt=a("strictSide"),lu=a("arrow"),lj=a("dom"),lk=a("getCoords"),ll=a("overlap"),lm=a("mount"),ln=a("update"),lo=a("positioned"),lf=a("left"),lg=a("right"),lh=a("top"),li=a("bottom"),ld=a("__CM__tooltip"),lv=a("__CM__stream_parser"),lw=a("StreamLanguage"),lz=a("\n"),lD=[0,1],lE=[0,1],lB=[0,a("keyword")],lA=ms([a("as"),a("do"),a("else"),a(dj),a("exception"),a("fun"),a("functor"),a("if"),a("in"),a("include"),a("let"),a("of"),a("open"),a("rec"),a("struct"),a("then"),a(e4),a("val"),a("while"),a("with"),a("and"),a("assert"),a("begin"),a(de),a("constraint"),a("done"),a("downto"),a("external"),a(dB),a("initializer"),a("lazy"),a("match"),a("method"),a("module"),a("mutable"),a("new"),a("nonrec"),a("object"),a("private"),a("sig"),a(ch),a("try"),a("value"),a("virtual"),a("when")]),lF=a("__CM__mllike"),lI=a("__CM__basic_setup"),lL=a("merlin_worker.bc.js");function
n(a){if(typeof
a==="number")return 0;else
switch(a[0]){case
0:return[0,n(a[1])];case
1:return[1,n(a[1])];case
2:return[2,n(a[1])];case
3:return[3,n(a[1])];case
4:return[4,n(a[1])];case
5:return[5,n(a[1])];case
6:return[6,n(a[1])];case
7:return[7,n(a[1])];case
8:var
c=a[1];return[8,c,n(a[2])];case
9:var
b=a[1];return[9,b,b,n(a[3])];case
10:return[10,n(a[1])];case
11:return[11,n(a[1])];case
12:return[12,n(a[1])];case
13:return[13,n(a[1])];default:return[14,n(a[1])]}}function
E(a,b){if(typeof
a==="number")return b;else
switch(a[0]){case
0:return[0,E(a[1],b)];case
1:return[1,E(a[1],b)];case
2:return[2,E(a[1],b)];case
3:return[3,E(a[1],b)];case
4:return[4,E(a[1],b)];case
5:return[5,E(a[1],b)];case
6:return[6,E(a[1],b)];case
7:return[7,E(a[1],b)];case
8:var
c=a[1];return[8,c,E(a[2],b)];case
9:var
d=a[2],e=a[1];return[9,e,d,E(a[3],b)];case
10:return[10,E(a[1],b)];case
11:return[11,E(a[1],b)];case
12:return[12,E(a[1],b)];case
13:return[13,E(a[1],b)];default:return[14,E(a[1],b)]}}function
l(a,b){if(typeof
a==="number")return b;else
switch(a[0]){case
0:return[0,l(a[1],b)];case
1:return[1,l(a[1],b)];case
2:var
c=a[1];return[2,c,l(a[2],b)];case
3:var
d=a[1];return[3,d,l(a[2],b)];case
4:var
e=a[3],f=a[2],g=a[1];return[4,g,f,e,l(a[4],b)];case
5:var
h=a[3],i=a[2],j=a[1];return[5,j,i,h,l(a[4],b)];case
6:var
k=a[3],m=a[2],n=a[1];return[6,n,m,k,l(a[4],b)];case
7:var
o=a[3],p=a[2],q=a[1];return[7,q,p,o,l(a[4],b)];case
8:var
r=a[3],s=a[2],t=a[1];return[8,t,s,r,l(a[4],b)];case
9:var
u=a[1];return[9,u,l(a[2],b)];case
10:return[10,l(a[1],b)];case
11:var
v=a[1];return[11,v,l(a[2],b)];case
12:var
w=a[1];return[12,w,l(a[2],b)];case
13:var
x=a[2],y=a[1];return[13,y,x,l(a[3],b)];case
14:var
z=a[2],A=a[1];return[14,A,z,l(a[3],b)];case
15:return[15,l(a[1],b)];case
16:return[16,l(a[1],b)];case
17:var
B=a[1];return[17,B,l(a[2],b)];case
18:var
C=a[1];return[18,C,l(a[2],b)];case
19:return[19,l(a[1],b)];case
20:var
D=a[2],E=a[1];return[20,E,D,l(a[3],b)];case
21:var
F=a[1];return[21,F,l(a[2],b)];case
22:return[22,l(a[1],b)];case
23:var
G=a[1];return[23,G,l(a[2],b)];default:var
H=a[2],I=a[1];return[24,I,H,l(a[3],b)]}}function
U(a){throw[0,cD,a]}function
bc(a){return 0<=a?a:-a|0}function
aC(d,c){var
a=k(d),e=k(c),b=p(a+e|0);_(d,0,b,0,a);_(c,0,b,a,e);return D(b)}function
fP(a){return a?fQ:fR}mz(0);fC(1);var
ae=fC(2);function
aS(b,a){return fD(b,a,0,k(a))}function
cI(a){aS(ae,a);fE(ae,10);return aO(ae)}function
bH(b){function
a(b){var
a=b;for(;;){if(a){var
c=a[2],d=a[1];try{aO(d)}catch(a){a=ap(a);if(a[1]!==cG)throw a;var
e=a}var
a=c;continue}return 0}}return a(mA(0))}cz(a(da),bH);var
cJ=mO(0),aT=(4*cJ|0)-1|0,fV=[q,fU,aL(0)];function
fW(a){throw fV}function
fX(a){var
d=a[1];a[1]=fW;try{var
c=b(d,0);mE(a,c);return c}catch(b){b=ap(b);a[1]=function(a){throw b};throw b}}function
cK(a,b){return a?a[1]:b}function
J(c,a){return a?[0,b(c,a[1])]:0}function
fZ(a){return[0,a]}function
bI(a){if(0<=a&&!(aG<a))return a;return U(f0)}function
f7(a){var
b=a-192|0,c=0;if(30<b>>>0){if(!(25<b+bp>>>0))c=1}else
if(23!==b)c=1;return c?a+32|0:a}function
bd(c,a){if(a){var
d=a[2],e=b(c,a[1]);return[0,e,bd(c,d)]}return 0}function
cL(d,c){var
a=c;for(;;){if(a){var
e=a[2];b(d,a[1]);var
a=e;continue}return 0}}function
cM(b,a){return a<=b?b:a}function
af(a,c){var
b=p(a);l6(b,0,a,c);return b}function
cN(a){var
b=H(a),c=p(b);at(a,0,c,0,b);return c}function
f8(a){return D(cN(a))}function
cO(d,b,a){var
f=0;if(0<=b&&0<=a&&!((H(d)-a|0)<b)){var
c=p(a);at(d,b,c,0,a);var
e=c;f=1}if(!f)var
e=U(f9);return D(e)}function
cP(e,c,d,b,a){if(0<=a&&0<=c&&!((H(e)-a|0)<c)&&0<=b&&!((H(d)-a|0)<b))return at(e,c,d,b,a);return U(f_)}function
ag(e,c,d,b,a){if(0<=a&&0<=c&&!((k(e)-a|0)<c)&&0<=b&&!((H(d)-a|0)<b))return _(e,c,d,b,a);return U(f$)}function
gc(e,d,c,b){var
a=c;for(;;){if(d<=a)throw aR;if(aA(e,a)===b)return a;var
a=a+1|0;continue}}function
gd(b,a,d){var
c=k(b);if(0<=a&&!(c<a))try{gc(b,c,a,d);var
e=1;return e}catch(a){a=ap(a);if(a===aR)return 0;throw a}return U(ge)}function
gf(b,a){return gd(b,0,a)}var
gj=[q,gi,aL(0)];function
cQ(a,c){var
d=a[2],b=[0,a[3]];for(;;){if(b[1]<(d+c|0)){b[1]=2*b[1]|0;continue}if(aT<b[1]){if(!((d+c|0)<=aT))throw[0,bb,gm];b[1]=aT}var
e=p(b[1]);cP(a[1],0,e,0,a[2]);a[1]=e;a[3]=b[1];if((a[2]+c|0)<=a[3]){if((d+c|0)<=a[3])return 0;throw[0,j,gk]}throw[0,j,gl]}}function
aU(a,c){var
b=k(c),d=a[2]+b|0;if(a[3]<d)cQ(a,b);_(c,0,a[1],a[2],b);a[2]=d;return 0}function
bJ(a){return 5===a[2]?12:-6}function
cR(a){return[0,0,p(a)]}function
cS(a,g){var
b=H(a[2]),c=a[1]+g|0,d=b<c?1:0;if(d){var
e=p(cM(b*2|0,c));cP(a[2],0,e,0,b);a[2]=e;var
f=0}else
var
f=d;return f}function
aD(a,b){cS(a,1);$(a[2],a[1],b);a[1]=a[1]+1|0;return 0}function
A(a,c){var
b=k(c);cS(a,b);ag(c,0,a[2],a[1],b);a[1]=a[1]+b|0;return 0}function
cT(a){return cO(a[2],0,a[1])}function
cU(a){if(typeof
a==="number")switch(a){case
0:return gn;case
1:return go;case
2:return gp;case
3:return gq;case
4:return gr;case
5:return gs;default:return gt}else
switch(a[0]){case
0:return a[1];case
1:return a[1];default:return aC(gu,D(af(1,a[1])))}}function
bK(b,c){var
a=c;for(;;)if(typeof
a==="number")return 0;else
switch(a[0]){case
0:var
d=a[1];A(b,gv);var
a=d;continue;case
1:var
e=a[1];A(b,gw);var
a=e;continue;case
2:var
f=a[1];A(b,gx);var
a=f;continue;case
3:var
g=a[1];A(b,gy);var
a=g;continue;case
4:var
h=a[1];A(b,gz);var
a=h;continue;case
5:var
i=a[1];A(b,gA);var
a=i;continue;case
6:var
j=a[1];A(b,gB);var
a=j;continue;case
7:var
k=a[1];A(b,gC);var
a=k;continue;case
8:var
l=a[2],m=a[1];A(b,gD);bK(b,m);A(b,gE);var
a=l;continue;case
9:var
n=a[3],o=a[1];A(b,gF);bK(b,o);A(b,gG);var
a=n;continue;case
10:var
p=a[1];A(b,gH);var
a=p;continue;case
11:var
q=a[1];A(b,gI);var
a=q;continue;case
12:var
r=a[1];A(b,gJ);var
a=r;continue;case
13:var
s=a[1];A(b,gK);var
a=s;continue;default:var
t=a[1];A(b,gL);var
a=t;continue}}function
r(a){if(typeof
a==="number")return 0;else
switch(a[0]){case
0:return[0,r(a[1])];case
1:return[1,r(a[1])];case
2:return[2,r(a[1])];case
3:return[3,r(a[1])];case
4:return[4,r(a[1])];case
5:return[5,r(a[1])];case
6:return[6,r(a[1])];case
7:return[7,r(a[1])];case
8:var
b=a[1];return[8,b,r(a[2])];case
9:var
c=a[2],d=a[1];return[9,c,d,r(a[3])];case
10:return[10,r(a[1])];case
11:return[11,r(a[1])];case
12:return[12,r(a[1])];case
13:return[13,r(a[1])];default:return[14,r(a[1])]}}function
B(a){if(typeof
a==="number"){var
u=function(a){return 0},v=function(a){return 0},w=function(a){return 0};return[0,function(a){return 0},w,v,u]}else
switch(a[0]){case
0:var
c=B(a[1]),x=c[4],y=c[3],z=c[2],A=c[1],C=function(a){b(z,0);return 0};return[0,function(a){b(A,0);return 0},C,y,x];case
1:var
d=B(a[1]),D=d[4],E=d[3],F=d[2],G=d[1],H=function(a){b(F,0);return 0};return[0,function(a){b(G,0);return 0},H,E,D];case
2:var
e=B(a[1]),I=e[4],J=e[3],K=e[2],L=e[1],M=function(a){b(K,0);return 0};return[0,function(a){b(L,0);return 0},M,J,I];case
3:var
f=B(a[1]),N=f[4],O=f[3],P=f[2],Q=f[1],R=function(a){b(P,0);return 0};return[0,function(a){b(Q,0);return 0},R,O,N];case
4:var
g=B(a[1]),S=g[4],T=g[3],U=g[2],V=g[1],W=function(a){b(U,0);return 0};return[0,function(a){b(V,0);return 0},W,T,S];case
5:var
h=B(a[1]),X=h[4],Y=h[3],Z=h[2],_=h[1],$=function(a){b(Z,0);return 0};return[0,function(a){b(_,0);return 0},$,Y,X];case
6:var
i=B(a[1]),aa=i[4],ab=i[3],ac=i[2],ad=i[1],ae=function(a){b(ac,0);return 0};return[0,function(a){b(ad,0);return 0},ae,ab,aa];case
7:var
j=B(a[1]),af=j[4],ag=j[3],ah=j[2],ai=j[1],aj=function(a){b(ah,0);return 0};return[0,function(a){b(ai,0);return 0},aj,ag,af];case
8:var
k=B(a[2]),ak=k[4],al=k[3],am=k[2],an=k[1],ao=function(a){b(am,0);return 0};return[0,function(a){b(an,0);return 0},ao,al,ak];case
9:var
ap=a[2],aq=a[1],l=B(a[3]),ar=l[4],as=l[3],at=l[2],au=l[1],m=B(t(r(aq),ap)),av=m[4],aw=m[3],ax=m[2],ay=m[1],az=function(a){b(av,0);b(ar,0);return 0},aA=function(a){b(as,0);b(aw,0);return 0},aB=function(a){b(ax,0);b(at,0);return 0};return[0,function(a){b(au,0);b(ay,0);return 0},aB,aA,az];case
10:var
n=B(a[1]),aC=n[4],aD=n[3],aE=n[2],aF=n[1],aG=function(a){b(aE,0);return 0};return[0,function(a){b(aF,0);return 0},aG,aD,aC];case
11:var
o=B(a[1]),aH=o[4],aI=o[3],aJ=o[2],aK=o[1],aL=function(a){b(aJ,0);return 0};return[0,function(a){b(aK,0);return 0},aL,aI,aH];case
12:var
p=B(a[1]),aM=p[4],aN=p[3],aO=p[2],aP=p[1],aQ=function(a){b(aO,0);return 0};return[0,function(a){b(aP,0);return 0},aQ,aN,aM];case
13:var
q=B(a[1]),aR=q[4],aS=q[3],aT=q[2],aU=q[1],aV=function(a){b(aR,0);return 0},aW=function(a){b(aS,0);return 0},aX=function(a){b(aT,0);return 0};return[0,function(a){b(aU,0);return 0},aX,aW,aV];default:var
s=B(a[1]),aY=s[4],aZ=s[3],a0=s[2],a1=s[1],a2=function(a){b(aY,0);return 0},a3=function(a){b(aZ,0);return 0},a4=function(a){b(a0,0);return 0};return[0,function(a){b(a1,0);return 0},a4,a3,a2]}}function
t(d,c){var
a=0;if(typeof
d==="number")if(typeof
c==="number")return 0;else
switch(c[0]){case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;case
8:a=5;break;case
9:a=6;break;default:throw[0,j,gM]}else
switch(d[0]){case
0:var
e=0,w=d[1];if(typeof
c!=="number")switch(c[0]){case
0:return[0,t(w,c[1])];case
8:a=5;e=1;break;case
9:a=6;e=1;break;case
10:e=1;break;case
11:a=1;e=1;break;case
12:a=2;e=1;break;case
13:a=3;e=1;break;case
14:a=4;e=1;break}if(!e)a=7;break;case
1:var
f=0,x=d[1];if(typeof
c!=="number")switch(c[0]){case
1:return[1,t(x,c[1])];case
8:a=5;f=1;break;case
9:a=6;f=1;break;case
10:f=1;break;case
11:a=1;f=1;break;case
12:a=2;f=1;break;case
13:a=3;f=1;break;case
14:a=4;f=1;break}if(!f)a=7;break;case
2:var
g=0,y=d[1];if(typeof
c==="number")g=1;else
switch(c[0]){case
2:return[2,t(y,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:g=1}if(g)a=7;break;case
3:var
h=0,z=d[1];if(typeof
c==="number")h=1;else
switch(c[0]){case
3:return[3,t(z,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:h=1}if(h)a=7;break;case
4:var
i=0,A=d[1];if(typeof
c==="number")i=1;else
switch(c[0]){case
4:return[4,t(A,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:i=1}if(i)a=7;break;case
5:var
k=0,C=d[1];if(typeof
c==="number")k=1;else
switch(c[0]){case
5:return[5,t(C,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:k=1}if(k)a=7;break;case
6:var
l=0,D=d[1];if(typeof
c==="number")l=1;else
switch(c[0]){case
6:return[6,t(D,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:l=1}if(l)a=7;break;case
7:var
m=0,E=d[1];if(typeof
c==="number")m=1;else
switch(c[0]){case
7:return[7,t(E,c[1])];case
8:a=5;break;case
9:a=6;break;case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:m=1}if(m)a=7;break;case
8:var
n=0,F=d[2],G=d[1];if(typeof
c==="number")n=1;else
switch(c[0]){case
8:var
H=c[1],I=t(F,c[2]);return[8,t(G,H),I];case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:n=1}if(n)throw[0,j,gV];break;case
9:var
o=0,J=d[3],K=d[2],L=d[1];if(typeof
c==="number")o=1;else
switch(c[0]){case
8:a=5;break;case
9:var
M=c[3],N=c[2],O=c[1],v=B(t(r(K),O)),P=v[4];b(v[2],0);b(P,0);return[9,L,N,t(J,M)];case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:a=4;break;default:o=1}if(o)throw[0,j,gW];break;case
10:var
Q=d[1];if(typeof
c!=="number"&&10===c[0])return[10,t(Q,c[1])];throw[0,j,gX];case
11:var
p=0,R=d[1];if(typeof
c==="number")p=1;else
switch(c[0]){case
10:break;case
11:return[11,t(R,c[1])];default:p=1}if(p)throw[0,j,gY];break;case
12:var
q=0,S=d[1];if(typeof
c==="number")q=1;else
switch(c[0]){case
10:break;case
11:a=1;break;case
12:return[12,t(S,c[1])];default:q=1}if(q)throw[0,j,gZ];break;case
13:var
s=0,T=d[1];if(typeof
c==="number")s=1;else
switch(c[0]){case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:return[13,t(T,c[1])];default:s=1}if(s)throw[0,j,g0];break;default:var
u=0,U=d[1];if(typeof
c==="number")u=1;else
switch(c[0]){case
10:break;case
11:a=1;break;case
12:a=2;break;case
13:a=3;break;case
14:return[14,t(U,c[1])];default:u=1}if(u)throw[0,j,g1]}switch(a){case
0:throw[0,j,gP];case
1:throw[0,j,gQ];case
2:throw[0,j,gR];case
3:throw[0,j,gS];case
4:throw[0,j,gT];case
5:throw[0,j,gN];case
6:throw[0,j,gO];default:throw[0,j,gU]}}var
v=[q,g2,aL(0)];function
be(b,a){if(typeof
b==="number")return[0,0,a];else{if(0===b[0])return[0,[0,b[1],b[2]],a];if(typeof
a!=="number"&&2===a[0])return[0,[1,b[1]],a[1]];throw v}}function
aV(e,b,d){var
a=be(e,d);if(typeof
b==="number"){if(b){var
c=a[2];if(typeof
c!=="number"&&2===c[0])return[0,a[1],1,c[1]];throw v}return[0,a[1],0,a[2]]}return[0,a[1],[0,b[1]],a[2]]}function
I(c,d,a){if(typeof
c==="number")return[0,0,i(d,a)];else
switch(c[0]){case
0:if(typeof
a!=="number"&&0===a[0]){var
g=I(c[1],d,a[1]);return[0,[0,g[1]],g[2]]}break;case
1:if(typeof
a!=="number"&&1===a[0]){var
h=I(c[1],d,a[1]);return[0,[1,h[1]],h[2]]}break;case
2:if(typeof
a!=="number"&&2===a[0]){var
j=I(c[1],d,a[1]);return[0,[2,j[1]],j[2]]}break;case
3:if(typeof
a!=="number"&&3===a[0]){var
k=I(c[1],d,a[1]);return[0,[3,k[1]],k[2]]}break;case
4:if(typeof
a!=="number"&&4===a[0]){var
l=I(c[1],d,a[1]);return[0,[4,l[1]],l[2]]}break;case
5:if(typeof
a!=="number"&&5===a[0]){var
m=I(c[1],d,a[1]);return[0,[5,m[1]],m[2]]}break;case
6:if(typeof
a!=="number"&&6===a[0]){var
o=I(c[1],d,a[1]);return[0,[6,o[1]],o[2]]}break;case
7:if(typeof
a!=="number"&&7===a[0]){var
p=I(c[1],d,a[1]);return[0,[7,p[1]],p[2]]}break;case
8:if(typeof
a!=="number"&&8===a[0]){var
q=a[1],C=a[2],D=c[2];if(a_([0,c[1]],[0,q]))throw v;var
s=I(D,d,C);return[0,[8,q,s[1]],s[2]]}break;case
9:if(typeof
a!=="number"&&9===a[0]){var
e=a[2],f=a[1],E=a[3],F=c[3],G=c[2],H=c[1],J=[0,n(f)];if(a_([0,n(H)],J))throw v;var
K=[0,n(e)];if(a_([0,n(G)],K))throw v;var
u=B(t(r(f),e)),L=u[4];b(u[2],0);b(L,0);var
w=I(n(F),d,E),M=w[2];return[0,[9,f,e,r(w[1])],M]}break;case
10:if(typeof
a!=="number"&&10===a[0]){var
x=I(c[1],d,a[1]);return[0,[10,x[1]],x[2]]}break;case
11:if(typeof
a!=="number"&&11===a[0]){var
y=I(c[1],d,a[1]);return[0,[11,y[1]],y[2]]}break;case
13:if(typeof
a!=="number"&&13===a[0]){var
z=I(c[1],d,a[1]);return[0,[13,z[1]],z[2]]}break;case
14:if(typeof
a!=="number"&&14===a[0]){var
A=I(c[1],d,a[1]);return[0,[14,A[1]],A[2]]}break}throw v}function
i(b,a){if(typeof
b==="number")return[0,0,a];else
switch(b[0]){case
0:if(typeof
a!=="number"&&0===a[0]){var
u=i(b[1],a[1]);return[0,[0,u[1]],u[2]]}break;case
1:if(typeof
a!=="number"&&0===a[0]){var
w=i(b[1],a[1]);return[0,[1,w[1]],w[2]]}break;case
2:var
af=b[2],x=be(b[1],a),e=x[2],ag=x[1];if(typeof
e!=="number"&&1===e[0]){var
y=i(af,e[1]);return[0,[2,ag,y[1]],y[2]]}throw v;case
3:var
ah=b[2],z=be(b[1],a),f=z[2],ai=z[1];if(typeof
f!=="number"&&1===f[0]){var
A=i(ah,f[1]);return[0,[3,ai,A[1]],A[2]]}throw v;case
4:var
aj=b[4],ak=b[1],g=aV(b[2],b[3],a),h=g[3],al=g[1];if(typeof
h!=="number"&&2===h[0]){var
am=g[2],B=i(aj,h[1]);return[0,[4,ak,al,am,B[1]],B[2]]}throw v;case
5:var
an=b[4],ao=b[1],j=aV(b[2],b[3],a),k=j[3],ap=j[1];if(typeof
k!=="number"&&3===k[0]){var
aq=j[2],C=i(an,k[1]);return[0,[5,ao,ap,aq,C[1]],C[2]]}throw v;case
6:var
ar=b[4],as=b[1],l=aV(b[2],b[3],a),m=l[3],at=l[1];if(typeof
m!=="number"&&4===m[0]){var
au=l[2],D=i(ar,m[1]);return[0,[6,as,at,au,D[1]],D[2]]}throw v;case
7:var
av=b[4],aw=b[1],o=aV(b[2],b[3],a),p=o[3],ax=o[1];if(typeof
p!=="number"&&5===p[0]){var
ay=o[2],E=i(av,p[1]);return[0,[7,aw,ax,ay,E[1]],E[2]]}throw v;case
8:var
az=b[4],aA=b[1],q=aV(b[2],b[3],a),r=q[3],aB=q[1];if(typeof
r!=="number"&&6===r[0]){var
aC=q[2],F=i(az,r[1]);return[0,[8,aA,aB,aC,F[1]],F[2]]}throw v;case
9:var
aD=b[2],G=be(b[1],a),s=G[2],aE=G[1];if(typeof
s!=="number"&&7===s[0]){var
H=i(aD,s[1]);return[0,[9,aE,H[1]],H[2]]}throw v;case
10:var
J=i(b[1],a);return[0,[10,J[1]],J[2]];case
11:var
aF=b[1],L=i(b[2],a);return[0,[11,aF,L[1]],L[2]];case
12:var
aG=b[1],M=i(b[2],a);return[0,[12,aG,M[1]],M[2]];case
13:if(typeof
a!=="number"&&8===a[0]){var
N=a[1],aH=a[2],aI=b[3],aJ=b[1];if(a_([0,b[2]],[0,N]))throw v;var
O=i(aI,aH);return[0,[13,aJ,N,O[1]],O[2]]}break;case
14:if(typeof
a!=="number"&&9===a[0]){var
P=a[1],aK=a[3],aL=b[3],aM=b[2],aN=b[1],aO=[0,n(P)];if(a_([0,n(aM)],aO))throw v;var
Q=i(aL,n(aK));return[0,[14,aN,P,Q[1]],Q[2]]}break;case
15:if(typeof
a!=="number"&&10===a[0]){var
R=i(b[1],a[1]);return[0,[15,R[1]],R[2]]}break;case
16:if(typeof
a!=="number"&&11===a[0]){var
S=i(b[1],a[1]);return[0,[16,S[1]],S[2]]}break;case
17:var
aP=b[1],T=i(b[2],a);return[0,[17,aP,T[1]],T[2]];case
18:var
U=b[2],t=b[1];if(0===t[0]){var
Y=t[1],aT=Y[2],Z=i(Y[1],a),aU=Z[1],_=i(U,Z[2]);return[0,[18,[0,[0,aU,aT]],_[1]],_[2]]}var
$=t[1],aW=$[2],aa=i($[1],a),aX=aa[1],ab=i(U,aa[2]);return[0,[18,[1,[0,aX,aW]],ab[1]],ab[2]];case
19:if(typeof
a!=="number"&&13===a[0]){var
V=i(b[1],a[1]);return[0,[19,V[1]],V[2]]}break;case
20:if(typeof
a!=="number"&&1===a[0]){var
aQ=b[2],aR=b[1],W=i(b[3],a[1]);return[0,[20,aR,aQ,W[1]],W[2]]}break;case
21:if(typeof
a!=="number"&&2===a[0]){var
aS=b[1],X=i(b[2],a[1]);return[0,[21,aS,X[1]],X[2]]}break;case
23:var
d=b[2],c=b[1];if(typeof
c==="number")switch(c){case
0:return K(c,d,a);case
1:return K(c,d,a);case
2:if(typeof
a!=="number"&&14===a[0]){var
ac=i(d,a[1]);return[0,[23,2,ac[1]],ac[2]]}throw v;default:return K(c,d,a)}else
switch(c[0]){case
0:return K(c,d,a);case
1:return K(c,d,a);case
2:return K(c,d,a);case
3:return K(c,d,a);case
4:return K(c,d,a);case
5:return K(c,d,a);case
6:return K(c,d,a);case
7:return K(c,d,a);case
8:return K([8,c[1],c[2]],d,a);case
9:var
aY=c[1],ad=I(c[2],d,a),ae=ad[2];return[0,[23,[9,aY,ad[1]],ae[1]],ae[2]];case
10:return K(c,d,a);default:return K(c,d,a)}}throw v}function
K(d,c,b){var
a=i(c,b);return[0,[23,d,a[1]],a[2]]}function
L(l,g,a){var
b=k(a),h=0<=g?l:0,d=bc(g);if(d<=b)return a;var
m=2===h?48:32,c=af(d,m);switch(h){case
0:ag(a,0,c,0,b);break;case
1:ag(a,0,c,d-b|0,b);break;default:var
e=0;if(0<b){var
i=0;if(43!==C(a,0)&&45!==C(a,0)&&32!==C(a,0)){e=1;i=1}if(!i){$(c,0,C(a,0));ag(a,1,c,(d-b|0)+1|0,b-1|0)}}else
e=1;if(e){var
f=0;if(1<b&&48===C(a,0)){var
j=0;if(dp!==C(a,1)&&88!==C(a,1)){f=1;j=1}if(!j){$(c,1,C(a,1));ag(a,2,c,(d-b|0)+2|0,b-2|0)}}else
f=1;if(f)ag(a,0,c,d-b|0,b)}}return D(c)}function
aE(l,b){var
c=bc(l),a=k(b),d=C(b,0),e=0;if(58<=d){if(71<=d){if(!(5<d+er>>>0))e=1}else
if(65<=d)e=1}else{var
f=0;if(32!==d)if(43<=d)switch(d-43|0){case
5:if(a<(c+2|0)&&1<a){var
j=0;if(dp===C(b,1)||88===C(b,1))j=1;if(j){var
h=af(c+2|0,48);$(h,1,C(b,1));ag(b,2,h,(c-a|0)+4|0,a-2|0);return D(h)}}e=1;f=1;break;case
0:case
2:break;case
1:case
3:case
4:f=1;break;default:e=1;f=1}else
f=1;if(!f&&a<(c+1|0)){var
g=af(c+1|0,48);$(g,0,d);ag(b,1,g,(c-a|0)+2|0,a-1|0);return D(g)}}if(e&&a<c){var
i=af(c,48);ag(b,0,i,c-a|0,a);return D(i)}return b}function
g3(l){var
j=0,E=k(l);for(;;){if(E<=j)var
r=l;else{var
q=aA(l,j)+eS|0,s=0;if(59<q>>>0){if(33<q-61>>>0)s=1}else
if(2===q)s=1;if(!s){var
j=j+1|0;continue}var
e=au(l),a=[0,0],u=H(e)-1|0,z=0;if(!(u<0)){var
i=z;for(;;){var
f=aa(e,i),g=0;if(32<=f){var
m=f-34|0,t=0;if(58<m>>>0){if(93<=m)t=1}else
if(56<m-1>>>0){g=1;t=1}if(!t){var
n=1;g=2}}else
if(11<=f){if(13===f)g=1}else
if(8<=f)g=1;switch(g){case
0:var
n=4;break;case
1:var
n=2;break}a[1]=a[1]+n|0;var
C=i+1|0;if(u!==i){var
i=C;continue}break}}if(a[1]===H(e))var
w=cN(e);else{var
b=p(a[1]);a[1]=0;var
v=H(e)-1|0,A=0;if(!(v<0)){var
h=A;for(;;){var
c=aa(e,h),d=0;if(35<=c)if(92===c)d=2;else
if(bp<=c)d=1;else
d=3;else
if(32<=c)if(34<=c)d=2;else
d=3;else
if(14<=c)d=1;else
switch(c){case
8:o(b,a[1],92);a[1]++;o(b,a[1],98);break;case
9:o(b,a[1],92);a[1]++;o(b,a[1],116);break;case
10:o(b,a[1],92);a[1]++;o(b,a[1],110);break;case
13:o(b,a[1],92);a[1]++;o(b,a[1],114);break;default:d=1}switch(d){case
1:o(b,a[1],92);a[1]++;o(b,a[1],48+(c/eB|0)|0);a[1]++;o(b,a[1],48+((c/10|0)%10|0)|0);a[1]++;o(b,a[1],48+(c%10|0)|0);break;case
2:o(b,a[1],92);a[1]++;o(b,a[1],c);break;case
3:o(b,a[1],c);break}a[1]++;var
B=h+1|0;if(v!==h){var
h=B;continue}break}}var
w=b}var
r=D(w)}var
x=k(r),y=af(x+2|0,34);_(r,0,y,1,x);return D(y)}}function
cV(e,g){var
h=bc(g),f=hS[1];switch(e[2]){case
0:var
b=102;break;case
1:var
b=101;break;case
2:var
b=69;break;case
3:var
b=dq;break;case
4:var
b=71;break;case
5:var
b=f;break;case
6:var
b=104;break;case
7:var
b=72;break;default:var
b=70}var
c=cR(16);aD(c,37);switch(e[1]){case
0:break;case
1:aD(c,43);break;default:aD(c,32)}if(8<=e[2])aD(c,35);aD(c,46);A(c,a(d+h));aD(c,b);return cT(c)}function
bf(n,a){if(13<=n){var
g=[0,0],h=k(a)-1|0,o=0;if(!(h<0)){var
c=o;for(;;){if(!(9<aA(a,c)+dw>>>0))g[1]++;var
s=c+1|0;if(h!==c){var
c=s;continue}break}}var
i=g[1],j=p(k(a)+((i-1|0)/3|0)|0),l=[0,0],d=function(a){$(j,l[1],a);l[1]++;return 0},e=[0,((i-1|0)%3|0)+1|0],m=k(a)-1|0,q=0;if(!(m<0)){var
b=q;for(;;){var
f=aA(a,b);if(9<f+dw>>>0)d(f);else{if(0===e[1]){d(95);e[1]=3}e[1]+=-1;d(f)}var
r=b+1|0;if(m!==b){var
b=r;continue}break}}return D(j)}return a}function
hT(b,c){switch(b){case
1:var
a=g5;break;case
2:var
a=g6;break;case
4:var
a=g8;break;case
5:var
a=g9;break;case
6:var
a=g_;break;case
7:var
a=g$;break;case
8:var
a=ha;break;case
9:var
a=hb;break;case
10:var
a=hc;break;case
11:var
a=hd;break;case
0:case
13:var
a=g4;break;case
3:case
14:var
a=g7;break;default:var
a=he}return bf(b,bw(a,c))}function
hU(b,c){switch(b){case
1:var
a=ht;break;case
2:var
a=hu;break;case
4:var
a=hw;break;case
5:var
a=hx;break;case
6:var
a=hy;break;case
7:var
a=hz;break;case
8:var
a=hA;break;case
9:var
a=hB;break;case
10:var
a=hC;break;case
11:var
a=hD;break;case
0:case
13:var
a=hs;break;case
3:case
14:var
a=hv;break;default:var
a=hE}return bf(b,bw(a,c))}function
hV(b,c){switch(b){case
1:var
a=hG;break;case
2:var
a=hH;break;case
4:var
a=hJ;break;case
5:var
a=hK;break;case
6:var
a=hL;break;case
7:var
a=hM;break;case
8:var
a=hN;break;case
9:var
a=hO;break;case
10:var
a=hP;break;case
11:var
a=hQ;break;case
0:case
13:var
a=hF;break;case
3:case
14:var
a=hI;break;default:var
a=hR}return bf(b,bw(a,c))}function
hW(b,c){switch(b){case
1:var
a=hg;break;case
2:var
a=hh;break;case
4:var
a=hj;break;case
5:var
a=hk;break;case
6:var
a=hl;break;case
7:var
a=hm;break;case
8:var
a=hn;break;case
9:var
a=ho;break;case
10:var
a=hp;break;case
11:var
a=hq;break;case
0:case
13:var
a=hf;break;case
3:case
14:var
a=hi;break;default:var
a=hr}return bf(b,me(a,c))}function
ah(c,i,b){function
j(d){switch(c[1]){case
0:var
a=45;break;case
1:var
a=43;break;default:var
a=32}return l_(b,i,a)}function
t(c){var
a=l2(b);return 3===a?b<0.?hY:hZ:4<=a?h0:c}switch(c[2]){case
5:var
e=cq(cV(c,i),b),d=0,x=k(e);for(;;){if(d===x)var
s=0;else{var
l=C(e,d)-46|0,m=0;if(23<l>>>0){if(55===l)m=1}else
if(21<l-1>>>0)m=1;if(!m){var
d=d+1|0;continue}var
s=1}var
y=s?e:aC(e,hX);return t(y)}case
6:return j(0);case
7:var
h=au(j(0)),f=H(h);if(0===f)var
r=h;else{var
n=p(f),q=f-1|0,u=0;if(!(q<0)){var
a=u;for(;;){var
g=aa(h,a),v=25<g+er>>>0?g:g+eS|0;o(n,a,v);var
w=a+1|0;if(q!==a){var
a=w;continue}break}}var
r=n}return D(r);case
8:return t(j(0));default:return cq(cV(c,i),b)}}function
aY(e,K,J,I){var
c=K,a=J,d=I;for(;;)if(typeof
d==="number")return b(c,a);else
switch(d[0]){case
0:var
M=d[1];return function(b){return f(c,[5,a,b],M)};case
1:var
N=d[1];return function(b){var
e=0;if(40<=b)if(92===b)var
d=f1;else
if(bp<=b)e=1;else
e=2;else
if(32<=b)if(39<=b)var
d=f2;else
e=2;else
if(14<=b)e=1;else
switch(b){case
8:var
d=f3;break;case
9:var
d=f4;break;case
10:var
d=f5;break;case
13:var
d=f6;break;default:e=1}switch(e){case
1:var
g=p(4);o(g,0,92);o(g,1,48+(b/eB|0)|0);o(g,2,48+((b/10|0)%10|0)|0);o(g,3,48+(b%10|0)|0);var
d=D(g);break;case
2:var
h=p(1);o(h,0,b);var
d=D(h);break}var
i=k(d),j=af(i+2|0,39);_(d,0,j,1,i);return f(c,[4,a,D(j)],N)};case
2:var
O=d[2],P=d[1];return bL(c,a,O,P,function(a){return a});case
3:return bL(c,a,d[2],d[1],g3);case
4:return bg(c,a,d[4],d[2],d[3],hT,d[1]);case
5:return bg(c,a,d[4],d[2],d[3],hU,d[1]);case
6:return bg(c,a,d[4],d[2],d[3],hV,d[1]);case
7:return bg(c,a,d[4],d[2],d[3],hW,d[1]);case
8:var
q=d[4],s=d[3],t=d[2],m=d[1];if(typeof
t==="number"){if(typeof
s==="number")return s?function(d,b){return f(c,[4,a,ah(m,d,b)],q)}:function(b){return f(c,[4,a,ah(m,bJ(m),b)],q)};var
ai=s[1];return function(b){return f(c,[4,a,ah(m,ai,b)],q)}}else{if(0===t[0]){var
x=t[2],y=t[1];if(typeof
s==="number")return s?function(d,b){return f(c,[4,a,L(y,x,ah(m,d,b))],q)}:function(b){return f(c,[4,a,L(y,x,ah(m,bJ(m),b))],q)};var
aj=s[1];return function(b){return f(c,[4,a,L(y,x,ah(m,aj,b))],q)}}var
A=t[1];if(typeof
s==="number")return s?function(e,d,b){return f(c,[4,a,L(A,e,ah(m,d,b))],q)}:function(d,b){return f(c,[4,a,L(A,d,ah(m,bJ(m),b))],q)};var
ak=s[1];return function(d,b){return f(c,[4,a,L(A,d,ah(m,ak,b))],q)}}case
9:return bL(c,a,d[2],d[1],fP);case
10:var
a=[7,a],d=d[1];continue;case
11:var
a=[2,a,d[1]],d=d[2];continue;case
12:var
a=[3,a,d[1]],d=d[2];continue;case
13:var
Q=d[3],R=d[2],B=cR(16);bK(B,R);var
H=cT(B);return function(b){return f(c,[4,a,H],Q)};case
14:var
T=d[3],U=d[2];return function(d){var
e=d[1],b=i(e,n(r(U)));if(typeof
b[2]==="number")return f(c,a,l(b[1],T));throw v};case
15:var
V=d[1];return function(d,b){return f(c,[6,a,function(a){return S(d,a,b)}],V)};case
16:var
W=d[1];return function(b){return f(c,[6,a,b],W)};case
17:var
a=[0,a,d[1]],d=d[2];continue;case
18:var
w=d[1];if(0===w[0]){var
X=d[2],Y=w[1][1],Z=0,c=function(b,c,d){return function(a){return f(c,[1,b,[0,a]],d)}}(a,c,X),a=Z,d=Y;continue}var
$=d[2],aa=w[1][1],ab=0,c=function(b,c,d){return function(a){return f(c,[1,b,[1,a]],d)}}(a,c,$),a=ab,d=aa;continue;case
19:throw[0,j,h2];case
20:var
ac=d[3],ad=[8,a,h3];return function(a){return f(c,ad,ac)};case
21:var
ae=d[2];return function(b){return f(c,[4,a,bw(h4,b)],ae)};case
22:var
ag=d[1];return function(b){return f(c,[5,a,b],ag)};case
23:var
g=d[2],u=d[1];if(typeof
u==="number")switch(u){case
0:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
1:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
2:throw[0,j,h5];default:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g])}else
switch(u[0]){case
0:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
1:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
2:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
3:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
4:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
5:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
6:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
7:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
8:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);case
9:var
G=u[2];return e<50?b3(e+1|0,c,a,G,g):z(b3,[0,c,a,G,g]);case
10:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g]);default:return e<50?h(e+1|0,c,a,g):z(h,[0,c,a,g])}default:var
C=d[3],E=d[1],F=b(d[2],0);return e<50?b2(e+1|0,c,a,C,E,F):z(b2,[0,c,a,C,E,F])}}function
b3(e,d,c,a,b){if(typeof
a==="number")return e<50?h(e+1|0,d,c,b):z(h,[0,d,c,b]);else
switch(a[0]){case
0:var
f=a[1];return function(a){return P(d,c,f,b)};case
1:var
g=a[1];return function(a){return P(d,c,g,b)};case
2:var
i=a[1];return function(a){return P(d,c,i,b)};case
3:var
k=a[1];return function(a){return P(d,c,k,b)};case
4:var
l=a[1];return function(a){return P(d,c,l,b)};case
5:var
m=a[1];return function(a){return P(d,c,m,b)};case
6:var
n=a[1];return function(a){return P(d,c,n,b)};case
7:var
o=a[1];return function(a){return P(d,c,o,b)};case
8:var
p=a[2];return function(a){return P(d,c,p,b)};case
9:var
q=a[3],s=a[2],u=t(r(a[1]),s);return function(a){return P(d,c,E(u,q),b)};case
10:var
v=a[1];return function(e,a){return P(d,c,v,b)};case
11:var
w=a[1];return function(a){return P(d,c,w,b)};case
12:var
x=a[1];return function(a){return P(d,c,x,b)};case
13:throw[0,j,h6];default:throw[0,j,h7]}}function
h(d,b,e,a){var
c=[8,e,h8];return d<50?aY(d+1|0,b,c,a):z(aY,[0,b,c,a])}function
b2(h,c,f,a,e,d){if(e){var
i=e[1];return function(e){return h1(c,f,a,i,b(d,e))}}var
g=[4,f,d];return h<50?aY(h+1|0,c,g,a):z(aY,[0,c,g,a])}function
f(a,b,c){return cA(aY(0,a,b,c))}function
P(a,b,c,d){return cA(b3(0,a,b,c,d))}function
h1(a,b,c,d,e){return cA(b2(0,a,b,c,d,e))}function
bL(g,e,d,a,c){if(typeof
a==="number")return function(a){return f(g,[4,e,b(c,a)],d)};else{if(0===a[0]){var
h=a[2],i=a[1];return function(a){return f(g,[4,e,L(i,h,b(c,a))],d)}}var
j=a[1];return function(h,a){return f(g,[4,e,L(j,h,b(c,a))],d)}}}function
bg(g,e,d,h,c,b,a){if(typeof
h==="number"){if(typeof
c==="number")return c?function(h,c){return f(g,[4,e,aE(h,S(b,a,c))],d)}:function(c){return f(g,[4,e,S(b,a,c)],d)};var
l=c[1];return function(c){return f(g,[4,e,aE(l,S(b,a,c))],d)}}else{if(0===h[0]){var
i=h[2],j=h[1];if(typeof
c==="number")return c?function(h,c){return f(g,[4,e,L(j,i,aE(h,S(b,a,c)))],d)}:function(c){return f(g,[4,e,L(j,i,S(b,a,c))],d)};var
m=c[1];return function(c){return f(g,[4,e,L(j,i,aE(m,S(b,a,c)))],d)}}var
k=h[1];if(typeof
c==="number")return c?function(i,h,c){return f(g,[4,e,L(k,i,aE(h,S(b,a,c)))],d)}:function(h,c){return f(g,[4,e,L(k,h,S(b,a,c))],d)};var
n=c[1];return function(h,c){return f(g,[4,e,L(k,h,aE(n,S(b,a,c)))],d)}}}function
ai(c,f){var
a=f;for(;;)if(typeof
a==="number")return 0;else
switch(a[0]){case
0:var
g=a[1],h=cU(a[2]);ai(c,g);return aS(c,h);case
1:var
d=a[2],e=a[1];if(0===d[0]){var
i=d[1];ai(c,e);aS(c,h9);var
a=i;continue}var
j=d[1];ai(c,e);aS(c,h_);var
a=j;continue;case
6:var
m=a[2];ai(c,a[1]);return b(m,c);case
7:ai(c,a[1]);return aO(c);case
8:var
n=a[2];ai(c,a[1]);return U(n);case
2:case
4:var
k=a[2];ai(c,a[1]);return aS(c,k);default:var
l=a[2];ai(c,a[1]);return fE(c,l)}}function
aq(c,g){var
a=g;for(;;)if(typeof
a==="number")return 0;else
switch(a[0]){case
0:var
h=a[1],i=cU(a[2]);aq(c,h);return aU(c,i);case
1:var
e=a[2],f=a[1];if(0===e[0]){var
j=e[1];aq(c,f);aU(c,h$);var
a=j;continue}var
k=e[1];aq(c,f);aU(c,ia);var
a=k;continue;case
6:var
n=a[2];aq(c,a[1]);return aU(c,b(n,0));case
7:var
a=a[1];continue;case
8:var
p=a[2];aq(c,a[1]);return U(p);case
2:case
4:var
l=a[2];aq(c,a[1]);return aU(c,l);default:var
m=a[2];aq(c,a[1]);var
d=c[2];if(c[3]<=d)cQ(c,1);o(c[1],d,m);c[2]=d+1|0;return 0}}function
cW(d,c){var
a=c[1],b=0;return f(function(a){ai(d,a);return 0},b,a)}function
bM(a){return cW(ae,a)}function
R(b){var
a=b[1];return f(function(d){var
e=64,b=aT<64?aT:e,c=p(b),a=[0,c,0,b,c];aq(a,d);return cO(a[1],0,a[2])},0,a)}var
bh=[0,0];function
bO(i,h){var
a=i[1+h];if(1-(typeof
a==="number"?1:0)){if(a$(a)===bs)return b(R(ib),a);if(a$(a)===253){var
d=cq(fT,a),c=0,g=k(d);for(;;){if(g<=c)return aC(d,fS);var
e=C(d,c),f=0;if(48<=e){if(!(58<=e))f=1}else
if(45===e)f=1;if(f){var
c=c+1|0;continue}return d}}return ic}return b(R(id),a)}function
cX(b,a){if(b.length-1<=a)return ie;var
c=cX(b,a+1|0),d=bO(b,a);return S(R(ig),d,c)}function
bi(a){function
p(f){var
c=f;for(;;){if(c){var
g=c[2],h=c[1];try{var
e=0,d=b(h,a);e=1}catch(a){}if(e&&d)return[0,d[1]];var
c=g;continue}return 0}}var
h=p(bh[1]);if(h)return h[1];if(a===bG)return il;if(a===cF)return im;if(a[1]===cE){var
d=a[2],i=d[3],q=d[2],r=d[1];return b4(R(bN),r,q,i,i+5|0,io)}if(a[1]===j){var
e=a[2],k=e[3],s=e[2],t=e[1];return b4(R(bN),t,s,k,k+6|0,ip)}if(a[1]===cH){var
f=a[2],l=f[3],u=f[2],v=f[1];return b4(R(bN),v,u,l,l+6|0,iq)}if(0===a$(a)){var
g=a.length-1,w=a[1][1];if(2<g>>>0)var
m=cX(a,2),n=bO(a,1),c=S(R(ih),n,m);else
switch(g){case
0:var
c=ii;break;case
1:var
c=ij;break;default:var
o=bO(a,1),c=b(R(ik),o)}return aC(w,c)}return a[1]}function
bP(t,s){var
e=l3(s),g=e.length-1-1|0,p=0;if(!(g<0)){var
c=p;for(;;){var
a=ab(e,c)[1+c],f=function(a){return function(b){return b?0===a?ir:is:0===a?it:iu}}(c);if(0===a[0])var
h=a[5],i=a[4],j=a[3],k=a[6]?iv:ix,l=a[2],m=a[7],n=f(a[1]),d=[0,lU(R(iw),n,m,l,k,j,i,h)];else
if(a[1])var
d=0;else
var
o=f(0),d=[0,b(R(iy),o)];if(d){var
q=d[1];b(cW(t,iz),q)}var
r=c+1|0;if(g!==c){var
c=r;continue}break}}return 0}function
cY(c){for(;;){var
a=bh[1],d=[0,c,a],e=bh[1]===a?(bh[1]=d,1):0,b=1-e;if(b)continue;return b}}var
iB=iA.slice();function
iC(e,d){var
f=bi(e);b(bM(iD),f);bP(ae,d);var
a=my(0);if(a<0){var
c=bc(a);cI(ab(iB,c)[1+c])}return aO(ae)}var
iE=[0];cz(a(dr),function(e,i){try{try{var
c=i?iE:fx(0);try{bH(0)}catch(a){}try{var
a=iC(e,c),d=a}catch(a){a=ap(a);var
g=bi(e);b(bM(iG),g);bP(ae,c);var
h=bi(a);b(bM(iH),h);bP(ae,fx(0));var
d=aO(ae)}var
f=d}catch(a){a=ap(a);if(a!==bG)throw a;var
f=cI(iF)}return f}catch(a){return 0}});var
iJ=[q,iI,aL(0)];cY(function(a){return a[1]===iJ?[0,aC(iK,bi(a[2]))]:0});try{var
lS=fK(lR),c0=lS}catch(a){a=ap(a);if(a!==aR)throw a;try{var
lQ=fK(lP),cZ=lQ}catch(a){a=ap(a);if(a!==aR)throw a;var
cZ=iM}var
c0=cZ}var
iN=gf(c0,82),bj=[d5,function(y){var
o=mP(0),c=[0,bB(55,0),0],j=0===o.length-1?[0,0]:o,l=j.length-1,b=0;for(;;){ab(c[1],b)[1+b]=b;var
x=b+1|0;if(54!==b){var
b=x;continue}var
h=[0,iL],m=54+cM(55,l)|0,t=0;if(!(m<0)){var
e=t;for(;;){var
f=e%55|0,n=mC(e,l),u=ab(j,n)[1+n],i=aC(h[1],a(d+u));h[1]=mw(i,0,k(i));var
g=h[1],p=C(g,3)<<24,q=C(g,2)<<16,r=C(g,1)<<8,s=((C(g,0)+r|0)+q|0)+p|0,v=(ab(c[1],f)[1+f]^s)&dF;ab(c[1],f)[1+f]=v;var
w=e+1|0;if(m!==e){var
e=w;continue}break}}c[2]=0;return c}}];function
iO(h,k){var
l=h?h[1]:iN,b=16;for(;;){if(!(k<=b)&&!(cJ<(b*2|0))){var
b=b*2|0;continue}if(l){var
i=a$(bj),a=bn===i?bj[1]:d5===i?fX(bj):bj;a[2]=(a[2]+1|0)%55|0;var
c=a[2],d=ab(a[1],c)[1+c],e=(a[2]+24|0)%55|0,f=(ab(a[1],e)[1+e]+(d^(d>>>25|0)&31)|0)&dF,g=a[2];ab(a[1],g)[1+g]=f;var
j=f}else
var
j=0;return[0,0,bB(b,0),j,b]}}function
c1(b,a){var
c=a$(a)===q?a:a[1];return cz(b,c)}af(32,aG);function
iP(b){var
a=af(32,0);$(a,b>>>3|0,bI(cn(a,b>>>3|0)|1<<(b&7)));return a}var
c2=p(cg),aX=0;function
iQ(c){var
b=p(32),a=0;for(;;){$(b,a,bI(cn(c,a)^aG));var
d=a+1|0;if(31!==a){var
a=d;continue}return b}}for(;;){$(c2,aX,f7(bI(aX)));var
lO=aX+1|0;if(aG!==aX){var
aX=lO;continue}f8(c2);iQ(iP(10));var
c3=[q,iR,aL(0)];c1(iU,[0,c3,0,iT,iS]);cY(function(c){if(c[1]===c3){var
d=c[2],f=c[4],g=c[3];if(typeof
d==="number"){var
e=d;if(34<=e)switch(e){case
34:var
a=js;break;case
35:var
a=jt;break;case
36:var
a=ju;break;case
37:var
a=jv;break;case
38:var
a=jw;break;case
39:var
a=jx;break;case
40:var
a=jy;break;case
41:var
a=jz;break;case
42:var
a=jA;break;case
43:var
a=jB;break;case
44:var
a=jC;break;case
45:var
a=jD;break;case
46:var
a=jE;break;case
47:var
a=jF;break;case
48:var
a=jG;break;case
49:var
a=jH;break;case
50:var
a=jI;break;case
51:var
a=jJ;break;case
52:var
a=jK;break;case
53:var
a=jL;break;case
54:var
a=jM;break;case
55:var
a=jN;break;case
56:var
a=jO;break;case
57:var
a=jP;break;case
58:var
a=jQ;break;case
59:var
a=jR;break;case
60:var
a=jS;break;case
61:var
a=jT;break;case
62:var
a=jU;break;case
63:var
a=jV;break;case
64:var
a=jW;break;case
65:var
a=jX;break;case
66:var
a=jY;break;default:var
a=jZ}else
switch(e){case
0:var
a=iV;break;case
1:var
a=iX;break;case
2:var
a=iY;break;case
3:var
a=iZ;break;case
4:var
a=i0;break;case
5:var
a=i1;break;case
6:var
a=i2;break;case
7:var
a=i3;break;case
8:var
a=i4;break;case
9:var
a=i5;break;case
10:var
a=i6;break;case
11:var
a=i7;break;case
12:var
a=i8;break;case
13:var
a=i9;break;case
14:var
a=i_;break;case
15:var
a=i$;break;case
16:var
a=ja;break;case
17:var
a=jb;break;case
18:var
a=jc;break;case
19:var
a=jd;break;case
20:var
a=je;break;case
21:var
a=jf;break;case
22:var
a=jg;break;case
23:var
a=jh;break;case
24:var
a=ji;break;case
25:var
a=jj;break;case
26:var
a=jk;break;case
27:var
a=jl;break;case
28:var
a=jm;break;case
29:var
a=jn;break;case
30:var
a=jo;break;case
31:var
a=jp;break;case
32:var
a=jq;break;default:var
a=jr}}else
var
h=d[1],a=b(R(j0),h);return[0,lV(R(iW),a,g,f)]}return 0});bF(j1);bF(j2);try{bF(lN)}catch(a){a=ap(a);if(a[1]!==bb)throw a}try{bF(lM)}catch(a){a=ap(a);if(a[1]!==bb)throw a}iO(0,7);c1(j$,[0,[q,j_,aL(0)],[0]]);(function(a){throw a});var
bQ=null,bR=undefined,M=c,F=function(c,b,a){return a?c[b]=a[1]:0},aj=function(c,b,a){return a?c[b]=!!a[1]:0},bk=function(c,b,a){return a?c[b]=a[1]:0},bS=function(c,b,a){return a?c[b]=a[1]:0},bT=function(a){return new(M[kb])(a)},bU=function(g,c){var
d=c.length-1,e=bT(d),f=d-1|0,h=0;if(!(f<0)){var
a=h;for(;;){e[a]=b(g,ab(c,a)[1+a]);var
i=a+1|0;if(f!==a){var
a=i;continue}break}}return e},c4=M[kd],c5=function(a){return new
c4(a)},bV=function(a){return a[ke]},aW=function(d,c){function
a(a){return bV({"fut":c4.resolve(b(d,a))})}return{"fut":bV(c).then(a)}},bW=function(f,e){return c5(function(d,c){function
a(a){return 0===a[0]?b(d,b(f,a[1])):b(c,a[1])}bV(e).then(a);return 0})},aF=function(b,a){return aW(a,b)},bX=M[kh],kg=de,kk=M[kj],bY=function(e){var
c=bT(0),b=0,a=e;for(;;){if(a){var
d=a[2];c[b]=a[1];var
b=b+1|0,a=d;continue}mq(kk,kl,fB(c));return 0}},ko=M[kn],kp=function(a){var
e=[0,new
ko(ac(a),bR),[0,0,0,0]];function
c(h){var
d=h[km],i=(H(d)-20|0)<0?U(gg):(H(d)-(20+mu(d,0)|0)|0)<0?U(gh):l$(d,0),a=e[2],c=a[2];if(c){var
f=c[1];if(c[2]){var
g=c[2];a[1]=a[1]-1|0;a[2]=g}else{a[1]=0;a[2]=0;a[3]=0}return b(f,i)}throw gj}e[1].addEventListener(ff,c,{});return e},bZ=function(m,f){function
g(a){throw[0,j,kf]}var
d=[0,g];function
h(a){return b(function(a){throw a},new(M[kc])("The future is already set"))}var
i=c5(function(a,b){d[1]=a;return 0});function
k(a){b(d[1],a);d[1]=h;return 0}var
a=f[2],c=[0,k,0],e=a[3],l={"fut":i};if(e){a[1]=a[1]+1|0;e[2]=c;a[3]=c}else{a[1]=1;a[2]=c;a[3]=c}f[1].postMessage(mH(m,0),bR);return l},kG=M[kF],c6=function(a){return a[kH]},c7=M[kT],kJ=M[kI],b0=function(c,b,a){return bS(c,b,J(ac,a))},c8=function(g,f,e,d,c,b,h){var
a={};a[kU]=ac(g);b0(a,kV,f);b0(a,kW,e);F(a,kX,d);b0(a,kY,c);bk(a,kZ,b);return a},le=M[ld],lx=M[lv][lw],ly=function(a){return lx.define(a)},b1=function(A){var
l=fB(A[kA].toJSON()),j=l.length-1;if(0===j)var
m=[0];else{var
r=bB(j,Q(l[1])),s=j-1|0,x=1;if(!(s<1)){var
f=x;for(;;){r[1+f]=Q(l[1+f]);var
y=f+1|0;if(s!==f){var
f=y;continue}break}}var
m=r}var
i=m.length-1-1|0,g=0;for(;;){if(0<=i){var
z=[0,m[1+i],g],i=i-1|0,g=z;continue}if(g){var
c=0,b=g,w=0;for(;;){if(b){var
n=b[1];if(b[2]){var
o=(k(n)+1|0)+c|0,t=b[2],u=c<=o?o:U(ga),c=u,b=t;continue}var
q=k(n)+c|0}else
var
q=c;var
h=p(q),e=w,d=g;for(;;){if(d){var
a=d[1];if(d[2]){var
v=d[2];_(a,0,h,e,k(a));_(lz,0,h,e+k(a)|0,1);var
e=(e+k(a)|0)+1|0,d=v;continue}_(a,0,h,e,k(a))}return D(h)}}}return gb}},lC=bd(function(a){return c8(a,0,0,0,lB,0,0)},lA),lG=ly(M[lF]),lH=function(c){var
f=le.hoverTooltip(function(f,e,m){var
h=b1(c6(f)),i=[0,eo,e];function
k(d){if(d){var
e=d[1],c=e[2];if(typeof
c!=="number"&&-976970511===c[1]){var
f=e[1],a={},g=c[2],i=[0,f[2][4]];a[lp]=f[1][4];bk(a,lq,i);var
h=0;a[lr]=function(m){var
f=[0,bX.createTextNode(ac(g)),0],c=bX.createElement("div"),d=0;cL(function(d){var
a=d[2],b=d[1];return l5(b,kg)?0===a[ka]?0:(c[ki].add(a),0):(c.setAttribute(b,a),0)},d);cL(function(a){c.appendChild(a);return 0},f);var
h=0,i=0,j=0,k=0,l=0,a={},e=J(function(g){return function(h){var
c=b(g,h),a={},d=c[4],e=c[3],f=c[2];a[lf]=c[1];a[lg]=f;a[lh]=e;a[li]=d;return a}},l);a[lj]=c;F(a,lk,e);aj(a,ll,k);F(a,lm,J(function(a){return function(c){return b(a,c)}},j));F(a,ln,J(function(a){return function(c){return b(a,c)}},i));F(a,lo,J(function(a){return a},h));return a};aj(a,ls,lE);aj(a,lt,h);aj(a,lu,lD);return[0,a]}}return 0}var
a=[1,h,i];function
d(a){bY([0,ku,[0,a,0]]);if(2===a[0])return a[1];throw[0,j,kv]}var
l=aF(aF(bZ(a,c),d),k),g=aW(function(a){return[0,a]},l);return bW(function(a){return cK(J(function(a){return a},a),bQ)},g)}),g=0,h=0,i=0,k=0,l=0,m=0,n=[0,c7.completeFromList(cv(lC)),0],a={},o=[0,[0,function(a){var
f=b1(a[k0]),e=a[k1];function
g(d){var
g=d[3],h=d[2],i=d[1],a={},j=bd(function(a){return c8(a[1],[0,a[3]],0,0,0,0,0)},g);a[k2]=i;bk(a,k3,[0,h]);var
e=bT(0),c=0,b=j,k=0,l=0;for(;;){if(b){var
f=b[2];e[c]=b[1];var
c=c+1|0,b=f;continue}a[k4]=e;F(a,k5,J(function(a){return a},l));aj(a,k6,k);return[0,a]}}var
b=[0,f,[0,eo,e]];function
d(a){bY([0,ks,[0,a,0]]);if(1===a[0])return a[1];throw[0,j,kt]}var
h=aF(aF(bZ(b,c),d),g),i=aW(function(a){return[0,a]},h);return bW(function(a){return cK(J(function(a){return a},a),bQ)},i)},n]];aj(a,k7,0);F(a,k8,J(cv,o));bk(a,k9,m);aj(a,k_,l);aj(a,k$,k);F(a,la,i);aj(a,lb,h);F(a,lc,g);var
e=c7.autocompletion(a),d={};return[0,lG,kJ.linter(function(d){var
g=b1(c6(d));function
h(j){var
b=bd(function(c){var
g=c[2],j=c[3],h=c[1],k=g[1][4],l=g[2][4];switch(c[5]){case
0:var
b=j3;break;case
1:var
b=j4;break;case
2:var
b=j5;break;case
3:var
b=j6;break;case
4:var
b=j7;break;case
5:var
b=j8;break;default:var
b=j9}var
f=0;if(typeof
h==="number")f=1;else
switch(h[0]){case
0:var
e=1;break;case
2:var
e=0;break;default:f=1}if(f)var
e=2;var
a={};a[kN]=k;a[kO]=l;var
m=0,n=[0,b];switch(e){case
0:var
d=kK;break;case
1:var
d=kL;break;default:var
d=kM}a[kP]=ac(d);a[kQ]=ac(j);bS(a,kR,J(ac,n));function
i(a){return a}F(a,kS,J(function(a){return bU(i,a)},m));return a},j);if(b){var
d=0,c=b,g=b[2],h=b[1];for(;;){if(c){var
d=d+1|0,c=c[2];continue}var
f=bB(d,h),e=1,a=g;for(;;){if(a){var
i=a[2];f[1+e]=a[1];var
e=e+1|0,a=i;continue}return f}}}return[0]}var
a=[2,g];function
b(a){bY([0,kq,[0,a,0]]);if(0===a[0])return a[1];throw[0,j,kr]}var
i=aF(aF(bZ(a,c),b),h);function
e(a){return a}var
f=aW(fZ,aW(function(a){return bU(e,a)},i));return bW(function(a){return a},f)},d),e,f]},lJ=M[lI],lK=function(j,f,q){var
k=f?f[1]:[0],b={},l=[0,lW([0,[0,lJ],[0,k,0]])];bS(b,kw,j);F(b,kx,0);function
i(a){return a}F(b,ky,J(function(a){return bU(i,a)},l));var
d=M[kz].create(b),c=bX.getElementById("editor"),g=c===bQ?1:0,h=g||(c===bR?1:0),e=h?0:[0,c],m=e?e[1]:U(fY),a={};F(a,kB,[0,d]);var
n=[0,m],o=0,p=0;F(a,kC,J(function(a){return a},p));F(a,kD,o);F(a,kE,J(function(a){return a},n));return[0,d,new
kG(a)]};lK(0,[0,lH(kp(lL))],0);bH(0);return}}(globalThis));
